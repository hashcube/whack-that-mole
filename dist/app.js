/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};

/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {

/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId])
/******/ 			return installedModules[moduleId].exports;

/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			exports: {},
/******/ 			id: moduleId,
/******/ 			loaded: false
/******/ 		};

/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);

/******/ 		// Flag the module as loaded
/******/ 		module.loaded = true;

/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}


/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;

/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;

/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "/";

/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/*!****************************!*\
  !*** ./src/Application.js ***!
  \****************************/
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nexports.__esModule = true;\n\nvar _device = __webpack_require__(/*! device */ 1);\n\nvar _device2 = _interopRequireDefault(_device);\n\nvar _StackView = __webpack_require__(/*! ui/StackView */ 54);\n\nvar _StackView2 = _interopRequireDefault(_StackView);\n\nvar _View2 = __webpack_require__(/*! ui/View */ 17);\n\nvar _View3 = _interopRequireDefault(_View2);\n\nvar _TitleScreen = __webpack_require__(/*! src/TitleScreen */ 102);\n\nvar _TitleScreen2 = _interopRequireDefault(_TitleScreen);\n\nvar _GameScreen = __webpack_require__(/*! src/GameScreen */ 104);\n\nvar _GameScreen2 = _interopRequireDefault(_GameScreen);\n\nvar _soundcontroller = __webpack_require__(/*! src/soundcontroller */ 107);\n\nvar _soundcontroller2 = _interopRequireDefault(_soundcontroller);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /*\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * The main application file, your game code begins here.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\n//sdk imports\n\n//user imports\n\n\n/* Your application inherits from GC.Application, which is\n * exported and instantiated when the game is run.\n */\nvar Application = function (_View) {\n\t_inherits(Application, _View);\n\n\tfunction Application() {\n\t\t_classCallCheck(this, Application);\n\n\t\treturn _possibleConstructorReturn(this, _View.apply(this, arguments));\n\t}\n\n\t/* Run after the engine is created and the scene graph is in\n  * place, but before the resources have been loaded.\n  */\n\tApplication.prototype.initUI = function initUI() {\n\t\t//fbinstant.initialise(bind(this, this.start));\n\n\t\tthis.start();\n\t};\n\n\tApplication.prototype.start = function start(opts) {\n\t\tvar titlescreen = new _TitleScreen2.default(),\n\t\t    gamescreen = new _GameScreen2.default();\n\n\t\tthis.view.style.backgroundColor = '#008a42';\n\n\t\t// Create a stackview of size 320x480, then scale it to fit horizontally\n\t\t// Add a new StackView to the root of the scene graph\n\t\tvar rootView = new _StackView2.default({\n\t\t\tsuperview: this,\n\t\t\t// x: device.width / 2 - 160,\n\t\t\t// y: device.height / 2 - 240,\n\t\t\tx: 0,\n\t\t\ty: 0,\n\t\t\twidth: 320,\n\t\t\theight: 480,\n\t\t\tclip: true,\n\t\t\tscale: _device2.default.width / 320\n\t\t});\n\n\t\trootView.push(titlescreen);\n\n\t\tvar sound = _soundcontroller2.default.getSound();\n\n\t\t/* Listen for an event dispatched by the title screen when\n   * the start button has been pressed. Hide the title screen,\n   * show the game screen, then dispatch a custom event to the\n   * game screen to start the game.\n   */\n\t\ttitlescreen.on('titlescreen:start', function () {\n\t\t\tsound.play('levelmusic');\n\t\t\trootView.push(gamescreen);\n\t\t\tgamescreen.emit('app:start');\n\t\t});\n\n\t\t/* When the game screen has signalled that the game is over,\n   * show the title screen so that the user may play the game again.\n   */\n\t\tgamescreen.on('gamescreen:end', function () {\n\t\t\tsound.stop('levelmusic');\n\t\t\trootView.pop();\n\t\t});\n\t};\n\n\t/* Executed after the asset resources have been loaded.\n  * If there is a splash screen, it's removed.\n  */\n\tApplication.prototype.launchUI = function launchUI() {};\n\n\treturn Application;\n}(_View3.default);\n\nexports.default = Application;\n;\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/Application.js\n// module id = 0\n// module chunks = 0\n//# sourceURL=webpack:///./src/Application.js?");

/***/ },
/* 1 */
/*!************************************************************!*\
  !*** ./modules/devkit-core/modules/timestep/src/device.js ***!
  \************************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nexports.__esModule = true;\n\nvar _base = __webpack_require__(/*! base */ 2);\n\nvar _userAgent = __webpack_require__(/*! userAgent */ 7);\n\nvar _userAgent2 = _interopRequireDefault(_userAgent);\n\nvar _setProperty = __webpack_require__(/*! util/setProperty */ 8);\n\nvar _setProperty2 = _interopRequireDefault(_setProperty);\n\nvar _Emitter = __webpack_require__(/*! event/Emitter */ 9);\n\nvar _Emitter2 = _interopRequireDefault(_Emitter);\n\nvar _platformImport = __webpack_require__(/*! ./platformImport */ 12);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar _exports = {};\n\n/**\n * @license\n * This file is part of the Game Closure SDK.\n *\n * The Game Closure SDK is free software: you can redistribute it and/or modify\n * it under the terms of the Mozilla Public License v. 2.0 as published by Mozilla.\n\n * The Game Closure SDK is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * Mozilla Public License v. 2.0 for more details.\n\n * You should have received a copy of the Mozilla Public License v. 2.0\n * along with the Game Closure SDK.  If not, see <http://mozilla.org/MPL/2.0/>.\n */\n/**\n * @module device;\n *\n * Namespace for the current device. Determines what device we're running using\n * navigator.userAgent. This namespace exposes various properties about the\n * current device, such as screen size, mobile/browser, pixel ratios, etc.\n *\n * Using device.get('...') imports device-specific implementations from\n *   timestep.env.* by default, or from packages registered using\n *   registerDevice().\n * Using device.importUI('...') imports rendering classes for DOM or canvas.\n *\n * @doc http://doc.gameclosure.com/api/device.html\n * @docsrc https://github.com/gameclosure/doc/blob/master/api/device.md\n */\n\n\nif (typeof navigator === 'undefined' || !navigator.userAgent) {\n  _base.logger.warn('Timestep was unable to determine your device! Please check that navigator.userAgent is defined.');\n  _exports = { isUnknown: true };\n}\n\nvar ua = navigator.userAgent;\n\nvar MAX_DPR = 2;\n\n/**\n * @namespace\n */\nvar _devices = {};\n_exports.registerDevice = function (name, path) {\n  _devices[name] = path;\n};\n\n// TODO: remove this indirection\n_exports.get = _platformImport.getImport;\n_exports.importUI = _platformImport.importUI;\n\n_exports.isMobile = /TeaLeaf/.test(ua);\n_exports.isMobileNative = _exports.isMobile;\n\n_base.logger.log(_exports.isMobile ? 'on mobile device' : 'in web browser');\n\n_exports.screen = new _Emitter2.default();\n\n// When in simulator, use provided dpr\nvar devicePixelRatio = window.devicePixelRatio || 1;\nif (_base.CONFIG.simulator && _base.CONFIG.simulator.deviceId) {\n  devicePixelRatio = _base.CONFIG.simulator.deviceInfo.devicePixelRatio || 1;\n}\n\n// @deprecated\ndevicePixelRatio = Math.min(MAX_DPR, devicePixelRatio);\n_exports.devicePixelRatio = devicePixelRatio;\n\n_exports.screen.defaultDevicePixelRatio = devicePixelRatio;\n_exports.screen.devicePixelRatio = devicePixelRatio;\n_exports.screen.width = window.innerWidth * devicePixelRatio;\n_exports.screen.height = window.innerHeight * devicePixelRatio;\n\n// FIXME: this does not apply browser specific logic to reads of\n// `window.innerWidth` or `window.innerHeight`\n_exports.setDevicePixelRatio = function (value) {\n  if (_userAgent2.default.APP_RUNTIME !== 'browser') {\n    _base.logger.warn('device.setDevicePixelRatio is only supported in browsers!');\n    return;\n  }\n\n  _exports.devicePixelRatio = _exports.screen.devicePixelRatio = value;\n\n  var width = Math.floor(window.innerWidth * value);\n  var height = Math.floor(window.innerHeight * value);\n  _exports.width = _exports.screen.width = width;\n  _exports.height = _exports.screen.height = height;\n  _exports.screen.publish('Resize', width, height);\n};\n\n// This is stubbed out unless available on the current device.\n_exports.hideAddressBar = function () {};\n\n(0, _setProperty2.default)(_exports, 'defaultFontFamily', {\n  cb: function cb(value) {\n    var Font = __webpack_require__(/*! ui/resource/Font */ 69);\n    Font.setDefaultFontFamily(value);\n  },\n  value: 'Helvetica'\n});\n\n_exports.defaultFontWeight = '';\n\n/*\n * All userAgent flags in this file are now DEPRECATED.\n * Please use \"src/userAgent.js\" for a more accurate description of your device.\n */\n_exports.isMobileBrowser = false;\n_exports.isUIWebView = false;\n_exports.isSafari = /Safari/.test(ua);\n\n_exports.isSimulator = _base.GLOBAL.CONFIG && !!_base.CONFIG.simulator;\nif (_exports.isSimulator) {\n  _exports.isIOSSimulator = /iphone|ipod|ipad/i.test(_base.CONFIG.simulator.deviceType);\n\n  // Until we support more platforms, if it's not\n  // iOS then it's assumed to be an Android device\n  _exports.isAndroidSimulator = !_exports.isIOSSimulator;\n\n  _exports.isNativeSimulator = /^native/.test(_base.CONFIG.target);\n} else {\n  _exports.isAndroidSimulator = false;\n  _exports.isIOSSimulator = false;\n  _exports.isNativeSimulator = false;\n}\n\nif (_exports.isMobile) {\n  _exports.name = 'tealeaf';\n  _exports.width = navigator.width;\n  _exports.height = navigator.height;\n  _exports.isAndroid = /Android/.test(ua);\n  if (_exports.isAndroid) {\n    _exports.isTablet = navigator.width / devicePixelRatio >= 600;\n  } else {\n    _exports.isTablet = /iPad/.test(ua);\n    _exports.isIPad = _exports.isTablet;\n    _exports.isIPhone = /iPhone/.test(ua);\n\n    // Until we support more platforms, if it's not\n    // Android then it's assumed to be an iOS device\n    _exports.isIOS = true;\n  }\n} else {\n  if (/(iPod|iPhone|iPad)/i.test(ua)) {\n    _exports.name = 'browser';\n    _exports.isMobileBrowser = true;\n    _exports.isIOS = true;\n    _exports.isIpad = /iPad/i.test(ua);\n    _exports.isStandalone = !!window.navigator.standalone;\n\n    // full-screen\n    var match = ua.match(/iPhone OS ([0-9]+)/);\n    _exports.iosVersion = match && parseInt(match[1]);\n    _exports.isUIWebView = !_exports.isSafari;\n\n    _exports.screen.defaultOrientation = 'portrait';\n    _exports.screen.browserChrome = {\n      portrait: {\n        top: 20 * devicePixelRatio,\n        bottom: 44 * devicePixelRatio\n      },\n      landscape: {\n        top: 20 * devicePixelRatio,\n        bottom: 32 * devicePixelRatio\n      }\n    };\n  } else if (/Mobile Safari/.test(ua) || /Android/.test(ua) || /BlackBerry/.test(ua)) {\n    _exports.name = 'browser';\n    _exports.isMobileBrowser = true;\n    _exports.isAndroid = true;\n\n    _exports.screen.width = window.outerWidth;\n    _exports.screen.height = window.outerHeight - 1;\n\n    _exports.screen.defaultOrientation = 'portrait';\n    _exports.screen.browserChrome = {\n      portrait: {\n        top: 0,\n        bottom: 0\n      },\n      landscape: {\n        top: 0,\n        bottom: 0\n      }\n    };\n  } else {\n    // All other browsers\n    _exports.screen.width = window.innerWidth * devicePixelRatio;\n    _exports.screen.height = window.innerHeight * devicePixelRatio;\n    _exports.name = 'browser';\n    _exports.canResize = false;\n  }\n\n  // Set up device.width and device.height for browser case\n  _exports.width = _exports.screen.width;\n  _exports.height = _exports.screen.height;\n}\n\n_exports.useDOM = false;\n_exports.setUseDOM = function (useDOM) {\n  console.warn('Attempting to set \\'useDom\\' property, which is no longer supported.');\n  return;\n};\n\n_exports.getDimensions = function (isLandscape) {\n  var dMin = Math.min(_exports.width, _exports.height),\n      dMax = Math.max(_exports.width, _exports.height);\n\n  return isLandscape ? {\n    height: dMin,\n    width: dMax\n  } : {\n    height: dMax,\n    width: dMin\n  };\n};\n\n/**\n * Initialize the device. Called from somewhere else.\n */\n_exports.init = function () {\n  var init = __webpack_require__(/*! ui/init */ 101);\n  (0, _platformImport.getImport)('initialize').init();\n  _exports.screen.width = _exports.width;\n  _exports.screen.height = _exports.height;\n};\n\n/**\n * Event handlers\n */\n_exports.setBackButtonHandler = function (handler) {\n  _base.NATIVE && (_base.NATIVE.onBackButton = handler);\n};\n\n_exports.setRotationHandler = function (handler) {\n  _base.NATIVE && (_base.NATIVE.onRotation = handler);\n};\n\n/*\n * Stay awake\n */\n_exports.stayAwake = function (enable) {\n  _base.NATIVE && _base.NATIVE.stayAwake && _base.NATIVE.stayAwake(enable);\n};\n\n/**\n * Garbage Collection\n */\n_exports.collectGarbage = function () {\n  _base.logger.log('collecting garbage');\n  _base.NATIVE && _base.NATIVE.gc && _base.NATIVE.gc.runGC();\n};\n\nexports.default = _exports;\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/modules/timestep/src/device.js\n// module id = 1\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/modules/timestep/src/device.js?");

/***/ },
/* 2 */
/*!*****************************************************!*\
  !*** ./modules/devkit-core/~/jsio/packages/base.js ***!
  \*****************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nexports.__esModule = true;\nexports.CACHE = exports.CONFIG = exports.NATIVE = exports.GLOBAL = exports.logger = exports.logging = exports.delay = exports.merge = exports.bind = exports.isArray = exports.log = undefined;\n\nvar _jsio = __webpack_require__(/*! jsio */ 3);\n\nvar _jsio2 = _interopRequireDefault(_jsio);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar _exports = {};\n\n/**\n * base.js\n * This file contains all global functions provided by js.io.\n */\n_exports.log = _jsio2.default.__env.log;\n_exports.GLOBAL = _jsio2.default.__env.global;\n\n/**\n * Various polyfill methods to ensure js.io implementations provide\n * a baseline of JavaScript functionality. Feature compatibility (localStorage,\n * etc.) should be provided elsewhere.\n */\n// Array.isArray\n// Not available before ECMAScript 5.\n// https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/isArray\nif (!Array.isArray) {\n  Array.isArray = function (arg) {\n    return Object.prototype.toString.call(arg) === '[object Array]';\n  };\n};\n\n// Function.prototype.bind\n// Not available before ECMAScript 5.\n// https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/bind\nif (!Function.prototype.bind) {\n  Function.prototype.bind = function (oThis) {\n    if (typeof this !== 'function') {\n      // closest thing possible to the ECMAScript 5 internal IsCallable function\n      throw new TypeError('Function.prototype.bind - what is trying to be bound is not callable');\n    }\n\n    var aArgs = Array.prototype.slice.call(arguments, 1),\n        fToBind = this,\n        fNOP = function fNOP() {},\n        fBound = function fBound() {\n      return fToBind.apply(this instanceof fNOP ? this : oThis, aArgs.concat(Array.prototype.slice.call(arguments)));\n    };\n\n    fNOP.prototype = this.prototype;\n    fBound.prototype = new fNOP();\n\n    return fBound;\n  };\n}\n\n/**\n * DEPRECATED. Old js.io polyfills.\n */\nvar SLICE = Array.prototype.slice;\n\n/* Use native isArray if available\n */\nif (typeof Array.isArray === 'function') {\n  _exports.isArray = Array.isArray;\n} else {\n  _exports.isArray = function (obj) {\n    return Object.prototype.toString.call(obj) === '[object Array]';\n  };\n}\n\n_exports.bind = function (context, method)\n/*, VARGS*/\n{\n  if (arguments.length > 2) {\n    var args = SLICE.call(arguments, 2);\n    return typeof method == 'string' ? function __bound() {\n      if (context[method]) {\n        return context[method].apply(context, args.concat(SLICE.call(arguments, 0)));\n      } else {\n        throw logger.error('No method:', method, 'for context', context);\n      }\n    } : function __bound() {\n      return method.apply(context, args.concat(SLICE.call(arguments, 0)));\n    };\n  } else {\n    return typeof method == 'string' ? function __bound() {\n      if (context[method]) {\n        return context[method].apply(context, arguments);\n      } else {\n        throw logger.error('No method:', method, 'for context', context);\n      }\n    } : function __bound() {\n      return method.apply(context, arguments);\n    };\n  }\n};\n\n/**\n * Class constructor.\n */\n_exports.Class = function (name, parent, proto) {\n  return _exports.__class__(function () {\n    return this.init && this.init.apply(this, arguments);\n  }, name, parent, proto);\n};\n\n_exports.__class__ = function (cls, name, parent, proto) {\n  var clsProto = function clsProto() {};\n  var logger;\n\n  if (typeof name != 'string') {\n    proto = parent;\n    parent = name;\n    name = null;\n  }\n\n  if (name) {\n    logger = _exports.logging.get(name);\n  }\n\n  if (!parent) {\n    throw new Error('parent or prototype not provided');\n  }\n  if (!proto) {\n    proto = parent;\n    parent = null;\n  }\n\n  if (parent) {\n    if (_exports.isArray(parent)) {\n      // multiple inheritance, use at your own risk =)\n      clsProto.prototype = {};\n      for (var i = 0, p; p = parent[i]; ++i) {\n        if (p == Error && ErrorParentClass) {\n          p = ErrorParentClass;\n        }\n        for (var item in p.prototype) {\n          if (!(item in clsProto.prototype)) {\n            clsProto.prototype[item] = p.prototype[item];\n          }\n        }\n      }\n      parent = parent[0];\n    } else {\n      if (parent == Error && ErrorParentClass) {\n        parent = ErrorParentClass;\n      }\n      clsProto.prototype = parent.prototype;\n    }\n  }\n\n  var supr = parent ? function (context, method, args) {\n    var f = parent.prototype[method];\n    if (!f) {\n      throw new Error('method ' + method + ' does not exist');\n    }\n    return f.apply(context, args || []);\n  } : null;\n\n  var p = cls.prototype = new clsProto();\n  p.constructor = cls;\n  p.__parentClass__ = parent;\n  if (name) {\n    p.__class__ = name;\n  }\n  proto.call(p, logger || supr, logger && supr);\n  return cls;\n};\n\nvar ErrorParentClass = _exports.__class__(function ErrorCls() {\n  var err = Error.prototype.constructor.apply(this, arguments);\n  for (var prop in err) {\n    if (err.hasOwnProperty(prop)) {\n      this[prop] = err[prop];\n    }\n  }\n}, function () {});\n\n/**\n * Merge two objects together.\n */\n_exports.merge = function (base, extra) {\n  base = base || {};\n\n  for (var i = 1, len = arguments.length; i < len; ++i) {\n    var copyFrom = arguments[i];\n    for (var key in copyFrom) {\n      if (copyFrom.hasOwnProperty(key) && !base.hasOwnProperty(key)) {\n        base[key] = copyFrom[key];\n      }\n    }\n  }\n\n  return base;\n};\n_exports.Class.defaults = _exports.merge;\n\n/**\n * Create a timer delay.\n */\n_exports.delay = function (orig, timeout) {\n  var _timer = null;\n  var ctx, args;\n  var f = function f() {\n    orig.apply(ctx, args);\n  };\n  return function () {\n    ctx = this;\n    args = arguments;\n    if (_timer) {\n      clearTimeout(_timer);\n    }\n    _timer = setTimeout(f, timeout || 0);\n  };\n};\n\n/**\n * Log constructor and default \"logger\".\n */\n_exports.logging = function () {\n  // logging namespace, this is what is exported\n  var logging = {\n    DEBUG: 1,\n    LOG: 2,\n    INFO: 3,\n    WARN: 4,\n    ERROR: 5,\n    NONE: 10\n  };\n\n  var _loggers = {};\n  // all loggers\n  var _production = false;\n  var _prefix = '';\n\n  logging.setPrefix = function (prefix) {\n    _prefix = prefix + ' ';\n  };\n\n  logging.setProduction = function (prod) {\n    _production = !!prod;\n    for (var key in _loggers) {\n      _loggers[key].setProduction(_production);\n    }\n  };\n\n  logging.get = function (name) {\n    var logger = name in _loggers ? _loggers[name] : _loggers[name] = new Logger(name);\n    logger.setProduction(_production);\n    return logger;\n  };\n\n  logging.set = function (name, logger) {\n    _loggers[name] = logger;\n  };\n\n  logging.getAll = function () {\n    return _loggers;\n  };\n\n  logging.__create = function (pkg, ctx) {\n    ctx.logger = logging.get(pkg);\n  };\n\n  var Logger = _exports.__class__(function Logger(name, level) {\n    this._name = name;\n    this._isProduction = _production;\n\n    this.setLevel(level || logging.LOG);\n  }, function () {\n    this.setProduction = function (isProduction) {\n      this._isProduction = isProduction;\n      isProduction && this.setLevel(logging.NONE);\n    };\n\n    this.setLevel = function (level) {\n      this._level = level;\n\n      if (this._isProduction) {\n        level = logging.NONE;\n      }\n\n      this.DEBUG = level <= logging.DEBUG;\n      this.LOG = level <= logging.LOG;\n      this.INFO = level <= logging.INFO;\n      this.WARN = level <= logging.WARN;\n      this.ERROR = level <= logging.ERROR;\n    };\n\n    function makeLogger(type) {\n      var level = logging[type];\n      return function () {\n        if (!this._isProduction && level >= this._level) {\n          var prefix = type + ' ' + _prefix + this._name;\n          var listener = this._listener || _exports.log;\n\n          return listener && listener.apply(this._listener, [prefix].concat(SLICE.call(arguments)));\n        }\n        return arguments[0];\n      };\n    }\n\n    this.setListener = function (listener) {\n      this._listener = listener;\n    };\n\n    this.debug = makeLogger('DEBUG');\n    this.log = makeLogger('LOG');\n    this.info = makeLogger('INFO');\n    this.warn = makeLogger('WARN');\n    this.error = makeLogger('ERROR');\n  });\n\n  return logging;\n}();\n\nvar logger = _exports.logging.get('jsiocore');\n_exports.logger = logger;\n\n// TODO: make this not a hack\nvar _exportLog = _exports.log;\nvar _exportIsArray = _exports.isArray;\nvar _exportBind = _exports.bind;\nvar _exportMerge = _exports.merge;\nvar _exportDelay = _exports.delay;\nvar _exportLogging = _exports.logging;\nvar _exportLogger = _exports.logger;\nvar _exportCONFIG = typeof CONFIG !== 'undefined' ? CONFIG : {};\nvar _exportNATIVE = typeof NATIVE !== 'undefined' ? NATIVE : {};\nvar _exportCACHE = typeof CACHE !== 'undefined' ? CACHE : {};\n\nvar _exportGLOBAL;\nif (typeof GLOBAL !== 'undefined') {\n  throw new Error('Unexpected, GLOBAL should not exist in a webpack build');\n  // _exportGLOBAL = GLOBAL;\n} else {\n  // lol\n  window.CACHE = _exportCACHE;\n  window.CONFIG = _exportCONFIG;\n  window.NATIVE = _exportNATIVE;\n  exports.GLOBAL = _exportGLOBAL = window;\n}\n\nexports.log = _exportLog;\nexports.isArray = _exportIsArray;\nexports.bind = _exportBind;\nexports.merge = _exportMerge;\nexports.delay = _exportDelay;\nexports.logging = _exportLogging;\nexports.logger = _exportLogger;\nexports.GLOBAL = _exportGLOBAL;\nexports.NATIVE = _exportNATIVE;\nexports.CONFIG = _exportCONFIG;\nexports.CACHE = _exportCACHE;\nexports.default = _exports;\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/~/jsio/packages/base.js\n// module id = 2\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/~/jsio/packages/base.js?");

/***/ },
/* 3 */
/*!*********************************************************!*\
  !*** ./modules/devkit-core/~/jsio/packages/jsio-web.js ***!
  \*********************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("/* WEBPACK VAR INJECTION */(function(process) {'use strict';\n\n// Copyright (c) 2010\n// Michael Carter (cartermichael@gmail.com)\n// Martin Hunt (mghunt@gmail.com)\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n// Initialization of js.io occurs in a closure, preventing local variables\n// from entering the global scope.  During execution, the method `jsio` is\n// added to the global scope.\n;\n(function () {\n  function init(cloneFrom) {\n    // We expect this code to be minified before production use, so we may\n    // write code slightly more verbosely than we otherwise would.\n    var INITIAL_FILE = '<initial file>';\n    var MODULE_NOT_FOUND = 'MODULE_NOT_FOUND';\n\n    // Should we parse syntax errors in the browser?\n    var DEBUG = true;\n\n    // Store a reference to the slice function for converting objects of\n    // type arguments to type array.\n    var SLICE = Array.prototype.slice;\n\n    // js.io supports multiple JavaScript environments such as node.js and\n    // most web browsers (IE, Firefox, WebKit).  The ENV object wraps\n    // any utility functions that contain environment-specific code (e.g.\n    // reading a file using node's `fs` library or a browser's\n    // `XMLHttpRequest`).  Running js.io in other JavaScript environments\n    // is as easy as implementing an environment object that conforms to\n    // the abstract interface for an environment (provided below) and\n    // calling `jsio.setEnv()`.\n    var ENV;\n\n    // Checks if the last character in a string is `/`.\n    var rexpEndSlash = /(\\/|\\\\)$/;\n\n    function getModuleDef(path) {\n      path += '.js';\n      return jsio.__modules[path] || new ModuleDef(path);\n    }\n\n    // Creates an object containing metadata about a module.\n    function ModuleDef(path) {\n      this.path = path;\n      this.friendlyPath = path;\n\n      util.splitPath(path, this);\n      this.directory = util.resolve(ENV.getCwd(), this.directory);\n    }\n\n    ModuleDef.prototype.setBase = function (baseMod, basePath) {\n      this.baseMod = baseMod;\n      this.basePath = basePath + '/' + baseMod;\n    };\n\n    var HOST = /^([a-z][a-z0-9+\\-\\.]*:\\/\\/.*?\\/)(.*)$/;\n    var PROTOCOL = /^[a-z][a-z0-9+\\-\\.]*:/;\n\n    // Utility functions\n    var util = {\n      // `util.bind` returns a function that, when called, will execute\n      // the method passed in with the provided context and any additional\n      // arguments passed to `util.bind`.\n      //       util.bind(obj, 'f', a) -> function() { return obj.f(a); }\n      //       util.bind(obj, g, a, b, c) -> function() { return g.call(g, a, b, c); }\n      bind: function bind(context, method)\n      /*, args... */\n      {\n        var args = SLICE.call(arguments, 2);\n        return function () {\n          method = typeof method == 'string' ? context[method] : method;\n          return method.apply(context, args.concat(SLICE.call(arguments, 0)));\n        };\n      },\n      // `util.addEndSlash` accepts a string.  That string is returned with a `/`\n      // appended if the string did not already end in a `/`.\n      addEndSlash: function addEndSlash(str) {\n        return rexpEndSlash.test(str) ? str : str + '/';\n      },\n      // `util.removeEndSlash` accepts a string.  It removes a trailing `/` if\n      // one is found.\n      removeEndSlash: function removeEndSlash(str) {\n        return str.replace(rexpEndSlash, '');\n      },\n      // `util.relative` accepts two paths (strings) and returns the second path\n      // relative to the first.\n      //\n      //  - if `path` starts with `relativeTo`, then strip `path` off the\n      //    `relativeTo` part\n      //\n      //         util.relative('abc/def/', 'abc') -> 'def'\n      //\n      //  - if `path` starts with some substring of `relativeTo`, remove\n      //    this substring and add `../` for each remaining segment of\n      //    `relativeTo`.\n      //\n      //         util.relative('abc/def/', 'abc/hij') -> '../def'\n      //\n      relative: function relative(relativeTo, path) {\n        var len = relativeTo.length;\n        if (path.substring(0, len) == relativeTo) {\n          // if the relative path now starts with a path separator\n          // either (/ or \\), remove it\n          /* Note: we're casting a boolean to an int by adding len to it */\n          return path.slice(len + /[\\/\\\\]/.test(path.charAt(len)));\n        }\n\n        var sA = util.removeEndSlash(path).split(ENV.pathSep),\n            sB = util.removeEndSlash(relativeTo).split(ENV.pathSep),\n            i = 0;\n\n        /* Count how many segments match. */\n        while (sA[i] == sB[i]) {\n          ++i;\n        }\n\n        if (i) {\n          /* If at least some segments matched, remove them.  The result is our new path. */\n          path = sA.slice(i).join(ENV.pathSep);\n\n          /* Prepend `../` for each segment remaining in `relativeTo`. */\n          for (var j = sB.length - i; j > 0; --j) {\n            path = '../' + path;\n          }\n        }\n\n        return path;\n      },\n      // `buildPath` accepts an arbitrary number of string arguments to concatenate into a path.\n      //     util.buildPath('a', 'b', 'c/', 'd/') -> 'a/b/c/d/'\n      buildPath: function buildPath() {\n        var pieces = [];\n        for (var i = 0, n = arguments.length; i < n; ++i) {\n          var piece = arguments[i];\n          if (PROTOCOL.test(piece)) {\n            pieces.length = 0;\n          }\n\n          if (piece != '.' && piece != './' && piece) {\n            pieces.push(piece);\n          }\n        }\n\n        return util.resolveRelativePath(pieces.join('/'));\n      },\n      // `resolveRelativePath` removes relative path indicators.  For example:\n      //     util.resolveRelativePath('a/../b') -> b\n      resolveRelativePath: function resolveRelativePath(path) {\n        /* If the path starts with a protocol+host, store it and remove it (add it\n             back later) so we don't accidently modify it. */\n        var protocol = path.match(HOST);\n        if (protocol) {\n          path = protocol[2];\n        }\n\n        /* Remove multiple slashes and trivial dots (`/./ -> /`). */\n        path = path.replace(/\\/+/g, '/').replace(/\\/\\.\\//g, '/');\n\n        /* Loop to collapse instances of `../` in the path by matching a previous\n             path segment.  Essentially, we find substrings of the form `/abc/../`\n             where abc is not `.` or `..` and replace the substrings with `/`.\n             We loop until the string no longer changes since after collapsing\n             possible instances once, we may have created more instances that can\n             be collapsed.\n          */\n        var o;\n        while ((o = path) != (path = path.replace(/(^|\\/)(?!\\.?\\.\\/)([^\\/]+)\\/\\.\\.\\//g, '$1'))) {}\n        /* Don't forget to prepend any protocol we might have removed earlier. */\n        return protocol ? protocol[1] + path.replace(/^\\//, '') : path;\n      },\n      isAbsolutePath: function isAbsolutePath(path) {\n        return (/^\\//.test(path) || PROTOCOL.test(path) || ENV.isWindowsNode && /^[a-zA-Z]:|[\\\\\\/]{2}[^\\\\\\/]+[\\\\\\/]+[^\\\\\\/]+/.test(path)\n        );\n      },\n      resolve: function resolve(from, to) {\n        return this.isAbsolutePath(to) ? util.resolveRelativePath(to) : util.buildPath(from, to);\n      },\n      resolveRelativeModule: function resolveRelativeModule(modulePath, directory) {\n        var result = [],\n            parts = modulePath.split('.'),\n            len = parts.length,\n            relative = len > 1 && !parts[0],\n            i = relative ? 0 : -1;\n\n        while (++i < len) {\n          result.push(parts[i] ? parts[i] : '..');\n        }\n        return util.buildPath(relative ? directory : '', result.join('/'));\n      },\n      resolveModulePath: function resolveModulePath(modulePath, directory) {\n        // resolve relative paths\n        if (modulePath.charAt(0) == '.') {\n          return [getModuleDef(util.resolveRelativeModule(modulePath, directory)), getModuleDef(util.resolveRelativeModule(modulePath + '.index', directory))];\n        }\n\n        // resolve absolute paths with respect to jsio packages/\n        var pathSegments = modulePath.split('.');\n        var n = pathSegments.length;\n        for (var i = n; i > 0; --i) {\n          var subpath = pathSegments.slice(0, i).join('.');\n          var value = jsioPath.cache[subpath];\n          var pathString = pathSegments.slice(i).join('/');\n          if (value) {\n            return [getModuleDef(util.buildPath(value, pathString)), getModuleDef(util.buildPath(value, pathString + '/index'))];\n          }\n        }\n\n        var baseMod = pathSegments[0];\n        var pathString = pathSegments.join('/');\n        var defs = [];\n        var paths = jsioPath.get();\n        var len = paths.length;\n        for (var i = 0; i < len; ++i) {\n          var base = paths[i];\n          var path = util.buildPath(base, pathString);\n\n          var moduleDef = getModuleDef(path);\n          moduleDef.setBase(baseMod, base);\n          defs.push(moduleDef);\n\n          var moduleDef = getModuleDef(path + '/index');\n          moduleDef.setBase(baseMod, base);\n          defs.push(moduleDef);\n        }\n        return defs;\n      },\n      splitPath: function splitPath(path, result) {\n        if (!result) {\n          result = {};\n        }\n        var i = Math.max(path.lastIndexOf('/'), path.lastIndexOf('\\\\')) + 1;\n        result.directory = path.substring(0, i);\n        result.filename = path.substring(i);\n        return result;\n      }\n    };\n\n    // construct the top-level jsio object\n    var jsio = util.bind(this, _require, null, null, null);\n\n    jsio.__util = util;\n    jsio.__init__ = init;\n\n    var srcCache;\n    jsio.setCache = function (cache) {\n      srcCache = jsio.__srcCache = cache;\n    };\n    jsio.setCache(cloneFrom && cloneFrom.__srcCache || {});\n\n    jsio.setCachedSrc = function (path, src, locked) {\n      if (srcCache[path] && srcCache[path].locked) {\n        console.warn('Cache is ignoring (already present and locked) src ' + path);\n        return;\n      }\n      srcCache[path] = {\n        path: path,\n        src: src,\n        locked: locked\n      };\n    };\n    jsio.getCachedSrc = function (path) {\n      return srcCache[path];\n    };\n\n    jsio.__filename = 'jsio.js';\n    jsio.__cmds = [];\n    jsio.__jsio = jsio;\n    jsio.__require = _require;\n    jsio.__modules = { preprocessors: {} };\n    var jsioPath = {\n      set: function set(path) {\n        this.value = [];\n        (typeof path == 'string' ? [path] : path).map(this.add, this);\n      },\n      get: function get() {\n        return jsioPath.value.slice(0);\n      },\n      add: function add(path) {\n        if (arguments.length == 2) {\n          var from = arguments[0];\n          var to = util.resolve(ENV.getCwd(), arguments[1]);\n          this.cache[from] = to;\n        } else {\n          path = util.resolve(ENV.getCwd(), path);\n          var v = jsioPath.value,\n              len = v.length;\n          for (var i = 0; i < len; ++i) {\n            if (v[i] == path) {\n              return;\n            }\n          }\n          v.push(path);\n        }\n      },\n      remove: function remove(path) {\n        var v = jsioPath.value,\n            len = v.length;\n        for (var i = 0; i < len; ++i) {\n          if (v[i] == path) {\n            v.splice(i, 1);\n          }\n        }\n      },\n      value: [],\n      cache: {}\n    };\n\n    jsio.path = jsioPath;\n    jsio.addPath = util.bind(jsioPath, 'add');\n    jsio.addCmd = util.bind(jsio.__cmds, 'push');\n\n    jsio.setEnv = function (envCtor) {\n      if (!envCtor && cloneFrom) {\n        ENV = new cloneFrom.__env.constructor(util);\n      } else {\n        if (typeof envCtor == 'string') {\n          envCtor = {\n            // node: ENV_node,\n            browser: ENV_browser\n          }[envCtor] || ENV_browser;\n        }\n\n        ENV = new envCtor(util);\n      }\n\n      this.__env = ENV;\n      this.__dir = ENV.getCwd();\n\n      if (!ENV.loadModule) {\n        ENV.loadModule = loadModule;\n      }\n\n      jsio.path.cache['jsio'] = cloneFrom ? cloneFrom.path.cache.jsio : ENV.getPath();\n      if (envCtor == ENV_browser) {\n        jsio.path.set(ENV.getPath());\n      }\n    };\n\n    if (cloneFrom) {\n      jsio.setEnv();\n    } else if (typeof JSIO_ENV_CTOR !== 'undefined') {\n      jsio.setEnv(JSIO_ENV_CTOR);\n    } else if (typeof process !== 'undefined' && process.version) {\n      jsio.setEnv('node');\n    } else if (typeof XMLHttpRequest != 'undefined' || typeof ActiveXObject != 'undefined') {\n      jsio.setEnv('browser');\n    }\n\n    jsio.main = ENV && ENV.main;\n\n    var boundJsio;\n    var localJsio = function localJsio(req) {\n      if (!boundJsio) {\n        boundJsio = util.bind(this, _require, {}, ENV.getPath(), 'jsio.js');\n      }\n\n      return boundJsio(req, {\n        dontExport: true,\n        dontPreprocess: true\n      });\n    };\n\n    /*\n    function ENV_abstract() {\n      this.global = null;\n      this.getCwd = function() {};\n      this.getPath = function() {};\n      this.eval = function(code, path) {};\n      this.fetch = function(path) { return contentsOfPath; };\n      this.log = function(args...) {};\n    }\n    */\n\n    function ENV_browser() {\n      var XHR = window.XMLHttpRequest || function () {\n        return new ActiveXObject('Msxml2.XMLHTTP');\n      },\n          cwd = null,\n          path = null,\n          JOIN = Array.prototype.join;\n\n      this.name = 'browser';\n      this.global = window;\n      this.pathSep = '/';\n\n      if (!this.global.jsio) {\n        this.global.jsio = jsio;\n      }\n\n      if (window.console && console.log) {\n        if (!console.log.apply || /Android|iPhone|iPad|iPod/.test(navigator.userAgent)) {\n          this.log = function () {\n            var args = JOIN.call(arguments, ' ');\n            console.log(args);\n            return args;\n          };\n        } else {\n          this.log = function () {\n            console.log.apply(console, arguments);\n            return JOIN.call(arguments, ' ');\n          };\n        }\n      } else {\n        this.log = function () {\n          return JOIN.call(arguments, ' ');\n        };\n      }\n\n      this.getCwd = function () {\n        if (!cwd) {\n          var loc = window.location,\n              path = loc.pathname;\n          cwd = loc.protocol + '//' + loc.host + path.substring(0, path.lastIndexOf('/') + 1);\n        }\n        return cwd;\n      };\n\n      this.getPath = function () {\n        if (!path) {\n          try {\n            var filename = new RegExp('(.*?)' + jsio.__filename + '(\\\\?.*)?$'),\n                scripts = document.getElementsByTagName('script');\n\n            for (var i = 0, script; script = scripts[i]; ++i) {\n              var result = script.src.match(filename);\n              if (result) {\n                path = result[1];\n                if (/^[A-Za-z]*:\\/\\//.test(path)) {\n                  path = util.relative(this.getCwd(), path);\n                }\n                break;\n              }\n            }\n          } catch (e) {}\n\n          if (!path) {\n            path = '.';\n          }\n        }\n        return path;\n      };\n\n      var debugHost = location.protocol + '//' + location.host + '/';\n      var debugPath = location.pathname;\n      this.debugPath = function (path) {\n        return util.buildPath(debugHost, path[0] != '/' && debugPath, path);\n      };\n\n      // IE6 won't return an anonymous function from eval, so use the function constructor instead\n      var rawEval = typeof eval('(function(){})') == 'undefined' ? function (src, path) {\n        return new Function('return ' + src)();\n      } : function (src, path) {\n        var src = src + '\\n//# sourceURL=' + path;\n        return window.eval(src);\n      };\n\n      // provide an eval with reasonable debugging\n      this.eval = function (code, path, origCode) {\n        try {\n          return rawEval(code, this.debugPath(path));\n        } catch (e) {\n          if (e instanceof SyntaxError) {\n            if (DEBUG && this.checkSyntax) {\n              this.checkSyntax(origCode, path);\n            }\n          }\n          throw e;\n        }\n      };\n\n      this.checkSyntax = function (code, path) {\n        try {\n          // var syntax = jsio('import jsio.util.syntax', {suppressErrors: true, dontExport: true});\n          var syntax = __webpack_require__(/*! ./util/syntax */ 5);\n          syntax(code, path);\n        } catch (e) {}\n      };\n\n      this.fetch = function (path) {\n        var xhr = new XHR();\n        try {\n          xhr.open('GET', path, false);\n          xhr.send(null);\n        } catch (e) {\n          ENV.log('e:', e);\n          return false;\n        }\n\n        // firefox file://\n        if (xhr.status == 404 || // all browsers, http://\n        xhr.status == -1100 || // safari file://\n        // XXX: We have no way to tell in opera if a file exists and is empty, or is 404\n        // XXX: Use flash?\n        // (!failed && xhr.status == 0 && !xhr.responseText && EXISTS)) // opera\n        false) {\n          return false;\n        }\n\n        return xhr.responseText;\n      };\n    };\n\n    var failedFetch = {};\n\n    function findModule(possibilities) {\n      var src;\n      for (var i = 0, possible; possible = possibilities[i]; ++i) {\n        var path = possible.path,\n            cachedVersion = srcCache[path];\n\n        if (cachedVersion) {\n          // extract a non-absolute dirname from the cache key: absolute paths\n          // built into the cache are made relative during compile time since\n          // absolute paths won't match between host and target device. Use\n          // the cache key as the relative path so future imports can also\n          // successfully lookup paths in the cache.\n          var match = path.match(/^(.*\\/)[^\\\\\\/]+$/);\n          possible.directory = match && match[1] || '';\n          possible.src = cachedVersion.src;\n          possible.pre = true;\n          return possible;\n        }\n\n        /* if (/^\\.\\//.test(path)) {\n          // remove one path segment for each dot from the cwd\n          path = addEndSlash(ENV.getCwd()) + path;\n        }*/\n        src = ENV.fetch(path);\n\n        if (src !== false) {\n          possible.src = src;\n          return possible;\n        } else {\n          failedFetch[path] = true;\n        }\n      }\n\n      return false;\n    }\n\n    function processStack() {\n      return importStack.map(function (item, index) {\n        var stack = index == 0 ? new Error().stack : importStack[index - 1].stack;\n        var i = stack.indexOf(item.path);\n        if (i >= 0) {\n          item.line = ':' + parseInt(stack.substring(i + item.path.length + 1));\n        }\n\n        return index + 1 + ': \"' + item.friendlyPath + '\" ' + item.path + (item.line || '');\n      });\n    }\n\n    // load a module from a file\n    function loadModule(baseLoader, fromDir, fromFile, item, opts) {\n      var modulePath = item.from;\n      var possibilities = util.resolveModulePath(modulePath, fromDir);\n      for (var i = 0, p; p = possibilities[i]; ++i) {\n        var path = possibilities[i].path;\n        if (!opts.reload && path in jsio.__modules) {\n          return possibilities[i];\n        }\n\n        if (path in failedFetch) {\n          possibilities.splice(i--, 1);\n        }\n      }\n\n      if (!possibilities.length) {\n        if (opts.suppressErrors) {\n          return false;\n        }\n        var e = new Error('Could not import `' + item.from + '`' + '\\tImport Stack:\\n' + '\\t\\t' + processStack().join('\\n\\t\\t'));\n        e.jsioLogged = true;\n        e.code = MODULE_NOT_FOUND;\n        throw e;\n      }\n\n      var moduleDef = findModule(possibilities);\n      if (!moduleDef) {\n        if (opts.suppressErrors) {\n          return false;\n        }\n        var paths = [];\n        for (var i = 0, p; p = possibilities[i]; ++i) {\n          paths.push(p.path);\n        }\n        var e = new Error('Could not import `' + modulePath + '`\\n' + '\\tlooked in:\\n' + '\\t\\t' + paths.join('\\n\\t\\t') + '\\n' + '\\tImport Stack:\\n' + '\\t\\t' + processStack().join('\\n\\t\\t'));\n        e.code = MODULE_NOT_FOUND;\n        throw e;\n      }\n\n      // a (potentially) nicer way to refer to a module -- how it was referenced in code when it was first imported\n      moduleDef.friendlyPath = modulePath;\n\n      // cache the base module's path in the path cache so we don't have to\n      // try out all paths the next time we see the same base module.\n      if (moduleDef.baseMod && !(moduleDef.baseMod in jsioPath.cache)) {\n        jsioPath.cache[moduleDef.baseMod] = moduleDef.basePath;\n      }\n\n      // don't apply the standard preprocessors to base.js.  If we're reloading\n      // the source code, always apply them.  We also don't want to run them\n      // if they've been run once -- moduleDef.pre is set to true already\n      // if we're reading the code from the source cache.\n      if (modulePath != 'base' && (opts.reload || !opts.dontPreprocess && !moduleDef.pre)) {\n        moduleDef.pre = true;\n\n        applyPreprocessors(fromDir, moduleDef, ['import', 'inlineSlice'], opts);\n      }\n\n      // any additional preprocessors?\n      if (opts.preprocessors) {\n        applyPreprocessors(fromDir, moduleDef, opts.preprocessors, opts);\n      }\n\n      return moduleDef;\n    }\n\n    function applyPreprocessors(path, moduleDef, names, opts) {\n      for (var i = 0, len = names.length; i < len; ++i) {\n        var p = getPreprocessor(names[i]);\n\n        // if we have a recursive import and p isn't a function, just\n        // skip it (handles the case where a preprocessor imports\n        // other modules).\n        if (p && typeof p == 'function') {\n          p(path, moduleDef, opts);\n        }\n      }\n    }\n\n    function getPreprocessor(name) {\n      var module = jsio.__modules['jsio.preprocessors.' + name];\n      return typeof name == 'function' ? name : module && module.exports || localJsio('import jsio.preprocessors.' + name);\n    }\n\n    function execModuleDef(context, moduleDef) {\n      var src = moduleDef.src;\n      delete moduleDef.src;\n\n      var code = '(function(_){with(_){delete _;return function $$' + moduleDef.friendlyPath.replace(/[\\:\\\\\\/.-]/g, '_') + '(){' + src + '\\n}}})';\n\n      var exports = moduleDef.exports = context.exports;\n\n      var fn = ENV.eval(code, moduleDef.path, src);\n      fn = fn(context);\n\n      fn.call(exports);\n\n      if (exports != context.module.exports) {\n        // Emulate node.js-style ability to reassign module.exports:\n        //   module.exports = ...\n        //\n        // Note that in node.js and js.io, setting `module.exports` invalidates\n        // the context's `exports` alias. See\n        // http://nodejs.org/api/modules.html#modules_exports_alias for more\n        moduleDef.exports = context.module.exports;\n      } else {\n        // js.io-style ability to override exports directly (`exports = `)\n        moduleDef.exports = context.exports;\n      }\n    }\n\n    function resolveImportRequest(context, request, opts) {\n      var cmds = jsio.__cmds,\n          imports = [],\n          result = false;\n\n      for (var i = 0, imp; imp = cmds[i]; ++i) {\n        if (result = imp(context, request, opts, imports)) {\n          break;\n        }\n      }\n\n      if (result !== true) {\n        throw new (typeof SyntaxError != 'undefined' ? SyntaxError : Error)(String(result || 'invalid jsio command: jsio(\\'' + request + '\\')'));\n      }\n\n      return imports;\n    }\n\n    function makeContext(ctx, modulePath, moduleDef, dontAddBase) {\n      if (!ctx) {\n        ctx = {};\n      }\n      if (!ctx.exports) {\n        ctx.exports = {};\n      }\n\n      ctx.jsio = util.bind(this, _require, ctx, moduleDef.directory, moduleDef.filename);\n      ctx.require = function (request, opts) {\n        if (!opts) {\n          opts = {};\n        }\n        opts.dontExport = true;\n        return ctx.jsio(request, opts);\n      };\n\n      ctx.require.main = ENV.main;\n\n      ctx.module = {\n        id: modulePath,\n        exports: ctx.exports\n      };\n      if (!dontAddBase && modulePath != 'jsio.base') {\n        ctx.jsio('from jsio.base import *', { dontPreprocess: true });\n        ctx.logging.__create(modulePath, ctx);\n      }\n\n      // TODO: FIX for \"trailing .\" case\n      ctx.jsio.__jsio = jsio;\n      ctx.jsio.__env = jsio.__env;\n      ctx.jsio.__dir = moduleDef.directory;\n      ctx.jsio.__filename = moduleDef.filename;\n      ctx.jsio.path = jsioPath;\n\n      ctx.__dirname = moduleDef.directory;\n      ctx.__filename = util.buildPath(ctx.__dirname, moduleDef.filename);\n      return ctx;\n    }\n\n    var importStack = [];\n\n    function _require(boundContext, fromDir, fromFile, request, opts) {\n      opts = opts || {};\n      fromDir = fromDir || './';\n      fromFile = fromFile || INITIAL_FILE;\n\n      // require is bound to a module's (or global) context -- we can override this\n      // by using opts.exportInto\n      var exportInto = opts.exportInto || boundContext || ENV.global;\n\n      // parse the import request(s)\n      var imports = resolveImportRequest(exportInto, request, opts),\n          numImports = imports.length,\n          retVal = numImports > 1 ? {} : null;\n\n      // import each requested item\n      for (var i = 0; i < numImports; ++i) {\n        var item = imports[i];\n        var modulePath = item.from;\n        var modules = jsio.__modules;\n        var path;\n        var moduleDef;\n        var err;\n\n        try {\n          moduleDef = jsio.__env.loadModule(loadModule, fromDir, fromFile, item, opts);\n        } catch (e) {\n          err = e;\n        }\n\n        if (moduleDef) {\n          path = moduleDef.path;\n        } else if (moduleDef === false) {\n          return false;\n        }\n\n        if (err) {\n          if (opts.suppressErrors) {\n            return false;\n          }\n          if (!err.jsioLogged) {\n            ENV.log('\\nError loading module:\\n', '    [[', request, ']]\\n', '    requested by:', fromDir + fromFile, '\\n', '    current directory:', jsio.__env.getCwd(), '\\n', '  ' + err.stack.split('\\n').join('\\n  '));\n            err.jsioLogged = true;\n          }\n\n          throw err;\n        }\n\n        if (moduleDef) {\n          importStack.push({\n            friendlyPath: moduleDef.friendlyPath,\n            path: moduleDef.path,\n            stack: new Error().stack\n          });\n        }\n\n        // eval any packages that we don't know about already\n        if (!(path in modules)) {\n          modules[path] = moduleDef;\n        }\n\n        if (!moduleDef.exports) {\n          var newContext = makeContext(opts.context, modulePath, moduleDef, item.dontAddBase);\n          if (item.dontUseExports) {\n            var src = [';(function(){'],\n                k = 1;\n            for (var j in item['import']) {\n              newContext.exports[j] = undefined;\n              src[k++] = 'if(typeof ' + j + '!=\"undefined\"&&exports.' + j + '==undefined)exports.' + j + '=' + j + ';';\n            }\n            src[k] = '})();';\n            moduleDef.src += src.join('');\n          }\n\n          execModuleDef(newContext, moduleDef);\n        }\n\n        importStack.pop();\n\n        var module = moduleDef.exports;\n\n        // return the module if we're only importing one module\n        if (numImports == 1) {\n          retVal = module;\n        }\n\n        if (!opts.dontExport) {\n          // add the module to the current context\n          if (item.as) {\n            // remove trailing/leading dots\n            var as = item.as.match(/^\\.*(.*?)\\.*$/)[1],\n                segments = as.split('.'),\n                kMax = segments.length - 1,\n                c = exportInto;\n\n            // build the object in the context\n            for (var k = 0; k < kMax; ++k) {\n              var segment = segments[k];\n              if (!segment) continue;\n              if (!c[segment]) {\n                c[segment] = {};\n              }\n              c = c[segment];\n            }\n\n            c[segments[kMax]] = module;\n\n            // there can be multiple module imports with this syntax (import foo, bar)\n            if (numImports > 1) {\n              retVal[as] = module;\n            }\n          } else if (item['import']) {\n            // there can only be one module import with this syntax\n            // (from foo import bar), so retVal will already be set here\n            if (item['import']['*']) {\n              for (var k in modules[path].exports) {\n                exportInto[k] = module[k];\n              }\n            } else {\n              for (var k in item['import']) {\n                exportInto[item['import'][k]] = module[k];\n              }\n            }\n          }\n        }\n      }\n\n      return retVal;\n    }\n\n    // DEFINE SYNTAX FOR JSIO('cmd')\n    // from myPackage import myFunc\n    // external myPackage import myFunc\n    jsio.addCmd(function (context, request, opts, imports) {\n      var match = request.match(/^\\s*(from|external)\\s+([\\w.\\-$]+)\\s+(import|grab)\\s+(.*)$/);\n      if (match) {\n        imports.push({\n          from: match[2],\n          dontAddBase: match[1] == 'external',\n          dontUseExports: match[3] == 'grab' || match[1] == 'external',\n          'import': {}\n        });\n\n        match[4].replace(/\\s*([\\w.\\-$*]+)(?:\\s+as\\s+([\\w.\\-$]+))?/g, function (_, item, as) {\n          imports[0]['import'][item] = as || item;\n        });\n        return true;\n      }\n    });\n\n    // import myPackage\n    jsio.addCmd(function (context, request, opts, imports) {\n      var match = request.match(/^\\s*import\\s+(.*)$/);\n      if (match) {\n        match[1].replace(/\\s*([\\w.\\-$]+)(?:\\s+as\\s+([\\w.\\-$]+))?,?/g, function (_, fullPath, as) {\n          imports.push(as ? {\n            from: fullPath,\n            as: as\n          } : {\n            from: fullPath,\n            as: fullPath\n          });\n        });\n        return true;\n      }\n    });\n\n    // CommonJS syntax\n    jsio.addCmd(function (context, request, opts, imports) {\n      //    ./../b -> ..b\n      //    ../../b -> ...b\n      //    ../b -> ..b\n      //    ./b -> .b\n      var match = request.match(/^\\s*[\\w.0-9$\\/\\-:\\\\]+\\s*$/);\n      if (match) {\n        var req = util.resolveRelativePath(match[0]),\n            isRelative = req.charAt(0) == '.';\n\n        req = req.replace(/\\.\\.\\//g, '.').replace(/\\.\\//g, '').replace(/\\/+$/g, '');\n\n        if (ENV.pathSep === '\\\\' && req.match(/^[a-zA-Z]:.*/)) {} else {\n          // any remaining slashes are path separators\n          req = req.replace(/\\//g, '.');\n        }\n\n        imports[0] = {\n          from: (isRelative ? '.' : '') + req,\n          original: request\n        };\n        return true;\n      }\n    });\n\n    jsio.install = function () {\n      var base = __webpack_require__(/*! ./base */ 2);\n      base.GLOBAL['logger'] = base.logging.get('jsiocore');\n    };\n\n    jsio.eval = function (src, path) {\n      path = ENV.getCwd() || '/';\n      var moduleDef = new ModuleDef(path);\n      moduleDef.src = src;\n      applyPreprocessors(path, moduleDef, ['import', 'cls'], {});\n      execModuleDef(ENV.global, moduleDef);\n    };\n\n    jsio.clone = util.bind(null, init, jsio);\n\n    // in node, defines jsio as a module that can be imported\n    var moduleInfo = util.resolveModulePath('jsio')[0];\n    if (moduleInfo) {\n      jsio.__modules[moduleInfo.path] = new ModuleDef(moduleInfo.path);\n      jsio.__modules[moduleInfo.path].exports = jsio;\n    }\n\n    return jsio;\n  }\n\n  var J = init(null, {});\n  if (true) {\n    module.exports = J;\n  } else {\n    jsio = J;\n  }\n})();\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(/*! ./modules/devkit-core/~/node-libs-browser/~/process/browser.js */ 4)))\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/~/jsio/packages/jsio-web.js\n// module id = 3\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/~/jsio/packages/jsio-web.js?");

/***/ },
/* 4 */
/*!**********************************************************************!*\
  !*** ./modules/devkit-core/~/node-libs-browser/~/process/browser.js ***!
  \**********************************************************************/
/***/ function(module, exports) {

	eval("'use strict';\n\n// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout() {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n})();\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch (e) {\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch (e) {\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e) {\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e) {\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while (len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) {\n    return [];\n};\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () {\n    return '/';\n};\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function () {\n    return 0;\n};\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/~/node-libs-browser/~/process/browser.js\n// module id = 4\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/~/node-libs-browser/~/process/browser.js?");

/***/ },
/* 5 */
/*!************************************************************!*\
  !*** ./modules/devkit-core/~/jsio/packages/util/syntax.js ***!
  \************************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nexports.__esModule = true;\n\nvar _esprima = __webpack_require__(/*! ./esprima */ 6);\n\nvar _esprima2 = _interopRequireDefault(_esprima);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar _exports = {};\n\nfunction validate(code, filename) {\n  try {\n    var syntax = _esprima2.default.parse(code, {\n      tolerant: true,\n      loc: true\n    });\n    var errors = syntax.errors;\n    if (errors.length > 0) {\n      logErrors(filename, code, errors);\n    }\n  } catch (e) {\n    logErrors(filename, code, [e]);\n  }\n}\n\nfunction padString(str, pad) {\n  str = str + '';\n  while (str.length < pad) {\n    str = ' ' + str;\n  }\n  return str;\n}\n\nfunction logColor(color, str) {\n  if (console.group) {\n    str = '%c' + str;\n    console.log(str, 'color:' + color);\n  } else {\n    console.log(str);\n  }\n}\n\nfunction logErrors(filename, code, errors) {\n  var title = 'Syntax Error (' + filename + '):';\n  if (console.group) {\n    console.group('%c' + title, 'color: red; text-decoration: underline');\n  } else {\n    console.error('Syntax Error:');\n  }\n\n  var linesBefore = 3;\n  var linesAfter = 3;\n  var lines = code.split('\\n');\n  for (var i = 0; i < errors.length; i += 1) {\n    var e = errors[i];\n    var pad = ('' + (e.lineNumber + linesAfter)).length;\n    printLines(pad, lines, e.lineNumber - linesBefore, e.lineNumber - 1);\n    logColor('red', padString(e.lineNumber, pad) + ' ' + lines[e.lineNumber - 1]);\n\n    logColor('blue', new Array(pad + e.column + 1).join('\\xB7') + '^');\n\n    printLines(pad, lines, e.lineNumber + 1, e.lineNumber + 1 + linesAfter);\n\n    logColor('red', 'Line ' + e.lineNumber + ': ' + e.description);\n  }\n\n  console.groupEnd && console.groupEnd();\n}\n\nvar printLines = console.group ? function (pad, lines, from, to) {\n  for (var j = from; j <= to; ++j) {\n    console.log('%c' + padString(j, pad) + ' %c' + lines[j - 1], 'color: gray', 'color: auto');\n  }\n} : function (pad, lines, from, to) {\n  for (var j = from; j <= to; ++j) {\n    console.log(padString(j, pad), lines[j - 1]);\n  }\n};\n\n_exports = validate;\n\nexports.default = _exports;\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/~/jsio/packages/util/syntax.js\n// module id = 5\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/~/jsio/packages/util/syntax.js?");

/***/ },
/* 6 */
/*!*************************************************************!*\
  !*** ./modules/devkit-core/~/jsio/packages/util/esprima.js ***!
  \*************************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;'use strict';\n\nexports.__esModule = true;\nvar _exports = {};\n\n/*\n  Copyright (c) jQuery Foundation, Inc. and Contributors, All Rights Reserved.\n\n  Redistribution and use in source and binary forms, with or without\n  modification, are permitted provided that the following conditions are met:\n\n    * Redistributions of source code must retain the above copyright\n      notice, this list of conditions and the following disclaimer.\n    * Redistributions in binary form must reproduce the above copyright\n      notice, this list of conditions and the following disclaimer in the\n      documentation and/or other materials provided with the distribution.\n\n  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n  AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n  IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n  ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> BE LIABLE FOR ANY\n  DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n  (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n  LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n  ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n  (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF\n  THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n*/\n(function (root, factory) {\n  'use strict';\n\n  // Universal Module Definition (UMD) to support AMD, CommonJS/Node.js,\n  // Rhino, and plain browser loading.\n  /* istanbul ignore next */\n\n  if (true) {\n    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [exports], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory), __WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ? (__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n  } else if (typeof _exports !== 'undefined') {\n    factory(_exports);\n  } else {\n    factory(root.esprima = {});\n  }\n})(undefined, function (exports) {\n  'use strict';\n\n  var Token, TokenName, FnExprTokens, Syntax, PlaceHolders, Messages, Regex, source, strict, sourceType, index, lineNumber, lineStart, hasLineTerminator, lastIndex, lastLineNumber, lastLineStart, startIndex, startLineNumber, startLineStart, scanning, length, lookahead, state, extra, isBindingElement, isAssignmentTarget, firstCoverInitializedNameError;\n\n  Token = {\n    BooleanLiteral: 1,\n    EOF: 2,\n    Identifier: 3,\n    Keyword: 4,\n    NullLiteral: 5,\n    NumericLiteral: 6,\n    Punctuator: 7,\n    StringLiteral: 8,\n    RegularExpression: 9,\n    Template: 10\n  };\n\n  TokenName = {};\n  TokenName[Token.BooleanLiteral] = 'Boolean';\n  TokenName[Token.EOF] = '<end>';\n  TokenName[Token.Identifier] = 'Identifier';\n  TokenName[Token.Keyword] = 'Keyword';\n  TokenName[Token.NullLiteral] = 'Null';\n  TokenName[Token.NumericLiteral] = 'Numeric';\n  TokenName[Token.Punctuator] = 'Punctuator';\n  TokenName[Token.StringLiteral] = 'String';\n  TokenName[Token.RegularExpression] = 'RegularExpression';\n  TokenName[Token.Template] = 'Template';\n\n  // A function following one of those tokens is an expression.\n  FnExprTokens = ['(', '{', '[', 'in', 'typeof', 'instanceof', 'new', 'return', 'case', 'delete', 'throw', 'void',\n  // assignment operators\n  '=', '+=', '-=', '*=', '/=', '%=', '<<=', '>>=', '>>>=', '&=', '|=', '^=', ',',\n  // binary/unary operators\n  '+', '-', '*', '/', '%', '++', '--', '<<', '>>', '>>>', '&', '|', '^', '!', '~', '&&', '||', '?', ':', '===', '==', '>=', '<=', '<', '>', '!=', '!=='];\n\n  Syntax = {\n    AssignmentExpression: 'AssignmentExpression',\n    AssignmentPattern: 'AssignmentPattern',\n    ArrayExpression: 'ArrayExpression',\n    ArrayPattern: 'ArrayPattern',\n    ArrowFunctionExpression: 'ArrowFunctionExpression',\n    BlockStatement: 'BlockStatement',\n    BinaryExpression: 'BinaryExpression',\n    BreakStatement: 'BreakStatement',\n    CallExpression: 'CallExpression',\n    CatchClause: 'CatchClause',\n    ClassBody: 'ClassBody',\n    ClassDeclaration: 'ClassDeclaration',\n    ClassExpression: 'ClassExpression',\n    ConditionalExpression: 'ConditionalExpression',\n    ContinueStatement: 'ContinueStatement',\n    DoWhileStatement: 'DoWhileStatement',\n    DebuggerStatement: 'DebuggerStatement',\n    EmptyStatement: 'EmptyStatement',\n    ExportAllDeclaration: 'ExportAllDeclaration',\n    ExportDefaultDeclaration: 'ExportDefaultDeclaration',\n    ExportNamedDeclaration: 'ExportNamedDeclaration',\n    ExportSpecifier: 'ExportSpecifier',\n    ExpressionStatement: 'ExpressionStatement',\n    ForStatement: 'ForStatement',\n    ForOfStatement: 'ForOfStatement',\n    ForInStatement: 'ForInStatement',\n    FunctionDeclaration: 'FunctionDeclaration',\n    FunctionExpression: 'FunctionExpression',\n    Identifier: 'Identifier',\n    IfStatement: 'IfStatement',\n    ImportDeclaration: 'ImportDeclaration',\n    ImportDefaultSpecifier: 'ImportDefaultSpecifier',\n    ImportNamespaceSpecifier: 'ImportNamespaceSpecifier',\n    ImportSpecifier: 'ImportSpecifier',\n    Literal: 'Literal',\n    LabeledStatement: 'LabeledStatement',\n    LogicalExpression: 'LogicalExpression',\n    MemberExpression: 'MemberExpression',\n    MethodDefinition: 'MethodDefinition',\n    NewExpression: 'NewExpression',\n    ObjectExpression: 'ObjectExpression',\n    ObjectPattern: 'ObjectPattern',\n    Program: 'Program',\n    Property: 'Property',\n    RestElement: 'RestElement',\n    ReturnStatement: 'ReturnStatement',\n    SequenceExpression: 'SequenceExpression',\n    SpreadElement: 'SpreadElement',\n    Super: 'Super',\n    SwitchCase: 'SwitchCase',\n    SwitchStatement: 'SwitchStatement',\n    TaggedTemplateExpression: 'TaggedTemplateExpression',\n    TemplateElement: 'TemplateElement',\n    TemplateLiteral: 'TemplateLiteral',\n    ThisExpression: 'ThisExpression',\n    ThrowStatement: 'ThrowStatement',\n    TryStatement: 'TryStatement',\n    UnaryExpression: 'UnaryExpression',\n    UpdateExpression: 'UpdateExpression',\n    VariableDeclaration: 'VariableDeclaration',\n    VariableDeclarator: 'VariableDeclarator',\n    WhileStatement: 'WhileStatement',\n    WithStatement: 'WithStatement',\n    YieldExpression: 'YieldExpression'\n  };\n\n  PlaceHolders = { ArrowParameterPlaceHolder: 'ArrowParameterPlaceHolder' };\n\n  // Error messages should be identical to V8.\n  Messages = {\n    UnexpectedToken: 'Unexpected token %0',\n    UnexpectedNumber: 'Unexpected number',\n    UnexpectedString: 'Unexpected string',\n    UnexpectedIdentifier: 'Unexpected identifier',\n    UnexpectedReserved: 'Unexpected reserved word',\n    UnexpectedTemplate: 'Unexpected quasi %0',\n    UnexpectedEOS: 'Unexpected end of input',\n    NewlineAfterThrow: 'Illegal newline after throw',\n    InvalidRegExp: 'Invalid regular expression',\n    UnterminatedRegExp: 'Invalid regular expression: missing /',\n    InvalidLHSInAssignment: 'Invalid left-hand side in assignment',\n    InvalidLHSInForIn: 'Invalid left-hand side in for-in',\n    InvalidLHSInForLoop: 'Invalid left-hand side in for-loop',\n    MultipleDefaultsInSwitch: 'More than one default clause in switch statement',\n    NoCatchOrFinally: 'Missing catch or finally after try',\n    UnknownLabel: 'Undefined label \\'%0\\'',\n    Redeclaration: '%0 \\'%1\\' has already been declared',\n    IllegalContinue: 'Illegal continue statement',\n    IllegalBreak: 'Illegal break statement',\n    IllegalReturn: 'Illegal return statement',\n    IllegalYield: 'Unexpected token yield',\n    StrictModeWith: 'Strict mode code may not include a with statement',\n    StrictCatchVariable: 'Catch variable may not be eval or arguments in strict mode',\n    StrictVarName: 'Variable name may not be eval or arguments in strict mode',\n    StrictParamName: 'Parameter name eval or arguments is not allowed in strict mode',\n    StrictParamDupe: 'Strict mode function may not have duplicate parameter names',\n    StrictFunctionName: 'Function name may not be eval or arguments in strict mode',\n    StrictOctalLiteral: 'Octal literals are not allowed in strict mode.',\n    StrictDelete: 'Delete of an unqualified identifier in strict mode.',\n    StrictLHSAssignment: 'Assignment to eval or arguments is not allowed in strict mode',\n    StrictLHSPostfix: 'Postfix increment/decrement may not have eval or arguments operand in strict mode',\n    StrictLHSPrefix: 'Prefix increment/decrement may not have eval or arguments operand in strict mode',\n    StrictReservedWord: 'Use of future reserved word in strict mode',\n    TemplateOctalLiteral: 'Octal literals are not allowed in template strings.',\n    ParameterAfterRestParameter: 'Rest parameter must be last formal parameter',\n    DefaultRestParameter: 'Unexpected token =',\n    ObjectPatternAsRestParameter: 'Unexpected token {',\n    DuplicateProtoProperty: 'Duplicate __proto__ fields are not allowed in object literals',\n    ConstructorSpecialMethod: 'Class constructor may not be an accessor',\n    DuplicateConstructor: 'A class may only have one constructor',\n    StaticPrototype: 'Classes may not have static property named prototype',\n    MissingFromClause: 'Unexpected token',\n    NoAsAfterImportNamespace: 'Unexpected token',\n    InvalidModuleSpecifier: 'Unexpected token',\n    IllegalImportDeclaration: 'Unexpected token',\n    IllegalExportDeclaration: 'Unexpected token',\n    DuplicateBinding: 'Duplicate binding %0'\n  };\n\n  // See also tools/generate-unicode-regex.py.\n  Regex = {\n    NonAsciiIdentifierStart: new RegExp('[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠ-ࢲऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞭꞰꞱꟷ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭟꭤꭥꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]'),\n    NonAsciiIdentifierPart: new RegExp('[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮ̀-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁ҃-҇Ҋ-ԯԱ-Ֆՙա-և֑-ׇֽֿׁׂׅׄא-תװ-ײؐ-ؚؠ-٩ٮ-ۓە-ۜ۟-۪ۨ-ۼۿܐ-݊ݍ-ޱ߀-ߵߺࠀ-࠭ࡀ-࡛ࢠ-ࢲࣤ-ॣ०-९ॱ-ঃঅ-ঌএঐও-নপ-রলশ-হ়-ৄেৈো-ৎৗড়ঢ়য়-ৣ০-ৱਁ-ਃਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹ਼ਾ-ੂੇੈੋ-੍ੑਖ਼-ੜਫ਼੦-ੵઁ-ઃઅ-ઍએ-ઑઓ-નપ-રલળવ-હ઼-ૅે-ૉો-્ૐૠ-ૣ૦-૯ଁ-ଃଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହ଼-ୄେୈୋ-୍ୖୗଡ଼ଢ଼ୟ-ୣ୦-୯ୱஂஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹா-ூெ-ைொ-்ௐௗ௦-௯ఀ-ఃఅ-ఌఎ-ఐఒ-నప-హఽ-ౄె-ైొ-్ౕౖౘౙౠ-ౣ౦-౯ಁ-ಃಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹ಼-ೄೆ-ೈೊ-್ೕೖೞೠ-ೣ೦-೯ೱೲഁ-ഃഅ-ഌഎ-ഐഒ-ഺഽ-ൄെ-ൈൊ-ൎൗൠ-ൣ൦-൯ൺ-ൿංඃඅ-ඖක-නඳ-රලව-ෆ්ා-ුූෘ-ෟ෦-෯ෲෳก-ฺเ-๎๐-๙ກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ູົ-ຽເ-ໄໆ່-ໍ໐-໙ໜ-ໟༀ༘༙༠-༩༹༵༷༾-ཇཉ-ཬཱ-྄྆-ྗྙ-ྼ࿆က-၉ၐ-ႝႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚ፝-፟ᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜌᜎ-᜔ᜠ-᜴ᝀ-ᝓᝠ-ᝬᝮ-ᝰᝲᝳក-៓ៗៜ៝០-៩᠋-᠍᠐-᠙ᠠ-ᡷᢀ-ᢪᢰ-ᣵᤀ-ᤞᤠ-ᤫᤰ-᤻᥆-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉ᧐-᧙ᨀ-ᨛᨠ-ᩞ᩠-᩿᩼-᪉᪐-᪙ᪧ᪰-᪽ᬀ-ᭋ᭐-᭙᭫-᭳ᮀ-᯳ᰀ-᰷᱀-᱉ᱍ-ᱽ᳐-᳔᳒-ᳶ᳸᳹ᴀ-᷵᷼-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼ‌‍‿⁀⁔ⁱⁿₐ-ₜ⃐-⃥⃜⃡-⃰ℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯ⵿-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⷠ-ⷿⸯ々-〇〡-〯〱-〵〸-〼ぁ-ゖ゙゚ゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘫꙀ-꙯ꙴ-꙽ꙿ-ꚝꚟ-꛱ꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞭꞰꞱꟷ-ꠧꡀ-ꡳꢀ-꣄꣐-꣙꣠-ꣷꣻ꤀-꤭ꤰ-꥓ꥠ-ꥼꦀ-꧀ꧏ-꧙ꧠ-ꧾꨀ-ꨶꩀ-ꩍ꩐-꩙ꩠ-ꩶꩺ-ꫂꫛ-ꫝꫠ-ꫯꫲ-꫶ꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭟꭤꭥꯀ-ꯪ꯬꯭꯰-꯹가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻ︀-️︠-︭︳︴﹍-﹏ﹰ-ﹴﹶ-ﻼ０-９Ａ-Ｚ＿ａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]')\n  };\n\n  // Ensure the condition is true, otherwise throw an error.\n  // This is only to have a better contract semantic, i.e. another safety net\n  // to catch a logic error. The condition shall be fulfilled in normal case.\n  // Do NOT use this to enforce a certain condition on any user input.\n  function assert(condition, message) {\n    /* istanbul ignore if */\n    if (!condition) {\n      throw new Error('ASSERT: ' + message);\n    }\n  }\n\n  function isDecimalDigit(ch) {\n    return ch >= 48 && ch <= 57;\n  }\n\n  // 0..9\n  function isHexDigit(ch) {\n    return '0123456789abcdefABCDEF'.indexOf(ch) >= 0;\n  }\n\n  function isOctalDigit(ch) {\n    return '01234567'.indexOf(ch) >= 0;\n  }\n\n  function octalToDecimal(ch) {\n    // \\0 is not octal escape sequence\n    var octal = ch !== '0',\n        code = '01234567'.indexOf(ch);\n\n    if (index < length && isOctalDigit(source[index])) {\n      octal = true;\n      code = code * 8 + '01234567'.indexOf(source[index++]);\n\n      // 3 digits are only allowed when string starts\n      // with 0, 1, 2, 3\n      if ('0123'.indexOf(ch) >= 0 && index < length && isOctalDigit(source[index])) {\n        code = code * 8 + '01234567'.indexOf(source[index++]);\n      }\n    }\n\n    return {\n      code: code,\n      octal: octal\n    };\n  }\n\n  // 7.2 White Space\n  function isWhiteSpace(ch) {\n    return ch === 32 || ch === 9 || ch === 11 || ch === 12 || ch === 160 || ch >= 5760 && [5760, 6158, 8192, 8193, 8194, 8195, 8196, 8197, 8198, 8199, 8200, 8201, 8202, 8239, 8287, 12288, 65279].indexOf(ch) >= 0;\n  }\n\n  // 7.3 Line Terminators\n  function isLineTerminator(ch) {\n    return ch === 10 || ch === 13 || ch === 8232 || ch === 8233;\n  }\n\n  // 7.6 Identifier Names and Identifiers\n  function isIdentifierStart(ch) {\n    return ch === 36 || ch === 95 || // $ (dollar) and _ (underscore)\n    ch >= 65 && ch <= 90 || // A..Z\n    ch >= 97 && ch <= 122 || // a..z\n    ch === 92 || // \\ (backslash)\n    ch >= 128 && Regex.NonAsciiIdentifierStart.test(String.fromCharCode(ch));\n  }\n\n  function isIdentifierPart(ch) {\n    return ch === 36 || ch === 95 || // $ (dollar) and _ (underscore)\n    ch >= 65 && ch <= 90 || // A..Z\n    ch >= 97 && ch <= 122 || // a..z\n    ch >= 48 && ch <= 57 || // 0..9\n    ch === 92 || // \\ (backslash)\n    ch >= 128 && Regex.NonAsciiIdentifierPart.test(String.fromCharCode(ch));\n  }\n\n  // 7.6.1.2 Future Reserved Words\n  function isFutureReservedWord(id) {\n    switch (id) {\n      case 'enum':\n      case 'export':\n      case 'import':\n      case 'super':\n        return true;\n      default:\n        return false;\n    }\n  }\n\n  // 11.6.2.2 Future Reserved Words\n  function isStrictModeReservedWord(id) {\n    switch (id) {\n      case 'implements':\n      case 'interface':\n      case 'package':\n      case 'private':\n      case 'protected':\n      case 'public':\n      case 'static':\n      case 'yield':\n      case 'let':\n        return true;\n      default:\n        return false;\n    }\n  }\n\n  function isRestrictedWord(id) {\n    return id === 'eval' || id === 'arguments';\n  }\n\n  // 7.6.1.1 Keywords\n  function isKeyword(id) {\n    // 'const' is specialized as Keyword in V8.\n    // 'yield' and 'let' are for compatibility with SpiderMonkey and ES.next.\n    // Some others are from future reserved words.\n    switch (id.length) {\n      case 2:\n        return id === 'if' || id === 'in' || id === 'do';\n      case 3:\n        return id === 'var' || id === 'for' || id === 'new' || id === 'try' || id === 'let';\n      case 4:\n        return id === 'this' || id === 'else' || id === 'case' || id === 'void' || id === 'with' || id === 'enum';\n      case 5:\n        return id === 'while' || id === 'break' || id === 'catch' || id === 'throw' || id === 'const' || id === 'yield' || id === 'class' || id === 'super';\n      case 6:\n        return id === 'return' || id === 'typeof' || id === 'delete' || id === 'switch' || id === 'export' || id === 'import';\n      case 7:\n        return id === 'default' || id === 'finally' || id === 'extends';\n      case 8:\n        return id === 'function' || id === 'continue' || id === 'debugger';\n      case 10:\n        return id === 'instanceof';\n      default:\n        return false;\n    }\n  }\n\n  // 7.4 Comments\n  function addComment(type, value, start, end, loc) {\n    var comment;\n\n    assert(typeof start === 'number', 'Comment must have valid position');\n\n    state.lastCommentStart = start;\n\n    comment = {\n      type: type,\n      value: value\n    };\n    if (extra.range) {\n      comment.range = [start, end];\n    }\n    if (extra.loc) {\n      comment.loc = loc;\n    }\n    extra.comments.push(comment);\n    if (extra.attachComment) {\n      extra.leadingComments.push(comment);\n      extra.trailingComments.push(comment);\n    }\n  }\n\n  function skipSingleLineComment(offset) {\n    var start, loc, ch, comment;\n\n    start = index - offset;\n    loc = {\n      start: {\n        line: lineNumber,\n        column: index - lineStart - offset\n      }\n    };\n\n    while (index < length) {\n      ch = source.charCodeAt(index);\n      ++index;\n      if (isLineTerminator(ch)) {\n        hasLineTerminator = true;\n        if (extra.comments) {\n          comment = source.slice(start + offset, index - 1);\n          loc.end = {\n            line: lineNumber,\n            column: index - lineStart - 1\n          };\n          addComment('Line', comment, start, index - 1, loc);\n        }\n        if (ch === 13 && source.charCodeAt(index) === 10) {\n          ++index;\n        }\n        ++lineNumber;\n        lineStart = index;\n        return;\n      }\n    }\n\n    if (extra.comments) {\n      comment = source.slice(start + offset, index);\n      loc.end = {\n        line: lineNumber,\n        column: index - lineStart\n      };\n      addComment('Line', comment, start, index, loc);\n    }\n  }\n\n  function skipMultiLineComment() {\n    var start, loc, ch, comment;\n\n    if (extra.comments) {\n      start = index - 2;\n      loc = {\n        start: {\n          line: lineNumber,\n          column: index - lineStart - 2\n        }\n      };\n    }\n\n    while (index < length) {\n      ch = source.charCodeAt(index);\n      if (isLineTerminator(ch)) {\n        if (ch === 13 && source.charCodeAt(index + 1) === 10) {\n          ++index;\n        }\n        hasLineTerminator = true;\n        ++lineNumber;\n        ++index;\n        lineStart = index;\n      } else if (ch === 42) {\n        // Block comment ends with '*/'.\n        if (source.charCodeAt(index + 1) === 47) {\n          ++index;\n          ++index;\n          if (extra.comments) {\n            comment = source.slice(start + 2, index - 2);\n            loc.end = {\n              line: lineNumber,\n              column: index - lineStart\n            };\n            addComment('Block', comment, start, index, loc);\n          }\n          return;\n        }\n        ++index;\n      } else {\n        ++index;\n      }\n    }\n\n    // Ran off the end of the file - the whole thing is a comment\n    if (extra.comments) {\n      loc.end = {\n        line: lineNumber,\n        column: index - lineStart\n      };\n      comment = source.slice(start + 2, index);\n      addComment('Block', comment, start, index, loc);\n    }\n    tolerateUnexpectedToken();\n  }\n\n  function skipComment() {\n    var ch, start;\n    hasLineTerminator = false;\n\n    start = index === 0;\n    while (index < length) {\n      ch = source.charCodeAt(index);\n\n      if (isWhiteSpace(ch)) {\n        ++index;\n      } else if (isLineTerminator(ch)) {\n        hasLineTerminator = true;\n        ++index;\n        if (ch === 13 && source.charCodeAt(index) === 10) {\n          ++index;\n        }\n        ++lineNumber;\n        lineStart = index;\n        start = true;\n      } else if (ch === 47) {\n        // U+002F is '/'\n        ch = source.charCodeAt(index + 1);\n        if (ch === 47) {\n          ++index;\n          ++index;\n          skipSingleLineComment(2);\n          start = true;\n        } else if (ch === 42) {\n          // U+002A is '*'\n          ++index;\n          ++index;\n          skipMultiLineComment();\n        } else {\n          break;\n        }\n      } else if (start && ch === 45) {\n        // U+002D is '-'\n        // U+003E is '>'\n        if (source.charCodeAt(index + 1) === 45 && source.charCodeAt(index + 2) === 62) {\n          // '-->' is a single-line comment\n          index += 3;\n          skipSingleLineComment(3);\n        } else {\n          break;\n        }\n      } else if (ch === 60) {\n        // U+003C is '<'\n        if (source.slice(index + 1, index + 4) === '!--') {\n          ++index;\n          // `<`\n          ++index;\n          // `!`\n          ++index;\n          // `-`\n          ++index;\n          // `-`\n          skipSingleLineComment(4);\n        } else {\n          break;\n        }\n      } else {\n        break;\n      }\n    }\n  }\n\n  function scanHexEscape(prefix) {\n    var i,\n        len,\n        ch,\n        code = 0;\n\n    len = prefix === 'u' ? 4 : 2;\n    for (i = 0; i < len; ++i) {\n      if (index < length && isHexDigit(source[index])) {\n        ch = source[index++];\n        code = code * 16 + '0123456789abcdef'.indexOf(ch.toLowerCase());\n      } else {\n        return '';\n      }\n    }\n    return String.fromCharCode(code);\n  }\n\n  function scanUnicodeCodePointEscape() {\n    var ch, code, cu1, cu2;\n\n    ch = source[index];\n    code = 0;\n\n    // At least, one hex digit is required.\n    if (ch === '}') {\n      throwUnexpectedToken();\n    }\n\n    while (index < length) {\n      ch = source[index++];\n      if (!isHexDigit(ch)) {\n        break;\n      }\n      code = code * 16 + '0123456789abcdef'.indexOf(ch.toLowerCase());\n    }\n\n    if (code > 1114111 || ch !== '}') {\n      throwUnexpectedToken();\n    }\n\n    // UTF-16 Encoding\n    if (code <= 65535) {\n      return String.fromCharCode(code);\n    }\n    cu1 = (code - 65536 >> 10) + 55296;\n    cu2 = (code - 65536 & 1023) + 56320;\n    return String.fromCharCode(cu1, cu2);\n  }\n\n  function getEscapedIdentifier() {\n    var ch, id;\n\n    ch = source.charCodeAt(index++);\n    id = String.fromCharCode(ch);\n\n    // '\\u' (U+005C, U+0075) denotes an escaped character.\n    if (ch === 92) {\n      if (source.charCodeAt(index) !== 117) {\n        throwUnexpectedToken();\n      }\n      ++index;\n      ch = scanHexEscape('u');\n      if (!ch || ch === '\\\\' || !isIdentifierStart(ch.charCodeAt(0))) {\n        throwUnexpectedToken();\n      }\n      id = ch;\n    }\n\n    while (index < length) {\n      ch = source.charCodeAt(index);\n      if (!isIdentifierPart(ch)) {\n        break;\n      }\n      ++index;\n      id += String.fromCharCode(ch);\n\n      // '\\u' (U+005C, U+0075) denotes an escaped character.\n      if (ch === 92) {\n        id = id.substr(0, id.length - 1);\n        if (source.charCodeAt(index) !== 117) {\n          throwUnexpectedToken();\n        }\n        ++index;\n        ch = scanHexEscape('u');\n        if (!ch || ch === '\\\\' || !isIdentifierPart(ch.charCodeAt(0))) {\n          throwUnexpectedToken();\n        }\n        id += ch;\n      }\n    }\n\n    return id;\n  }\n\n  function getIdentifier() {\n    var start, ch;\n\n    start = index++;\n    while (index < length) {\n      ch = source.charCodeAt(index);\n      if (ch === 92) {\n        // Blackslash (U+005C) marks Unicode escape sequence.\n        index = start;\n        return getEscapedIdentifier();\n      }\n      if (isIdentifierPart(ch)) {\n        ++index;\n      } else {\n        break;\n      }\n    }\n\n    return source.slice(start, index);\n  }\n\n  function scanIdentifier() {\n    var start, id, type;\n\n    start = index;\n\n    // Backslash (U+005C) starts an escaped character.\n    id = source.charCodeAt(index) === 92 ? getEscapedIdentifier() : getIdentifier();\n\n    // There is no keyword or literal with only one character.\n    // Thus, it must be an identifier.\n    if (id.length === 1) {\n      type = Token.Identifier;\n    } else if (isKeyword(id)) {\n      type = Token.Keyword;\n    } else if (id === 'null') {\n      type = Token.NullLiteral;\n    } else if (id === 'true' || id === 'false') {\n      type = Token.BooleanLiteral;\n    } else {\n      type = Token.Identifier;\n    }\n\n    return {\n      type: type,\n      value: id,\n      lineNumber: lineNumber,\n      lineStart: lineStart,\n      start: start,\n      end: index\n    };\n  }\n\n  // 7.7 Punctuators\n  function scanPunctuator() {\n    var token, str;\n\n    token = {\n      type: Token.Punctuator,\n      value: '',\n      lineNumber: lineNumber,\n      lineStart: lineStart,\n      start: index,\n      end: index\n    };\n\n    // Check for most common single-character punctuators.\n    str = source[index];\n    switch (str) {\n      case '(':\n        if (extra.tokenize) {\n          extra.openParenToken = extra.tokens.length;\n        }\n        ++index;\n        break;\n\n      case '{':\n        if (extra.tokenize) {\n          extra.openCurlyToken = extra.tokens.length;\n        }\n        state.curlyStack.push('{');\n        ++index;\n        break;\n\n      case '.':\n        ++index;\n        if (source[index] === '.' && source[index + 1] === '.') {\n          // Spread operator: ...\n          index += 2;\n          str = '...';\n        }\n        break;\n\n      case '}':\n        ++index;\n        state.curlyStack.pop();\n        break;\n      case ')':\n      case ';':\n      case ',':\n      case '[':\n      case ']':\n      case ':':\n      case '?':\n      case '~':\n        ++index;\n        break;\n\n      default:\n        // 4-character punctuator.\n        str = source.substr(index, 4);\n        if (str === '>>>=') {\n          index += 4;\n        } else {\n          // 3-character punctuators.\n          str = str.substr(0, 3);\n          if (str === '===' || str === '!==' || str === '>>>' || str === '<<=' || str === '>>=') {\n            index += 3;\n          } else {\n            // 2-character punctuators.\n            str = str.substr(0, 2);\n            if (str === '&&' || str === '||' || str === '==' || str === '!=' || str === '+=' || str === '-=' || str === '*=' || str === '/=' || str === '++' || str === '--' || str === '<<' || str === '>>' || str === '&=' || str === '|=' || str === '^=' || str === '%=' || str === '<=' || str === '>=' || str === '=>') {\n              index += 2;\n            } else {\n              // 1-character punctuators.\n              str = source[index];\n              if ('<>=!+-*%&|^/'.indexOf(str) >= 0) {\n                ++index;\n              }\n            }\n          }\n        }\n    }\n\n    if (index === token.start) {\n      throwUnexpectedToken();\n    }\n\n    token.end = index;\n    token.value = str;\n    return token;\n  }\n\n  // 7.8.3 Numeric Literals\n  function scanHexLiteral(start) {\n    var number = '';\n\n    while (index < length) {\n      if (!isHexDigit(source[index])) {\n        break;\n      }\n      number += source[index++];\n    }\n\n    if (number.length === 0) {\n      throwUnexpectedToken();\n    }\n\n    if (isIdentifierStart(source.charCodeAt(index))) {\n      throwUnexpectedToken();\n    }\n\n    return {\n      type: Token.NumericLiteral,\n      value: parseInt('0x' + number, 16),\n      lineNumber: lineNumber,\n      lineStart: lineStart,\n      start: start,\n      end: index\n    };\n  }\n\n  function scanBinaryLiteral(start) {\n    var ch, number;\n\n    number = '';\n\n    while (index < length) {\n      ch = source[index];\n      if (ch !== '0' && ch !== '1') {\n        break;\n      }\n      number += source[index++];\n    }\n\n    if (number.length === 0) {\n      // only 0b or 0B\n      throwUnexpectedToken();\n    }\n\n    if (index < length) {\n      ch = source.charCodeAt(index);\n      /* istanbul ignore else */\n      if (isIdentifierStart(ch) || isDecimalDigit(ch)) {\n        throwUnexpectedToken();\n      }\n    }\n\n    return {\n      type: Token.NumericLiteral,\n      value: parseInt(number, 2),\n      lineNumber: lineNumber,\n      lineStart: lineStart,\n      start: start,\n      end: index\n    };\n  }\n\n  function scanOctalLiteral(prefix, start) {\n    var number, octal;\n\n    if (isOctalDigit(prefix)) {\n      octal = true;\n      number = '0' + source[index++];\n    } else {\n      octal = false;\n      ++index;\n      number = '';\n    }\n\n    while (index < length) {\n      if (!isOctalDigit(source[index])) {\n        break;\n      }\n      number += source[index++];\n    }\n\n    if (!octal && number.length === 0) {\n      // only 0o or 0O\n      throwUnexpectedToken();\n    }\n\n    if (isIdentifierStart(source.charCodeAt(index)) || isDecimalDigit(source.charCodeAt(index))) {\n      throwUnexpectedToken();\n    }\n\n    return {\n      type: Token.NumericLiteral,\n      value: parseInt(number, 8),\n      octal: octal,\n      lineNumber: lineNumber,\n      lineStart: lineStart,\n      start: start,\n      end: index\n    };\n  }\n\n  function isImplicitOctalLiteral() {\n    var i, ch;\n\n    // Implicit octal, unless there is a non-octal digit.\n    // (Annex B.1.1 on Numeric Literals)\n    for (i = index + 1; i < length; ++i) {\n      ch = source[i];\n      if (ch === '8' || ch === '9') {\n        return false;\n      }\n      if (!isOctalDigit(ch)) {\n        return true;\n      }\n    }\n\n    return true;\n  }\n\n  function scanNumericLiteral() {\n    var number, start, ch;\n\n    ch = source[index];\n    assert(isDecimalDigit(ch.charCodeAt(0)) || ch === '.', 'Numeric literal must start with a decimal digit or a decimal point');\n\n    start = index;\n    number = '';\n    if (ch !== '.') {\n      number = source[index++];\n      ch = source[index];\n\n      // Hex number starts with '0x'.\n      // Octal number starts with '0'.\n      // Octal number in ES6 starts with '0o'.\n      // Binary number in ES6 starts with '0b'.\n      if (number === '0') {\n        if (ch === 'x' || ch === 'X') {\n          ++index;\n          return scanHexLiteral(start);\n        }\n        if (ch === 'b' || ch === 'B') {\n          ++index;\n          return scanBinaryLiteral(start);\n        }\n        if (ch === 'o' || ch === 'O') {\n          return scanOctalLiteral(ch, start);\n        }\n\n        if (isOctalDigit(ch)) {\n          if (isImplicitOctalLiteral()) {\n            return scanOctalLiteral(ch, start);\n          }\n        }\n      }\n\n      while (isDecimalDigit(source.charCodeAt(index))) {\n        number += source[index++];\n      }\n      ch = source[index];\n    }\n\n    if (ch === '.') {\n      number += source[index++];\n      while (isDecimalDigit(source.charCodeAt(index))) {\n        number += source[index++];\n      }\n      ch = source[index];\n    }\n\n    if (ch === 'e' || ch === 'E') {\n      number += source[index++];\n\n      ch = source[index];\n      if (ch === '+' || ch === '-') {\n        number += source[index++];\n      }\n      if (isDecimalDigit(source.charCodeAt(index))) {\n        while (isDecimalDigit(source.charCodeAt(index))) {\n          number += source[index++];\n        }\n      } else {\n        throwUnexpectedToken();\n      }\n    }\n\n    if (isIdentifierStart(source.charCodeAt(index))) {\n      throwUnexpectedToken();\n    }\n\n    return {\n      type: Token.NumericLiteral,\n      value: parseFloat(number),\n      lineNumber: lineNumber,\n      lineStart: lineStart,\n      start: start,\n      end: index\n    };\n  }\n\n  // 7.8.4 String Literals\n  function scanStringLiteral() {\n    var str = '',\n        quote,\n        start,\n        ch,\n        unescaped,\n        octToDec,\n        octal = false;\n\n    quote = source[index];\n    assert(quote === '\\'' || quote === '\"', 'String literal must starts with a quote');\n\n    start = index;\n    ++index;\n\n    while (index < length) {\n      ch = source[index++];\n\n      if (ch === quote) {\n        quote = '';\n        break;\n      } else if (ch === '\\\\') {\n        ch = source[index++];\n        if (!ch || !isLineTerminator(ch.charCodeAt(0))) {\n          switch (ch) {\n            case 'u':\n            case 'x':\n              if (source[index] === '{') {\n                ++index;\n                str += scanUnicodeCodePointEscape();\n              } else {\n                unescaped = scanHexEscape(ch);\n                if (!unescaped) {\n                  throw throwUnexpectedToken();\n                }\n                str += unescaped;\n              }\n              break;\n            case 'n':\n              str += '\\n';\n              break;\n            case 'r':\n              str += '\\r';\n              break;\n            case 't':\n              str += '\\t';\n              break;\n            case 'b':\n              str += '\\b';\n              break;\n            case 'f':\n              str += '\\f';\n              break;\n            case 'v':\n              str += '\\x0B';\n              break;\n            case '8':\n            case '9':\n              throw throwUnexpectedToken();\n\n            default:\n              if (isOctalDigit(ch)) {\n                octToDec = octalToDecimal(ch);\n\n                octal = octToDec.octal || octal;\n                str += String.fromCharCode(octToDec.code);\n              } else {\n                str += ch;\n              }\n              break;\n          }\n        } else {\n          ++lineNumber;\n          if (ch === '\\r' && source[index] === '\\n') {\n            ++index;\n          }\n          lineStart = index;\n        }\n      } else if (isLineTerminator(ch.charCodeAt(0))) {\n        break;\n      } else {\n        str += ch;\n      }\n    }\n\n    if (quote !== '') {\n      throwUnexpectedToken();\n    }\n\n    return {\n      type: Token.StringLiteral,\n      value: str,\n      octal: octal,\n      lineNumber: startLineNumber,\n      lineStart: startLineStart,\n      start: start,\n      end: index\n    };\n  }\n\n  function scanTemplate() {\n    var cooked = '',\n        ch,\n        start,\n        rawOffset,\n        terminated,\n        head,\n        tail,\n        restore,\n        unescaped;\n\n    terminated = false;\n    tail = false;\n    start = index;\n    head = source[index] === '`';\n    rawOffset = 2;\n\n    ++index;\n\n    while (index < length) {\n      ch = source[index++];\n      if (ch === '`') {\n        rawOffset = 1;\n        tail = true;\n        terminated = true;\n        break;\n      } else if (ch === '$') {\n        if (source[index] === '{') {\n          state.curlyStack.push('${');\n          ++index;\n          terminated = true;\n          break;\n        }\n        cooked += ch;\n      } else if (ch === '\\\\') {\n        ch = source[index++];\n        if (!isLineTerminator(ch.charCodeAt(0))) {\n          switch (ch) {\n            case 'n':\n              cooked += '\\n';\n              break;\n            case 'r':\n              cooked += '\\r';\n              break;\n            case 't':\n              cooked += '\\t';\n              break;\n            case 'u':\n            case 'x':\n              if (source[index] === '{') {\n                ++index;\n                cooked += scanUnicodeCodePointEscape();\n              } else {\n                restore = index;\n                unescaped = scanHexEscape(ch);\n                if (unescaped) {\n                  cooked += unescaped;\n                } else {\n                  index = restore;\n                  cooked += ch;\n                }\n              }\n              break;\n            case 'b':\n              cooked += '\\b';\n              break;\n            case 'f':\n              cooked += '\\f';\n              break;\n            case 'v':\n              cooked += '\\x0B';\n              break;\n\n            default:\n              if (ch === '0') {\n                if (isDecimalDigit(source.charCodeAt(index))) {\n                  // Illegal: \\01 \\02 and so on\n                  throwError(Messages.TemplateOctalLiteral);\n                }\n                cooked += '\\0';\n              } else if (isOctalDigit(ch)) {\n                // Illegal: \\1 \\2\n                throwError(Messages.TemplateOctalLiteral);\n              } else {\n                cooked += ch;\n              }\n              break;\n          }\n        } else {\n          ++lineNumber;\n          if (ch === '\\r' && source[index] === '\\n') {\n            ++index;\n          }\n          lineStart = index;\n        }\n      } else if (isLineTerminator(ch.charCodeAt(0))) {\n        ++lineNumber;\n        if (ch === '\\r' && source[index] === '\\n') {\n          ++index;\n        }\n        lineStart = index;\n        cooked += '\\n';\n      } else {\n        cooked += ch;\n      }\n    }\n\n    if (!terminated) {\n      throwUnexpectedToken();\n    }\n\n    if (!head) {\n      state.curlyStack.pop();\n    }\n\n    return {\n      type: Token.Template,\n      value: {\n        cooked: cooked,\n        raw: source.slice(start + 1, index - rawOffset)\n      },\n      head: head,\n      tail: tail,\n      lineNumber: lineNumber,\n      lineStart: lineStart,\n      start: start,\n      end: index\n    };\n  }\n\n  function testRegExp(pattern, flags) {\n    // The BMP character to use as a replacement for astral symbols when\n    // translating an ES6 \"u\"-flagged pattern to an ES5-compatible\n    // approximation.\n    // Note: replacing with '\\uFFFF' enables false positives in unlikely\n    // scenarios. For example, `[\\u{1044f}-\\u{10440}]` is an invalid\n    // pattern that would not be detected by this substitution.\n    var astralSubstitute = '\\uFFFF',\n        tmp = pattern;\n\n    if (flags.indexOf('u') >= 0) {\n      tmp = tmp.replace(/\\\\u\\{([0-9a-fA-F]+)\\}|\\\\u([a-fA-F0-9]{4})/g, function ($0, $1, $2) {\n        var codePoint = parseInt($1 || $2, 16);\n        if (codePoint > 1114111) {\n          throwUnexpectedToken(null, Messages.InvalidRegExp);\n        }\n        if (codePoint <= 65535) {\n          return String.fromCharCode(codePoint);\n        }\n        return astralSubstitute;\n      }).replace(/[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g, astralSubstitute);\n    }\n\n    // First, detect invalid regular expressions.\n    try {\n      RegExp(tmp);\n    } catch (e) {\n      throwUnexpectedToken(null, Messages.InvalidRegExp);\n    }\n\n    // Return a regular expression object for this pattern-flag pair, or\n    // `null` in case the current environment doesn't support the flags it\n    // uses.\n    try {\n      return new RegExp(pattern, flags);\n    } catch (exception) {\n      return null;\n    }\n  }\n\n  function scanRegExpBody() {\n    var ch, str, classMarker, terminated, body;\n\n    ch = source[index];\n    assert(ch === '/', 'Regular expression literal must start with a slash');\n    str = source[index++];\n\n    classMarker = false;\n    terminated = false;\n    while (index < length) {\n      ch = source[index++];\n      str += ch;\n      if (ch === '\\\\') {\n        ch = source[index++];\n        // ECMA-262 7.8.5\n        if (isLineTerminator(ch.charCodeAt(0))) {\n          throwUnexpectedToken(null, Messages.UnterminatedRegExp);\n        }\n        str += ch;\n      } else if (isLineTerminator(ch.charCodeAt(0))) {\n        throwUnexpectedToken(null, Messages.UnterminatedRegExp);\n      } else if (classMarker) {\n        if (ch === ']') {\n          classMarker = false;\n        }\n      } else {\n        if (ch === '/') {\n          terminated = true;\n          break;\n        } else if (ch === '[') {\n          classMarker = true;\n        }\n      }\n    }\n\n    if (!terminated) {\n      throwUnexpectedToken(null, Messages.UnterminatedRegExp);\n    }\n\n    // Exclude leading and trailing slash.\n    body = str.substr(1, str.length - 2);\n    return {\n      value: body,\n      literal: str\n    };\n  }\n\n  function scanRegExpFlags() {\n    var ch, str, flags, restore;\n\n    str = '';\n    flags = '';\n    while (index < length) {\n      ch = source[index];\n      if (!isIdentifierPart(ch.charCodeAt(0))) {\n        break;\n      }\n\n      ++index;\n      if (ch === '\\\\' && index < length) {\n        ch = source[index];\n        if (ch === 'u') {\n          ++index;\n          restore = index;\n          ch = scanHexEscape('u');\n          if (ch) {\n            flags += ch;\n            for (str += '\\\\u'; restore < index; ++restore) {\n              str += source[restore];\n            }\n          } else {\n            index = restore;\n            flags += 'u';\n            str += '\\\\u';\n          }\n          tolerateUnexpectedToken();\n        } else {\n          str += '\\\\';\n          tolerateUnexpectedToken();\n        }\n      } else {\n        flags += ch;\n        str += ch;\n      }\n    }\n\n    return {\n      value: flags,\n      literal: str\n    };\n  }\n\n  function scanRegExp() {\n    scanning = true;\n    var start, body, flags, value;\n\n    lookahead = null;\n    skipComment();\n    start = index;\n\n    body = scanRegExpBody();\n    flags = scanRegExpFlags();\n    value = testRegExp(body.value, flags.value);\n    scanning = false;\n    if (extra.tokenize) {\n      return {\n        type: Token.RegularExpression,\n        value: value,\n        regex: {\n          pattern: body.value,\n          flags: flags.value\n        },\n        lineNumber: lineNumber,\n        lineStart: lineStart,\n        start: start,\n        end: index\n      };\n    }\n\n    return {\n      literal: body.literal + flags.literal,\n      value: value,\n      regex: {\n        pattern: body.value,\n        flags: flags.value\n      },\n      start: start,\n      end: index\n    };\n  }\n\n  function collectRegex() {\n    var pos, loc, regex, token;\n\n    skipComment();\n\n    pos = index;\n    loc = {\n      start: {\n        line: lineNumber,\n        column: index - lineStart\n      }\n    };\n\n    regex = scanRegExp();\n\n    loc.end = {\n      line: lineNumber,\n      column: index - lineStart\n    };\n\n    /* istanbul ignore next */\n    if (!extra.tokenize) {\n      // Pop the previous token, which is likely '/' or '/='\n      if (extra.tokens.length > 0) {\n        token = extra.tokens[extra.tokens.length - 1];\n        if (token.range[0] === pos && token.type === 'Punctuator') {\n          if (token.value === '/' || token.value === '/=') {\n            extra.tokens.pop();\n          }\n        }\n      }\n\n      extra.tokens.push({\n        type: 'RegularExpression',\n        value: regex.literal,\n        regex: regex.regex,\n        range: [pos, index],\n        loc: loc\n      });\n    }\n\n    return regex;\n  }\n\n  function isIdentifierName(token) {\n    return token.type === Token.Identifier || token.type === Token.Keyword || token.type === Token.BooleanLiteral || token.type === Token.NullLiteral;\n  }\n\n  function advanceSlash() {\n    var prevToken, checkToken;\n    // Using the following algorithm:\n    // https://github.com/mozilla/sweet.js/wiki/design\n    prevToken = extra.tokens[extra.tokens.length - 1];\n    if (!prevToken) {\n      // Nothing before that: it cannot be a division.\n      return collectRegex();\n    }\n    if (prevToken.type === 'Punctuator') {\n      if (prevToken.value === ']') {\n        return scanPunctuator();\n      }\n      if (prevToken.value === ')') {\n        checkToken = extra.tokens[extra.openParenToken - 1];\n        if (checkToken && checkToken.type === 'Keyword' && (checkToken.value === 'if' || checkToken.value === 'while' || checkToken.value === 'for' || checkToken.value === 'with')) {\n          return collectRegex();\n        }\n        return scanPunctuator();\n      }\n      if (prevToken.value === '}') {\n        // Dividing a function by anything makes little sense,\n        // but we have to check for that.\n        if (extra.tokens[extra.openCurlyToken - 3] && extra.tokens[extra.openCurlyToken - 3].type === 'Keyword') {\n          // Anonymous function.\n          checkToken = extra.tokens[extra.openCurlyToken - 4];\n          if (!checkToken) {\n            return scanPunctuator();\n          }\n        } else if (extra.tokens[extra.openCurlyToken - 4] && extra.tokens[extra.openCurlyToken - 4].type === 'Keyword') {\n          // Named function.\n          checkToken = extra.tokens[extra.openCurlyToken - 5];\n          if (!checkToken) {\n            return collectRegex();\n          }\n        } else {\n          return scanPunctuator();\n        }\n        // checkToken determines whether the function is\n        // a declaration or an expression.\n        if (FnExprTokens.indexOf(checkToken.value) >= 0) {\n          // It is an expression.\n          return scanPunctuator();\n        }\n        // It is a declaration.\n        return collectRegex();\n      }\n      return collectRegex();\n    }\n    if (prevToken.type === 'Keyword' && prevToken.value !== 'this') {\n      return collectRegex();\n    }\n    return scanPunctuator();\n  }\n\n  function advance() {\n    var ch, token;\n\n    if (index >= length) {\n      return {\n        type: Token.EOF,\n        lineNumber: lineNumber,\n        lineStart: lineStart,\n        start: index,\n        end: index\n      };\n    }\n\n    ch = source.charCodeAt(index);\n\n    if (isIdentifierStart(ch)) {\n      token = scanIdentifier();\n      if (strict && isStrictModeReservedWord(token.value)) {\n        token.type = Token.Keyword;\n      }\n      return token;\n    }\n\n    // Very common: ( and ) and ;\n    if (ch === 40 || ch === 41 || ch === 59) {\n      return scanPunctuator();\n    }\n\n    // String literal starts with single quote (U+0027) or double quote (U+0022).\n    if (ch === 39 || ch === 34) {\n      return scanStringLiteral();\n    }\n\n    // Dot (.) U+002E can also start a floating-point number, hence the need\n    // to check the next character.\n    if (ch === 46) {\n      if (isDecimalDigit(source.charCodeAt(index + 1))) {\n        return scanNumericLiteral();\n      }\n      return scanPunctuator();\n    }\n\n    if (isDecimalDigit(ch)) {\n      return scanNumericLiteral();\n    }\n\n    // Slash (/) U+002F can also start a regex.\n    if (extra.tokenize && ch === 47) {\n      return advanceSlash();\n    }\n\n    // Template literals start with ` (U+0060) for template head\n    // or } (U+007D) for template middle or template tail.\n    if (ch === 96 || ch === 125 && state.curlyStack[state.curlyStack.length - 1] === '${') {\n      return scanTemplate();\n    }\n\n    return scanPunctuator();\n  }\n\n  function collectToken() {\n    var loc, token, value, entry;\n\n    loc = {\n      start: {\n        line: lineNumber,\n        column: index - lineStart\n      }\n    };\n\n    token = advance();\n    loc.end = {\n      line: lineNumber,\n      column: index - lineStart\n    };\n\n    if (token.type !== Token.EOF) {\n      value = source.slice(token.start, token.end);\n      entry = {\n        type: TokenName[token.type],\n        value: value,\n        range: [token.start, token.end],\n        loc: loc\n      };\n      if (token.regex) {\n        entry.regex = {\n          pattern: token.regex.pattern,\n          flags: token.regex.flags\n        };\n      }\n      extra.tokens.push(entry);\n    }\n\n    return token;\n  }\n\n  function lex() {\n    var token;\n    scanning = true;\n\n    lastIndex = index;\n    lastLineNumber = lineNumber;\n    lastLineStart = lineStart;\n\n    skipComment();\n\n    token = lookahead;\n\n    startIndex = index;\n    startLineNumber = lineNumber;\n    startLineStart = lineStart;\n\n    lookahead = typeof extra.tokens !== 'undefined' ? collectToken() : advance();\n    scanning = false;\n    return token;\n  }\n\n  function peek() {\n    scanning = true;\n\n    skipComment();\n\n    lastIndex = index;\n    lastLineNumber = lineNumber;\n    lastLineStart = lineStart;\n\n    startIndex = index;\n    startLineNumber = lineNumber;\n    startLineStart = lineStart;\n\n    lookahead = typeof extra.tokens !== 'undefined' ? collectToken() : advance();\n    scanning = false;\n  }\n\n  function Position() {\n    this.line = startLineNumber;\n    this.column = startIndex - startLineStart;\n  }\n\n  function SourceLocation() {\n    this.start = new Position();\n    this.end = null;\n  }\n\n  function WrappingSourceLocation(startToken) {\n    this.start = {\n      line: startToken.lineNumber,\n      column: startToken.start - startToken.lineStart\n    };\n    this.end = null;\n  }\n\n  function Node() {\n    if (extra.range) {\n      this.range = [startIndex, 0];\n    }\n    if (extra.loc) {\n      this.loc = new SourceLocation();\n    }\n  }\n\n  function WrappingNode(startToken) {\n    if (extra.range) {\n      this.range = [startToken.start, 0];\n    }\n    if (extra.loc) {\n      this.loc = new WrappingSourceLocation(startToken);\n    }\n  }\n\n  WrappingNode.prototype = Node.prototype = {\n    processComment: function processComment() {\n      var lastChild,\n          leadingComments,\n          trailingComments,\n          bottomRight = extra.bottomRightStack,\n          i,\n          comment,\n          last = bottomRight[bottomRight.length - 1];\n\n      if (this.type === Syntax.Program) {\n        if (this.body.length > 0) {\n          return;\n        }\n      }\n\n      if (extra.trailingComments.length > 0) {\n        trailingComments = [];\n        for (i = extra.trailingComments.length - 1; i >= 0; --i) {\n          comment = extra.trailingComments[i];\n          if (comment.range[0] >= this.range[1]) {\n            trailingComments.unshift(comment);\n            extra.trailingComments.splice(i, 1);\n          }\n        }\n        extra.trailingComments = [];\n      } else {\n        if (last && last.trailingComments && last.trailingComments[0].range[0] >= this.range[1]) {\n          trailingComments = last.trailingComments;\n          delete last.trailingComments;\n        }\n      }\n\n      // Eating the stack.\n      while (last && last.range[0] >= this.range[0]) {\n        lastChild = bottomRight.pop();\n        last = bottomRight[bottomRight.length - 1];\n      }\n\n      if (lastChild) {\n        if (lastChild.leadingComments) {\n          leadingComments = [];\n          for (i = lastChild.leadingComments.length - 1; i >= 0; --i) {\n            comment = lastChild.leadingComments[i];\n            if (comment.range[1] <= this.range[0]) {\n              leadingComments.unshift(comment);\n              lastChild.leadingComments.splice(i, 1);\n            }\n          }\n\n          if (!lastChild.leadingComments.length) {\n            lastChild.leadingComments = undefined;\n          }\n        }\n      } else if (extra.leadingComments.length > 0) {\n        leadingComments = [];\n        for (i = extra.leadingComments.length - 1; i >= 0; --i) {\n          comment = extra.leadingComments[i];\n          if (comment.range[1] <= this.range[0]) {\n            leadingComments.unshift(comment);\n            extra.leadingComments.splice(i, 1);\n          }\n        }\n      }\n\n      if (leadingComments && leadingComments.length > 0) {\n        this.leadingComments = leadingComments;\n      }\n      if (trailingComments && trailingComments.length > 0) {\n        this.trailingComments = trailingComments;\n      }\n\n      bottomRight.push(this);\n    },\n    finish: function finish() {\n      if (extra.range) {\n        this.range[1] = lastIndex;\n      }\n      if (extra.loc) {\n        this.loc.end = {\n          line: lastLineNumber,\n          column: lastIndex - lastLineStart\n        };\n        if (extra.source) {\n          this.loc.source = extra.source;\n        }\n      }\n\n      if (extra.attachComment) {\n        this.processComment();\n      }\n    },\n    finishArrayExpression: function finishArrayExpression(elements) {\n      this.type = Syntax.ArrayExpression;\n      this.elements = elements;\n      this.finish();\n      return this;\n    },\n    finishArrayPattern: function finishArrayPattern(elements) {\n      this.type = Syntax.ArrayPattern;\n      this.elements = elements;\n      this.finish();\n      return this;\n    },\n    finishArrowFunctionExpression: function finishArrowFunctionExpression(params, defaults, body, expression) {\n      this.type = Syntax.ArrowFunctionExpression;\n      this.id = null;\n      this.params = params;\n      this.defaults = defaults;\n      this.body = body;\n      this.generator = false;\n      this.expression = expression;\n      this.finish();\n      return this;\n    },\n    finishAssignmentExpression: function finishAssignmentExpression(operator, left, right) {\n      this.type = Syntax.AssignmentExpression;\n      this.operator = operator;\n      this.left = left;\n      this.right = right;\n      this.finish();\n      return this;\n    },\n    finishAssignmentPattern: function finishAssignmentPattern(left, right) {\n      this.type = Syntax.AssignmentPattern;\n      this.left = left;\n      this.right = right;\n      this.finish();\n      return this;\n    },\n    finishBinaryExpression: function finishBinaryExpression(operator, left, right) {\n      this.type = operator === '||' || operator === '&&' ? Syntax.LogicalExpression : Syntax.BinaryExpression;\n      this.operator = operator;\n      this.left = left;\n      this.right = right;\n      this.finish();\n      return this;\n    },\n    finishBlockStatement: function finishBlockStatement(body) {\n      this.type = Syntax.BlockStatement;\n      this.body = body;\n      this.finish();\n      return this;\n    },\n    finishBreakStatement: function finishBreakStatement(label) {\n      this.type = Syntax.BreakStatement;\n      this.label = label;\n      this.finish();\n      return this;\n    },\n    finishCallExpression: function finishCallExpression(callee, args) {\n      this.type = Syntax.CallExpression;\n      this.callee = callee;\n      this.arguments = args;\n      this.finish();\n      return this;\n    },\n    finishCatchClause: function finishCatchClause(param, body) {\n      this.type = Syntax.CatchClause;\n      this.param = param;\n      this.body = body;\n      this.finish();\n      return this;\n    },\n    finishClassBody: function finishClassBody(body) {\n      this.type = Syntax.ClassBody;\n      this.body = body;\n      this.finish();\n      return this;\n    },\n    finishClassDeclaration: function finishClassDeclaration(id, superClass, body) {\n      this.type = Syntax.ClassDeclaration;\n      this.id = id;\n      this.superClass = superClass;\n      this.body = body;\n      this.finish();\n      return this;\n    },\n    finishClassExpression: function finishClassExpression(id, superClass, body) {\n      this.type = Syntax.ClassExpression;\n      this.id = id;\n      this.superClass = superClass;\n      this.body = body;\n      this.finish();\n      return this;\n    },\n    finishConditionalExpression: function finishConditionalExpression(test, consequent, alternate) {\n      this.type = Syntax.ConditionalExpression;\n      this.test = test;\n      this.consequent = consequent;\n      this.alternate = alternate;\n      this.finish();\n      return this;\n    },\n    finishContinueStatement: function finishContinueStatement(label) {\n      this.type = Syntax.ContinueStatement;\n      this.label = label;\n      this.finish();\n      return this;\n    },\n    finishDebuggerStatement: function finishDebuggerStatement() {\n      this.type = Syntax.DebuggerStatement;\n      this.finish();\n      return this;\n    },\n    finishDoWhileStatement: function finishDoWhileStatement(body, test) {\n      this.type = Syntax.DoWhileStatement;\n      this.body = body;\n      this.test = test;\n      this.finish();\n      return this;\n    },\n    finishEmptyStatement: function finishEmptyStatement() {\n      this.type = Syntax.EmptyStatement;\n      this.finish();\n      return this;\n    },\n    finishExpressionStatement: function finishExpressionStatement(expression) {\n      this.type = Syntax.ExpressionStatement;\n      this.expression = expression;\n      this.finish();\n      return this;\n    },\n    finishForStatement: function finishForStatement(init, test, update, body) {\n      this.type = Syntax.ForStatement;\n      this.init = init;\n      this.test = test;\n      this.update = update;\n      this.body = body;\n      this.finish();\n      return this;\n    },\n    finishForOfStatement: function finishForOfStatement(left, right, body) {\n      this.type = Syntax.ForOfStatement;\n      this.left = left;\n      this.right = right;\n      this.body = body;\n      this.finish();\n      return this;\n    },\n    finishForInStatement: function finishForInStatement(left, right, body) {\n      this.type = Syntax.ForInStatement;\n      this.left = left;\n      this.right = right;\n      this.body = body;\n      this.each = false;\n      this.finish();\n      return this;\n    },\n    finishFunctionDeclaration: function finishFunctionDeclaration(id, params, defaults, body, generator) {\n      this.type = Syntax.FunctionDeclaration;\n      this.id = id;\n      this.params = params;\n      this.defaults = defaults;\n      this.body = body;\n      this.generator = generator;\n      this.expression = false;\n      this.finish();\n      return this;\n    },\n    finishFunctionExpression: function finishFunctionExpression(id, params, defaults, body, generator) {\n      this.type = Syntax.FunctionExpression;\n      this.id = id;\n      this.params = params;\n      this.defaults = defaults;\n      this.body = body;\n      this.generator = generator;\n      this.expression = false;\n      this.finish();\n      return this;\n    },\n    finishIdentifier: function finishIdentifier(name) {\n      this.type = Syntax.Identifier;\n      this.name = name;\n      this.finish();\n      return this;\n    },\n    finishIfStatement: function finishIfStatement(test, consequent, alternate) {\n      this.type = Syntax.IfStatement;\n      this.test = test;\n      this.consequent = consequent;\n      this.alternate = alternate;\n      this.finish();\n      return this;\n    },\n    finishLabeledStatement: function finishLabeledStatement(label, body) {\n      this.type = Syntax.LabeledStatement;\n      this.label = label;\n      this.body = body;\n      this.finish();\n      return this;\n    },\n    finishLiteral: function finishLiteral(token) {\n      this.type = Syntax.Literal;\n      this.value = token.value;\n      this.raw = source.slice(token.start, token.end);\n      if (token.regex) {\n        this.regex = token.regex;\n      }\n      this.finish();\n      return this;\n    },\n    finishMemberExpression: function finishMemberExpression(accessor, object, property) {\n      this.type = Syntax.MemberExpression;\n      this.computed = accessor === '[';\n      this.object = object;\n      this.property = property;\n      this.finish();\n      return this;\n    },\n    finishNewExpression: function finishNewExpression(callee, args) {\n      this.type = Syntax.NewExpression;\n      this.callee = callee;\n      this.arguments = args;\n      this.finish();\n      return this;\n    },\n    finishObjectExpression: function finishObjectExpression(properties) {\n      this.type = Syntax.ObjectExpression;\n      this.properties = properties;\n      this.finish();\n      return this;\n    },\n    finishObjectPattern: function finishObjectPattern(properties) {\n      this.type = Syntax.ObjectPattern;\n      this.properties = properties;\n      this.finish();\n      return this;\n    },\n    finishPostfixExpression: function finishPostfixExpression(operator, argument) {\n      this.type = Syntax.UpdateExpression;\n      this.operator = operator;\n      this.argument = argument;\n      this.prefix = false;\n      this.finish();\n      return this;\n    },\n    finishProgram: function finishProgram(body) {\n      this.type = Syntax.Program;\n      this.body = body;\n      if (sourceType === 'module') {\n        // very restrictive for now\n        this.sourceType = sourceType;\n      }\n      this.finish();\n      return this;\n    },\n    finishProperty: function finishProperty(kind, key, computed, value, method, shorthand) {\n      this.type = Syntax.Property;\n      this.key = key;\n      this.computed = computed;\n      this.value = value;\n      this.kind = kind;\n      this.method = method;\n      this.shorthand = shorthand;\n      this.finish();\n      return this;\n    },\n    finishRestElement: function finishRestElement(argument) {\n      this.type = Syntax.RestElement;\n      this.argument = argument;\n      this.finish();\n      return this;\n    },\n    finishReturnStatement: function finishReturnStatement(argument) {\n      this.type = Syntax.ReturnStatement;\n      this.argument = argument;\n      this.finish();\n      return this;\n    },\n    finishSequenceExpression: function finishSequenceExpression(expressions) {\n      this.type = Syntax.SequenceExpression;\n      this.expressions = expressions;\n      this.finish();\n      return this;\n    },\n    finishSpreadElement: function finishSpreadElement(argument) {\n      this.type = Syntax.SpreadElement;\n      this.argument = argument;\n      this.finish();\n      return this;\n    },\n    finishSwitchCase: function finishSwitchCase(test, consequent) {\n      this.type = Syntax.SwitchCase;\n      this.test = test;\n      this.consequent = consequent;\n      this.finish();\n      return this;\n    },\n    finishSuper: function finishSuper() {\n      this.type = Syntax.Super;\n      this.finish();\n      return this;\n    },\n    finishSwitchStatement: function finishSwitchStatement(discriminant, cases) {\n      this.type = Syntax.SwitchStatement;\n      this.discriminant = discriminant;\n      this.cases = cases;\n      this.finish();\n      return this;\n    },\n    finishTaggedTemplateExpression: function finishTaggedTemplateExpression(tag, quasi) {\n      this.type = Syntax.TaggedTemplateExpression;\n      this.tag = tag;\n      this.quasi = quasi;\n      this.finish();\n      return this;\n    },\n    finishTemplateElement: function finishTemplateElement(value, tail) {\n      this.type = Syntax.TemplateElement;\n      this.value = value;\n      this.tail = tail;\n      this.finish();\n      return this;\n    },\n    finishTemplateLiteral: function finishTemplateLiteral(quasis, expressions) {\n      this.type = Syntax.TemplateLiteral;\n      this.quasis = quasis;\n      this.expressions = expressions;\n      this.finish();\n      return this;\n    },\n    finishThisExpression: function finishThisExpression() {\n      this.type = Syntax.ThisExpression;\n      this.finish();\n      return this;\n    },\n    finishThrowStatement: function finishThrowStatement(argument) {\n      this.type = Syntax.ThrowStatement;\n      this.argument = argument;\n      this.finish();\n      return this;\n    },\n    finishTryStatement: function finishTryStatement(block, handler, finalizer) {\n      this.type = Syntax.TryStatement;\n      this.block = block;\n      this.guardedHandlers = [];\n      this.handlers = handler ? [handler] : [];\n      this.handler = handler;\n      this.finalizer = finalizer;\n      this.finish();\n      return this;\n    },\n    finishUnaryExpression: function finishUnaryExpression(operator, argument) {\n      this.type = operator === '++' || operator === '--' ? Syntax.UpdateExpression : Syntax.UnaryExpression;\n      this.operator = operator;\n      this.argument = argument;\n      this.prefix = true;\n      this.finish();\n      return this;\n    },\n    finishVariableDeclaration: function finishVariableDeclaration(declarations) {\n      this.type = Syntax.VariableDeclaration;\n      this.declarations = declarations;\n      this.kind = 'var';\n      this.finish();\n      return this;\n    },\n    finishLexicalDeclaration: function finishLexicalDeclaration(declarations, kind) {\n      this.type = Syntax.VariableDeclaration;\n      this.declarations = declarations;\n      this.kind = kind;\n      this.finish();\n      return this;\n    },\n    finishVariableDeclarator: function finishVariableDeclarator(id, init) {\n      this.type = Syntax.VariableDeclarator;\n      this.id = id;\n      this.init = init;\n      this.finish();\n      return this;\n    },\n    finishWhileStatement: function finishWhileStatement(test, body) {\n      this.type = Syntax.WhileStatement;\n      this.test = test;\n      this.body = body;\n      this.finish();\n      return this;\n    },\n    finishWithStatement: function finishWithStatement(object, body) {\n      this.type = Syntax.WithStatement;\n      this.object = object;\n      this.body = body;\n      this.finish();\n      return this;\n    },\n    finishExportSpecifier: function finishExportSpecifier(local, exported) {\n      this.type = Syntax.ExportSpecifier;\n      this.exported = exported || local;\n      this.local = local;\n      this.finish();\n      return this;\n    },\n    finishImportDefaultSpecifier: function finishImportDefaultSpecifier(local) {\n      this.type = Syntax.ImportDefaultSpecifier;\n      this.local = local;\n      this.finish();\n      return this;\n    },\n    finishImportNamespaceSpecifier: function finishImportNamespaceSpecifier(local) {\n      this.type = Syntax.ImportNamespaceSpecifier;\n      this.local = local;\n      this.finish();\n      return this;\n    },\n    finishExportNamedDeclaration: function finishExportNamedDeclaration(declaration, specifiers, src) {\n      this.type = Syntax.ExportNamedDeclaration;\n      this.declaration = declaration;\n      this.specifiers = specifiers;\n      this.source = src;\n      this.finish();\n      return this;\n    },\n    finishExportDefaultDeclaration: function finishExportDefaultDeclaration(declaration) {\n      this.type = Syntax.ExportDefaultDeclaration;\n      this.declaration = declaration;\n      this.finish();\n      return this;\n    },\n    finishExportAllDeclaration: function finishExportAllDeclaration(src) {\n      this.type = Syntax.ExportAllDeclaration;\n      this.source = src;\n      this.finish();\n      return this;\n    },\n    finishImportSpecifier: function finishImportSpecifier(local, imported) {\n      this.type = Syntax.ImportSpecifier;\n      this.local = local || imported;\n      this.imported = imported;\n      this.finish();\n      return this;\n    },\n    finishImportDeclaration: function finishImportDeclaration(specifiers, src) {\n      this.type = Syntax.ImportDeclaration;\n      this.specifiers = specifiers;\n      this.source = src;\n      this.finish();\n      return this;\n    },\n    finishYieldExpression: function finishYieldExpression(argument, delegate) {\n      this.type = Syntax.YieldExpression;\n      this.argument = argument;\n      this.delegate = delegate;\n      this.finish();\n      return this;\n    }\n  };\n\n  function recordError(error) {\n    var e, existing;\n\n    for (e = 0; e < extra.errors.length; e++) {\n      existing = extra.errors[e];\n      // Prevent duplicated error.\n      /* istanbul ignore next */\n      if (existing.index === error.index && existing.message === error.message) {\n        return;\n      }\n    }\n\n    extra.errors.push(error);\n  }\n\n  function createError(line, pos, description) {\n    var error = new Error('Line ' + line + ': ' + description);\n    error.index = pos;\n    error.lineNumber = line;\n    error.column = pos - (scanning ? lineStart : lastLineStart) + 1;\n    error.description = description;\n    return error;\n  }\n\n  // Throw an exception\n  function throwError(messageFormat) {\n    var args, msg;\n\n    args = Array.prototype.slice.call(arguments, 1);\n    msg = messageFormat.replace(/%(\\d)/g, function (whole, idx) {\n      assert(idx < args.length, 'Message reference must be in range');\n      return args[idx];\n    });\n\n    throw createError(lastLineNumber, lastIndex, msg);\n  }\n\n  function tolerateError(messageFormat) {\n    var args, msg, error;\n\n    args = Array.prototype.slice.call(arguments, 1);\n    /* istanbul ignore next */\n    msg = messageFormat.replace(/%(\\d)/g, function (whole, idx) {\n      assert(idx < args.length, 'Message reference must be in range');\n      return args[idx];\n    });\n\n    error = createError(lineNumber, lastIndex, msg);\n    if (extra.errors) {\n      recordError(error);\n    } else {\n      throw error;\n    }\n  }\n\n  // Throw an exception because of the token.\n  function unexpectedTokenError(token, message) {\n    var value,\n        msg = message || Messages.UnexpectedToken;\n\n    if (token) {\n      if (!message) {\n        msg = token.type === Token.EOF ? Messages.UnexpectedEOS : token.type === Token.Identifier ? Messages.UnexpectedIdentifier : token.type === Token.NumericLiteral ? Messages.UnexpectedNumber : token.type === Token.StringLiteral ? Messages.UnexpectedString : token.type === Token.Template ? Messages.UnexpectedTemplate : Messages.UnexpectedToken;\n\n        if (token.type === Token.Keyword) {\n          if (isFutureReservedWord(token.value)) {\n            msg = Messages.UnexpectedReserved;\n          } else if (strict && isStrictModeReservedWord(token.value)) {\n            msg = Messages.StrictReservedWord;\n          }\n        }\n      }\n\n      value = token.type === Token.Template ? token.value.raw : token.value;\n    } else {\n      value = 'ILLEGAL';\n    }\n\n    msg = msg.replace('%0', value);\n\n    return token && typeof token.lineNumber === 'number' ? createError(token.lineNumber, token.start, msg) : createError(scanning ? lineNumber : lastLineNumber, scanning ? index : lastIndex, msg);\n  }\n\n  function throwUnexpectedToken(token, message) {\n    throw unexpectedTokenError(token, message);\n  }\n\n  function tolerateUnexpectedToken(token, message) {\n    var error = unexpectedTokenError(token, message);\n    if (extra.errors) {\n      recordError(error);\n    } else {\n      throw error;\n    }\n  }\n\n  // Expect the next token to match the specified punctuator.\n  // If not, an exception will be thrown.\n  function expect(value) {\n    var token = lex();\n    if (token.type !== Token.Punctuator || token.value !== value) {\n      throwUnexpectedToken(token);\n    }\n  }\n\n  /**\n   * @name expectCommaSeparator\n   * @description Quietly expect a comma when in tolerant mode, otherwise delegates\n   * to <code>expect(value)</code>\n   * @since 2.0\n   */\n  function expectCommaSeparator() {\n    var token;\n\n    if (extra.errors) {\n      token = lookahead;\n      if (token.type === Token.Punctuator && token.value === ',') {\n        lex();\n      } else if (token.type === Token.Punctuator && token.value === ';') {\n        lex();\n        tolerateUnexpectedToken(token);\n      } else {\n        tolerateUnexpectedToken(token, Messages.UnexpectedToken);\n      }\n    } else {\n      expect(',');\n    }\n  }\n\n  // Expect the next token to match the specified keyword.\n  // If not, an exception will be thrown.\n  function expectKeyword(keyword) {\n    var token = lex();\n    if (token.type !== Token.Keyword || token.value !== keyword) {\n      throwUnexpectedToken(token);\n    }\n  }\n\n  // Return true if the next token matches the specified punctuator.\n  function match(value) {\n    return lookahead.type === Token.Punctuator && lookahead.value === value;\n  }\n\n  // Return true if the next token matches the specified keyword\n  function matchKeyword(keyword) {\n    return lookahead.type === Token.Keyword && lookahead.value === keyword;\n  }\n\n  // Return true if the next token matches the specified contextual keyword\n  // (where an identifier is sometimes a keyword depending on the context)\n  function matchContextualKeyword(keyword) {\n    return lookahead.type === Token.Identifier && lookahead.value === keyword;\n  }\n\n  // Return true if the next token is an assignment operator\n  function matchAssign() {\n    var op;\n\n    if (lookahead.type !== Token.Punctuator) {\n      return false;\n    }\n    op = lookahead.value;\n    return op === '=' || op === '*=' || op === '/=' || op === '%=' || op === '+=' || op === '-=' || op === '<<=' || op === '>>=' || op === '>>>=' || op === '&=' || op === '^=' || op === '|=';\n  }\n\n  function consumeSemicolon() {\n    // Catch the very common case first: immediately a semicolon (U+003B).\n    if (source.charCodeAt(startIndex) === 59 || match(';')) {\n      lex();\n      return;\n    }\n\n    if (hasLineTerminator) {\n      return;\n    }\n\n    // FIXME(ikarienator): this is seemingly an issue in the previous location info convention.\n    lastIndex = startIndex;\n    lastLineNumber = startLineNumber;\n    lastLineStart = startLineStart;\n\n    if (lookahead.type !== Token.EOF && !match('}')) {\n      throwUnexpectedToken(lookahead);\n    }\n  }\n\n  // Cover grammar support.\n  //\n  // When an assignment expression position starts with an left parenthesis, the determination of the type\n  // of the syntax is to be deferred arbitrarily long until the end of the parentheses pair (plus a lookahead)\n  // or the first comma. This situation also defers the determination of all the expressions nested in the pair.\n  //\n  // There are three productions that can be parsed in a parentheses pair that needs to be determined\n  // after the outermost pair is closed. They are:\n  //\n  //   1. AssignmentExpression\n  //   2. BindingElements\n  //   3. AssignmentTargets\n  //\n  // In order to avoid exponential backtracking, we use two flags to denote if the production can be\n  // binding element or assignment target.\n  //\n  // The three productions have the relationship:\n  //\n  //   BindingElements ⊆ AssignmentTargets ⊆ AssignmentExpression\n  //\n  // with a single exception that CoverInitializedName when used directly in an Expression, generates\n  // an early error. Therefore, we need the third state, firstCoverInitializedNameError, to track the\n  // first usage of CoverInitializedName and report it when we reached the end of the parentheses pair.\n  //\n  // isolateCoverGrammar function runs the given parser function with a new cover grammar context, and it does not\n  // effect the current flags. This means the production the parser parses is only used as an expression. Therefore\n  // the CoverInitializedName check is conducted.\n  //\n  // inheritCoverGrammar function runs the given parse function with a new cover grammar context, and it propagates\n  // the flags outside of the parser. This means the production the parser parses is used as a part of a potential\n  // pattern. The CoverInitializedName check is deferred.\n  function isolateCoverGrammar(parser) {\n    var oldIsBindingElement = isBindingElement,\n        oldIsAssignmentTarget = isAssignmentTarget,\n        oldFirstCoverInitializedNameError = firstCoverInitializedNameError,\n        result;\n    isBindingElement = true;\n    isAssignmentTarget = true;\n    firstCoverInitializedNameError = null;\n    result = parser();\n    if (firstCoverInitializedNameError !== null) {\n      throwUnexpectedToken(firstCoverInitializedNameError);\n    }\n    isBindingElement = oldIsBindingElement;\n    isAssignmentTarget = oldIsAssignmentTarget;\n    firstCoverInitializedNameError = oldFirstCoverInitializedNameError;\n    return result;\n  }\n\n  function inheritCoverGrammar(parser) {\n    var oldIsBindingElement = isBindingElement,\n        oldIsAssignmentTarget = isAssignmentTarget,\n        oldFirstCoverInitializedNameError = firstCoverInitializedNameError,\n        result;\n    isBindingElement = true;\n    isAssignmentTarget = true;\n    firstCoverInitializedNameError = null;\n    result = parser();\n    isBindingElement = isBindingElement && oldIsBindingElement;\n    isAssignmentTarget = isAssignmentTarget && oldIsAssignmentTarget;\n    firstCoverInitializedNameError = oldFirstCoverInitializedNameError || firstCoverInitializedNameError;\n    return result;\n  }\n\n  function parseArrayPattern(params) {\n    var node = new Node(),\n        elements = [],\n        rest,\n        restNode;\n    expect('[');\n\n    while (!match(']')) {\n      if (match(',')) {\n        lex();\n        elements.push(null);\n      } else {\n        if (match('...')) {\n          restNode = new Node();\n          lex();\n          params.push(lookahead);\n          rest = parseVariableIdentifier(params);\n          elements.push(restNode.finishRestElement(rest));\n          break;\n        } else {\n          elements.push(parsePatternWithDefault(params));\n        }\n        if (!match(']')) {\n          expect(',');\n        }\n      }\n    }\n\n    expect(']');\n\n    return node.finishArrayPattern(elements);\n  }\n\n  function parsePropertyPattern(params) {\n    var node = new Node(),\n        key,\n        keyToken,\n        computed = match('['),\n        init;\n    if (lookahead.type === Token.Identifier) {\n      keyToken = lookahead;\n      key = parseVariableIdentifier();\n      if (match('=')) {\n        params.push(keyToken);\n        lex();\n        init = parseAssignmentExpression();\n\n        return node.finishProperty('init', key, false, new WrappingNode(keyToken).finishAssignmentPattern(key, init), false, false);\n      } else if (!match(':')) {\n        params.push(keyToken);\n        return node.finishProperty('init', key, false, key, false, true);\n      }\n    } else {\n      key = parseObjectPropertyKey(params);\n    }\n    expect(':');\n    init = parsePatternWithDefault(params);\n    return node.finishProperty('init', key, computed, init, false, false);\n  }\n\n  function parseObjectPattern(params) {\n    var node = new Node(),\n        properties = [];\n\n    expect('{');\n\n    while (!match('}')) {\n      properties.push(parsePropertyPattern(params));\n      if (!match('}')) {\n        expect(',');\n      }\n    }\n\n    lex();\n\n    return node.finishObjectPattern(properties);\n  }\n\n  function parsePattern(params) {\n    var identifier;\n    if (lookahead.type === Token.Identifier) {\n      params.push(lookahead);\n      identifier = parseVariableIdentifier();\n      return identifier;\n    } else if (match('[')) {\n      return parseArrayPattern(params);\n    } else if (match('{')) {\n      return parseObjectPattern(params);\n    }\n    throwUnexpectedToken(lookahead);\n  }\n\n  function parsePatternWithDefault(params) {\n    var startToken = lookahead,\n        pattern,\n        right;\n    pattern = parsePattern(params);\n    if (match('=')) {\n      lex();\n      right = isolateCoverGrammar(parseAssignmentExpression);\n      pattern = new WrappingNode(startToken).finishAssignmentPattern(pattern, right);\n    }\n    return pattern;\n  }\n\n  // 11.1.4 Array Initialiser\n  function parseArrayInitialiser() {\n    var elements = [],\n        node = new Node(),\n        restSpread;\n\n    expect('[');\n\n    while (!match(']')) {\n      if (match(',')) {\n        lex();\n        elements.push(null);\n      } else if (match('...')) {\n        restSpread = new Node();\n        lex();\n        restSpread.finishSpreadElement(inheritCoverGrammar(parseAssignmentExpression));\n\n        if (!match(']')) {\n          isAssignmentTarget = isBindingElement = false;\n          expect(',');\n        }\n        elements.push(restSpread);\n      } else {\n        elements.push(inheritCoverGrammar(parseAssignmentExpression));\n\n        if (!match(']')) {\n          expect(',');\n        }\n      }\n    }\n\n    lex();\n\n    return node.finishArrayExpression(elements);\n  }\n\n  // 11.1.5 Object Initialiser\n  function parsePropertyFunction(node, paramInfo, isGenerator) {\n    var previousStrict, body;\n\n    isAssignmentTarget = isBindingElement = false;\n\n    previousStrict = strict;\n    body = isolateCoverGrammar(parseFunctionSourceElements);\n\n    if (strict && paramInfo.firstRestricted) {\n      tolerateUnexpectedToken(paramInfo.firstRestricted, paramInfo.message);\n    }\n    if (strict && paramInfo.stricted) {\n      tolerateUnexpectedToken(paramInfo.stricted, paramInfo.message);\n    }\n\n    strict = previousStrict;\n    return node.finishFunctionExpression(null, paramInfo.params, paramInfo.defaults, body, isGenerator);\n  }\n\n  function parsePropertyMethodFunction() {\n    var params,\n        method,\n        node = new Node(),\n        previousAllowYield = state.allowYield;\n\n    state.allowYield = false;\n    params = parseParams();\n    state.allowYield = previousAllowYield;\n\n    state.allowYield = false;\n    method = parsePropertyFunction(node, params, false);\n    state.allowYield = previousAllowYield;\n\n    return method;\n  }\n\n  function parseObjectPropertyKey() {\n    var token,\n        node = new Node(),\n        expr;\n\n    token = lex();\n\n    // Note: This function is called only from parseObjectProperty(), where\n    // EOF and Punctuator tokens are already filtered out.\n    switch (token.type) {\n      case Token.StringLiteral:\n      case Token.NumericLiteral:\n        if (strict && token.octal) {\n          tolerateUnexpectedToken(token, Messages.StrictOctalLiteral);\n        }\n        return node.finishLiteral(token);\n      case Token.Identifier:\n      case Token.BooleanLiteral:\n      case Token.NullLiteral:\n      case Token.Keyword:\n        return node.finishIdentifier(token.value);\n      case Token.Punctuator:\n        if (token.value === '[') {\n          expr = isolateCoverGrammar(parseAssignmentExpression);\n          expect(']');\n          return expr;\n        }\n        break;\n    }\n    throwUnexpectedToken(token);\n  }\n\n  function lookaheadPropertyName() {\n    switch (lookahead.type) {\n      case Token.Identifier:\n      case Token.StringLiteral:\n      case Token.BooleanLiteral:\n      case Token.NullLiteral:\n      case Token.NumericLiteral:\n      case Token.Keyword:\n        return true;\n      case Token.Punctuator:\n        return lookahead.value === '[';\n    }\n    return false;\n  }\n\n  // This function is to try to parse a MethodDefinition as defined in 14.3. But in the case of object literals,\n  // it might be called at a position where there is in fact a short hand identifier pattern or a data property.\n  // This can only be determined after we consumed up to the left parentheses.\n  //\n  // In order to avoid back tracking, it returns `null` if the position is not a MethodDefinition and the caller\n  // is responsible to visit other options.\n  function tryParseMethodDefinition(token, key, computed, node) {\n    var value,\n        options,\n        methodNode,\n        params,\n        previousAllowYield = state.allowYield;\n\n    if (token.type === Token.Identifier) {\n      // check for `get` and `set`;\n      if (token.value === 'get' && lookaheadPropertyName()) {\n        computed = match('[');\n        key = parseObjectPropertyKey();\n        methodNode = new Node();\n        expect('(');\n        expect(')');\n\n        state.allowYield = false;\n        value = parsePropertyFunction(methodNode, {\n          params: [],\n          defaults: [],\n          stricted: null,\n          firstRestricted: null,\n          message: null\n        }, false);\n        state.allowYield = previousAllowYield;\n\n        return node.finishProperty('get', key, computed, value, false, false);\n      } else if (token.value === 'set' && lookaheadPropertyName()) {\n        computed = match('[');\n        key = parseObjectPropertyKey();\n        methodNode = new Node();\n        expect('(');\n\n        options = {\n          params: [],\n          defaultCount: 0,\n          defaults: [],\n          firstRestricted: null,\n          paramSet: {}\n        };\n        if (match(')')) {\n          tolerateUnexpectedToken(lookahead);\n        } else {\n          state.allowYield = false;\n          parseParam(options);\n          state.allowYield = previousAllowYield;\n          if (options.defaultCount === 0) {\n            options.defaults = [];\n          }\n        }\n        expect(')');\n\n        state.allowYield = false;\n        value = parsePropertyFunction(methodNode, options, false);\n        state.allowYield = previousAllowYield;\n\n        return node.finishProperty('set', key, computed, value, false, false);\n      }\n    } else if (token.type === Token.Punctuator && token.value === '*' && lookaheadPropertyName()) {\n      computed = match('[');\n      key = parseObjectPropertyKey();\n      methodNode = new Node();\n\n      state.allowYield = false;\n      params = parseParams();\n      state.allowYield = previousAllowYield;\n\n      state.allowYield = true;\n      value = parsePropertyFunction(methodNode, params, true);\n      state.allowYield = previousAllowYield;\n\n      return node.finishProperty('init', key, computed, value, true, false);\n    }\n\n    if (key && match('(')) {\n      value = parsePropertyMethodFunction();\n      return node.finishProperty('init', key, computed, value, true, false);\n    }\n\n    // Not a MethodDefinition.\n    return null;\n  }\n\n  function checkProto(key, computed, hasProto) {\n    if (computed === false && (key.type === Syntax.Identifier && key.name === '__proto__' || key.type === Syntax.Literal && key.value === '__proto__')) {\n      if (hasProto.value) {\n        tolerateError(Messages.DuplicateProtoProperty);\n      } else {\n        hasProto.value = true;\n      }\n    }\n  }\n\n  function parseObjectProperty(hasProto) {\n    var token = lookahead,\n        node = new Node(),\n        computed,\n        key,\n        maybeMethod,\n        value;\n\n    computed = match('[');\n    if (match('*')) {\n      lex();\n    } else {\n      key = parseObjectPropertyKey();\n    }\n    maybeMethod = tryParseMethodDefinition(token, key, computed, node);\n\n    if (maybeMethod) {\n      checkProto(maybeMethod.key, maybeMethod.computed, hasProto);\n      // finished\n      return maybeMethod;\n    }\n\n    if (!key) {\n      throwUnexpectedToken(lookahead);\n    }\n\n    // init property or short hand property.\n    checkProto(key, computed, hasProto);\n\n    if (match(':')) {\n      lex();\n      value = inheritCoverGrammar(parseAssignmentExpression);\n      return node.finishProperty('init', key, computed, value, false, false);\n    }\n\n    if (token.type === Token.Identifier) {\n      if (match('=')) {\n        firstCoverInitializedNameError = lookahead;\n        lex();\n        value = isolateCoverGrammar(parseAssignmentExpression);\n        return node.finishProperty('init', key, computed, new WrappingNode(token).finishAssignmentPattern(key, value), false, true);\n      }\n      return node.finishProperty('init', key, computed, key, false, true);\n    }\n\n    throwUnexpectedToken(lookahead);\n  }\n\n  function parseObjectInitialiser() {\n    var properties = [],\n        hasProto = { value: false },\n        node = new Node();\n\n    expect('{');\n\n    while (!match('}')) {\n      properties.push(parseObjectProperty(hasProto));\n\n      if (!match('}')) {\n        expectCommaSeparator();\n      }\n    }\n\n    expect('}');\n\n    return node.finishObjectExpression(properties);\n  }\n\n  function reinterpretExpressionAsPattern(expr) {\n    var i;\n    switch (expr.type) {\n      case Syntax.Identifier:\n      case Syntax.MemberExpression:\n      case Syntax.RestElement:\n      case Syntax.AssignmentPattern:\n        break;\n      case Syntax.SpreadElement:\n        expr.type = Syntax.RestElement;\n        reinterpretExpressionAsPattern(expr.argument);\n        break;\n      case Syntax.ArrayExpression:\n        expr.type = Syntax.ArrayPattern;\n        for (i = 0; i < expr.elements.length; i++) {\n          if (expr.elements[i] !== null) {\n            reinterpretExpressionAsPattern(expr.elements[i]);\n          }\n        }\n        break;\n      case Syntax.ObjectExpression:\n        expr.type = Syntax.ObjectPattern;\n        for (i = 0; i < expr.properties.length; i++) {\n          reinterpretExpressionAsPattern(expr.properties[i].value);\n        }\n        break;\n      case Syntax.AssignmentExpression:\n        expr.type = Syntax.AssignmentPattern;\n        reinterpretExpressionAsPattern(expr.left);\n        break;\n      default:\n        // Allow other node type for tolerant parsing.\n        break;\n    }\n  }\n\n  function parseTemplateElement(option) {\n    var node, token;\n\n    if (lookahead.type !== Token.Template || option.head && !lookahead.head) {\n      throwUnexpectedToken();\n    }\n\n    node = new Node();\n    token = lex();\n\n    return node.finishTemplateElement({\n      raw: token.value.raw,\n      cooked: token.value.cooked\n    }, token.tail);\n  }\n\n  function parseTemplateLiteral() {\n    var quasi,\n        quasis,\n        expressions,\n        node = new Node();\n\n    quasi = parseTemplateElement({ head: true });\n    quasis = [quasi];\n    expressions = [];\n\n    while (!quasi.tail) {\n      expressions.push(parseExpression());\n      quasi = parseTemplateElement({ head: false });\n      quasis.push(quasi);\n    }\n\n    return node.finishTemplateLiteral(quasis, expressions);\n  }\n\n  // 11.1.6 The Grouping Operator\n  function parseGroupExpression() {\n    var expr,\n        expressions,\n        startToken,\n        i,\n        params = [];\n\n    expect('(');\n\n    if (match(')')) {\n      lex();\n      if (!match('=>')) {\n        expect('=>');\n      }\n      return {\n        type: PlaceHolders.ArrowParameterPlaceHolder,\n        params: [],\n        rawParams: []\n      };\n    }\n\n    startToken = lookahead;\n    if (match('...')) {\n      expr = parseRestElement(params);\n      expect(')');\n      if (!match('=>')) {\n        expect('=>');\n      }\n      return {\n        type: PlaceHolders.ArrowParameterPlaceHolder,\n        params: [expr]\n      };\n    }\n\n    isBindingElement = true;\n    expr = inheritCoverGrammar(parseAssignmentExpression);\n\n    if (match(',')) {\n      isAssignmentTarget = false;\n      expressions = [expr];\n\n      while (startIndex < length) {\n        if (!match(',')) {\n          break;\n        }\n        lex();\n\n        if (match('...')) {\n          if (!isBindingElement) {\n            throwUnexpectedToken(lookahead);\n          }\n          expressions.push(parseRestElement(params));\n          expect(')');\n          if (!match('=>')) {\n            expect('=>');\n          }\n          isBindingElement = false;\n          for (i = 0; i < expressions.length; i++) {\n            reinterpretExpressionAsPattern(expressions[i]);\n          }\n          return {\n            type: PlaceHolders.ArrowParameterPlaceHolder,\n            params: expressions\n          };\n        }\n\n        expressions.push(inheritCoverGrammar(parseAssignmentExpression));\n      }\n\n      expr = new WrappingNode(startToken).finishSequenceExpression(expressions);\n    }\n\n    expect(')');\n\n    if (match('=>')) {\n      if (!isBindingElement) {\n        throwUnexpectedToken(lookahead);\n      }\n\n      if (expr.type === Syntax.SequenceExpression) {\n        for (i = 0; i < expr.expressions.length; i++) {\n          reinterpretExpressionAsPattern(expr.expressions[i]);\n        }\n      } else {\n        reinterpretExpressionAsPattern(expr);\n      }\n\n      expr = {\n        type: PlaceHolders.ArrowParameterPlaceHolder,\n        params: expr.type === Syntax.SequenceExpression ? expr.expressions : [expr]\n      };\n    }\n    isBindingElement = false;\n    return expr;\n  }\n\n  // 11.1 Primary Expressions\n  function parsePrimaryExpression() {\n    var type, token, expr, node;\n\n    if (match('(')) {\n      isBindingElement = false;\n      return inheritCoverGrammar(parseGroupExpression);\n    }\n\n    if (match('[')) {\n      return inheritCoverGrammar(parseArrayInitialiser);\n    }\n\n    if (match('{')) {\n      return inheritCoverGrammar(parseObjectInitialiser);\n    }\n\n    type = lookahead.type;\n    node = new Node();\n\n    if (type === Token.Identifier) {\n      expr = node.finishIdentifier(lex().value);\n    } else if (type === Token.StringLiteral || type === Token.NumericLiteral) {\n      isAssignmentTarget = isBindingElement = false;\n      if (strict && lookahead.octal) {\n        tolerateUnexpectedToken(lookahead, Messages.StrictOctalLiteral);\n      }\n      expr = node.finishLiteral(lex());\n    } else if (type === Token.Keyword) {\n      isAssignmentTarget = isBindingElement = false;\n      if (matchKeyword('function')) {\n        return parseFunctionExpression();\n      }\n      if (matchKeyword('this')) {\n        lex();\n        return node.finishThisExpression();\n      }\n      if (matchKeyword('class')) {\n        return parseClassExpression();\n      }\n      throwUnexpectedToken(lex());\n    } else if (type === Token.BooleanLiteral) {\n      isAssignmentTarget = isBindingElement = false;\n      token = lex();\n      token.value = token.value === 'true';\n      expr = node.finishLiteral(token);\n    } else if (type === Token.NullLiteral) {\n      isAssignmentTarget = isBindingElement = false;\n      token = lex();\n      token.value = null;\n      expr = node.finishLiteral(token);\n    } else if (match('/') || match('/=')) {\n      isAssignmentTarget = isBindingElement = false;\n      index = startIndex;\n\n      if (typeof extra.tokens !== 'undefined') {\n        token = collectRegex();\n      } else {\n        token = scanRegExp();\n      }\n      lex();\n      expr = node.finishLiteral(token);\n    } else if (type === Token.Template) {\n      expr = parseTemplateLiteral();\n    } else {\n      throwUnexpectedToken(lex());\n    }\n\n    return expr;\n  }\n\n  // 11.2 Left-Hand-Side Expressions\n  function parseArguments() {\n    var args = [],\n        expr;\n\n    expect('(');\n\n    if (!match(')')) {\n      while (startIndex < length) {\n        if (match('...')) {\n          expr = new Node();\n          lex();\n          expr.finishSpreadElement(isolateCoverGrammar(parseAssignmentExpression));\n        } else {\n          expr = isolateCoverGrammar(parseAssignmentExpression);\n        }\n        args.push(expr);\n        if (match(')')) {\n          break;\n        }\n        expectCommaSeparator();\n      }\n    }\n\n    expect(')');\n\n    return args;\n  }\n\n  function parseNonComputedProperty() {\n    var token,\n        node = new Node();\n\n    token = lex();\n\n    if (!isIdentifierName(token)) {\n      throwUnexpectedToken(token);\n    }\n\n    return node.finishIdentifier(token.value);\n  }\n\n  function parseNonComputedMember() {\n    expect('.');\n\n    return parseNonComputedProperty();\n  }\n\n  function parseComputedMember() {\n    var expr;\n\n    expect('[');\n\n    expr = isolateCoverGrammar(parseExpression);\n\n    expect(']');\n\n    return expr;\n  }\n\n  function parseNewExpression() {\n    var callee,\n        args,\n        node = new Node();\n\n    expectKeyword('new');\n    callee = isolateCoverGrammar(parseLeftHandSideExpression);\n    args = match('(') ? parseArguments() : [];\n\n    isAssignmentTarget = isBindingElement = false;\n\n    return node.finishNewExpression(callee, args);\n  }\n\n  function parseLeftHandSideExpressionAllowCall() {\n    var quasi,\n        expr,\n        args,\n        property,\n        startToken,\n        previousAllowIn = state.allowIn;\n\n    startToken = lookahead;\n    state.allowIn = true;\n\n    if (matchKeyword('super') && state.inFunctionBody) {\n      expr = new Node();\n      lex();\n      expr = expr.finishSuper();\n      if (!match('(') && !match('.') && !match('[')) {\n        throwUnexpectedToken(lookahead);\n      }\n    } else {\n      expr = inheritCoverGrammar(matchKeyword('new') ? parseNewExpression : parsePrimaryExpression);\n    }\n\n    for (;;) {\n      if (match('.')) {\n        isBindingElement = false;\n        isAssignmentTarget = true;\n        property = parseNonComputedMember();\n        expr = new WrappingNode(startToken).finishMemberExpression('.', expr, property);\n      } else if (match('(')) {\n        isBindingElement = false;\n        isAssignmentTarget = false;\n        args = parseArguments();\n        expr = new WrappingNode(startToken).finishCallExpression(expr, args);\n      } else if (match('[')) {\n        isBindingElement = false;\n        isAssignmentTarget = true;\n        property = parseComputedMember();\n        expr = new WrappingNode(startToken).finishMemberExpression('[', expr, property);\n      } else if (lookahead.type === Token.Template && lookahead.head) {\n        quasi = parseTemplateLiteral();\n        expr = new WrappingNode(startToken).finishTaggedTemplateExpression(expr, quasi);\n      } else {\n        break;\n      }\n    }\n    state.allowIn = previousAllowIn;\n\n    return expr;\n  }\n\n  function parseLeftHandSideExpression() {\n    var quasi, expr, property, startToken;\n    assert(state.allowIn, 'callee of new expression always allow in keyword.');\n\n    startToken = lookahead;\n\n    if (matchKeyword('super') && state.inFunctionBody) {\n      expr = new Node();\n      lex();\n      expr = expr.finishSuper();\n      if (!match('[') && !match('.')) {\n        throwUnexpectedToken(lookahead);\n      }\n    } else {\n      expr = inheritCoverGrammar(matchKeyword('new') ? parseNewExpression : parsePrimaryExpression);\n    }\n\n    for (;;) {\n      if (match('[')) {\n        isBindingElement = false;\n        isAssignmentTarget = true;\n        property = parseComputedMember();\n        expr = new WrappingNode(startToken).finishMemberExpression('[', expr, property);\n      } else if (match('.')) {\n        isBindingElement = false;\n        isAssignmentTarget = true;\n        property = parseNonComputedMember();\n        expr = new WrappingNode(startToken).finishMemberExpression('.', expr, property);\n      } else if (lookahead.type === Token.Template && lookahead.head) {\n        quasi = parseTemplateLiteral();\n        expr = new WrappingNode(startToken).finishTaggedTemplateExpression(expr, quasi);\n      } else {\n        break;\n      }\n    }\n    return expr;\n  }\n\n  // 11.3 Postfix Expressions\n  function parsePostfixExpression() {\n    var expr,\n        token,\n        startToken = lookahead;\n\n    expr = inheritCoverGrammar(parseLeftHandSideExpressionAllowCall);\n\n    if (!hasLineTerminator && lookahead.type === Token.Punctuator) {\n      if (match('++') || match('--')) {\n        // 11.3.1, 11.3.2\n        if (strict && expr.type === Syntax.Identifier && isRestrictedWord(expr.name)) {\n          tolerateError(Messages.StrictLHSPostfix);\n        }\n\n        if (!isAssignmentTarget) {\n          tolerateError(Messages.InvalidLHSInAssignment);\n        }\n\n        isAssignmentTarget = isBindingElement = false;\n\n        token = lex();\n        expr = new WrappingNode(startToken).finishPostfixExpression(token.value, expr);\n      }\n    }\n\n    return expr;\n  }\n\n  // 11.4 Unary Operators\n  function parseUnaryExpression() {\n    var token, expr, startToken;\n\n    if (lookahead.type !== Token.Punctuator && lookahead.type !== Token.Keyword) {\n      expr = parsePostfixExpression();\n    } else if (match('++') || match('--')) {\n      startToken = lookahead;\n      token = lex();\n      expr = inheritCoverGrammar(parseUnaryExpression);\n      // 11.4.4, 11.4.5\n      if (strict && expr.type === Syntax.Identifier && isRestrictedWord(expr.name)) {\n        tolerateError(Messages.StrictLHSPrefix);\n      }\n\n      if (!isAssignmentTarget) {\n        tolerateError(Messages.InvalidLHSInAssignment);\n      }\n      expr = new WrappingNode(startToken).finishUnaryExpression(token.value, expr);\n      isAssignmentTarget = isBindingElement = false;\n    } else if (match('+') || match('-') || match('~') || match('!')) {\n      startToken = lookahead;\n      token = lex();\n      expr = inheritCoverGrammar(parseUnaryExpression);\n      expr = new WrappingNode(startToken).finishUnaryExpression(token.value, expr);\n      isAssignmentTarget = isBindingElement = false;\n    } else if (matchKeyword('delete') || matchKeyword('void') || matchKeyword('typeof')) {\n      startToken = lookahead;\n      token = lex();\n      expr = inheritCoverGrammar(parseUnaryExpression);\n      expr = new WrappingNode(startToken).finishUnaryExpression(token.value, expr);\n      if (strict && expr.operator === 'delete' && expr.argument.type === Syntax.Identifier) {\n        tolerateError(Messages.StrictDelete);\n      }\n      isAssignmentTarget = isBindingElement = false;\n    } else {\n      expr = parsePostfixExpression();\n    }\n\n    return expr;\n  }\n\n  function binaryPrecedence(token, allowIn) {\n    var prec = 0;\n\n    if (token.type !== Token.Punctuator && token.type !== Token.Keyword) {\n      return 0;\n    }\n\n    switch (token.value) {\n      case '||':\n        prec = 1;\n        break;\n\n      case '&&':\n        prec = 2;\n        break;\n\n      case '|':\n        prec = 3;\n        break;\n\n      case '^':\n        prec = 4;\n        break;\n\n      case '&':\n        prec = 5;\n        break;\n\n      case '==':\n      case '!=':\n      case '===':\n      case '!==':\n        prec = 6;\n        break;\n\n      case '<':\n      case '>':\n      case '<=':\n      case '>=':\n      case 'instanceof':\n        prec = 7;\n        break;\n\n      case 'in':\n        prec = allowIn ? 7 : 0;\n        break;\n\n      case '<<':\n      case '>>':\n      case '>>>':\n        prec = 8;\n        break;\n\n      case '+':\n      case '-':\n        prec = 9;\n        break;\n\n      case '*':\n      case '/':\n      case '%':\n        prec = 11;\n        break;\n\n      default:\n        break;\n    }\n\n    return prec;\n  }\n\n  // 11.5 Multiplicative Operators\n  // 11.6 Additive Operators\n  // 11.7 Bitwise Shift Operators\n  // 11.8 Relational Operators\n  // 11.9 Equality Operators\n  // 11.10 Binary Bitwise Operators\n  // 11.11 Binary Logical Operators\n  function parseBinaryExpression() {\n    var marker, markers, expr, token, prec, stack, right, operator, left, i;\n\n    marker = lookahead;\n    left = inheritCoverGrammar(parseUnaryExpression);\n\n    token = lookahead;\n    prec = binaryPrecedence(token, state.allowIn);\n    if (prec === 0) {\n      return left;\n    }\n    isAssignmentTarget = isBindingElement = false;\n    token.prec = prec;\n    lex();\n\n    markers = [marker, lookahead];\n    right = isolateCoverGrammar(parseUnaryExpression);\n\n    stack = [left, token, right];\n\n    while ((prec = binaryPrecedence(lookahead, state.allowIn)) > 0) {\n      // Reduce: make a binary expression from the three topmost entries.\n      while (stack.length > 2 && prec <= stack[stack.length - 2].prec) {\n        right = stack.pop();\n        operator = stack.pop().value;\n        left = stack.pop();\n        markers.pop();\n        expr = new WrappingNode(markers[markers.length - 1]).finishBinaryExpression(operator, left, right);\n        stack.push(expr);\n      }\n\n      // Shift.\n      token = lex();\n      token.prec = prec;\n      stack.push(token);\n      markers.push(lookahead);\n      expr = isolateCoverGrammar(parseUnaryExpression);\n      stack.push(expr);\n    }\n\n    // Final reduce to clean-up the stack.\n    i = stack.length - 1;\n    expr = stack[i];\n    markers.pop();\n    while (i > 1) {\n      expr = new WrappingNode(markers.pop()).finishBinaryExpression(stack[i - 1].value, stack[i - 2], expr);\n      i -= 2;\n    }\n\n    return expr;\n  }\n\n  // 11.12 Conditional Operator\n  function parseConditionalExpression() {\n    var expr, previousAllowIn, consequent, alternate, startToken;\n\n    startToken = lookahead;\n\n    expr = inheritCoverGrammar(parseBinaryExpression);\n    if (match('?')) {\n      lex();\n      previousAllowIn = state.allowIn;\n      state.allowIn = true;\n      consequent = isolateCoverGrammar(parseAssignmentExpression);\n      state.allowIn = previousAllowIn;\n      expect(':');\n      alternate = isolateCoverGrammar(parseAssignmentExpression);\n\n      expr = new WrappingNode(startToken).finishConditionalExpression(expr, consequent, alternate);\n      isAssignmentTarget = isBindingElement = false;\n    }\n\n    return expr;\n  }\n\n  // [ES6] 14.2 Arrow Function\n  function parseConciseBody() {\n    if (match('{')) {\n      return parseFunctionSourceElements();\n    }\n    return isolateCoverGrammar(parseAssignmentExpression);\n  }\n\n  function checkPatternParam(options, param) {\n    var i;\n    switch (param.type) {\n      case Syntax.Identifier:\n        validateParam(options, param, param.name);\n        break;\n      case Syntax.RestElement:\n        checkPatternParam(options, param.argument);\n        break;\n      case Syntax.AssignmentPattern:\n        checkPatternParam(options, param.left);\n        break;\n      case Syntax.ArrayPattern:\n        for (i = 0; i < param.elements.length; i++) {\n          if (param.elements[i] !== null) {\n            checkPatternParam(options, param.elements[i]);\n          }\n        }\n        break;\n      default:\n        assert(param.type === Syntax.ObjectPattern, 'Invalid type');\n        for (i = 0; i < param.properties.length; i++) {\n          checkPatternParam(options, param.properties[i].value);\n        }\n        break;\n    }\n  }\n\n  function reinterpretAsCoverFormalsList(expr) {\n    var i, len, param, params, defaults, defaultCount, options, token;\n\n    defaults = [];\n    defaultCount = 0;\n    params = [expr];\n\n    switch (expr.type) {\n      case Syntax.Identifier:\n        break;\n      case PlaceHolders.ArrowParameterPlaceHolder:\n        params = expr.params;\n        break;\n      default:\n        return null;\n    }\n\n    options = { paramSet: {} };\n\n    for (i = 0, len = params.length; i < len; i += 1) {\n      param = params[i];\n      switch (param.type) {\n        case Syntax.AssignmentPattern:\n          params[i] = param.left;\n          defaults.push(param.right);\n          ++defaultCount;\n          checkPatternParam(options, param.left);\n          break;\n        default:\n          checkPatternParam(options, param);\n          params[i] = param;\n          defaults.push(null);\n          break;\n      }\n    }\n\n    if (options.message === Messages.StrictParamDupe) {\n      token = strict ? options.stricted : options.firstRestricted;\n      throwUnexpectedToken(token, options.message);\n    }\n\n    if (defaultCount === 0) {\n      defaults = [];\n    }\n\n    return {\n      params: params,\n      defaults: defaults,\n      stricted: options.stricted,\n      firstRestricted: options.firstRestricted,\n      message: options.message\n    };\n  }\n\n  function parseArrowFunctionExpression(options, node) {\n    var previousStrict, body;\n\n    if (hasLineTerminator) {\n      tolerateUnexpectedToken(lookahead);\n    }\n    expect('=>');\n    previousStrict = strict;\n\n    body = parseConciseBody();\n\n    if (strict && options.firstRestricted) {\n      throwUnexpectedToken(options.firstRestricted, options.message);\n    }\n    if (strict && options.stricted) {\n      tolerateUnexpectedToken(options.stricted, options.message);\n    }\n\n    strict = previousStrict;\n\n    return node.finishArrowFunctionExpression(options.params, options.defaults, body, body.type !== Syntax.BlockStatement);\n  }\n\n  // [ES6] 14.4 Yield expression\n  function parseYieldExpression() {\n    var argument, expr, delegate;\n\n    expr = new Node();\n\n    if (!state.allowYield) {\n      tolerateUnexpectedToken(lookahead, Messages.IllegalYield);\n    }\n\n    expectKeyword('yield');\n\n    if (!hasLineTerminator) {\n      delegate = match('*');\n      if (delegate) {\n        lex();\n        argument = parseExpression();\n      } else {\n        if (!match(';') && !match('}') && lookahead.type !== Token.EOF) {\n          argument = parseExpression();\n        }\n      }\n    }\n\n    return expr.finishYieldExpression(argument, delegate);\n  }\n\n  // 11.13 Assignment Operators\n  function parseAssignmentExpression() {\n    var token, expr, right, list, startToken;\n\n    startToken = lookahead;\n    token = lookahead;\n\n    if (matchKeyword('yield')) {\n      return parseYieldExpression();\n    }\n\n    expr = parseConditionalExpression();\n\n    if (expr.type === PlaceHolders.ArrowParameterPlaceHolder || match('=>')) {\n      isAssignmentTarget = isBindingElement = false;\n      list = reinterpretAsCoverFormalsList(expr);\n\n      if (list) {\n        firstCoverInitializedNameError = null;\n        return parseArrowFunctionExpression(list, new WrappingNode(startToken));\n      }\n\n      return expr;\n    }\n\n    if (matchAssign()) {\n      if (!isAssignmentTarget) {\n        tolerateError(Messages.InvalidLHSInAssignment);\n      }\n\n      // 11.13.1\n      if (strict && expr.type === Syntax.Identifier && isRestrictedWord(expr.name)) {\n        tolerateUnexpectedToken(token, Messages.StrictLHSAssignment);\n      }\n\n      if (!match('=')) {\n        isAssignmentTarget = isBindingElement = false;\n      } else {\n        reinterpretExpressionAsPattern(expr);\n      }\n\n      token = lex();\n      right = isolateCoverGrammar(parseAssignmentExpression);\n      expr = new WrappingNode(startToken).finishAssignmentExpression(token.value, expr, right);\n      firstCoverInitializedNameError = null;\n    }\n\n    return expr;\n  }\n\n  // 11.14 Comma Operator\n  function parseExpression() {\n    var expr,\n        startToken = lookahead,\n        expressions;\n\n    expr = isolateCoverGrammar(parseAssignmentExpression);\n\n    if (match(',')) {\n      expressions = [expr];\n\n      while (startIndex < length) {\n        if (!match(',')) {\n          break;\n        }\n        lex();\n        expressions.push(isolateCoverGrammar(parseAssignmentExpression));\n      }\n\n      expr = new WrappingNode(startToken).finishSequenceExpression(expressions);\n    }\n\n    return expr;\n  }\n\n  // 12.1 Block\n  function parseStatementListItem() {\n    if (lookahead.type === Token.Keyword) {\n      switch (lookahead.value) {\n        case 'export':\n          if (sourceType !== 'module') {\n            tolerateUnexpectedToken(lookahead, Messages.IllegalExportDeclaration);\n          }\n          return parseExportDeclaration();\n        case 'import':\n          if (sourceType !== 'module') {\n            tolerateUnexpectedToken(lookahead, Messages.IllegalImportDeclaration);\n          }\n          return parseImportDeclaration();\n        case 'const':\n        case 'let':\n          return parseLexicalDeclaration({ inFor: false });\n        case 'function':\n          return parseFunctionDeclaration(new Node());\n        case 'class':\n          return parseClassDeclaration();\n      }\n    }\n\n    return parseStatement();\n  }\n\n  function parseStatementList() {\n    var list = [];\n    while (startIndex < length) {\n      if (match('}')) {\n        break;\n      }\n      list.push(parseStatementListItem());\n    }\n\n    return list;\n  }\n\n  function parseBlock() {\n    var block,\n        node = new Node();\n\n    expect('{');\n\n    block = parseStatementList();\n\n    expect('}');\n\n    return node.finishBlockStatement(block);\n  }\n\n  // 12.2 Variable Statement\n  function parseVariableIdentifier() {\n    var token,\n        node = new Node();\n\n    token = lex();\n\n    if (token.type !== Token.Identifier) {\n      if (strict && token.type === Token.Keyword && isStrictModeReservedWord(token.value)) {\n        tolerateUnexpectedToken(token, Messages.StrictReservedWord);\n      } else {\n        throwUnexpectedToken(token);\n      }\n    }\n\n    return node.finishIdentifier(token.value);\n  }\n\n  function parseVariableDeclaration() {\n    var init = null,\n        id,\n        node = new Node(),\n        params = [];\n\n    id = parsePattern(params);\n\n    // 12.2.1\n    if (strict && isRestrictedWord(id.name)) {\n      tolerateError(Messages.StrictVarName);\n    }\n\n    if (match('=')) {\n      lex();\n      init = isolateCoverGrammar(parseAssignmentExpression);\n    } else if (id.type !== Syntax.Identifier) {\n      expect('=');\n    }\n\n    return node.finishVariableDeclarator(id, init);\n  }\n\n  function parseVariableDeclarationList() {\n    var list = [];\n\n    do {\n      list.push(parseVariableDeclaration());\n      if (!match(',')) {\n        break;\n      }\n      lex();\n    } while (startIndex < length);\n\n    return list;\n  }\n\n  function parseVariableStatement(node) {\n    var declarations;\n\n    expectKeyword('var');\n\n    declarations = parseVariableDeclarationList();\n\n    consumeSemicolon();\n\n    return node.finishVariableDeclaration(declarations);\n  }\n\n  function parseLexicalBinding(kind, options) {\n    var init = null,\n        id,\n        node = new Node(),\n        params = [];\n\n    id = parsePattern(params);\n\n    // 12.2.1\n    if (strict && id.type === Syntax.Identifier && isRestrictedWord(id.name)) {\n      tolerateError(Messages.StrictVarName);\n    }\n\n    if (kind === 'const') {\n      if (!matchKeyword('in') && !matchContextualKeyword('of')) {\n        expect('=');\n        init = isolateCoverGrammar(parseAssignmentExpression);\n      }\n    } else if (!options.inFor && id.type !== Syntax.Identifier || match('=')) {\n      expect('=');\n      init = isolateCoverGrammar(parseAssignmentExpression);\n    }\n\n    return node.finishVariableDeclarator(id, init);\n  }\n\n  function parseBindingList(kind, options) {\n    var list = [];\n\n    do {\n      list.push(parseLexicalBinding(kind, options));\n      if (!match(',')) {\n        break;\n      }\n      lex();\n    } while (startIndex < length);\n\n    return list;\n  }\n\n  function parseLexicalDeclaration(options) {\n    var kind,\n        declarations,\n        node = new Node();\n\n    kind = lex().value;\n    assert(kind === 'let' || kind === 'const', 'Lexical declaration must be either let or const');\n\n    declarations = parseBindingList(kind, options);\n\n    consumeSemicolon();\n\n    return node.finishLexicalDeclaration(declarations, kind);\n  }\n\n  function parseRestElement(params) {\n    var param,\n        node = new Node();\n\n    lex();\n\n    if (match('{')) {\n      throwError(Messages.ObjectPatternAsRestParameter);\n    }\n\n    params.push(lookahead);\n\n    param = parseVariableIdentifier();\n\n    if (match('=')) {\n      throwError(Messages.DefaultRestParameter);\n    }\n\n    if (!match(')')) {\n      throwError(Messages.ParameterAfterRestParameter);\n    }\n\n    return node.finishRestElement(param);\n  }\n\n  // 12.3 Empty Statement\n  function parseEmptyStatement(node) {\n    expect(';');\n    return node.finishEmptyStatement();\n  }\n\n  // 12.4 Expression Statement\n  function parseExpressionStatement(node) {\n    var expr = parseExpression();\n    consumeSemicolon();\n    return node.finishExpressionStatement(expr);\n  }\n\n  // 12.5 If statement\n  function parseIfStatement(node) {\n    var test, consequent, alternate;\n\n    expectKeyword('if');\n\n    expect('(');\n\n    test = parseExpression();\n\n    expect(')');\n\n    consequent = parseStatement();\n\n    if (matchKeyword('else')) {\n      lex();\n      alternate = parseStatement();\n    } else {\n      alternate = null;\n    }\n\n    return node.finishIfStatement(test, consequent, alternate);\n  }\n\n  // 12.6 Iteration Statements\n  function parseDoWhileStatement(node) {\n    var body, test, oldInIteration;\n\n    expectKeyword('do');\n\n    oldInIteration = state.inIteration;\n    state.inIteration = true;\n\n    body = parseStatement();\n\n    state.inIteration = oldInIteration;\n\n    expectKeyword('while');\n\n    expect('(');\n\n    test = parseExpression();\n\n    expect(')');\n\n    if (match(';')) {\n      lex();\n    }\n\n    return node.finishDoWhileStatement(body, test);\n  }\n\n  function parseWhileStatement(node) {\n    var test, body, oldInIteration;\n\n    expectKeyword('while');\n\n    expect('(');\n\n    test = parseExpression();\n\n    expect(')');\n\n    oldInIteration = state.inIteration;\n    state.inIteration = true;\n\n    body = parseStatement();\n\n    state.inIteration = oldInIteration;\n\n    return node.finishWhileStatement(test, body);\n  }\n\n  function parseForStatement(node) {\n    var init,\n        forIn,\n        initSeq,\n        initStartToken,\n        test,\n        update,\n        left,\n        right,\n        kind,\n        declarations,\n        body,\n        oldInIteration,\n        previousAllowIn = state.allowIn;\n\n    init = test = update = null;\n    forIn = true;\n\n    expectKeyword('for');\n\n    expect('(');\n\n    if (match(';')) {\n      lex();\n    } else {\n      if (matchKeyword('var')) {\n        init = new Node();\n        lex();\n\n        state.allowIn = false;\n        init = init.finishVariableDeclaration(parseVariableDeclarationList());\n        state.allowIn = previousAllowIn;\n\n        if (init.declarations.length === 1 && matchKeyword('in')) {\n          lex();\n          left = init;\n          right = parseExpression();\n          init = null;\n        } else if (init.declarations.length === 1 && init.declarations[0].init === null && matchContextualKeyword('of')) {\n          lex();\n          left = init;\n          right = parseAssignmentExpression();\n          init = null;\n          forIn = false;\n        } else {\n          expect(';');\n        }\n      } else if (matchKeyword('const') || matchKeyword('let')) {\n        init = new Node();\n        kind = lex().value;\n\n        state.allowIn = false;\n        declarations = parseBindingList(kind, { inFor: true });\n        state.allowIn = previousAllowIn;\n\n        if (declarations.length === 1 && declarations[0].init === null && matchKeyword('in')) {\n          init = init.finishLexicalDeclaration(declarations, kind);\n          lex();\n          left = init;\n          right = parseExpression();\n          init = null;\n        } else if (declarations.length === 1 && declarations[0].init === null && matchContextualKeyword('of')) {\n          init = init.finishLexicalDeclaration(declarations, kind);\n          lex();\n          left = init;\n          right = parseAssignmentExpression();\n          init = null;\n          forIn = false;\n        } else {\n          consumeSemicolon();\n          init = init.finishLexicalDeclaration(declarations, kind);\n        }\n      } else {\n        initStartToken = lookahead;\n        state.allowIn = false;\n        init = inheritCoverGrammar(parseAssignmentExpression);\n        state.allowIn = previousAllowIn;\n\n        if (matchKeyword('in')) {\n          if (!isAssignmentTarget) {\n            tolerateError(Messages.InvalidLHSInForIn);\n          }\n\n          lex();\n          reinterpretExpressionAsPattern(init);\n          left = init;\n          right = parseExpression();\n          init = null;\n        } else if (matchContextualKeyword('of')) {\n          if (!isAssignmentTarget) {\n            tolerateError(Messages.InvalidLHSInForLoop);\n          }\n\n          lex();\n          reinterpretExpressionAsPattern(init);\n          left = init;\n          right = parseAssignmentExpression();\n          init = null;\n          forIn = false;\n        } else {\n          if (match(',')) {\n            initSeq = [init];\n            while (match(',')) {\n              lex();\n              initSeq.push(isolateCoverGrammar(parseAssignmentExpression));\n            }\n            init = new WrappingNode(initStartToken).finishSequenceExpression(initSeq);\n          }\n          expect(';');\n        }\n      }\n    }\n\n    if (typeof left === 'undefined') {\n      if (!match(';')) {\n        test = parseExpression();\n      }\n      expect(';');\n\n      if (!match(')')) {\n        update = parseExpression();\n      }\n    }\n\n    expect(')');\n\n    oldInIteration = state.inIteration;\n    state.inIteration = true;\n\n    body = isolateCoverGrammar(parseStatement);\n\n    state.inIteration = oldInIteration;\n\n    return typeof left === 'undefined' ? node.finishForStatement(init, test, update, body) : forIn ? node.finishForInStatement(left, right, body) : node.finishForOfStatement(left, right, body);\n  }\n\n  // 12.7 The continue statement\n  function parseContinueStatement(node) {\n    var label = null,\n        key;\n\n    expectKeyword('continue');\n\n    // Optimize the most common form: 'continue;'.\n    if (source.charCodeAt(startIndex) === 59) {\n      lex();\n\n      if (!state.inIteration) {\n        throwError(Messages.IllegalContinue);\n      }\n\n      return node.finishContinueStatement(null);\n    }\n\n    if (hasLineTerminator) {\n      if (!state.inIteration) {\n        throwError(Messages.IllegalContinue);\n      }\n\n      return node.finishContinueStatement(null);\n    }\n\n    if (lookahead.type === Token.Identifier) {\n      label = parseVariableIdentifier();\n\n      key = '$' + label.name;\n      if (!Object.prototype.hasOwnProperty.call(state.labelSet, key)) {\n        throwError(Messages.UnknownLabel, label.name);\n      }\n    }\n\n    consumeSemicolon();\n\n    if (label === null && !state.inIteration) {\n      throwError(Messages.IllegalContinue);\n    }\n\n    return node.finishContinueStatement(label);\n  }\n\n  // 12.8 The break statement\n  function parseBreakStatement(node) {\n    var label = null,\n        key;\n\n    expectKeyword('break');\n\n    // Catch the very common case first: immediately a semicolon (U+003B).\n    if (source.charCodeAt(lastIndex) === 59) {\n      lex();\n\n      if (!(state.inIteration || state.inSwitch)) {\n        throwError(Messages.IllegalBreak);\n      }\n\n      return node.finishBreakStatement(null);\n    }\n\n    if (hasLineTerminator) {\n      if (!(state.inIteration || state.inSwitch)) {\n        throwError(Messages.IllegalBreak);\n      }\n\n      return node.finishBreakStatement(null);\n    }\n\n    if (lookahead.type === Token.Identifier) {\n      label = parseVariableIdentifier();\n\n      key = '$' + label.name;\n      if (!Object.prototype.hasOwnProperty.call(state.labelSet, key)) {\n        throwError(Messages.UnknownLabel, label.name);\n      }\n    }\n\n    consumeSemicolon();\n\n    if (label === null && !(state.inIteration || state.inSwitch)) {\n      throwError(Messages.IllegalBreak);\n    }\n\n    return node.finishBreakStatement(label);\n  }\n\n  // 12.9 The return statement\n  function parseReturnStatement(node) {\n    var argument = null;\n\n    expectKeyword('return');\n\n    if (!state.inFunctionBody) {\n      tolerateError(Messages.IllegalReturn);\n    }\n\n    // 'return' followed by a space and an identifier is very common.\n    if (source.charCodeAt(lastIndex) === 32) {\n      if (isIdentifierStart(source.charCodeAt(lastIndex + 1))) {\n        argument = parseExpression();\n        consumeSemicolon();\n        return node.finishReturnStatement(argument);\n      }\n    }\n\n    if (hasLineTerminator) {\n      // HACK\n      return node.finishReturnStatement(null);\n    }\n\n    if (!match(';')) {\n      if (!match('}') && lookahead.type !== Token.EOF) {\n        argument = parseExpression();\n      }\n    }\n\n    consumeSemicolon();\n\n    return node.finishReturnStatement(argument);\n  }\n\n  // 12.10 The with statement\n  function parseWithStatement(node) {\n    var object, body;\n\n    if (strict) {\n      tolerateError(Messages.StrictModeWith);\n    }\n\n    expectKeyword('with');\n\n    expect('(');\n\n    object = parseExpression();\n\n    expect(')');\n\n    body = parseStatement();\n\n    return node.finishWithStatement(object, body);\n  }\n\n  // 12.10 The swith statement\n  function parseSwitchCase() {\n    var test,\n        consequent = [],\n        statement,\n        node = new Node();\n\n    if (matchKeyword('default')) {\n      lex();\n      test = null;\n    } else {\n      expectKeyword('case');\n      test = parseExpression();\n    }\n    expect(':');\n\n    while (startIndex < length) {\n      if (match('}') || matchKeyword('default') || matchKeyword('case')) {\n        break;\n      }\n      statement = parseStatementListItem();\n      consequent.push(statement);\n    }\n\n    return node.finishSwitchCase(test, consequent);\n  }\n\n  function parseSwitchStatement(node) {\n    var discriminant, cases, clause, oldInSwitch, defaultFound;\n\n    expectKeyword('switch');\n\n    expect('(');\n\n    discriminant = parseExpression();\n\n    expect(')');\n\n    expect('{');\n\n    cases = [];\n\n    if (match('}')) {\n      lex();\n      return node.finishSwitchStatement(discriminant, cases);\n    }\n\n    oldInSwitch = state.inSwitch;\n    state.inSwitch = true;\n    defaultFound = false;\n\n    while (startIndex < length) {\n      if (match('}')) {\n        break;\n      }\n      clause = parseSwitchCase();\n      if (clause.test === null) {\n        if (defaultFound) {\n          throwError(Messages.MultipleDefaultsInSwitch);\n        }\n        defaultFound = true;\n      }\n      cases.push(clause);\n    }\n\n    state.inSwitch = oldInSwitch;\n\n    expect('}');\n\n    return node.finishSwitchStatement(discriminant, cases);\n  }\n\n  // 12.13 The throw statement\n  function parseThrowStatement(node) {\n    var argument;\n\n    expectKeyword('throw');\n\n    if (hasLineTerminator) {\n      throwError(Messages.NewlineAfterThrow);\n    }\n\n    argument = parseExpression();\n\n    consumeSemicolon();\n\n    return node.finishThrowStatement(argument);\n  }\n\n  // 12.14 The try statement\n  function parseCatchClause() {\n    var param,\n        params = [],\n        paramMap = {},\n        key,\n        i,\n        body,\n        node = new Node();\n\n    expectKeyword('catch');\n\n    expect('(');\n    if (match(')')) {\n      throwUnexpectedToken(lookahead);\n    }\n\n    param = parsePattern(params);\n    for (i = 0; i < params.length; i++) {\n      key = '$' + params[i].value;\n      if (Object.prototype.hasOwnProperty.call(paramMap, key)) {\n        tolerateError(Messages.DuplicateBinding, params[i].value);\n      }\n      paramMap[key] = true;\n    }\n\n    // 12.14.1\n    if (strict && isRestrictedWord(param.name)) {\n      tolerateError(Messages.StrictCatchVariable);\n    }\n\n    expect(')');\n    body = parseBlock();\n    return node.finishCatchClause(param, body);\n  }\n\n  function parseTryStatement(node) {\n    var block,\n        handler = null,\n        finalizer = null;\n\n    expectKeyword('try');\n\n    block = parseBlock();\n\n    if (matchKeyword('catch')) {\n      handler = parseCatchClause();\n    }\n\n    if (matchKeyword('finally')) {\n      lex();\n      finalizer = parseBlock();\n    }\n\n    if (!handler && !finalizer) {\n      throwError(Messages.NoCatchOrFinally);\n    }\n\n    return node.finishTryStatement(block, handler, finalizer);\n  }\n\n  // 12.15 The debugger statement\n  function parseDebuggerStatement(node) {\n    expectKeyword('debugger');\n\n    consumeSemicolon();\n\n    return node.finishDebuggerStatement();\n  }\n\n  // 12 Statements\n  function parseStatement() {\n    var type = lookahead.type,\n        expr,\n        labeledBody,\n        key,\n        node;\n\n    if (type === Token.EOF) {\n      throwUnexpectedToken(lookahead);\n    }\n\n    if (type === Token.Punctuator && lookahead.value === '{') {\n      return parseBlock();\n    }\n    isAssignmentTarget = isBindingElement = true;\n    node = new Node();\n\n    if (type === Token.Punctuator) {\n      switch (lookahead.value) {\n        case ';':\n          return parseEmptyStatement(node);\n        case '(':\n          return parseExpressionStatement(node);\n        default:\n          break;\n      }\n    } else if (type === Token.Keyword) {\n      switch (lookahead.value) {\n        case 'break':\n          return parseBreakStatement(node);\n        case 'continue':\n          return parseContinueStatement(node);\n        case 'debugger':\n          return parseDebuggerStatement(node);\n        case 'do':\n          return parseDoWhileStatement(node);\n        case 'for':\n          return parseForStatement(node);\n        case 'function':\n          return parseFunctionDeclaration(node);\n        case 'if':\n          return parseIfStatement(node);\n        case 'return':\n          return parseReturnStatement(node);\n        case 'switch':\n          return parseSwitchStatement(node);\n        case 'throw':\n          return parseThrowStatement(node);\n        case 'try':\n          return parseTryStatement(node);\n        case 'var':\n          return parseVariableStatement(node);\n        case 'while':\n          return parseWhileStatement(node);\n        case 'with':\n          return parseWithStatement(node);\n        default:\n          break;\n      }\n    }\n\n    expr = parseExpression();\n\n    // 12.12 Labelled Statements\n    if (expr.type === Syntax.Identifier && match(':')) {\n      lex();\n\n      key = '$' + expr.name;\n      if (Object.prototype.hasOwnProperty.call(state.labelSet, key)) {\n        throwError(Messages.Redeclaration, 'Label', expr.name);\n      }\n\n      state.labelSet[key] = true;\n      labeledBody = parseStatement();\n      delete state.labelSet[key];\n      return node.finishLabeledStatement(expr, labeledBody);\n    }\n\n    consumeSemicolon();\n\n    return node.finishExpressionStatement(expr);\n  }\n\n  // 13 Function Definition\n  function parseFunctionSourceElements() {\n    var statement,\n        body = [],\n        token,\n        directive,\n        firstRestricted,\n        oldLabelSet,\n        oldInIteration,\n        oldInSwitch,\n        oldInFunctionBody,\n        oldParenthesisCount,\n        node = new Node();\n\n    expect('{');\n\n    while (startIndex < length) {\n      if (lookahead.type !== Token.StringLiteral) {\n        break;\n      }\n      token = lookahead;\n\n      statement = parseStatementListItem();\n      body.push(statement);\n      if (statement.expression.type !== Syntax.Literal) {\n        // this is not directive\n        break;\n      }\n      directive = source.slice(token.start + 1, token.end - 1);\n      if (directive === 'use strict') {\n        strict = true;\n        if (firstRestricted) {\n          tolerateUnexpectedToken(firstRestricted, Messages.StrictOctalLiteral);\n        }\n      } else {\n        if (!firstRestricted && token.octal) {\n          firstRestricted = token;\n        }\n      }\n    }\n\n    oldLabelSet = state.labelSet;\n    oldInIteration = state.inIteration;\n    oldInSwitch = state.inSwitch;\n    oldInFunctionBody = state.inFunctionBody;\n    oldParenthesisCount = state.parenthesizedCount;\n\n    state.labelSet = {};\n    state.inIteration = false;\n    state.inSwitch = false;\n    state.inFunctionBody = true;\n    state.parenthesizedCount = 0;\n\n    while (startIndex < length) {\n      if (match('}')) {\n        break;\n      }\n      body.push(parseStatementListItem());\n    }\n\n    expect('}');\n\n    state.labelSet = oldLabelSet;\n    state.inIteration = oldInIteration;\n    state.inSwitch = oldInSwitch;\n    state.inFunctionBody = oldInFunctionBody;\n    state.parenthesizedCount = oldParenthesisCount;\n\n    return node.finishBlockStatement(body);\n  }\n\n  function validateParam(options, param, name) {\n    var key = '$' + name;\n    if (strict) {\n      if (isRestrictedWord(name)) {\n        options.stricted = param;\n        options.message = Messages.StrictParamName;\n      }\n      if (Object.prototype.hasOwnProperty.call(options.paramSet, key)) {\n        options.stricted = param;\n        options.message = Messages.StrictParamDupe;\n      }\n    } else if (!options.firstRestricted) {\n      if (isRestrictedWord(name)) {\n        options.firstRestricted = param;\n        options.message = Messages.StrictParamName;\n      } else if (isStrictModeReservedWord(name)) {\n        options.firstRestricted = param;\n        options.message = Messages.StrictReservedWord;\n      } else if (Object.prototype.hasOwnProperty.call(options.paramSet, key)) {\n        options.stricted = param;\n        options.message = Messages.StrictParamDupe;\n      }\n    }\n    options.paramSet[key] = true;\n  }\n\n  function parseParam(options) {\n    var token,\n        param,\n        params = [],\n        i,\n        def;\n\n    token = lookahead;\n    if (token.value === '...') {\n      param = parseRestElement(params);\n      validateParam(options, param.argument, param.argument.name);\n      options.params.push(param);\n      options.defaults.push(null);\n      return false;\n    }\n\n    param = parsePatternWithDefault(params);\n    for (i = 0; i < params.length; i++) {\n      validateParam(options, params[i], params[i].value);\n    }\n\n    if (param.type === Syntax.AssignmentPattern) {\n      def = param.right;\n      param = param.left;\n      ++options.defaultCount;\n    }\n\n    options.params.push(param);\n    options.defaults.push(def);\n\n    return !match(')');\n  }\n\n  function parseParams(firstRestricted) {\n    var options;\n\n    options = {\n      params: [],\n      defaultCount: 0,\n      defaults: [],\n      firstRestricted: firstRestricted\n    };\n\n    expect('(');\n\n    if (!match(')')) {\n      options.paramSet = {};\n      while (startIndex < length) {\n        if (!parseParam(options)) {\n          break;\n        }\n        expect(',');\n      }\n    }\n\n    expect(')');\n\n    if (options.defaultCount === 0) {\n      options.defaults = [];\n    }\n\n    return {\n      params: options.params,\n      defaults: options.defaults,\n      stricted: options.stricted,\n      firstRestricted: options.firstRestricted,\n      message: options.message\n    };\n  }\n\n  function parseFunctionDeclaration(node, identifierIsOptional) {\n    var id = null,\n        params = [],\n        defaults = [],\n        body,\n        token,\n        stricted,\n        tmp,\n        firstRestricted,\n        message,\n        previousStrict,\n        isGenerator,\n        previousAllowYield;\n\n    expectKeyword('function');\n\n    isGenerator = match('*');\n    if (isGenerator) {\n      lex();\n    }\n\n    if (!identifierIsOptional || !match('(')) {\n      token = lookahead;\n      id = parseVariableIdentifier();\n      if (strict) {\n        if (isRestrictedWord(token.value)) {\n          tolerateUnexpectedToken(token, Messages.StrictFunctionName);\n        }\n      } else {\n        if (isRestrictedWord(token.value)) {\n          firstRestricted = token;\n          message = Messages.StrictFunctionName;\n        } else if (isStrictModeReservedWord(token.value)) {\n          firstRestricted = token;\n          message = Messages.StrictReservedWord;\n        }\n      }\n    }\n\n    previousAllowYield = state.allowYield;\n    state.allowYield = false;\n    tmp = parseParams(firstRestricted);\n    state.allowYield = previousAllowYield;\n\n    params = tmp.params;\n    defaults = tmp.defaults;\n    stricted = tmp.stricted;\n    firstRestricted = tmp.firstRestricted;\n    if (tmp.message) {\n      message = tmp.message;\n    }\n\n    previousAllowYield = state.allowYield;\n    previousStrict = strict;\n    state.allowYield = isGenerator;\n    body = parseFunctionSourceElements();\n    if (strict && firstRestricted) {\n      throwUnexpectedToken(firstRestricted, message);\n    }\n    if (strict && stricted) {\n      tolerateUnexpectedToken(stricted, message);\n    }\n    strict = previousStrict;\n    state.allowYield = previousAllowYield;\n\n    return node.finishFunctionDeclaration(id, params, defaults, body, isGenerator);\n  }\n\n  function parseFunctionExpression() {\n    var token,\n        id = null,\n        stricted,\n        firstRestricted,\n        message,\n        tmp,\n        params = [],\n        defaults = [],\n        body,\n        previousStrict,\n        node = new Node(),\n        isGenerator,\n        previousAllowYield;\n\n    expectKeyword('function');\n\n    isGenerator = match('*');\n    if (isGenerator) {\n      lex();\n    }\n\n    if (!match('(')) {\n      token = lookahead;\n      id = parseVariableIdentifier();\n      if (strict) {\n        if (isRestrictedWord(token.value)) {\n          tolerateUnexpectedToken(token, Messages.StrictFunctionName);\n        }\n      } else {\n        if (isRestrictedWord(token.value)) {\n          firstRestricted = token;\n          message = Messages.StrictFunctionName;\n        } else if (isStrictModeReservedWord(token.value)) {\n          firstRestricted = token;\n          message = Messages.StrictReservedWord;\n        }\n      }\n    }\n\n    previousAllowYield = state.allowYield;\n    state.allowYield = false;\n    tmp = parseParams(firstRestricted);\n    state.allowYield = previousAllowYield;\n\n    params = tmp.params;\n    defaults = tmp.defaults;\n    stricted = tmp.stricted;\n    firstRestricted = tmp.firstRestricted;\n    if (tmp.message) {\n      message = tmp.message;\n    }\n\n    previousStrict = strict;\n    previousAllowYield = state.allowYield;\n    state.allowYield = isGenerator;\n    body = parseFunctionSourceElements();\n\n    if (strict && firstRestricted) {\n      throwUnexpectedToken(firstRestricted, message);\n    }\n    if (strict && stricted) {\n      tolerateUnexpectedToken(stricted, message);\n    }\n    strict = previousStrict;\n    state.allowYield = previousAllowYield;\n\n    return node.finishFunctionExpression(id, params, defaults, body, isGenerator);\n  }\n\n  function parseClassBody() {\n    var classBody,\n        token,\n        isStatic,\n        hasConstructor = false,\n        body,\n        method,\n        computed,\n        key;\n\n    classBody = new Node();\n\n    expect('{');\n    body = [];\n    while (!match('}')) {\n      if (match(';')) {\n        lex();\n      } else {\n        method = new Node();\n        token = lookahead;\n        isStatic = false;\n        computed = match('[');\n        if (match('*')) {\n          lex();\n        } else {\n          key = parseObjectPropertyKey();\n          if (key.name === 'static' && (lookaheadPropertyName() || match('*'))) {\n            token = lookahead;\n            isStatic = true;\n            computed = match('[');\n            if (match('*')) {\n              lex();\n            } else {\n              key = parseObjectPropertyKey();\n            }\n          }\n        }\n        method = tryParseMethodDefinition(token, key, computed, method);\n        if (method) {\n          method['static'] = isStatic;\n          if (method.kind === 'init') {\n            method.kind = 'method';\n          }\n          if (!isStatic) {\n            if (!method.computed && (method.key.name || method.key.value.toString()) === 'constructor') {\n              if (method.kind !== 'method' || !method.method || method.value.generator) {\n                throwUnexpectedToken(token, Messages.ConstructorSpecialMethod);\n              }\n              if (hasConstructor) {\n                throwUnexpectedToken(token, Messages.DuplicateConstructor);\n              } else {\n                hasConstructor = true;\n              }\n              method.kind = 'constructor';\n            }\n          } else {\n            if (!method.computed && (method.key.name || method.key.value.toString()) === 'prototype') {\n              throwUnexpectedToken(token, Messages.StaticPrototype);\n            }\n          }\n          method.type = Syntax.MethodDefinition;\n          delete method.method;\n          delete method.shorthand;\n          body.push(method);\n        } else {\n          throwUnexpectedToken(lookahead);\n        }\n      }\n    }\n    lex();\n    return classBody.finishClassBody(body);\n  }\n\n  function parseClassDeclaration(identifierIsOptional) {\n    var id = null,\n        superClass = null,\n        classNode = new Node(),\n        classBody,\n        previousStrict = strict;\n    strict = true;\n\n    expectKeyword('class');\n\n    if (!identifierIsOptional || lookahead.type === Token.Identifier) {\n      id = parseVariableIdentifier();\n    }\n\n    if (matchKeyword('extends')) {\n      lex();\n      superClass = isolateCoverGrammar(parseLeftHandSideExpressionAllowCall);\n    }\n    classBody = parseClassBody();\n    strict = previousStrict;\n\n    return classNode.finishClassDeclaration(id, superClass, classBody);\n  }\n\n  function parseClassExpression() {\n    var id = null,\n        superClass = null,\n        classNode = new Node(),\n        classBody,\n        previousStrict = strict;\n    strict = true;\n\n    expectKeyword('class');\n\n    if (lookahead.type === Token.Identifier) {\n      id = parseVariableIdentifier();\n    }\n\n    if (matchKeyword('extends')) {\n      lex();\n      superClass = isolateCoverGrammar(parseLeftHandSideExpressionAllowCall);\n    }\n    classBody = parseClassBody();\n    strict = previousStrict;\n\n    return classNode.finishClassExpression(id, superClass, classBody);\n  }\n\n  // Modules grammar from:\n  // people.mozilla.org/~jorendorff/es6-draft.html\n  function parseModuleSpecifier() {\n    var node = new Node();\n\n    if (lookahead.type !== Token.StringLiteral) {\n      throwError(Messages.InvalidModuleSpecifier);\n    }\n    return node.finishLiteral(lex());\n  }\n\n  function parseExportSpecifier() {\n    var exported,\n        local,\n        node = new Node(),\n        def;\n    if (matchKeyword('default')) {\n      // export {default} from 'something';\n      def = new Node();\n      lex();\n      local = def.finishIdentifier('default');\n    } else {\n      local = parseVariableIdentifier();\n    }\n    if (matchContextualKeyword('as')) {\n      lex();\n      exported = parseNonComputedProperty();\n    }\n    return node.finishExportSpecifier(local, exported);\n  }\n\n  function parseExportNamedDeclaration(node) {\n    var declaration = null,\n        isExportFromIdentifier,\n        src = null,\n        specifiers = [];\n\n    // non-default export\n    if (lookahead.type === Token.Keyword) {\n      // covers:\n      // export var f = 1;\n      switch (lookahead.value) {\n        case 'let':\n        case 'const':\n        case 'var':\n        case 'class':\n        case 'function':\n          declaration = parseStatementListItem();\n          return node.finishExportNamedDeclaration(declaration, specifiers, null);\n      }\n    }\n\n    expect('{');\n    if (!match('}')) {\n      do {\n        isExportFromIdentifier = isExportFromIdentifier || matchKeyword('default');\n        specifiers.push(parseExportSpecifier());\n      } while (match(',') && lex());\n    }\n    expect('}');\n\n    if (matchContextualKeyword('from')) {\n      // covering:\n      // export {default} from 'foo';\n      // export {foo} from 'foo';\n      lex();\n      src = parseModuleSpecifier();\n      consumeSemicolon();\n    } else if (isExportFromIdentifier) {\n      // covering:\n      // export {default}; // missing fromClause\n      throwError(lookahead.value ? Messages.UnexpectedToken : Messages.MissingFromClause, lookahead.value);\n    } else {\n      // cover\n      // export {foo};\n      consumeSemicolon();\n    }\n    return node.finishExportNamedDeclaration(declaration, specifiers, src);\n  }\n\n  function parseExportDefaultDeclaration(node) {\n    var declaration = null,\n        expression = null;\n\n    // covers:\n    // export default ...\n    expectKeyword('default');\n\n    if (matchKeyword('function')) {\n      // covers:\n      // export default function foo () {}\n      // export default function () {}\n      declaration = parseFunctionDeclaration(new Node(), true);\n      return node.finishExportDefaultDeclaration(declaration);\n    }\n    if (matchKeyword('class')) {\n      declaration = parseClassDeclaration(true);\n      return node.finishExportDefaultDeclaration(declaration);\n    }\n\n    if (matchContextualKeyword('from')) {\n      throwError(Messages.UnexpectedToken, lookahead.value);\n    }\n\n    // covers:\n    // export default {};\n    // export default [];\n    // export default (1 + 2);\n    if (match('{')) {\n      expression = parseObjectInitialiser();\n    } else if (match('[')) {\n      expression = parseArrayInitialiser();\n    } else {\n      expression = parseAssignmentExpression();\n    }\n    consumeSemicolon();\n    return node.finishExportDefaultDeclaration(expression);\n  }\n\n  function parseExportAllDeclaration(node) {\n    var src;\n\n    // covers:\n    // export * from 'foo';\n    expect('*');\n    if (!matchContextualKeyword('from')) {\n      throwError(lookahead.value ? Messages.UnexpectedToken : Messages.MissingFromClause, lookahead.value);\n    }\n    lex();\n    src = parseModuleSpecifier();\n    consumeSemicolon();\n\n    return node.finishExportAllDeclaration(src);\n  }\n\n  function parseExportDeclaration() {\n    var node = new Node();\n    if (state.inFunctionBody) {\n      throwError(Messages.IllegalExportDeclaration);\n    }\n\n    expectKeyword('export');\n\n    if (matchKeyword('default')) {\n      return parseExportDefaultDeclaration(node);\n    }\n    if (match('*')) {\n      return parseExportAllDeclaration(node);\n    }\n    return parseExportNamedDeclaration(node);\n  }\n\n  function parseImportSpecifier() {\n    // import {<foo as bar>} ...;\n    var local,\n        imported,\n        node = new Node();\n\n    imported = parseNonComputedProperty();\n    if (matchContextualKeyword('as')) {\n      lex();\n      local = parseVariableIdentifier();\n    }\n\n    return node.finishImportSpecifier(local, imported);\n  }\n\n  function parseNamedImports() {\n    var specifiers = [];\n    // {foo, bar as bas}\n    expect('{');\n    if (!match('}')) {\n      do {\n        specifiers.push(parseImportSpecifier());\n      } while (match(',') && lex());\n    }\n    expect('}');\n    return specifiers;\n  }\n\n  function parseImportDefaultSpecifier() {\n    // import <foo> ...;\n    var local,\n        node = new Node();\n\n    local = parseNonComputedProperty();\n\n    return node.finishImportDefaultSpecifier(local);\n  }\n\n  function parseImportNamespaceSpecifier() {\n    // import <* as foo> ...;\n    var local,\n        node = new Node();\n\n    expect('*');\n    if (!matchContextualKeyword('as')) {\n      throwError(Messages.NoAsAfterImportNamespace);\n    }\n    lex();\n    local = parseNonComputedProperty();\n\n    return node.finishImportNamespaceSpecifier(local);\n  }\n\n  function parseImportDeclaration() {\n    var specifiers,\n        src,\n        node = new Node();\n\n    if (state.inFunctionBody) {\n      throwError(Messages.IllegalImportDeclaration);\n    }\n\n    expectKeyword('import');\n    specifiers = [];\n\n    if (lookahead.type === Token.StringLiteral) {\n      // covers:\n      // import 'foo';\n      src = parseModuleSpecifier();\n      consumeSemicolon();\n      return node.finishImportDeclaration(specifiers, src);\n    }\n\n    if (!matchKeyword('default') && isIdentifierName(lookahead)) {\n      // covers:\n      // import foo\n      // import foo, ...\n      specifiers.push(parseImportDefaultSpecifier());\n      if (match(',')) {\n        lex();\n      }\n    }\n    if (match('*')) {\n      // covers:\n      // import foo, * as foo\n      // import * as foo\n      specifiers.push(parseImportNamespaceSpecifier());\n    } else if (match('{')) {\n      // covers:\n      // import foo, {bar}\n      // import {bar}\n      specifiers = specifiers.concat(parseNamedImports());\n    }\n\n    if (!matchContextualKeyword('from')) {\n      throwError(lookahead.value ? Messages.UnexpectedToken : Messages.MissingFromClause, lookahead.value);\n    }\n    lex();\n    src = parseModuleSpecifier();\n    consumeSemicolon();\n\n    return node.finishImportDeclaration(specifiers, src);\n  }\n\n  // 14 Program\n  function parseScriptBody() {\n    var statement,\n        body = [],\n        token,\n        directive,\n        firstRestricted;\n\n    while (startIndex < length) {\n      token = lookahead;\n      if (token.type !== Token.StringLiteral) {\n        break;\n      }\n\n      statement = parseStatementListItem();\n      body.push(statement);\n      if (statement.expression.type !== Syntax.Literal) {\n        // this is not directive\n        break;\n      }\n      directive = source.slice(token.start + 1, token.end - 1);\n      if (directive === 'use strict') {\n        strict = true;\n        if (firstRestricted) {\n          tolerateUnexpectedToken(firstRestricted, Messages.StrictOctalLiteral);\n        }\n      } else {\n        if (!firstRestricted && token.octal) {\n          firstRestricted = token;\n        }\n      }\n    }\n\n    while (startIndex < length) {\n      statement = parseStatementListItem();\n      /* istanbul ignore if */\n      if (typeof statement === 'undefined') {\n        break;\n      }\n      body.push(statement);\n    }\n    return body;\n  }\n\n  function parseProgram() {\n    var body, node;\n\n    peek();\n    node = new Node();\n\n    body = parseScriptBody();\n    return node.finishProgram(body);\n  }\n\n  function filterTokenLocation() {\n    var i,\n        entry,\n        token,\n        tokens = [];\n\n    for (i = 0; i < extra.tokens.length; ++i) {\n      entry = extra.tokens[i];\n      token = {\n        type: entry.type,\n        value: entry.value\n      };\n      if (entry.regex) {\n        token.regex = {\n          pattern: entry.regex.pattern,\n          flags: entry.regex.flags\n        };\n      }\n      if (extra.range) {\n        token.range = entry.range;\n      }\n      if (extra.loc) {\n        token.loc = entry.loc;\n      }\n      tokens.push(token);\n    }\n\n    extra.tokens = tokens;\n  }\n\n  function tokenize(code, options) {\n    var toString, tokens;\n\n    toString = String;\n    if (typeof code !== 'string' && !(code instanceof String)) {\n      code = toString(code);\n    }\n\n    source = code;\n    index = 0;\n    lineNumber = source.length > 0 ? 1 : 0;\n    lineStart = 0;\n    startIndex = index;\n    startLineNumber = lineNumber;\n    startLineStart = lineStart;\n    length = source.length;\n    lookahead = null;\n    state = {\n      allowIn: true,\n      allowYield: false,\n      labelSet: {},\n      inFunctionBody: false,\n      inIteration: false,\n      inSwitch: false,\n      lastCommentStart: -1,\n      curlyStack: []\n    };\n\n    extra = {};\n\n    // Options matching.\n    options = options || {};\n\n    // Of course we collect tokens here.\n    options.tokens = true;\n    extra.tokens = [];\n    extra.tokenize = true;\n    // The following two fields are necessary to compute the Regex tokens.\n    extra.openParenToken = -1;\n    extra.openCurlyToken = -1;\n\n    extra.range = typeof options.range === 'boolean' && options.range;\n    extra.loc = typeof options.loc === 'boolean' && options.loc;\n\n    if (typeof options.comment === 'boolean' && options.comment) {\n      extra.comments = [];\n    }\n    if (typeof options.tolerant === 'boolean' && options.tolerant) {\n      extra.errors = [];\n    }\n\n    try {\n      peek();\n      if (lookahead.type === Token.EOF) {\n        return extra.tokens;\n      }\n\n      lex();\n      while (lookahead.type !== Token.EOF) {\n        try {\n          lex();\n        } catch (lexError) {\n          if (extra.errors) {\n            recordError(lexError);\n            // We have to break on the first error\n            // to avoid infinite loops.\n            break;\n          } else {\n            throw lexError;\n          }\n        }\n      }\n\n      filterTokenLocation();\n      tokens = extra.tokens;\n      if (typeof extra.comments !== 'undefined') {\n        tokens.comments = extra.comments;\n      }\n      if (typeof extra.errors !== 'undefined') {\n        tokens.errors = extra.errors;\n      }\n    } catch (e) {\n      throw e;\n    } finally {\n      extra = {};\n    }\n    return tokens;\n  }\n\n  function parse(code, options) {\n    var program, toString;\n\n    toString = String;\n    if (typeof code !== 'string' && !(code instanceof String)) {\n      code = toString(code);\n    }\n\n    source = code;\n    index = 0;\n    lineNumber = source.length > 0 ? 1 : 0;\n    lineStart = 0;\n    startIndex = index;\n    startLineNumber = lineNumber;\n    startLineStart = lineStart;\n    length = source.length;\n    lookahead = null;\n    state = {\n      allowIn: true,\n      allowYield: false,\n      labelSet: {},\n      inFunctionBody: false,\n      inIteration: false,\n      inSwitch: false,\n      lastCommentStart: -1,\n      curlyStack: []\n    };\n    sourceType = 'script';\n    strict = false;\n\n    extra = {};\n    if (typeof options !== 'undefined') {\n      extra.range = typeof options.range === 'boolean' && options.range;\n      extra.loc = typeof options.loc === 'boolean' && options.loc;\n      extra.attachComment = typeof options.attachComment === 'boolean' && options.attachComment;\n\n      if (extra.loc && options.source !== null && options.source !== undefined) {\n        extra.source = toString(options.source);\n      }\n\n      if (typeof options.tokens === 'boolean' && options.tokens) {\n        extra.tokens = [];\n      }\n      if (typeof options.comment === 'boolean' && options.comment) {\n        extra.comments = [];\n      }\n      if (typeof options.tolerant === 'boolean' && options.tolerant) {\n        extra.errors = [];\n      }\n      if (extra.attachComment) {\n        extra.range = true;\n        extra.comments = [];\n        extra.bottomRightStack = [];\n        extra.trailingComments = [];\n        extra.leadingComments = [];\n      }\n      if (options.sourceType === 'module') {\n        // very restrictive condition for now\n        sourceType = options.sourceType;\n        strict = true;\n      }\n    }\n\n    try {\n      program = parseProgram();\n      if (typeof extra.comments !== 'undefined') {\n        program.comments = extra.comments;\n      }\n      if (typeof extra.tokens !== 'undefined') {\n        filterTokenLocation();\n        program.tokens = extra.tokens;\n      }\n      if (typeof extra.errors !== 'undefined') {\n        program.errors = extra.errors;\n      }\n    } catch (e) {\n      throw e;\n    } finally {\n      extra = {};\n    }\n\n    return program;\n  }\n\n  // Sync with *.json manifests.\n  exports.version = '2.4.1';\n\n  exports.tokenize = tokenize;\n\n  exports.parse = parse;\n\n  // Deep copy.\n  /* istanbul ignore next */\n  exports.Syntax = function () {\n    var name,\n        types = {};\n\n    if (typeof Object.create === 'function') {\n      types = Object.create(null);\n    }\n\n    for (name in Syntax) {\n      if (Syntax.hasOwnProperty(name)) {\n        types[name] = Syntax[name];\n      }\n    }\n\n    if (typeof Object.freeze === 'function') {\n      Object.freeze(types);\n    }\n\n    return types;\n  }();\n});\n\n/* vim: set sw=4 ts=4 et tw=80 : */\nexports.default = _exports;\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/~/jsio/packages/util/esprima.js\n// module id = 6\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/~/jsio/packages/util/esprima.js?");

/***/ },
/* 7 */
/*!***************************************************************!*\
  !*** ./modules/devkit-core/modules/timestep/src/userAgent.js ***!
  \***************************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nexports.__esModule = true;\n\nvar _base = __webpack_require__(/*! base */ 2);\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _exports = {};\n\n/**\n * @license\n * This file is part of the Game Closure SDK.\n *\n * The Game Closure SDK is free software: you can redistribute it and/or modify\n * it under the terms of the Mozilla Public License v. 2.0 as published by Mozilla.\n\n * The Game Closure SDK is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * Mozilla Public License v. 2.0 for more details.\n\n * You should have received a copy of the Mozilla Public License v. 2.0\n * along with the Game Closure SDK.  If not, see <http://mozilla.org/MPL/2.0/>.\n */\n/**\n * @module userAgent\n *\n * Uses navigator.userAgent and retrieves information about app runtime, device,\n * OS version, browser version, and simulator status.\n */\nvar ua = navigator && navigator.userAgent;\nvar isNative = /TeaLeaf/.test(ua);\nvar isIOS = /iPod|iPhone|iPad/i.test(ua);\nvar isAndroid = /Android/.test(ua);\nvar isMac = /Mac OS X [0-9_]+/.test(ua);\nvar isIPhoneOS = /iPhone OS/.test(ua);\nvar isSafari = /Safari/.test(ua);\nvar isChrome = /Chrome/.test(ua);\nvar isFirefox = /Firefox/.test(ua);\nvar isIE = /MSIE/.test(ua);\nvar isIE11 = /Trident/.test(ua);\nvar isEdge = /Edge/.test(ua);\nvar isSimulator = _base.GLOBAL.CONFIG && !!_base.CONFIG.simulator;\n\nvar appRuntime = 'unknown';\nvar deviceType = 'unknown';\nvar osType = 'unknown';\nvar osVersion = 'unknown';\nvar osVersionString = 'unknown';\nvar browserVersion = 'unknown';\nvar browserVersionString = 'unknown';\nvar browserType = 'unknown';\n\nif (isNative) {\n  appRuntime = 'native';\n  deviceType = 'mobile';\n} else {\n  appRuntime = 'browser';\n  if (isIOS || isAndroid) {\n    deviceType = 'mobile';\n  } else {\n    deviceType = 'desktop';\n  }\n}\n\nif (isAndroid) {\n  osType = 'Android';\n  osVersionString = ua.match(/Android[/\\s][\\d.]+/)[0];\n  osVersion = osVersionString.match(/[\\d.]+/)[0];\n} else if (isIPhoneOS) {\n  osType = 'iPhone OS';\n  osVersionString = ua.match(/iPhone OS [0-9_]+/)[0];\n  osVersion = osVersionString.match(/[0-9_]+/)[0].replace(/_/g, '.');\n} else if (isMac) {\n  osType = 'Mac OS X';\n  osVersionString = ua.match(/Mac OS X [0-9_]+/)[0];\n  osVersion = osVersionString.match(/[0-9_]+/)[0].replace(/_/g, '.');\n}\n\nif (isChrome) {\n  browserType = 'Chrome';\n  browserVersionString = ua.match(/Chrome[/\\s][\\d.]+/)[0];\n  browserVersion = browserVersionString.match(/[\\d.]+/)[0];\n} else if (isSafari) {\n  browserType = 'Safari';\n  browserVersionString = ua.match(/Safari[/\\s][\\d.]+/)[0];\n  browserVersion = browserVersionString.match(/[\\d.]+/)[0];\n} else if (isFirefox) {\n  browserType = 'Firefox';\n  browserVersionString = ua.match(/Firefox[/\\s][\\d.]+/)[0];\n  browserVersion = browserVersionString.match(/[\\d.]+/)[0];\n} else if (isIE) {\n  browserType = 'Internet Explorer';\n} else if (isIE11) {\n  browserType = 'Internet Explorer';\n} else if (isEdge) {\n  browserType = 'Edge';\n}\n\nvar UserAgent = function UserAgent() {\n  _classCallCheck(this, UserAgent);\n};\n\nUserAgent.prototype.USER_AGENT = ua;\nUserAgent.prototype.OS_TYPE = osType;\nUserAgent.prototype.OS_VERSION = osVersion;\nUserAgent.prototype.APP_RUNTIME = appRuntime;\nUserAgent.prototype.DEVICE_TYPE = deviceType;\nUserAgent.prototype.BROWSER_TYPE = browserType;\nUserAgent.prototype.BROWSER_VERSION = browserVersion;\nUserAgent.prototype.SIMULATED = isSimulator;\n_exports = new UserAgent();\n\nexports.default = _exports;\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/modules/timestep/src/userAgent.js\n// module id = 7\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/modules/timestep/src/userAgent.js?");

/***/ },
/* 8 */
/*!*****************************************************************!*\
  !*** ./modules/devkit-core/~/jsio/packages/util/setProperty.js ***!
  \*****************************************************************/
/***/ function(module, exports) {

	eval("'use strict';\n\nexports.__esModule = true;\nvar _exports = {};\n\nfunction createGetter(ctx, name) {\n  return function () {\n    return this[name];\n  };\n}\n\nfunction createSetter(ctx, name, callback, initialValue) {\n  if (initialValue !== undefined) {\n    ctx[name] = initialValue;\n  }\n\n  if (typeof callback == 'function') {\n    return function (value) {\n      if (this[name] !== value) {\n        var old = this[name];\n        this[name] = value;\n        callback.call(this, name, value, old);\n      }\n    };\n  } else if (typeof callback == 'string') {\n    return function (value) {\n      if (this[name] !== value) {\n        var old = this[name];\n        this[name] = value;\n        this[callback](name, value, old);\n      }\n    };\n  } else {\n    return function (value) {\n      this[name] = value;\n    };\n  }\n}\n\n_exports = function exports(ctx, name, def) {\n  if (!def.get && !def.set && !def.cb && 'value' in def) {\n    ctx[name] = def.value;\n  } else {\n    if (!def.get) {\n      def.get = createGetter(ctx, '_' + name);\n    }\n    if (!def.set) {\n      def.set = createSetter(ctx, '_' + name, def.cb, def.value);\n    }\n    if ('value' in def) {\n      ctx['_' + name] = def.value;\n    }\n\n    delete def.value;\n    if (Object.defineProperty) {\n      Object.defineProperty(ctx, name, def);\n    } else // merge(def, {\n      // \t\t\t\tconfigurable: false,\n      // \t\t\t\tenumerable: true\n      // \t\t\t});\n      if (ctx.__defineSetter__) {\n        ctx.__defineSetter__(name, def.set);\n        ctx.__defineGetter__(name, def.get);\n      } else {\n        ctx[name] = def.value;\n      }\n  }\n};\n\nexports.default = _exports;\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/~/jsio/packages/util/setProperty.js\n// module id = 8\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/~/jsio/packages/util/setProperty.js?");

/***/ },
/* 9 */
/*!*******************************************************************!*\
  !*** ./modules/devkit-core/modules/timestep/src/event/Emitter.js ***!
  \*******************************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nexports.__esModule = true;\n\nvar _PubSub = __webpack_require__(/*! lib/PubSub */ 10);\n\nvar _PubSub2 = _interopRequireDefault(_PubSub);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar _exports = {};\n\n/**\n * @license\n * This file is part of the Game Closure SDK.\n *\n * The Game Closure SDK is free software: you can redistribute it and/or modify\n * it under the terms of the Mozilla Public License v. 2.0 as published by Mozilla.\n\n * The Game Closure SDK is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * Mozilla Public License v. 2.0 for more details.\n\n * You should have received a copy of the Mozilla Public License v. 2.0\n * along with the Game Closure SDK.  If not, see <http://mozilla.org/MPL/2.0/>.\n */\n/**\n * @class event.Emitter;\n * Namespace shim to bring in PubSub from jsio.\n *\n * @doc http://doc.gameclosure.com/api/event.html#class-event.emitter\n * @docsrc https://github.com/gameclosure/doc/blob/master/api/event.md\n */\n// FIXME: remove this file\n\n_exports = _PubSub2.default;\n\nexports.default = _exports;\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/modules/timestep/src/event/Emitter.js\n// module id = 9\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/modules/timestep/src/event/Emitter.js?");

/***/ },
/* 10 */
/*!***********************************************************!*\
  !*** ./modules/devkit-core/~/jsio/packages/lib/PubSub.js ***!
  \***********************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nexports.__esModule = true;\n\nvar _base = __webpack_require__(/*! base */ 2);\n\nvar _uuid2 = __webpack_require__(/*! ../std/uuid */ 11);\n\nvar _uuid3 = _interopRequireDefault(_uuid2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _exports = {};\n\n/**\n * Summary: inherit from lib.PubSub if a class wants publish/subscribe ability\n * Methods:\n *  - publish(signal, args...) - all subscribers to signal will be called\n *     with the list of arguments provided.\n *  - subscribe(signal, ctx, method, args...) - register a bound method\n *     to a signal.  Any args that are passed in will be the first args\n *     when the method is invoked during a publish.\n *  Usage notes: There is one special signal '__any'.  Any subscribers to\n *     '__any' will be called on every publish with the first publish\n *     argument being the signal itself (after any args passed in during\n *     the corresponding subscribe).\n *     Calling the super constructor is not required for descendants of\n *     lib.PubSub.\n */\n\nvar uuid = _uuid3.default.uuid;\n\nvar ctx = jsio.__env.global,\n    SLICE = Array.prototype.slice;\n\n_exports = function () {\n  function exports() {\n    _classCallCheck(this, exports);\n  }\n\n  exports.prototype.publish = function publish(signal) {\n    if (this._subscribers) {\n      var args = SLICE.call(arguments, 1);\n      if (this._subscribers.__any) {\n        var anyArgs = [signal].concat(args),\n            subs = this._subscribers.__any.slice(0);\n        for (var i = 0, sub; sub = subs[i]; ++i) {\n          sub.apply(ctx, anyArgs);\n        }\n      }\n\n      if (!this._subscribers[signal]) {\n        return this;\n      }\n\n      var subs = this._subscribers[signal].slice(0);\n      for (var i = 0, sub; sub = subs[i]; ++i) {\n        sub.apply(ctx, args);\n      }\n    }\n    return this;\n  };\n\n  exports.prototype.subscribe = function subscribe(signal, ctx, method) {\n    var cb;\n    if (arguments.length == 2) {\n      cb = ctx;\n    } else {\n      cb = _base.bind.apply(_base.GLOBAL, SLICE.call(arguments, 1));\n      cb._ctx = ctx;\n      // references for unsubscription\n      cb._method = method;\n    }\n\n    var s = this._subscribers || (this._subscribers = {});\n    (s[signal] || (s[signal] = [])).push(cb);\n    return this;\n  };\n\n  exports.prototype.subscribeOnce = function subscribeOnce(signal, ctx, method) {\n    var args = arguments,\n        cb = (0, _base.bind)(this, function () {\n      this.unsubscribe(signal, cb);\n      if (args.length == 2) {\n        ctx.apply(_base.GLOBAL, arguments);\n      } else {\n        _base.bind.apply(_base.GLOBAL, SLICE.call(args, 1)).apply(_base.GLOBAL, arguments);\n      }\n    });\n\n    if (args.length >= 3) {\n      cb._ctx = ctx;\n      cb._method = method;\n    }\n\n    return this.subscribe(signal, cb);\n  };\n\n  exports.prototype.unsubscribe = function unsubscribe(signal, ctx, method) {\n    if (!this._subscribers || !this._subscribers[signal]) {\n      return this;\n    }\n    var subs = this._subscribers[signal];\n    for (var i = 0, c; c = subs[i]; ++i) {\n      if (c == ctx || c._ctx == ctx && (!method || c._method == method)) {\n        subs.splice(i--, 1);\n      }\n    }\n    return this;\n  };\n\n  exports.prototype.listeners = function listeners(type) {\n    this._subscribers = this._subscribers ? this._subscribers : {};\n    return this.hasOwnProperty.call(this._subscribers, type) ? this._subscribers[type] : this._subscribers[type] = [];\n  };\n\n  exports.prototype.on = function on(type, f) {\n    if (this.listeners(type).length + 1 > this._maxListeners && this._maxListeners !== 0) {\n      if (typeof console !== 'undefined') {\n        console.warn('Possible EventEmitter memory leak detected. ' + this._subscribers[type].length + ' listeners added. Use emitter.setMaxListeners() to increase limit.');\n      }\n    }\n    this.emit('newListener', type, f);\n    return this.subscribe(type, this, f);\n  };\n\n  exports.prototype.once = function once(type, f) {\n    return this.subscribeOnce(type, this, f);\n  };\n\n  exports.prototype.removeListener = function removeListener(type, f) {\n    this.unsubscribe(type, this, f);\n    return this;\n  };\n\n  exports.prototype.removeAllListeners = function removeAllListeners(type) {\n    if (this._subscribers) {\n      for (var k in this._subscribers) {\n        if (type == null || type == k) {\n          delete this._subscribers[k];\n        }\n      }\n    }\n    return this;\n  };\n\n  exports.prototype.emit = function emit(type) {\n    this.publish.apply(this, arguments);\n    return this.listeners(type).length > 0;\n  };\n\n  exports.prototype.setMaxListeners = function setMaxListeners(_maxListeners) {\n    this._maxListeners = _maxListeners;\n  };\n\n  exports.prototype.hasListeners = function hasListeners(type) {\n    return this._subscribers && this._subscribers[type] && this._subscribers[type].length;\n  };\n\n  exports.prototype.listenTo = function listenTo(obj, name, callback) {\n    var listeningTo = this._listeningTo || (this._listeningTo = {});\n    var id = obj._listenId || (obj._listenId = uuid(8, 16));\n    listeningTo[id] = obj;\n    obj.subscribe(name, this, callback);\n    return this;\n  };\n\n  exports.prototype.stopListening = function stopListening(obj, name, callback) {\n    var events, names, retain, i, j, k, l, ev;\n    var listeningTo = this._listeningTo;\n    if (!listeningTo) {\n      return this;\n    }\n\n    _base.logger.log(obj);\n    var remove = !name && !callback;\n    if (obj) {\n      (listeningTo = {})[obj._listenId] = obj;\n    }\n\n    for (var id in listeningTo) {\n      obj = listeningTo[id];\n\n      names = name ? [name] : Object.keys(obj._subscribers);\n      for (i = 0, l = names.length; i < l; i++) {\n        name = names[i];\n        if (events = obj._subscribers[name]) {\n          obj._subscribers[name] = retain = [];\n          for (j = 0, k = events.length; j < k; j++) {\n            ev = events[j];\n            if (callback && callback !== ev._method || this && this !== ev._ctx) {\n              retain.push(ev);\n            }\n          }\n          if (!retain.length) {\n            delete obj._subscribers[name];\n          }\n        }\n      }\n      if (remove) {\n        delete this._listeningTo[id];\n      }\n    }\n    return this;\n  };\n\n  return exports;\n}();\n\n_exports.prototype.addListener = _exports.prototype.on;\n_exports.prototype._maxListeners = 10;\nexports.default = _exports;\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/~/jsio/packages/lib/PubSub.js\n// module id = 10\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/~/jsio/packages/lib/PubSub.js?");

/***/ },
/* 11 */
/*!*********************************************************!*\
  !*** ./modules/devkit-core/~/jsio/packages/std/uuid.js ***!
  \*********************************************************/
/***/ function(module, exports) {

	eval("'use strict';\n\nexports.__esModule = true;\nvar _exports = {};\n\n/*\nBased on Math.uuid.js 1.4 by Robert Kieffer\n\n----\nCopyright (c) 2008, Robert Kieffer\nAll rights reserved.\n\nRedistribution and use in source and binary forms, with or without\nmodification, are permitted provided that the following conditions are met:\n\n  * Redistributions of source code must retain the above copyright notice,\n\tthis list of conditions and the following disclaimer.\n  * Redistributions in binary form must reproduce the above copyright\n\tnotice, this list of conditions and the following disclaimer in the\n\tdocumentation and/or other materials provided with the distribution.\n  * Neither the name of Robert Kieffer nor the names of its contributors\n\tmay be used to endorse or promote products derived from this software\n\twithout specific prior written permission.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\nAND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\nIMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\nARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\nLIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\nCONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\nSUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\nINTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\nCONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\nARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\nPOSSIBILITY OF SUCH DAMAGE.\n\n*/\n/*\n * Generate a random uuid.\n *\n * USAGE: uuid.uuid(length, radix)\n *   length - the desired number of characters\n *   radix  - the number of allowable values for each character.\n *\n * EXAMPLES:\n *   // No arguments  - returns RFC4122, version 4 ID\n *   >>> std.uuid()\n *   \"92329D39-6F5C-4520-ABFC-AAB64544E172\"\n *\n *   // One argument - returns ID of the specified length\n *   >>> std.uuid(15)\t // 15 character ID (default base=62)\n *   \"VcydxgltxrVZSTV\"\n *\n *   // Two arguments - returns ID of the specified length, and radix. (Radix must be <= 62)\n *   >>> std.uuid(8, 2)  // 8 character ID (base=2)\n *   \"01001010\"\n *   >>> std.uuid(8, 10) // 8 character ID (base=10)\n *   \"47473046\"\n *   >>> std.uuid(8, 16) // 8 character ID (base=16)\n *   \"098F4D35\"\n */\nvar CHARS = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz'.split('');\n_exports.uuid = function (len, radix) {\n  var chars = CHARS,\n      uuid = [],\n      rnd = Math.random;\n  radix = radix || chars.length;\n\n  if (len) {\n    // Compact form\n    for (var i = 0; i < len; i++) {\n      uuid[i] = chars[0 | rnd() * radix];\n    }\n  } else {\n    // rfc4122, version 4 form\n    var r;\n\n    // rfc4122 requires these characters\n    uuid[8] = uuid[13] = uuid[18] = uuid[23] = '-';\n    uuid[14] = '4';\n\n    // Fill in random data.  At i==19 set the high bits of clock sequence as\n    // per rfc4122, sec. 4.1.5\n    for (var i = 0; i < 36; i++) {\n      if (!uuid[i]) {\n        r = 0 | rnd() * 16;\n        uuid[i] = chars[i == 19 ? r & 3 | 8 : r & 15];\n      }\n    }\n  }\n  return uuid.join('');\n};\n\nexports.default = _exports;\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/~/jsio/packages/std/uuid.js\n// module id = 11\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/~/jsio/packages/std/uuid.js?");

/***/ },
/* 12 */
/*!********************************************************************!*\
  !*** ./modules/devkit-core/modules/timestep/src/platformImport.js ***!
  \********************************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nexports.__esModule = true;\nvar backendCanvasCtx = __webpack_require__(/*! ./ui/backend/canvas */ 13);\n// var backendDomCtx = require.context('./ui/backend/dom', true, /^.*\\.js$/);\nvar platformBrowserCtx = __webpack_require__(/*! ./platforms/browser */ 62);\n\nvar getDynamicModulePath = function getDynamicModulePath(module) {\n  var moduleName = module.replace(/\\./g, '/');\n  if (moduleName.indexOf('./') !== 0) {\n    moduleName = './' + moduleName;\n  }\n  if (moduleName.indexOf('.js') !== moduleName.length - 3) {\n    moduleName += '.js';\n  }\n  return moduleName;\n};\n\nvar getModule = function getModule(req, modulePath) {\n  var result = req(modulePath);\n  if (!result) {\n    return result;\n  }\n\n  // es6 module compatibility\n  if (result.__esModule && result.default) {\n    return result.default;\n  }\n\n  return result;\n};\n\nvar getImport = exports.getImport = function getImport(module) {\n  // deprecated: InputPrompt used to be platform-specific\n  if (module === 'InputPrompt') {\n    var InputPrompt = __webpack_require__(/*! ui/InputPrompt */ 98);\n    return InputPrompt;\n  }\n\n  // var path = _devices[exports.name] || 'platforms.browser';\n  // return jsio('import ' + path + '.' + module, {\n  //   dontExport: true,\n  //   suppressErrors: true\n  // });\n  return getModule(platformBrowserCtx, getDynamicModulePath(module));\n};\n\nvar importUI = exports.importUI = function importUI(module) {\n  // var domOrCanvas = exports.useDOM ? 'dom' : 'canvas';\n  // var importString = 'import ui.backend.' + domOrCanvas + '.' + module;\n  // var importOpts = {dontExport: true, suppressErrors: true};\n  // return jsio(importString, importOpts);\n  var req;\n  if (exports.useDOM) {\n    // req = backendDomCtx;\n    throw new Error('dom ctx unavailable');\n  } else {\n    req = backendCanvasCtx;\n  }\n  return getModule(req, getDynamicModulePath(module));\n};\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/modules/timestep/src/platformImport.js\n// module id = 12\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/modules/timestep/src/platformImport.js?");

/***/ },
/* 13 */
/*!*****************************************************************************!*\
  !*** ./modules/devkit-core/modules/timestep/src/ui/backend/canvas ^.*\.js$ ***!
  \*****************************************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("var map = {\n\t\"./ImageView.js\": 14,\n\t\"./TextFlow.js\": 55,\n\t\"./TextView.js\": 56,\n\t\"./ViewBacking.js\": 28,\n\t\"./ViewDebugger.js\": 61,\n\t\"./animate.js\": 38,\n\t\"./filterRenderer.js\": 50,\n\t\"./util/FragmentBin.js\": 58,\n\t\"./util/FragmentBuffer.js\": 57,\n\t\"./util/SortedLinkedList.js\": 59\n};\nfunction webpackContext(req) {\n\treturn __webpack_require__(webpackContextResolve(req));\n};\nfunction webpackContextResolve(req) {\n\treturn map[req] || (function() { throw new Error(\"Cannot find module '\" + req + \"'.\") }());\n};\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 13;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/modules/timestep/src/ui/backend/canvas ^.*\\.js$\n// module id = 13\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/modules/timestep/src/ui/backend/canvas_^.*\\.js$?");

/***/ },
/* 14 */
/*!*********************************************************************************!*\
  !*** ./modules/devkit-core/modules/timestep/src/ui/backend/canvas/ImageView.js ***!
  \*********************************************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nexports.__esModule = true;\n\nvar _path = __webpack_require__(/*! util/path */ 15);\n\nvar _path2 = _interopRequireDefault(_path);\n\nvar _uri = __webpack_require__(/*! std/uri */ 16);\n\nvar _uri2 = _interopRequireDefault(_uri);\n\nvar _View2 = __webpack_require__(/*! ui/View */ 17);\n\nvar _View3 = _interopRequireDefault(_View2);\n\nvar _ImageViewCache = __webpack_require__(/*! ui/resource/ImageViewCache */ 42);\n\nvar _ImageViewCache2 = _interopRequireDefault(_ImageViewCache);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @license\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * This file is part of the Game Closure SDK.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * The Game Closure SDK is free software: you can redistribute it and/or modify\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * it under the terms of the Mozilla Public License v. 2.0 as published by Mozilla.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               \n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * The Game Closure SDK is distributed in the hope that it will be useful,\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * but WITHOUT ANY WARRANTY; without even the implied warranty of\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Mozilla Public License v. 2.0 for more details.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               \n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * You should have received a copy of the Mozilla Public License v. 2.0\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * along with the Game Closure SDK.  If not, see <http://mozilla.org/MPL/2.0/>.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\n/**\n * package ui.backend.canvas.ImageView;\n *\n * canvas.ImageView implementation.\n */\n\nvar _loc = window.location.toString();\nvar _host = window.location.hostname;\n\n/**\n * @extends ui.View\n */\n\nvar ImageView = function (_View) {\n  _inherits(ImageView, _View);\n\n  function ImageView() {\n    _classCallCheck(this, ImageView);\n\n    return _possibleConstructorReturn(this, _View.apply(this, arguments));\n  }\n\n  ImageView.prototype.getImage = function getImage() {\n    return this._img;\n  };\n\n  ImageView.prototype.getImageFromCache = function getImageFromCache(url, forceReload) {\n    return _ImageViewCache2.default.getImage(url, forceReload);\n  };\n\n  ImageView.prototype.updateOpts = function updateOpts(opts) {\n    opts = _View.prototype.updateOpts.call(this, opts);\n\n    if (opts.autoSize !== void 0) {\n      this._autoSize = opts.autoSize;\n    }\n\n    if (opts.image) {\n      this.setImage(opts.image);\n    } else {\n      this.needsReflow();\n    }\n\n    return opts;\n  };\n\n  ImageView.prototype.setImage = function setImage(img, opts) {\n    var forceReload = opts && opts.forceReload;\n    if (typeof img === 'string') {\n      img = _ImageViewCache2.default.getImage(img, forceReload);\n    } else if (forceReload) {\n      img.reload();\n    }\n\n    this._img = img;\n\n    if (this._img) {\n      if (opts && opts.autoSize !== void 0) {\n        this._autoSize = opts.autoSize;\n      }\n\n      if (this._autoSize) {\n        // sprited resources will know their dimensions immediately\n        if (this._img.getWidth() > 0 && this._img.getHeight() > 0) {\n          this.autoSize();\n        } else {\n          // non-sprited resources need to load first\n          this._img.doOnLoad(this, 'autoSize');\n        }\n      }\n\n      this._img.doOnLoad(this, 'needsRepaint');\n    }\n  };\n\n  ImageView.prototype.doOnLoad = function doOnLoad() {\n    if (arguments.length === 1) {\n      this._img.doOnLoad(this, arguments[0]);\n    } else {\n      this._img.doOnLoad.apply(this._img, arguments);\n    }\n    return this;\n  };\n\n  ImageView.prototype.autoSize = function autoSize() {\n    if (this._img) {\n      this.style.width = this._img.getWidth();\n      this.style.height = this._img.getHeight();\n\n      if (this.style.fixedAspectRatio) {\n        this.style.enforceAspectRatio(this.style.width, this.style.height);\n      }\n    }\n  };\n\n  ImageView.prototype.getOrigW = function getOrigW() {\n    return this._img.getOrigW();\n  };\n\n  ImageView.prototype.getOrigH = function getOrigH() {\n    return this._img.getOrigH();\n  };\n\n  ImageView.prototype.render = function render(ctx) {\n    if (!this._img) {\n      return;\n    }\n\n    var s = this.style;\n    this._img.renderShort(ctx, 0, 0, s.width, s.height);\n  };\n\n  ImageView.prototype.getTag = function getTag() {\n    var tag;\n    if (this._img) {\n      var url = this._img.getOriginalURL();\n      if (this._cachedTag && url === this._cachedTag.url) {\n        tag = this._cachedTag.tag;\n      } else {\n        var uri = _uri2.default.relativeTo(url, _loc);\n        var host = uri.getHost();\n        tag = _path2.default.splitExt(uri.getFile()).basename + (host && host !== _host ? ':' + host : '');\n\n        this._cachedTag = {\n          url: url,\n          tag: tag\n        };\n      }\n    };\n\n    return (tag || '') + ':ImageView' + this.uid;\n  };\n\n  return ImageView;\n}(_View3.default);\n\nexports.default = ImageView;\n;\n\nImageView.prototype.getOrigWidth = ImageView.prototype.getOrigW;\nImageView.prototype.getOrigHeight = ImageView.prototype.getOrigH;\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/modules/timestep/src/ui/backend/canvas/ImageView.js\n// module id = 14\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/modules/timestep/src/ui/backend/canvas/ImageView.js?");

/***/ },
/* 15 */
/*!**********************************************************!*\
  !*** ./modules/devkit-core/~/jsio/packages/util/path.js ***!
  \**********************************************************/
/***/ function(module, exports) {

	eval("'use strict';\n\nexports.__esModule = true;\nvar _exports = {};\n\nvar util = jsio.__jsio.__util;\n\n_exports.join = util.buildPath;\n_exports.resolveRelativePath = util.resolveRelativePath;\n_exports.splitPath = util.splitPath;\n_exports.relative = util.relative;\n_exports.splitExt = function (path) {\n  var res = _exports.splitPath(path);\n  var i = res.filename.lastIndexOf('.');\n  if (i == -1) {\n    res.basename = res.filename;\n    res.ext = '';\n  } else {\n    res.basename = res.filename.substring(0, i);\n    res.ext = res.filename.substring(i);\n  }\n  return res;\n};\n\nexports.default = _exports;\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/~/jsio/packages/util/path.js\n// module id = 15\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/~/jsio/packages/util/path.js?");

/***/ },
/* 16 */
/*!********************************************************!*\
  !*** ./modules/devkit-core/~/jsio/packages/std/uri.js ***!
  \********************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nvar _path = __webpack_require__(/*! util/path */ 15);\n\nvar _path2 = _interopRequireDefault(_path);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar attrs = ['source', 'protocol', 'authority', 'userInfo', 'user', 'password', 'host', 'port', 'relative', 'path', 'directory', 'file', 'query', 'anchor'];\n\nvar URI = module.exports = function () {\n  function _class(url, isStrict) {\n    _classCallCheck(this, _class);\n\n    if (url instanceof URI) {\n      for (var i = 0, attr; attr = attrs[i]; ++i) {\n        this['_' + attr] = url['_' + attr];\n      }\n      return;\n    }\n\n    this._isStrict = isStrict;\n\n    var uriData = URI.parse(url, isStrict);\n    for (var attr in uriData) {\n      this['_' + attr] = uriData[attr];\n    }\n  }\n\n  _class.prototype.query = function query(key) {\n    return URI.parseQuery(this._query)[key];\n  };\n\n  _class.prototype.hash = function hash(key) {\n    return URI.parseQuery(this._anchor)[key];\n  };\n\n  _class.prototype.addHash = function addHash(kvp) {\n    var hash = URI.parseQuery(this._anchor);\n    for (var i in kvp) {\n      hash[i] = kvp[i];\n    }\n    this._anchor = URI.buildQuery(hash);\n    return this;\n  };\n\n  _class.prototype.setPath = function setPath(path) {\n    var pieces = _path2.default.splitPath(path);\n    this._file = pieces.filename;\n    this._directory = pieces.directory;\n    this._path = path;\n    return this;\n  };\n\n  _class.prototype.setFile = function setFile(file) {\n    return this.setPath(_path2.default.join(this._directory, file));\n  };\n\n  _class.prototype.setDirectory = function setDirectory(directory) {\n    return this.setPath(_path2.default.join(directory, this._file));\n  };\n\n  _class.prototype.push = function push(path) {\n    if (path) {\n      this._path = (this._path + '/' + path).replace(/\\/\\/+/g, '/');\n    }\n    return this;\n  };\n\n  _class.prototype.addQuery = function addQuery(kvp) {\n    var query = URI.parseQuery(this._query);\n    for (var i in kvp) {\n      query[i] = kvp[i];\n    }\n    this._query = URI.buildQuery(query);\n    return this;\n  };\n\n  _class.prototype.removeQuery = function removeQuery(keys) {\n    var query = URI.parseQuery(this._query);\n    if (Array.isArray(keys)) {\n      for (var i = 0, n = keys.length; i < n; ++i) {\n        delete query[keys[i]];\n      }\n    } else {\n      delete query[keys];\n    }\n    this._query = URI.buildQuery(query);\n    return this;\n  };\n\n  _class.prototype.toJSON = function toJSON() {\n    return this.toString(false);\n  };\n\n  _class.prototype.toString = function toString(onlyBase) {\n    // XXX TODO: This is vaguely reasonable, but not complete. fix it...\n    var a = this._protocol ? this._protocol + '://' : '';\n    var b = this._host ? this._host + ((this._port || 80) == 80 ? '' : ':' + this._port) : '';\n\n    if (onlyBase) {\n      return a + b;\n    }\n\n    var c = this._path;\n    var d = this._query ? '?' + this._query : '';\n    var e = this._anchor ? '#' + this._anchor : '';\n    return a + b + c + d + e;\n  };\n\n  return _class;\n}();\n\nfor (var i = 0, attr; attr = attrs[i]; ++i) {\n  (function (attr) {\n    var fNameSuffix = attr.charAt(0).toUpperCase() + attr.slice(1);\n    this['get' + fNameSuffix] = function () {\n      return this['_' + attr];\n    };\n    this['set' + fNameSuffix] = function (val) {\n      this['_' + attr] = val;\n      return this;\n    };\n  }).call(URI.prototype, attr);\n}\n\nURI.relativeTo = function (url, base) {\n  var url = String(url);\n  if (base && !/^http(s?):\\/\\//.test(url)) {\n    var baseURI = new URI(base).setAnchor('').setQuery('').setFile('').toString(url.charAt(0) == '/');\n\n    url = URI.resolveRelative(baseURI + url);\n  }\n\n  return new URI(url);\n};\n\nURI.resolveRelative = function (url) {\n  var prevUrl;\n\n  // remove ../ with preceeding folder\n  while ((prevUrl = url) != (url = url.replace(/(^|\\/)([^\\/]+)\\/\\.\\.\\//g, '/'))) {};\n\n  // remove ./ if it isn't preceeded by a .\n  return url.replace(/[^.]\\.\\//g, '');\n};\n\nURI.buildQuery = function (kvp) {\n  var pairs = [];\n  for (var key in kvp) {\n    pairs.push(encodeURIComponent(key) + '=' + encodeURIComponent(kvp[key]));\n  }\n  return pairs.join('&');\n};\n\nURI.parseQuery = function (str) {\n  var pairs = str.split('&'),\n      n = pairs.length,\n      data = {};\n  for (var i = 0; i < n; ++i) {\n    var pair = pairs[i].split('='),\n        key = decodeURIComponent(pair[0]);\n    if (key) {\n      data[key] = decodeURIComponent(pair[1]);\n    }\n  }\n  return data;\n};\n\n// Regexs are based on parseUri 1.2.2\n// Original: (c) Steven Levithan <stevenlevithan.com>\n// Original: MIT License\nvar strictRegex = /^(?:([^:\\/?#]+):)?(?:\\/\\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\\/?#]*)(?::(\\d*))?))?((((?:[^?#\\/]*\\/)*)([^?#]*))(?:\\?([^#]*))?(?:#(.*))?)/;\nvar looseRegex = /^(?:(?![^:@]+:[^:@\\/]*@)([^:\\/?#.]+):)?(?:\\/\\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/;\nvar queryStringRegex = /(?:^|&)([^&=]*)=?([^&]*)/g;\n\nURI.parse = function (str, isStrict) {\n  var regex = isStrict ? strictRegex : looseRegex;\n  var result = {};\n  var match = regex.exec(str);\n  for (var i = 0, attr; attr = attrs[i]; ++i) {\n    result[attr] = match[i] || '';\n  }\n\n  var qs = result['queryKey'] = {};\n  result['query'].replace(queryStringRegex, function (check, key, val) {\n    if (check) {\n      qs[key] = val;\n    }\n  });\n\n  return result;\n};\n\nURI.isSameDomain = function (urlA, urlB) {\n  var a = URI.parse(urlA);\n  var b = URI.parse(urlB);\n  return a.port == b.port && a.host == b.host && a.protocol == b.protocol;\n};\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/~/jsio/packages/std/uri.js\n// module id = 16\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/~/jsio/packages/std/uri.js?");

/***/ },
/* 17 */
/*!*************************************************************!*\
  !*** ./modules/devkit-core/modules/timestep/src/ui/View.js ***!
  \*************************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nexports.__esModule = true;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _base = __webpack_require__(/*! base */ 2);\n\nvar _device = __webpack_require__(/*! device */ 1);\n\nvar _device2 = _interopRequireDefault(_device);\n\nvar _IView2 = __webpack_require__(/*! ./IView */ 18);\n\nvar _IView3 = _interopRequireDefault(_IView2);\n\nvar _Point = __webpack_require__(/*! math/geom/Point */ 19);\n\nvar _Point2 = _interopRequireDefault(_Point);\n\nvar _Rect = __webpack_require__(/*! math/geom/Rect */ 20);\n\nvar _Rect2 = _interopRequireDefault(_Rect);\n\nvar _BoxLayout = __webpack_require__(/*! ./layout/BoxLayout */ 24);\n\nvar _BoxLayout2 = _interopRequireDefault(_BoxLayout);\n\nvar _LinearLayout = __webpack_require__(/*! ./layout/LinearLayout */ 25);\n\nvar _LinearLayout2 = _interopRequireDefault(_LinearLayout);\n\nvar _ViewBacking = __webpack_require__(/*! ./backend/canvas/ViewBacking */ 28);\n\nvar _ViewBacking2 = _interopRequireDefault(_ViewBacking);\n\nvar _LayoutViewBacking = __webpack_require__(/*! ./layout/LayoutViewBacking */ 31);\n\nvar _LayoutViewBacking2 = _interopRequireDefault(_LayoutViewBacking);\n\nvar _ReflowManager = __webpack_require__(/*! ui/backend/ReflowManager */ 32);\n\nvar _ReflowManager2 = _interopRequireDefault(_ReflowManager);\n\nvar _dispatch = __webpack_require__(/*! event/input/dispatch */ 33);\n\nvar _dispatch2 = _interopRequireDefault(_dispatch);\n\nvar _InputHandler = __webpack_require__(/*! event/input/InputHandler */ 34);\n\nvar _InputHandler2 = _interopRequireDefault(_InputHandler);\n\nvar _animate = __webpack_require__(/*! animate */ 37);\n\nvar _animate2 = _interopRequireDefault(_animate);\n\nvar _setProperty = __webpack_require__(/*! util/setProperty */ 8);\n\nvar _setProperty2 = _interopRequireDefault(_setProperty);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _exports = {};\n\n/**\n * @license\n * This file is part of the Game Closure SDK.\n *\n * The Game Closure SDK is free software: you can redistribute it and/or modify\n * it under the terms of the Mozilla Public License v. 2.0 as published by Mozilla.\n\n * The Game Closure SDK is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * Mozilla Public License v. 2.0 for more details.\n\n * You should have received a copy of the Mozilla Public License v. 2.0\n * along with the Game Closure SDK.  If not, see <http://mozilla.org/MPL/2.0/>.\n */\n/**\n * @class ui.View;\n * The View base class.\n *\n * @doc http://doc.gameclosure.com/api/ui-view.html\n * @docsrc https://github.com/gameclosure/doc/blob/master/api/ui/view.md\n */\n\nvar _reflowMgr = _ReflowManager2.default.get();\n\nvar EventScheduler = function () {\n  function EventScheduler() {\n    _classCallCheck(this, EventScheduler);\n\n    this._queue = [];\n  }\n\n  EventScheduler.prototype.add = function add(f) {\n    this._queue.push(f);\n\n    if (!this._running) {\n      this._running = true;\n      while (f = this._queue.shift()) {\n        f();\n      }\n      this._running = false;\n    }\n  };\n\n  return EventScheduler;\n}();\n\nvar scheduler = new EventScheduler();\n\n/**\n * This singleton class controls the focus of the current application. Only one\n * view can be focused at a given time.\n *\n * This doesn't correspond to native and isn't being used.\n */\nvar FocusMgr = new (function () {\n  function _class(opts) {\n    _classCallCheck(this, _class);\n\n    this._target = null;\n    this._canChange = true;\n  }\n\n  _class.prototype.focus = function focus(target) {\n    if (this._target != target && this._canChange) {\n      if (this._target && this._target.onBlur) {\n        this._target.onBlur(this);\n      }\n\n      this._target = target;\n      if (target && target.onFocus) {\n        this._target.onFocus(this);\n      }\n    }\n  };\n\n  _class.prototype.blur = function blur(target) {\n    target.onBlur && target.onBlur(this);\n    this._target = false;\n  };\n\n  _class.prototype.get = function get() {\n    return this;\n  };\n\n  return _class;\n}())();\n\n/**\n * Unique ID counter for all views.\n */\nvar UID = 0;\n\nvar _BackingCtor = null;\n\nfunction compareSubscription(args, sub) {\n  // note that args and sub may not be the same length\n  // return true if all items in args match items in sub\n  // (we don't care if sub has extra arguments)\n  for (var i = 0, n = args.length; i < n; ++i) {\n    if (args[i] != sub[i]) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nvar layoutConstructors = {\n  'linear': _LinearLayout2.default,\n  'box': _BoxLayout2.default\n};\n\nvar View = function (_IView) {\n  _inherits(View, _IView);\n\n  function View(opts) {\n    _classCallCheck(this, View);\n\n    var _this = _possibleConstructorReturn(this, _IView.call(this));\n\n    if (!opts) {\n      opts = {};\n    }\n\n    // TODO: remove this eventually\n    // Things like TextView will fail if it is not present\n    _this._opts = _this._opts || {};\n\n    _this.uid = ++UID;\n\n    // Maintain pointers to children to keep native views from being garbage collected\n    _this.__parent = null;\n    _this.__children = null;\n    _this.__leftSibling = null;\n    _this.__rightSibling = null;\n\n    _this.__input = new _InputHandler2.default(_this, opts);\n\n    _this._CustomBacking = opts.Backing || null;\n\n    var layoutName = opts.layout;\n    _this._layoutName = layoutName || '';\n    _this._layout = null;\n\n    var Backing = _this._CustomBacking || (layoutName ? _LayoutViewBacking2.default : _BackingCtor);\n    _this.__view = _this.style = new Backing(_this, opts);\n\n    if (layoutName) {\n      var LayoutCtor = layoutConstructors[layoutName];\n      _this._layout = new LayoutCtor(_this);\n    }\n\n    _this._autoSize = false;\n\n    _this._filter = null;\n\n    _this.__view._view = _this;\n\n    _this._tick = null;\n\n    _this.updateOpts(opts);\n    return _this;\n  }\n\n  View.prototype._setLayout = function _setLayout(layoutName) {\n    if (layoutName && this._layout === null) {\n      if (layoutName !== this._layoutName) {\n        if (this._CustomBacking === null) {\n          this._layoutName = layoutName;\n\n          // setting layout will make the view change its backing\n          // to a LayoutViewBacking (if no custom backing is specified)\n          var backing = this.style;\n          var newBacking = new _LayoutViewBacking2.default(this);\n\n          // not only copying but replacing old backing by new backing\n          // this implies transferring all the unique properties (including subviews)\n\n          // copy\n          var copy = backing.copy();\n          newBacking.update(copy);\n\n          // transferring unique properties\n          newBacking._globalTransform = backing._globalTransform;\n          newBacking._cachedRotation = backing._cachedRotation;\n          newBacking._cachedSin = backing._cachedSin;\n          newBacking._cachedCos = backing._cachedCos;\n          newBacking.__cachedWidth = backing.__cachedWidth;\n          newBacking.__cachedHeight = backing.__cachedHeight;\n          newBacking._view = backing._view;\n          newBacking._superview = backing._superview;\n          newBacking._shouldSort = backing._shouldSort;\n          newBacking._shouldSortVisibleSubviews = backing._shouldSortVisibleSubviews;\n          newBacking._subviews = backing._subviews;\n          newBacking._visibleSubviews = backing._visibleSubviews;\n          newBacking._hasTick = backing._hasTick;\n          newBacking._hasRender = backing._hasRender;\n          newBacking._subviewsWithTicks = backing._subviewsWithTicks;\n          newBacking._addedAt = backing._addedAt;\n\n          this.__view = this.style = newBacking;\n\n          var superview = newBacking._superview;\n          if (superview) {\n            superview.__view._replaceSubview(backing, newBacking);\n          }\n        }\n\n        var LayoutCtor = layoutConstructors[layoutName];\n        this._layout = new LayoutCtor(this);\n      }\n    }\n  };\n\n  View.prototype.updateOpts = function updateOpts(opts) {\n    opts = opts || {};\n    if (this._opts) {\n      for (var key in opts) {\n        this._opts[key] = opts[key];\n      }\n    } else {\n      this._opts = opts;\n    }\n\n    if (opts.tag) {\n      this.tag = opts.tag;\n    }\n    if (opts.filter) {\n      this._filter = opts.filter;\n    }\n\n    if (opts.infinite) {\n      this._infinite = opts.infinite;\n    }\n\n    if (opts.layout) {\n      this.__view.layout = opts.layout;\n    }\n\n    this.style.update(opts);\n    this.__input.update(opts);\n\n    if (opts.centerAnchor) {\n      this.style.anchorX = this.style.width / 2;\n      this.style.anchorY = this.style.height / 2;\n    }\n\n    if (opts.superview) {\n      opts.superview.addSubview(this);\n    }\n    // opts.parent is deprecated, use opts.superview instead\n    if (opts.parent) {\n      opts.parent.addSubview(this);\n    }\n\n    return opts;\n  };\n\n  View.prototype.getFilters = function getFilters() {\n    _base.logger.warn('View.getFilters() is deprecated! Use View.getFilter() instead.');\n    var filters = {};\n    if (this._filter) {\n      filters[this._filter.getType()] = this._filter;\n    }\n    return filters;\n  };\n\n  View.prototype.getFilter = function getFilter() {\n    return this._filter;\n  };\n\n  View.prototype.addFilter = function addFilter(filter) {\n    _base.logger.warn('View.addFilter() is deprecated! Use View.setFilter() instead.');\n    this.setFilter(filter);\n  };\n\n  View.prototype.setFilter = function setFilter(filter) {\n    this._filter = filter;\n  };\n\n  View.prototype.removeFilter = function removeFilter() {\n    this._filter = null;\n  };\n\n  View.prototype.getAnimation = function getAnimation(groupID) {\n    return (0, _animate2.default)(this, groupID);\n  };\n\n  View.prototype.animate = function animate(style, duration, easing) {\n    return this.getAnimation().then(style, duration, easing);\n  };\n\n  View.prototype.focus = function focus() {\n    FocusMgr.get().focus(this);\n    return this;\n  };\n\n  View.prototype.blur = function blur() {\n    FocusMgr.get().blur(this);\n    return this;\n  };\n\n  View.prototype.onFocus = function onFocus() {\n    this._isFocused = true;\n  };\n\n  View.prototype.onBlur = function onBlur() {\n    this._isFocused = false;\n  };\n\n  View.prototype.isDragging = function isDragging() {\n    return this.__input.isDragging();\n  };\n\n  View.prototype.startDrag = function startDrag(opts) {\n    this.__input.startDrag(opts);\n  };\n\n  View.prototype.getInput = function getInput() {\n    return this.__input;\n  };\n\n  View.prototype.isInputOver = function isInputOver() {\n    return !!this.__input.overCount;\n  };\n\n  View.prototype.getInputOverCount = function getInputOverCount() {\n    return this._inputOverCount;\n  };\n\n  View.prototype.canHandleEvents = function canHandleEvents(handleEvents, ignoreSubviews) {\n    this.__input.canHandleEvents = handleEvents;\n\n    if (typeof ignoreSubviews === 'boolean') {\n      this.__input.blockEvents = ignoreSubviews;\n    }\n  };\n\n  View.prototype.setIsHandlingEvents = function setIsHandlingEvents(canHandleEvents) {\n    this.__input.canHandleEvents = canHandleEvents;\n  };\n\n  View.prototype.isHandlingEvents = function isHandlingEvents() {\n    return this.__input.canHandleEvents;\n  };\n\n  View.prototype.needsRepaint = function needsRepaint() {/* Abstract */};\n\n  View.prototype.needsReflow = function needsReflow() {\n    _reflowMgr.add(this);\n  };\n\n  View.prototype.reflowSync = function reflowSync() {\n    _reflowMgr.reflow(this);\n  };\n\n  View.prototype._onEventPropagate = function _onEventPropagate(evt, pt, atTarget) {\n    if (atTarget) {\n      var id = evt.id;\n      var lastEvt;\n      var i;\n\n      switch (evt.type) {\n        case _dispatch2.default.eventTypes.SELECT:\n        case _dispatch2.default.eventTypes.CLEAR:\n          _dispatch2.default._evtHistory[_dispatch2.default.eventTypes.MOVE] = null;\n          lastEvt = _dispatch2.default._activeInputOver[id];\n          if (lastEvt) {\n            _dispatch2.default.clearOverState(id);\n          }\n          break;\n\n        case _dispatch2.default.eventTypes.START:\n        case _dispatch2.default.eventTypes.MOVE:\n          // translate input:move events into two higher-level events:\n          //   input:over and input:out\n          var target = evt.trace[0];\n          var view = null;\n\n          // fire input:out events first, start with deepest node and work out\n          lastEvt = _dispatch2.default._activeInputOver[id];\n          if (lastEvt && target != lastEvt.trace[0]) {\n            var trace = lastEvt.trace;\n            for (i = 0, view; view = trace[i]; ++i) {\n              if (!(view.uid in evt.pt)) {\n                view.__input.onLeave(id, target == view);\n              }\n            }\n          }\n\n          if (!lastEvt || target != lastEvt.trace[0]) {\n            // fire input:over events second, start with outermost node and go to target\n            var trace = evt.trace;\n            for (i = evt.depth - 1; i >= 0; --i) {\n              trace[i].__input.onEnter(id, target == view);\n            }\n\n            // update current mouse trace\n            _dispatch2.default._activeInputOver[id] = evt;\n          }\n          break;\n      }\n    }\n  };\n\n  View.prototype.localizePoint = function localizePoint(pt) {\n    var list = this.getParents();\n    var i = 0;\n    list.push(this);\n    while (list[i]) {\n      pt = list[i++].__view.localizePoint(pt);\n    }\n    return pt;\n  };\n\n  View.prototype.getSubview = function getSubview(i) {\n    return this.__view.getSubviews()[i];\n  };\n\n  View.prototype.getSubviews = function getSubviews() {\n    return this.__view.getSubviews();\n  };\n\n  View.prototype.getSuperview = function getSuperview() {\n    return this.__view.getSuperview();\n  };\n\n  View.prototype.connectEvent = function connectEvent(src, name)\n  /*, args */\n  {\n    if (!this.__subs) {\n      this.__subs = [];\n\n      this.on('ViewAdded', (0, _base.bind)(this, '_connectEvents'));\n      this.on('ViewRemoved', (0, _base.bind)(this, '_disconnectEvents'));\n\n      if (this.__root) {\n        this._connectEvents();\n      }\n    }\n  };\n\n  View.prototype.disconnectEvent = function disconnectEvent(src, name) {\n    if (this.__subs) {\n      var args = Array.prototype.slice.call(arguments, 1);\n      for (var i = 0, sub; sub = this.__subs[i]; ++i) {\n        if (sub[0] == src && compareSubscription(args, sub[1])) {\n          sub[0].removeListener.apply(sub[0], sub[1]);\n          this.__subs.splice(i--, 1);\n        }\n      }\n    }\n  };\n\n  View.prototype._connectEvents = function _connectEvents() {\n    for (var i = 0, args; args = this.__subs[i]; ++i) {\n      args[0].on.apply(args[0], args[1]);\n    }\n  };\n\n  View.prototype._disconnectEvents = function _disconnectEvents() {\n    for (var i = 0, args; args = this.__subs[i]; ++i) {\n      args[0].removeListener.apply(args[0], args[1]);\n    }\n  };\n\n  View.prototype.addSubview = function addSubview(view) {\n    if (this.__view.addSubview(view)) {\n\n      this._linkView(view);\n\n      // if successful, clear any residual input over count\n      view.__input.resetOver();\n\n      this.publish('SubviewAdded', view);\n      if (this.__root) {\n        var root = this.__root;\n        var viewCreated = view;\n        scheduler.add((0, _base.bind)(this, function recurse(view) {\n          if (!view.style.__firstRender) {\n            view.style.__firstRender = true;\n            view.needsReflow();\n          }\n\n          view.__root = root;\n          view.emit('ViewAdded', viewCreated);\n          var subviews = view.getSubviews();\n          for (var i = 0, subview; subview = subviews[i]; ++i) {\n            recurse(subview);\n          }\n        }, view));\n      }\n    }\n\n    return view;\n  };\n\n  View.prototype._wrapRender = function _wrapRender(ctx, transform, opacity) {\n    this.style.wrapRender(ctx, transform, opacity);\n  };\n\n  View.prototype._linkView = function _linkView(view) {\n    // remove any current connections\n    this._unlinkView(view);\n\n    // Insert this view as the head of the sibling list\n    if (this.__children) {\n      this.__children.__leftSibling = view;\n    }\n    view.__leftSibling = null;\n    view.__rightSibling = this.__children;\n    this.__children = view;\n    view.__parent = this;\n  };\n\n  View.prototype._unlinkView = function _unlinkView(view) {\n    if (view.__parent) {\n      // When removing a subview, remove the view from its sibling list\n      if (view.__leftSibling) {\n        view.__leftSibling.__rightSibling = view.__rightSibling;\n      }\n\n      if (view.__rightSibling) {\n        view.__rightSibling.__leftSibling = view.__leftSibling;\n      }\n\n      // If this view is the head of the sibling list\n      // then set the next sibling to be the head\n      if (view.__parent.__children == view) {\n        view.__parent.__children = view.__rightSibling;\n      }\n\n      view.__leftSibling = null;\n      view.__rightSibling = null;\n      view.__parent = null;\n    }\n  };\n\n  View.prototype.removeSubview = function removeSubview(view) {\n    if (this.__view.removeSubview(view)) {\n      this._unlinkView(view);\n      this.publish('SubviewRemoved', view);\n      if (view.__root) {\n        scheduler.add((0, _base.bind)(this, function recurse(view) {\n          view.__root = null;\n          view.emit('ViewRemoved', this);\n          var subviews = view.getSubviews();\n          for (var i = 0, subview; subview = subviews[i]; ++i) {\n            recurse(subview);\n          }\n        }, view));\n      }\n    }\n\n    return view;\n  };\n\n  View.prototype.removeFromSuperview = function removeFromSuperview() {\n    var superview = this.__view.getSuperview();\n    if (superview) {\n      superview.removeSubview(this);\n    }\n  };\n\n  View.prototype.removeAllSubviews = function removeAllSubviews() {\n    var subviews = this.getSubviews();\n    var i = subviews.length;\n    while (i--) {\n      this.removeSubview(subviews[i]);\n    }\n  };\n\n  View.prototype.getApp = function getApp() {\n    return this.__root;\n  };\n\n  View.prototype.getSuperviews = function getSuperviews() {\n    var views = [];\n    var next = this.getSuperview();\n    while (next) {\n      views.unshift(next);\n      next = next.getSuperview();\n    }\n\n    return views;\n  };\n\n  View.prototype.buildView = function buildView() {};\n\n  View.prototype.containsLocalPoint = function containsLocalPoint(pt) {\n    if (this._infinite) {\n      return true;\n    }\n\n    // infinite plane\n    var s = this.style,\n        w = s.width,\n        h = s.height;\n\n    if (w > 0 && h > 0) {\n      return pt.x <= w && pt.y <= h && pt.x >= 0 && pt.y >= 0;\n    } else if (w > 0) {\n      return pt.x <= w && pt.y >= h && pt.x >= 0 && pt.y <= 0;\n    } else if (h > 0) {\n      return pt.x >= w && pt.y <= h && pt.x <= 0 && pt.y >= 0;\n    } else {\n      return pt.x >= w && pt.y >= h && pt.x <= 0 && pt.y <= 0;\n    }\n  };\n\n  View.prototype.getBoundingShape = function getBoundingShape(simple) {\n    if (this._infinite) {\n      return true;\n    } else {\n      var s = this.style;\n      var w = s.width;\n      var h = s.height;\n      if (!(w && h) && s.layout) {\n        var superview = this.getSuperview();\n        if (superview) {\n          var supersize = superview.getBoundingShape(true);\n          if (!w) {\n            w = supersize.width;\n            if (s.layoutWidth) {\n              w *= parseInt(s.layoutWidth) / 100;\n            }\n          }\n          if (!h) {\n            h = supersize.height;\n            if (s.layoutHeight) {\n              h *= parseInt(s.layoutHeight) / 100;\n            }\n          }\n        }\n      }\n      if (simple) {\n        this._boundingShape.x = s.x;\n        this._boundingShape.y = s.y;\n        this._boundingShape.width = w * s.scale;\n        this._boundingShape.height = h * s.scale;\n        return this._boundingShape;\n      }\n      return new _Rect2.default(s.x, s.y, w * s.scale, h * s.scale);\n    }\n  };\n\n  View.prototype.getRelativeRegion = function getRelativeRegion(region, parent) {\n    var offset = this.getPosition(parent || region.src);\n    return new _Rect2.default((region.x - offset.x) / offset.scale, (region.y - offset.y) / offset.scale, region.width / offset.scale, region.height / offset.scale);\n  };\n\n  View.prototype.getPosition = function getPosition(relativeTo) {\n    var abs = new _Point2.default(),\n        view = this,\n        r = 0,\n        s = this.style,\n        w = s.width,\n        h = s.height,\n        c = 1;\n\n    while (view && view != relativeTo) {\n      var scale = view.style.scale;\n\n      // translate to anchor point\n      abs.add(-view.style.anchorX, -view.style.anchorY);\n\n      // scale and rotate\n      abs.rotate(view.style.r);\n      abs.scale(scale);\n\n      // translate back\n      abs.add(view.style.anchorX + view.style.x + view.style.offsetX, view.style.anchorY + view.style.y + view.style.offsetY);\n\n      r += view.style.r;\n      w *= scale;\n      h *= scale;\n      c *= scale;\n      view = view.__view.getSuperview();\n    }\n\n    return {\n      x: abs.x,\n      y: abs.y,\n      r: r % (2 * Math.PI),\n      width: w,\n      height: h,\n      scale: c,\n      anchorX: this.style.anchorX,\n      anchorY: this.style.anchorY\n    };\n  };\n\n  View.prototype.getBacking = function getBacking() {\n    return this.__view;\n  };\n\n  View.prototype.show = function show() {\n    this.style.visible = true;\n    this.needsRepaint();\n  };\n\n  View.prototype.hide = function hide() {\n    this.style.visible = false;\n    this.needsRepaint();\n  };\n\n  View.prototype.getTag = function getTag() {\n    var cls = 'View';\n\n    if (false) {\n      // check the cached name\n      if (this.__tagClassName) {\n        cls = this.__tagClassName;\n      } else {\n        // generate the classname\n        cls = this.constructor.name;\n\n        if (!cls) {\n          cls = this.constructor.toString().match(/^function ([^(]*)/)[1];\n        }\n\n        if (cls) {\n          cls = cls.substr(cls.lastIndexOf('_') + 1);\n        }\n\n        this.__tagClassName = cls || 'unknown';\n      }\n    }\n\n    return cls + this.uid + (this.tag ? ':' + this.tag : '');\n  };\n\n  _createClass(View, [{\n    key: 'tick',\n    get: function get() {\n      // this._tick can be null while \"_tick\" can exist on the protoype\n      return this._tick || this.__proto__._tick;\n    },\n    set: function set(tick) {\n      // for some reason \"this\" can refer to the prototype\n      // of an inherited class, therefore it is necessary\n      // to test for the existence of a view\n      if (tick) {\n        if (this.__view) {\n          this.__view.onTickAdded();\n          this.__view._hasTick = true;\n        }\n        this._tick = tick;\n      } else if (this._tick) {\n        this._tick = null;\n        if (this.__view) {\n          this.__view._hasTick = false;\n          this.__view.onTickRemoved();\n        }\n      }\n    }\n  }]);\n\n  return View;\n}(_IView3.default);\n\nexports.default = View;\n;\n\nView.prototype.DEFAULT_REFLOW = function () {};\nView.prototype.reflow = View.prototype.DEFAULT_REFLOW;\nView.prototype._boundingShape = {};\nView.prototype.setHandleEvents = View.prototype.canHandleEvents;\nView.prototype.getEngine = View.prototype.getApp;\nView.prototype.getParents = View.prototype.getSuperviews;\nView.prototype.toString = View.prototype.getTag;\n\n// --- render setter ---\n/**\n * Adds a hook to determine when the \"render\" property is set.\n */\nView.prototype._render = null;\nObject.defineProperty(View.prototype, 'render', {\n  get: function get() {\n    return this._render;\n  },\n  set: function set(render) {\n    if (this._render === render) {\n      return;\n    }\n\n    if (!render) {\n      this._render = null;\n    } else {\n      this._render = render;\n    }\n\n    if (this.__view) {\n      this.__view._hasRender = !!render;\n    }\n  }\n});\n\n// legacy implementation shim\n(0, _setProperty2.default)(View.prototype, '_superview', {\n  get: View.prototype.getSuperview,\n  set: function set() {}\n});\n(0, _setProperty2.default)(View.prototype, '_subviews', {\n  get: View.prototype.getSubviews,\n  set: function set() {}\n});\n\nvar _extensions = [];\nView.addExtension = function (ext) {\n  ext.extend(View.BackingCtor);\n  _extensions.push(ext);\n};\n\nView.setDefaultViewBacking = function (ViewBackingCtor) {\n  _BackingCtor = View.BackingCtor = ViewBackingCtor;\n  _extensions.forEach(function (ext) {\n    ext.extend(_BackingCtor);\n  });\n};\n\n// default view backing is canvas\nView.setDefaultViewBacking(_ViewBacking2.default);\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/modules/timestep/src/ui/View.js\n// module id = 17\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/modules/timestep/src/ui/View.js?");

/***/ },
/* 18 */
/*!**************************************************************!*\
  !*** ./modules/devkit-core/modules/timestep/src/ui/IView.js ***!
  \**************************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nexports.__esModule = true;\n\nvar _Emitter2 = __webpack_require__(/*! event/Emitter */ 9);\n\nvar _Emitter3 = _interopRequireDefault(_Emitter2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _exports = {};\n\n// One day this should turn in to an interface\n_exports = function (_Emitter) {\n  _inherits(exports, _Emitter);\n\n  function exports() {\n    _classCallCheck(this, exports);\n\n    return _possibleConstructorReturn(this, _Emitter.apply(this, arguments));\n  }\n\n  return exports;\n}(_Emitter3.default);\n\nexports.default = _exports;\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/modules/timestep/src/ui/IView.js\n// module id = 18\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/modules/timestep/src/ui/IView.js?");

/***/ },
/* 19 */
/*!****************************************************************!*\
  !*** ./modules/devkit-core/~/jsio/packages/math/geom/Point.js ***!
  \****************************************************************/
/***/ function(module, exports) {

	eval("'use strict';\n\nexports.__esModule = true;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _exports = {};\n\n/**\n * @package math.geom.Point;\n * Models a Point in 2D space.\n */\n_exports = function () {\n  function Point(a, b) {\n    _classCallCheck(this, Point);\n\n    switch (arguments.length) {\n      case 0:\n        this.x = 0;\n        this.y = 0;\n        break;\n      case 1:\n        this.x = a.x || 0;\n        this.y = a.y || 0;\n        break;\n      case 2:\n        this.x = a || 0;\n        this.y = b || 0;\n        break;\n    }\n  }\n\n  Point.prototype.rotate = function rotate(r) {\n    var x = this.x,\n        y = this.y,\n        cosr = Math.cos(r),\n        sinr = Math.sin(r);\n\n    this.x = x * cosr - y * sinr;\n    this.y = x * sinr + y * cosr;\n\n    return this;\n  };\n\n  Point.prototype.add = function add(x, y) {\n    if (typeof x == 'number') {\n      this.x += x;\n      this.y += y;\n    } else {\n      this.x += x.x;\n      this.y += x.y;\n    }\n    return this;\n  };\n\n  Point.prototype.subtract = function subtract(x, y) {\n    if (typeof x == 'number') {\n      this.x -= x;\n      this.y -= y;\n    } else {\n      this.x -= x.x;\n      this.y -= x.y;\n    }\n    return this;\n  };\n\n  Point.prototype.scale = function scale(sx, sy) {\n    // if no scaleY specified\n    if (sy === undefined) {\n      sy = sx;\n    }\n\n    this.x *= sx;\n    this.y *= sy;\n    return this;\n  };\n\n  Point.prototype.setMagnitude = function setMagnitude(m) {\n    var theta = this.getAngle();\n    this.x = m * Math.cos(theta);\n    this.y = m * Math.sin(theta);\n    return this;\n  };\n\n  Point.prototype.normalize = function normalize() {\n    var m = this.getMagnitude();\n    this.x /= m;\n    this.y /= m;\n    return this;\n  };\n\n  Point.prototype.addMagnitude = function addMagnitude(m) {\n    return this.setMagnitude(this.getMagnitude() + m);\n  };\n\n  Point.prototype.getMagnitude = function getMagnitude() {\n    return Math.sqrt(this.x * this.x + this.y * this.y);\n  };\n\n  Point.prototype.getSquaredMagnitude = function getSquaredMagnitude() {\n    return this.x * this.x + this.y * this.y;\n  };\n\n  Point.prototype.getAngle = function getAngle() {\n    return Math.atan2(this.y, this.x);\n  };\n\n  return Point;\n}();\n_exports.prototype.translate = _exports.prototype.add;\n_exports.prototype.getDirection = _exports.prototype.getAngle;\nvar Point = _exports;\n\n/*\n */\nPoint.getPolarR = function (x, y) {\n  throw 'notImplemented';\n};\n\n/*\n\t### Class Method: Point.getPolarTheta (x, y)\n\t1. `x {number}`\n\t2. `y {number}`\n\t3. Return: `{number}`\n*/\nPoint.getPolarTheta = function (x, y) {\n  var val = Math.atan2(y, x) + Math.PI * 2;\n  return val > Math.PI * 2 ? val % (Math.PI * 2) : val;\n};\n\n/*\n\t### Class Method: Point.add (a, b, c, d)\n\t### Class Method: Point.translate (a, b, c, d)\n\t1. `a {number}`\n\t2. `b {number}`\n\t3. `c {number}`\n\t4. `d {number}`\n\t5. Return: `{Point}`\n */\nPoint.add = Point.translate = function (a, b, c, d) {\n  switch (arguments.length) {\n    case 2:\n      return new Point(a).add(b);\n    case 3:\n      return new Point(a).add(b, c);\n    case 4:\n      return new Point(a, b).add(c, d);\n  }\n};\n\n/*\n\t### Class Method: Point.subtract (a, b, c, d)\n\t1. `a {number}`\n\t2. `b {number}`\n\t3. `c {number}`\n\t4. `d {number}`\n\t5. Return: `{Point}`\n */\nPoint.subtract = function (a, b, c, d) {\n  switch (arguments.length) {\n    case 2:\n      return new Point(a).subtract(b);\n    case 3:\n      return new Point(a).subtract(b, c);\n    case 4:\n      return new Point(a, b).subtract(c, d);\n  }\n};\n\n/*\n\t### Class Method: Point.scale (a, b, c)\n\t1. `a {number}`\n\t2. `b {number}`\n\t3. `c {number}`\n\t4. Return: `{Point}`\n */\nPoint.scale = function (a, b, c) {\n  switch (arguments.length) {\n    case 2:\n      return new Point(a).scale(b);\n    case 3:\n      return new Point(a, b).scale(c);\n  }\n};\n\n/*\n\t### Class Method: Point.setMagnitude (a, b, c)\n\t1. `a {number}`\n\t2. `b {number}`\n\t3. `c {number}`\n\t4. Return: `{Point}`\n*/\nPoint.setMagnitude = function (a, b, c) {\n  switch (arguments.length) {\n    case 2:\n      return new Point(a).setMagnitude(c);\n    case 3:\n      return new Point(a, b).setMagnitude(c);\n  }\n};\n\n/*\n\t### Class Method: Point.addMagnitude (a, b, c)\n\t1. `a {number}`\n\t2. `b {number}`\n\t3. `c {number}`\n\t4. Return: `{Point}`\n */\nPoint.addMagnitude = function (a, b, c) {\n  switch (arguments.length) {\n    case 2:\n      pt = new Point(a);\n      break;\n    case 3:\n      pt = new Point(a, b);\n      b = c;\n      break;\n  }\n\n  return pt.addMagnitude(b);\n};\n\n/*\n\t### Class Method: Point.getMagnitude (a, b)\n\t1. `a {number}`\n\t2. `b {number}`\n\t3. Return: `{Point}`\n */\nPoint.getMagnitude = function (a, b) {\n  return new Point(a, b).getMagnitude();\n};\n\n/*\n\t### Class Method: Point.rotate (a, b, c)\n\t1. `a {number}`\n\t2. `b {number}`\n\t3. `c {number}`\n\t4. Return: `{Point}`\n */\nPoint.rotate = function (a, b, c) {\n  switch (arguments.length) {\n    case 2:\n      return new Point(a).rotate(b);\n    case 3:\n      return new Point(a, b).rotate(c);\n  }\n};\n\n/**\n * Treat two points as vectors and project a onto b\n *  (a dot unit(b)) * unit(b)\n */\nPoint.project = function (a, b) {\n  var unitB = new Point(b).normalize();\n  return unitB.scale(unitB.x * a.x + unitB.y * a.y);\n};\n\nexports.default = _exports;\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/~/jsio/packages/math/geom/Point.js\n// module id = 19\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/~/jsio/packages/math/geom/Point.js?");

/***/ },
/* 20 */
/*!***************************************************************!*\
  !*** ./modules/devkit-core/~/jsio/packages/math/geom/Rect.js ***!
  \***************************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nexports.__esModule = true;\n\nvar _Enum = __webpack_require__(/*! lib/Enum */ 21);\n\nvar _Enum2 = _interopRequireDefault(_Enum);\n\nvar _Point = __webpack_require__(/*! ./Point */ 19);\n\nvar _Point2 = _interopRequireDefault(_Point);\n\nvar _Line = __webpack_require__(/*! ./Line */ 22);\n\nvar _Line2 = _interopRequireDefault(_Line);\n\nvar _intersect = __webpack_require__(/*! ./intersect */ 23);\n\nvar _intersect2 = _interopRequireDefault(_intersect);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _exports = {};\n\n/**\n * Model a rectangle.\n */\n_exports = function () {\n  function Rect(a, b, c, d) {\n    _classCallCheck(this, Rect);\n\n    switch (arguments.length) {\n      case 0:\n        // init\n        this.width = this.height = this.x = this.y = 0;\n        break;\n      case 1:\n        // copy\n        this.width = a.width;\n        this.height = a.height;\n        this.x = a.x;\n        this.y = a.y;\n        break;\n      case 2:\n        // (x, y), (width, height)\n        this.x = a.x;\n        this.y = a.y;\n        this.width = b.x;\n        this.height = b.y;\n        break;\n      case 3:\n        // (x, y), width, height\n        this.x = a.x;\n        this.y = a.y;\n        this.width = b;\n        this.height = c;\n        break;\n      case 4:\n        // x, y, width, height\n        this.x = a;\n        this.y = b;\n        this.width = c;\n        this.height = d;\n        break;\n    }\n  }\n\n  Rect.prototype.normalize = function normalize() {\n    if (this.width < 0) {\n      this.x -= this.width;\n      this.width = -this.width;\n    }\n\n    if (this.height < 0) {\n      this.y -= this.height;\n      this.height = -this.height;\n    }\n    return this;\n  };\n\n  Rect.prototype.intersectRect = function intersectRect(rect) {\n    if (_intersect2.default.isRectAndRect(this, rect)) {\n      var x1 = this.x;\n      var y1 = this.y;\n      var x2 = this.x + this.width;\n      var y2 = this.y + this.height;\n\n      this.x = Math.max(x1, rect.x), this.y = Math.max(y1, rect.y), this.width = Math.min(x2, rect.x + rect.width) - this.x;\n      this.height = Math.min(y2, rect.y + rect.height) - this.y;\n    } else {\n      this.width = 0;\n      this.height = 0;\n    }\n  };\n\n  Rect.prototype.unionRect = function unionRect(rect) {\n    this.normalize();\n    if (rect.normalize) {\n      rect.normalize();\n    }\n\n    var x2 = this.x + this.width,\n        y2 = this.y + this.height;\n\n    var rx2 = rect.x + rect.width,\n        ry2 = rect.y + rect.height;\n\n    this.x = this.x < rect.x ? this.x : rect.x;\n    this.y = this.y < rect.y ? this.y : rect.y;\n\n    this.width = (x2 > rx2 ? x2 : rx2) - this.x;\n    this.height = (y2 > ry2 ? y2 : ry2) - this.y;\n  };\n\n  Rect.prototype.getCorner = function getCorner(i) {\n    switch (i) {\n      case CORNERS.TOP_LEFT:\n        return new _Point2.default(this.x, this.y);\n      case CORNERS.TOP_RIGHT:\n        return new _Point2.default(this.x + this.width, this.y);\n      case CORNERS.BOTTOM_LEFT:\n        return new _Point2.default(this.x, this.y + this.height);\n      case CORNERS.BOTTOM_RIGHT:\n        return new _Point2.default(this.x + this.width, this.y + this.height);\n    }\n  };\n\n  Rect.prototype.getSide = function getSide(i) {\n    switch (i) {\n      case SIDES.TOP:\n        return new _Line2.default(this.getCorner(CORNERS.TOP_LEFT), this.getCorner(CORNERS.TOP_RIGHT));\n      case SIDES.RIGHT:\n        return new _Line2.default(this.getCorner(CORNERS.TOP_RIGHT), this.getCorner(CORNERS.BOTTOM_RIGHT));\n      case SIDES.BOTTOM:\n        return new _Line2.default(this.getCorner(CORNERS.BOTTOM_RIGHT), this.getCorner(CORNERS.BOTTOM_LEFT));\n      case SIDES.LEFT:\n        return new _Line2.default(this.getCorner(CORNERS.BOTTOM_LEFT), this.getCorner(CORNERS.TOP_LEFT));\n    }\n  };\n\n  Rect.prototype.getCenter = function getCenter() {\n    return new _Point2.default(this.x + this.width / 2, this.y + this.height / 2);\n  };\n\n  return Rect;\n}();\nvar Rect = _exports;\n\nvar SIDES = Rect.SIDES = (0, _Enum2.default)('TOP', 'BOTTOM', 'LEFT', 'RIGHT');\nvar CORNERS = Rect.CORNERS = (0, _Enum2.default)('TOP_LEFT', 'TOP_RIGHT', 'BOTTOM_RIGHT', 'BOTTOM_LEFT');\n\nexports.default = _exports;\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/~/jsio/packages/math/geom/Rect.js\n// module id = 20\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/~/jsio/packages/math/geom/Rect.js?");

/***/ },
/* 21 */
/*!*********************************************************!*\
  !*** ./modules/devkit-core/~/jsio/packages/lib/Enum.js ***!
  \*********************************************************/
/***/ function(module, exports) {

	eval("'use strict';\n\nexports.__esModule = true;\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _exports = {};\n\n_exports = function exports() {\n  if (arguments.length == 1) {\n    if (_typeof(arguments[0]) == 'object') {\n      var obj = arguments[0];\n      for (var i in obj) {\n        if (!(obj[i] in obj)) {\n          obj[obj[i]] = i;\n        }\n      }\n      return obj;\n    } else if (typeof arguments[0] != 'string') {\n      keys = arguments[0];\n    }\n  }\n\n  if (!keys) {\n    var keys = arguments;\n  }\n  var obj = {};\n  for (var i = 0, len = keys.length; i < len; ++i) {\n    if (keys[i]) {\n      obj[keys[i]] = i + 1;\n    }\n    obj[i + 1] = keys[i];\n  }\n  return obj;\n};\n\nexports.default = _exports;\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/~/jsio/packages/lib/Enum.js\n// module id = 21\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/~/jsio/packages/lib/Enum.js?");

/***/ },
/* 22 */
/*!***************************************************************!*\
  !*** ./modules/devkit-core/~/jsio/packages/math/geom/Line.js ***!
  \***************************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nexports.__esModule = true;\n\nvar _Point = __webpack_require__(/*! ./Point */ 19);\n\nvar _Point2 = _interopRequireDefault(_Point);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _exports = {};\n\n_exports = function () {\n  function Line(a, b, c, d) {\n    _classCallCheck(this, Line);\n\n    switch (arguments.length) {\n      case 0:\n        this.start = new _Point2.default();\n        this.end = new _Point2.default();\n        break;\n      case 1:\n        this.start = new _Point2.default(a.start);\n        this.end = new _Point2.default(a.end);\n        break;\n      case 2:\n        this.start = new _Point2.default(a);\n        this.end = new _Point2.default(b);\n        break;\n      case 3:\n        this.start = new _Point2.default(a);\n        this.end = new _Point2.default(b, c);\n        break;\n      case 4:\n      default:\n        this.start = new _Point2.default(a, b);\n        this.end = new _Point2.default(c, d);\n        break;\n    }\n  }\n\n  Line.prototype.getLength = function getLength() {\n    var dx = this.end.x - this.start.x,\n        dy = this.end.y - this.start.y;\n\n    return Math.sqrt(dx * dx + dy * dy);\n  };\n\n  return Line;\n}();\n\n_exports.prototype.getMagnitude = _exports.prototype.getLength;\nexports.default = _exports;\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/~/jsio/packages/math/geom/Line.js\n// module id = 22\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/~/jsio/packages/math/geom/Line.js?");

/***/ },
/* 23 */
/*!********************************************************************!*\
  !*** ./modules/devkit-core/~/jsio/packages/math/geom/intersect.js ***!
  \********************************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nvar _Point = __webpack_require__(/*! ./Point */ 19);\n\nvar _Point2 = _interopRequireDefault(_Point);\n\nvar _Line = __webpack_require__(/*! ./Line */ 22);\n\nvar _Line2 = _interopRequireDefault(_Line);\n\nvar _Rect = __webpack_require__(/*! ./Rect */ 20);\n\nvar _Rect2 = _interopRequireDefault(_Rect);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * @package math.geom.intersect\n */\nvar intersect = exports;\n\nintersect.pointAndRect = intersect.ptAndRect = function (pt, rect) {\n  var x = pt.x,\n      y = pt.y;\n  return x >= rect.x && x <= rect.x + rect.width && y >= rect.y && y <= rect.y + rect.height;\n};\n\nintersect.rectAndPoint = intersect.rectAndPt = function (rect, pt) {\n  return intersect.pointAndRect(pt, rect);\n};\n\nintersect.pointAndCircle = intersect.ptAndCirc = function (pt, circle) {\n  var dx = pt.x - circle.x,\n      dy = pt.y - circle.y;\n  return dx * dx + dy * dy < circle.radius * circle.radius;\n};\n\nintersect.circleAndPoint = intersect.circAndPt = function (circle, pt) {\n  return intersect.pointAndCircle(pt, circle);\n};\n\nintersect.circleAndCircle = function (circle1, circle2) {\n  var dx = circle2.x - circle1.x,\n      dy = circle2.y - circle1.y;\n  var radiusSum = circle1.radius + circle2.radius;\n  return dx * dx + dy * dy <= radiusSum * radiusSum;\n};\n\nintersect.isRectAndRect = function (rect1, rect2) {\n  return !(rect1.y + rect1.height < rect2.y || rect2.y + rect2.height < rect1.y || rect1.x + rect1.width < rect2.x || rect2.x + rect2.width < rect1.x);\n};\n\nintersect.circleAndRect = function (circle, rect) {\n  if (intersect.pointAndRect(circle, rect)) {\n    return true;\n  }\n  return intersect.lineAndCircle(rect.getSide(1), circle) || intersect.lineAndCircle(rect.getSide(2), circle) || intersect.lineAndCircle(rect.getSide(3), circle) || intersect.lineAndCircle(rect.getSide(4), circle);\n};\n\nintersect.rectAndCircle = function (rect, circle) {\n  return intersect.circleAndRect(circle, rect);\n};\n\nintersect.lineAndCircle = function (line, circle) {\n  var vec = intersect.pointToLine(circle, line);\n  return vec.getMagnitude() < circle.radius;\n};\n\nintersect.circleAndLine = function (circle, line) {\n  return intersect.lineAndCircle(line, circle);\n};\n\n// returns line from pt to nearest pt on line\nintersect.pointToLine = intersect.ptToLine = function (pt, line) {\n  var dx = line.end.x - line.start.x,\n      dy = line.end.y - line.start.y,\n      u = ((pt.x - line.start.x) * dx + // TODO can we abstract this from 2D to 2D/3D?\n  (pt.y - line.start.y) * dy) / (dx * dx + dy * dy);\n\n  var i;\n  if (u < 0) {\n    i = new _Point2.default(line.start);\n  } else if (u > 1) {\n    i = new _Point2.default(line.end);\n  } else {\n    i = new _Point2.default(line.start.x + u * dx, line.start.y + u * dy);\n  }\n  return new _Line2.default(i, pt);\n};\n\n// returns rectangle of intersection\nintersect.rectAndRect = function (rect1, rect2) {\n  return (intersect.rectAndRect = function (rect1, rect2) {\n    if (rect1 === true) {\n      return new _Rect2.default(rect2);\n    }\n    if (rect2 === true) {\n      return new _Rect2.default(rect2);\n    }\n\n    if (intersect.isRectAndRect(rect1, rect2)) {\n      var x1 = Math.max(rect1.x, rect2.x),\n          y1 = Math.max(rect1.y, rect2.y),\n          x2 = Math.min(rect1.x + rect1.width, rect2.x + rect2.width),\n          y2 = Math.min(rect1.y + rect1.height, rect2.y + rect2.height);\n      return new _Rect2.default(x1, y1, x2 - x1, y2 - y1);\n    }\n    return null;\n  })(rect1, rect2);\n};\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/~/jsio/packages/math/geom/intersect.js\n// module id = 23\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/~/jsio/packages/math/geom/intersect.js?");

/***/ },
/* 24 */
/*!*************************************************************************!*\
  !*** ./modules/devkit-core/modules/timestep/src/ui/layout/BoxLayout.js ***!
  \*************************************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nexports.__esModule = true;\n\nvar _base = __webpack_require__(/*! base */ 2);\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _exports = {};\n\n/**\n * @license\n * This file is part of the Game Closure SDK.\n *\n * The Game Closure SDK is free software: you can redistribute it and/or modify\n * it under the terms of the Mozilla Public License v. 2.0 as published by Mozilla.\n\n * The Game Closure SDK is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * Mozilla Public License v. 2.0 for more details.\n\n * You should have received a copy of the Mozilla Public License v. 2.0\n * along with the Game Closure SDK.  If not, see <http://mozilla.org/MPL/2.0/>.\n */\nvar BoxLayout = function () {\n  function BoxLayout(view) {\n    _classCallCheck(this, BoxLayout);\n\n    this._view = view;\n\n    this.listenSubviewResize(view);\n  }\n\n  BoxLayout.prototype.reflow = function reflow() {\n    var view = this._view;\n    var superview = view.getSuperview();\n    var style = view.style;\n\n    // if wrapping content, listen for changes to subviews\n    if (style._layoutWidth === 'wrapContent' || style._layoutHeight === 'wrapContent') {\n      this.addSubviewListener(view);\n    }\n\n    if (superview) {\n      var notInLayout = !style.inLayout || !style.flex || superview._layoutName !== 'linear';\n      if (notInLayout || !superview._layout.isHorizontal()) {\n        this.reflowX(superview);\n      }\n\n      if (notInLayout || !superview._layout.isVertical()) {\n        this.reflowY(superview);\n      }\n    }\n  };\n\n  BoxLayout.prototype.addSubviewListener = function addSubviewListener(view) {\n    if (!view.__hasSubviewListener) {\n      view.__hasSubviewListener = true;\n      view.subscribe('SubviewAdded', this, '_onSubviewAdded', view);\n      view.subscribe('SubviewRemoved', this, '_onSubviewRemoved', view);\n\n      var subviews = view.getSubviews();\n      for (var i = 0, n = subviews.length; i < n; ++i) {\n        this._onSubviewAdded(view, subviews[i]);\n      }\n    }\n  };\n\n  BoxLayout.prototype.removeSubviewListener = function removeSubviewListener(view) {\n    if (view.__hasSubviewListener) {\n      view.__hasSubviewListener = false;\n      view.unsubscribe('SubviewAdded', this, '_onSubviewAdded');\n      view.unsubscribe('SubviewRemoved', this, '_onSubviewRemoved');\n\n      var subviews = view.getSubviews();\n      for (var i = 0, n = subviews.length; i < n; ++i) {\n        this._onSubviewRemoved(view, subviews[i]);\n      }\n    }\n  };\n\n  BoxLayout.prototype._onSubviewAdded = function _onSubviewAdded(view, subview) {\n    view.connectEvent(subview, 'resize', (0, _base.bind)(view, 'needsReflow'));\n  };\n\n  BoxLayout.prototype._onSubviewRemoved = function _onSubviewRemoved(view, subview) {\n    view.disconnectEvent(subview, 'resize');\n  };\n\n  BoxLayout.prototype.addResizeListener = function addResizeListener(view) {\n    if (view.style.__removeSuperviewResize) {\n      view.style.__removeSuperviewResize();\n    }\n\n    // reflow on parent view resize\n    var onResize = (0, _base.bind)(view, 'needsReflow');\n    var superview = view.getSuperview();\n    if (superview) {\n      superview.on('resize', onResize);\n      // store a closure to unsubscribe this event\n      view.style.__removeSuperviewResize = (0, _base.bind)(view.style, function () {\n        this.__removeSuperviewResize = null;\n        superview && superview.removeListener('resize', onResize);\n      });\n    }\n  };\n\n  BoxLayout.prototype.listenSubviewResize = function listenSubviewResize(view) {\n    if (view.__root) {\n      this.addResizeListener(view);\n    }\n\n    view.on('ViewAdded', (0, _base.bind)(this, 'addResizeListener', view));\n    view.on('ViewRemoved', (0, _base.bind)(view.style, function () {\n      this.__removeSuperviewResize && this.__removeSuperviewResize();\n    }));\n  };\n\n  BoxLayout.prototype.reflowX = function reflowX(superview) {\n    var view = this._view;\n    var s = view.style;\n\n    if (s.inLayout && superview._layoutName === 'linear') {\n      var inLinearLayout = superview._layout.isHorizontal();\n      var padding = superview.style.padding;\n    }\n\n    var svWidth = superview.style.width;\n    var availWidth = svWidth - (padding && padding.getHorizontal() || 0);\n\n    // compute the width\n    var w;\n    var wrapContent = s._layoutWidth === 'wrapContent';\n    if (wrapContent) {\n      // find the maximal right edge\n      w = this.getContentWidth() + s.padding.right;\n    } else // 1. we're not in a layout and both right and left are defined\n      if (!inLinearLayout && svWidth && s.right !== undefined && s.left !== undefined) {\n        w = availWidth / s.scale - (s.left || 0) - (s.right || 0);\n      } else // 2. width is defined a percent\n        if (svWidth && s._layoutWidthIsPercent) {\n          w = availWidth / s.scale * s._layoutWidthValue;\n        } else // 3. width is inherited from the superview\n          if (s.width === 0 && svWidth) {\n            w = availWidth / s.scale;\n          } else {\n            w = s._width;\n          }\n\n    // enforce center anchor on width change\n    if (s.centerAnchor) {\n      s.anchorX = (w || 0) / 2;\n    }\n\n    // Note that we don't trigger any resize handlers here\n    s._width = w;\n\n    if (!inLinearLayout && svWidth) {\n      if (w !== undefined && s.centerX) {\n        s.x = Math.round((availWidth - s.scale * w) / 2 + (padding && padding.left || 0));\n      }\n      if (w !== undefined && s.left === undefined && s.right !== undefined) {\n        s.x = Math.round(availWidth - s.scale * w - s.right - (padding && padding.right || 0));\n      }\n      if (s.left !== undefined) {\n        s.x = Math.round(s.left + (padding && padding.left || 0));\n      }\n    }\n  };\n\n  BoxLayout.prototype.reflowY = function reflowY() {\n    var view = this._view;\n    var s = view.style;\n    var superview = view.getSuperview();\n    if (s.inLayout && superview._layoutName === 'linear') {\n      var inLinearLayout = superview._layout.isVertical();\n      var padding = superview.style.padding;\n    }\n\n    var svHeight = superview.style.height;\n    var availHeight = svHeight - (padding && padding.getVertical() || 0);\n\n    // compute the height\n    var h;\n    var wrapContent = s._layoutHeight === 'wrapContent';\n    if (wrapContent) {\n      h = this.getContentHeight() + s.padding.bottom;\n    } else if (!inLinearLayout && svHeight && s.top !== undefined && s.bottom !== undefined) {\n      h = availHeight / s.scale - (s.top || 0) - (s.bottom || 0);\n    } else if (svHeight && s._layoutHeightIsPercent) {\n      h = availHeight / s.scale * s._layoutHeightValue;\n    } else if (s.height === 0 && svHeight) {\n      h = availHeight / s.scale;\n    } else {\n      h = s.height;\n    }\n\n    // enforce center anchor on height change\n    if (s.centerAnchor) {\n      s.anchorY = (h || 0) / 2;\n    }\n\n    s._height = h;\n\n    if (!inLinearLayout && svHeight) {\n      if (h !== undefined && s.centerY) {\n        s.y = Math.round((availHeight - s.scale * h) / 2 + (padding && padding.top || 0));\n      }\n      if (h !== undefined && s.top === undefined && s.bottom !== undefined) {\n        s.y = Math.round(availHeight - s.scale * h - s.bottom - (padding && padding.bottom || 0));\n      }\n      if (s.top !== undefined) {\n        s.y = Math.round(s.top + (padding && padding.top || 0));\n      }\n    }\n  };\n\n  BoxLayout.prototype.getContentWidth = function getContentWidth() {\n    // find the maximal right edge\n    var w = 0;\n    var views = this._view.getSubviews();\n    for (var i = 0, v; v = views[i]; ++i) {\n      if (!v.style._layoutWidthIsPercent && v.style.visible) {\n        var right = v.style.x + v.style.width * v.style.scale + (v.style.right || 0);\n        if (right > w) {\n          w = right;\n        }\n      }\n    }\n    return w;\n  };\n\n  BoxLayout.prototype.getContentHeight = function getContentHeight() {\n    // find the maximal bottom edge\n    var views = this._view.getSubviews();\n    var h = 0;\n    for (var i = 0, v; v = views[i]; ++i) {\n      if (!v.style._layoutHeightIsPercent && v.style.visible) {\n        var bottom = v.style.y + v.style.height * v.style.scale + (v.style.bottom || 0);\n        if (bottom > h) {\n          h = bottom;\n        }\n      }\n    }\n    return h;\n  };\n\n  BoxLayout.prototype.add = function add() {/* Abstract */};\n\n  BoxLayout.prototype.remove = function remove() {/* Abstract*/};\n\n  return BoxLayout;\n}();\n\nexports.default = BoxLayout;\n;\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/modules/timestep/src/ui/layout/BoxLayout.js\n// module id = 24\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/modules/timestep/src/ui/layout/BoxLayout.js?");

/***/ },
/* 25 */
/*!****************************************************************************!*\
  !*** ./modules/devkit-core/modules/timestep/src/ui/layout/LinearLayout.js ***!
  \****************************************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nexports.__esModule = true;\n\nvar _base = __webpack_require__(/*! base */ 2);\n\nvar _Padding = __webpack_require__(/*! ui/layout/Padding */ 26);\n\nvar _Padding2 = _interopRequireDefault(_Padding);\n\nvar _strPad = __webpack_require__(/*! ui/backend/strPad */ 27);\n\nvar _strPad2 = _interopRequireDefault(_strPad);\n\nvar _BoxLayout2 = __webpack_require__(/*! ./BoxLayout */ 24);\n\nvar _BoxLayout3 = _interopRequireDefault(_BoxLayout2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _exports = {};\n\n/**\n * @license\n * This file is part of the Game Closure SDK.\n *\n * The Game Closure SDK is free software: you can redistribute it and/or modify\n * it under the terms of the Mozilla Public License v. 2.0 as published by Mozilla.\n\n * The Game Closure SDK is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * Mozilla Public License v. 2.0 for more details.\n\n * You should have received a copy of the Mozilla Public License v. 2.0\n * along with the Game Closure SDK.  If not, see <http://mozilla.org/MPL/2.0/>.\n */\n/**\n * package ui.layout.LinearLayout;\n *\n * A class to direct the layout of its parent view, set through opts.parent.\n */\n/**\n * package ui.layout.LinearLayout;\n *\n * A class to direct the layout of its parent view, set through opts.parent.\n */\n\n\nvar DEBUG = false;\nif (DEBUG) {\n  var VIEW_STR = function VIEW_STR(view) {\n    return view + ' (' + view.uid + ')';\n  };\n  var _debug = {\n    space: '',\n    stepIn: function stepIn() {\n      this.space += ' ';\n      return true;\n    },\n    stepOut: function stepOut() {\n      this.space = this.space.slice(0, this.space.length - 1);\n      return true;\n    },\n    log: function log() {\n      _base.logger.log.apply(_base.logger, [this.space].concat(Array.prototype.slice.call(arguments, 0)));\n      return true;\n    }\n  };\n}\n\n// TODO: native\n// TODO: Resize event on width/height change\n// TODO: reflow on subview visibility change\nfunction toStringSort() {\n  return this.view.style._sortOrder + this.index;\n}\n\nvar LinearLayout = function (_BoxLayout) {\n  _inherits(LinearLayout, _BoxLayout);\n\n  function LinearLayout(view) {\n    _classCallCheck(this, LinearLayout);\n\n    var _this = _possibleConstructorReturn(this, _BoxLayout.call(this, view));\n\n    _this._view.subscribe('SubviewAdded', _this, '_onSubviewAdded');\n    _this._view.subscribe('SubviewRemoved', _this, '_onSubviewRemoved');\n\n    _this._views = [];\n    var subviews = _this._view.getSubviews();\n    for (var i = 0, subview; subview = subviews[i]; ++i) {\n      if (subview.style.inLayout) {\n        _this._views.push(_this._initLayoutView(subview));\n      }\n    }\n\n    _this._forwardEvents();\n\n    _this._debug = DEBUG;\n    return _this;\n  }\n\n  LinearLayout.prototype._onSubviewRemoved = function _onSubviewRemoved(view) {\n    if (view.style.inLayout) {\n      this.remove(view);\n    }\n  };\n\n  LinearLayout.prototype._onSubviewAdded = function _onSubviewAdded(view) {\n    if (view.style.inLayout) {\n      this.add(view);\n    }\n  };\n\n  LinearLayout.prototype.debug = function debug() {\n    this._debug = true;\n    return this;\n  };\n\n  LinearLayout.prototype._setDirection = function _setDirection(direction) {\n    this._direction = direction;\n\n    var isVertical = this.isVertical();\n    this._propPos = isVertical ? 'y' : 'x';\n    this._propPosOpp = isVertical ? 'x' : 'y';\n    this._propDim = isVertical ? '_height' : '_width';\n    this._minPropDim = isVertical ? 'minHeight' : 'minWidth';\n    this._maxPropDim = isVertical ? 'maxHeight' : 'maxWidth';\n    this._layoutPropDim = isVertical ? 'layoutHeight' : 'layoutWidth';\n    this._propDimOpp = isVertical ? '_width' : '_height';\n    this._propSideA = isVertical ? 'top' : 'left';\n    this._propSideB = isVertical ? 'bottom' : 'right';\n\n    this._flexProp = isVertical ? 'vflex' : 'hflex';\n  };\n\n  LinearLayout.prototype.isVertical = function isVertical() {\n    return this._direction == 'vertical';\n  };\n\n  LinearLayout.prototype.isHorizontal = function isHorizontal() {\n    return this._direction == 'horizontal';\n  };\n\n  LinearLayout.prototype._forwardEvents = function _forwardEvents() {\n    for (var i = 0, a; a = this._events[i]; ++i) {\n      this._view.subscribe(a, this, '_forwardSignal', a);\n    }\n  };\n\n  LinearLayout.prototype._forwardSignal = function _forwardSignal() {\n    for (var i = 0, v; v = this._views[i]; ++i) {\n      v.view.publish.apply(v.view, arguments);\n    }\n  };\n\n  LinearLayout.prototype._initLayoutView = function _initLayoutView(view) {\n    view.style.inLayout = true;\n\n    this._debug && _debug.log('view', this._view.uid, 'layout: adding view', view.uid, '(' + this._propDim, '=', view.style[this._propDim] + ')');\n\n    // use connectEvent: prevents a memory leak\n    // acts like subscribe, but disconnects the event when this._view\n    // is not in the view hierarchy\n    this._view.connectEvent(view, 'Resize', (0, _base.bind)(this, 'reflow'));\n\n    return {\n      view: view,\n      index: 0,\n      toString: toStringSort\n    };\n  };\n\n  LinearLayout.prototype.getSize = function getSize() {\n    return this._size;\n  };\n\n  LinearLayout.prototype.getViewIndex = function getViewIndex(view) {\n    for (var i = 0, d; d = this._views[i]; ++i) {\n      if (d.view == view) {\n        return i;\n      }\n    }\n    return -1;\n  };\n\n  LinearLayout.prototype.addSubviews = function addSubviews(views) {\n    this._debug && _debug.log(this._view.uid, 'adding', views.length, 'views');\n    if ((0, _base.isArray)(views)) {\n      for (var i = 0, n = views.length; i < n; ++i) {\n        var view = views[i];\n        if (view) {\n          this._views.push(this._initLayoutView(view));\n        }\n      }\n\n      this._view.needsReflow();\n    } else {\n      this.insertBefore(views);\n    }\n\n    return this;\n  };\n\n  LinearLayout.prototype.getSubviews = function getSubviews() {\n    return this._views.map(function (v) {\n      return v.view;\n    });\n  };\n\n  LinearLayout.prototype.remove = function remove(view) {\n    var i = this.getViewIndex(view);\n    if (i != -1) {\n      this._views.splice(i, 1);\n      this._view.disconnectEvent(view, 'Resize');\n      this._view.needsReflow();\n      return;\n    }\n  };\n\n  LinearLayout.prototype.insertBefore = function insertBefore(view, before) {\n    if (this.getViewIndex(view) !== -1) {\n      return;\n    }\n\n    var item = this._initLayoutView(view);\n    var added = false;\n    if (before) {\n      var i = this.getViewIndex(before);\n      if (i != -1) {\n        this._views.splice(i, 0, item);\n        added = true;\n      }\n    }\n\n    if (!added) {\n      this._views.push(item);\n    }\n\n    this._view.needsReflow();\n  };\n\n  LinearLayout.prototype.insertAfter = function insertAfter(view, after) {\n    if (this.getViewIndex(view) !== -1) {\n      return;\n    }\n\n    var item = this._initLayoutView(view);\n    var added = false;\n    if (after) {\n      var i = this.getViewIndex(after);\n      if (i != -1) {\n        this._views.splice(i + 1, 0, item);\n        added = true;\n      }\n    }\n\n    if (!added) {\n      this._views.unshift(item);\n    }\n\n    this._view.needsReflow();\n  };\n\n  LinearLayout.prototype.reflow = function reflow() {\n    var _BoxLayout$prototype$;\n\n    (_BoxLayout$prototype$ = _BoxLayout.prototype.reflow).call.apply(_BoxLayout$prototype$, [this].concat(Array.prototype.slice.call(arguments)));\n\n    // Get the position of each view in the subview array. This index\n    // will be used as the secondary sorting key.\n    var children = this._view.getSubviews();\n    var indexMap = {};\n    for (var i = 0, v; v = children[i]; ++i) {\n      indexMap[v.uid] = _strPad2.default.pad(i);\n    }\n\n    // style.order is first, then default to the views position in the\n    // subview array.\n    var n = 0;\n    for (var i = 0, v; v = this._views[i]; ++i) {\n      if (v.view.style.visible) {\n        v.index = indexMap[v.view.uid];\n\n        ++n;\n      }\n    }\n\n    if (!n) {\n      return;\n    }\n\n    this._views.sort();\n\n    var layoutStyle = this._view.style;\n    if (layoutStyle.direction !== this._direction) {\n      this._setDirection(layoutStyle.direction);\n    }\n\n    var isVertical = this._direction === 'vertical';\n    var propDim = this._propDim;\n    var propDimOpp = this._propDimOpp;\n    var minPropDim = this._minPropDim;\n    var propA = this._propSideA;\n    var propB = this._propSideB;\n    var padding = layoutStyle.padding;\n    var paddingSum = padding && (isVertical ? padding.getVertical() : padding.getHorizontal()) || 0;\n    var parentDim = layoutStyle[propDim];\n    var views = this._views;\n\n    this._debug && _debug.log(VIEW_STR(this._view) + ': layout', this._direction + ',', views.length, 'subview(s):') && _debug.stepIn() && this._summarize();\n\n    // compute the total size of the fixed views and count\n    // how many dynamically sized views we have\n    var viewSizeSum = 0;\n    var flexSum = 0;\n    for (var i = 0, v; v = views[i]; ++i) {\n      var s = v.view.style;\n      if (!s.visible) {\n        continue;\n      }\n      v.view.reflowSync();\n\n      v.margins = (s[propA] || 0) + (s[propB] || 0);\n\n      if (s.flex) {\n        flexSum += s.flex;\n        v.baseSize = (s[minPropDim] || 0) * s.scale + v.margins;\n        viewSizeSum += v.baseSize;\n      } else {\n        viewSizeSum += (s[propDim] || 0) * s.scale + v.margins;\n      }\n    }\n\n    if (flexSum && parentDim === undefined) {\n      return;\n    }\n\n    // compute available space\n    var availableSpace = parentDim - paddingSum;\n    if (availableSpace < 0) {\n      return;\n    }\n\n    // if there's a flex subview, the total size is the availableSpace\n    // otherwise the totalSize is the sum of the subview sizes\n    var justifyContent = layoutStyle.justifyContent;\n    var totalSize = flexSum ? parentDim : viewSizeSum + paddingSum;\n    var flexSize = availableSpace - viewSizeSum;\n\n    // compute the space for each flexible view\n    var flexUsed = 0;\n    for (var i = 0, v; v = views[i]; ++i) {\n      var s = v.view.style;\n      if (!s.visible) {\n        continue;\n      }\n\n      if (s.flex) {\n        // compute the ideal space for the flex view\n        var idealSpace = v.baseSize + flexSize * (s.flex / flexSum) / s.scale;\n\n        // store the actual space for the view, which is the computed space minus the margins\n        v.dim = idealSpace - v.margins;\n\n        // account for maximal bound\n        if (v.dim > s[this._maxPropDim]) {\n          v.dim = s[this._maxPropDim];\n        }\n\n        // keep track of used flex space\n        flexUsed += idealSpace;\n      }\n    }\n\n    var flexRemaining = flexSize - flexUsed;\n\n    // set the position of the views\n    var pos = padding && padding[propA] || 0;\n    var gap = 0;\n    if (flexRemaining > 0) {\n      // there's unused space, so justify our views\n      switch (justifyContent) {\n        case 'end':\n          pos += flexRemaining;\n          break;\n        case 'center':\n          pos += flexRemaining / 2;\n          break;\n        case 'space':\n          gap = flexRemaining / (n - 1) || 0;\n          break;\n        case 'space-outside':\n          gap = flexRemaining / (n + 1) || 0;\n          pos += gap;\n          break;\n        case 'start':\n        default:\n          break;\n      }\n    }\n\n    // position and size views!\n    var propPos = this._propPos;\n    for (var i = 0, v; v = views[i]; ++i) {\n      var s = v.view.style;\n      if (!s.visible) {\n        continue;\n      }\n\n      // set position\n      s[propPos] = pos + (s[propA] || 0);\n\n      this._debug && _debug.log('->', VIEW_STR(v.view), propPos, '=', s[propPos]);\n\n      if (s.flex) {\n        // set width\n        s[propDim] = v.dim;\n\n        this._debug && _debug.log('->', VIEW_STR(v.view), propDim, '=', s[propDim]);\n      }\n\n      // advance position\n      pos += gap + (s[propDim] || 0) * s.scale + v.margins;\n    }\n\n    this._debug && this._summarize() && _debug.stepOut();\n\n    if (isVertical && layoutStyle.layoutHeight === 'wrapContent') {\n      this.reflowY();\n    } else if (!isVertical && layoutStyle.layoutWidth === 'wrapContent') {\n      this.reflowX();\n    }\n\n    if (this._size != totalSize) {\n      this._size = totalSize;\n    }\n  };\n\n  LinearLayout.prototype._summarize = function _summarize() {\n    var views = this._views;\n    for (var i = 0, v; v = views[i]; ++i) {\n      var s = v.view.style;\n      _debug.log('*', VIEW_STR(v.view) + ': ' + (!s.visible ? 'invisible' : ''), s.x + ',' + s.y + '-' + s.width + 'x' + s.height + ' (flex=' + (s.flex || 0) + ')');\n    }\n\n    return true;\n  };\n\n  return LinearLayout;\n}(_BoxLayout3.default);\n\nexports.default = LinearLayout;\n;\n\nLinearLayout.prototype._events = ['ViewWillAppear', 'ViewDidAppear', 'ViewWillDisappear', 'ViewDidDisappear'];\nLinearLayout.prototype._events = ['ViewWillAppear', 'ViewDidAppear', 'ViewWillDisappear', 'ViewDidDisappear'];\nLinearLayout.prototype.add = LinearLayout.prototype.insertBefore;\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/modules/timestep/src/ui/layout/LinearLayout.js\n// module id = 25\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/modules/timestep/src/ui/layout/LinearLayout.js?");

/***/ },
/* 26 */
/*!***********************************************************************!*\
  !*** ./modules/devkit-core/modules/timestep/src/ui/layout/Padding.js ***!
  \***********************************************************************/
/***/ function(module, exports) {

	eval("'use strict';\n\nexports.__esModule = true;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _exports = {};\n\n/**\n * @license\n * This file is part of the Game Closure SDK.\n *\n * The Game Closure SDK is free software: you can redistribute it and/or modify\n * it under the terms of the Mozilla Public License v. 2.0 as published by Mozilla.\n\n * The Game Closure SDK is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * Mozilla Public License v. 2.0 for more details.\n\n * You should have received a copy of the Mozilla Public License v. 2.0\n * along with the Game Closure SDK.  If not, see <http://mozilla.org/MPL/2.0/>.\n */\n/**\n * @package ui.layout.Padding;\n *\n * A simple class to express padding views.\n */\n_exports = function () {\n  function exports(args) {\n    _classCallCheck(this, exports);\n\n    this.update(args);\n  }\n\n  exports.prototype.update = function update(args) {\n    if (args instanceof Padding) {\n      this.top = args.top;\n      this.right = args.right;\n      this.bottom = args.bottom;\n      this.left = args.left;\n      return;\n    }\n    if (typeof args == 'string') {\n      args = args.split(/\\s+/).map(function (piece) {\n        return parseFloat(piece);\n      });\n    }\n\n    if (!args || !args.length) {\n      args = [args || 0];\n    }\n\n    switch (args.length) {\n      case 1:\n        this.left = this.right = this.top = this.bottom = args[0];\n        break;\n      case 2:\n        this.top = this.bottom = args[0];\n        this.left = this.right = args[1];\n        break;\n      case 3:\n        this.top = args[0];\n        this.left = this.right = args[1];\n        this.bottom = args[2];\n        break;\n      case 4:\n        this.top = args[0];\n        this.right = args[1];\n        this.bottom = args[2];\n        this.left = args[3];\n        break;\n    }\n  };\n\n  exports.prototype.getVertical = function getVertical() {\n    return this.top + this.bottom;\n  };\n\n  exports.prototype.getHorizontal = function getHorizontal() {\n    return this.left + this.right;\n  };\n\n  exports.prototype.toString = function toString() {\n    return [this.top, this.right, this.bottom, this.left].join(' ');\n  };\n\n  return exports;\n}();\nvar Padding = _exports;\n\nexports.default = _exports;\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/modules/timestep/src/ui/layout/Padding.js\n// module id = 26\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/modules/timestep/src/ui/layout/Padding.js?");

/***/ },
/* 27 */
/*!***********************************************************************!*\
  !*** ./modules/devkit-core/modules/timestep/src/ui/backend/strPad.js ***!
  \***********************************************************************/
/***/ function(module, exports) {

	eval("'use strict';\n\nexports.__esModule = true;\nvar _exports = {};\n\n/**\n * @license\n * This file is part of the Game Closure SDK.\n *\n * The Game Closure SDK is free software: you can redistribute it and/or modify\n * it under the terms of the Mozilla Public License v. 2.0 as published by Mozilla.\n\n * The Game Closure SDK is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * Mozilla Public License v. 2.0 for more details.\n\n * You should have received a copy of the Mozilla Public License v. 2.0\n * along with the Game Closure SDK.  If not, see <http://mozilla.org/MPL/2.0/>.\n */\nvar LEN = 8;\nvar MAX = 99999999;\nvar MIN = -99999999;\nvar PAD = '00000000';\n\n_exports.initialValue = PAD;\n\n_exports.pad = function (val) {\n  val = ~~val;\n\n  if (val < MIN) {\n    val = MIN;\n  }\n  if (val > MAX) {\n    val = MAX;\n  }\n  if (val < 0) {\n    val *= -1;\n    return '-' + PAD.substring(0, LEN - ('' + val).length) + val;\n  } else {\n    return PAD.substring(0, LEN - ('' + val).length) + val;\n  }\n};\n\nexports.default = _exports;\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/modules/timestep/src/ui/backend/strPad.js\n// module id = 27\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/modules/timestep/src/ui/backend/strPad.js?");

/***/ },
/* 28 */
/*!***********************************************************************************!*\
  !*** ./modules/devkit-core/modules/timestep/src/ui/backend/canvas/ViewBacking.js ***!
  \***********************************************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nexports.__esModule = true;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _BaseBacking2 = __webpack_require__(/*! ../BaseBacking */ 29);\n\nvar _BaseBacking3 = _interopRequireDefault(_BaseBacking2);\n\nvar _Matrix2D = __webpack_require__(/*! ../../../platforms/browser/webgl/Matrix2D */ 30);\n\nvar _Matrix2D2 = _interopRequireDefault(_Matrix2D);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _exports = {};\n\n/**\n * @license\n * This file is part of the Game Closure SDK.\n *\n * The Game Closure SDK is free software: you can redistribute it and/or modify\n * it under the terms of the Mozilla Public License v. 2.0 as published by Mozilla.\n\n * The Game Closure SDK is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * Mozilla Public License v. 2.0 for more details.\n\n * You should have received a copy of the Mozilla Public License v. 2.0\n * along with the Game Closure SDK.  If not, see <http://mozilla.org/MPL/2.0/>.\n */\n/**\n * @package ui.backend.canvas.ViewStyle;\n *\n * Models the style object of the canvas View.\n */\n\n\nvar sin = Math.sin;\nvar cos = Math.cos;\n\nvar ADD_COUNTER = 900000;\n\nfunction compareZOrder(a, b) {\n  var zIndexCmp = a._zIndex - b._zIndex;\n  if (zIndexCmp !== 0) {\n    return zIndexCmp;\n  }\n\n  return a._addedAt - b._addedAt;\n}\n\nvar ViewBacking = function (_BaseBacking) {\n  _inherits(ViewBacking, _BaseBacking);\n\n  function ViewBacking(view) {\n    _classCallCheck(this, ViewBacking);\n\n    var _this = _possibleConstructorReturn(this, _BaseBacking.call(this));\n\n    _this._globalTransform = new _Matrix2D2.default();\n    _this._cachedRotation = 0;\n    _this._cachedSin = 0;\n    _this._cachedCos = 1;\n    _this.__cachedWidth = null;\n    _this.__cachedHeight = null;\n    _this._view = view;\n    _this._superview = null;\n\n    _this._shouldSort = false;\n    _this._shouldSortVisibleSubviews = false;\n\n    _this._subviews = [];\n    _this._visibleSubviews = [];\n\n    // number of direct or indirect tick methods\n    _this._hasTick = !!view._tick;\n    _this._hasRender = !!view._render;\n    _this._subviewsWithTicks = null;\n    _this._usesSeparateViewport = false;\n\n    _this._addedAt = 0;\n    return _this;\n  }\n\n  ViewBacking.prototype.getSuperview = function getSuperview() {\n    return this._superview;\n  };\n\n  ViewBacking.prototype.getSubviews = function getSubviews() {\n    if (this._shouldSort) {\n      this._shouldSort = false;\n      this._subviews.sort(compareZOrder);\n    }\n    var subviews = [];\n    var backings = this._subviews;\n    var n = backings.length;\n    for (var i = 0; i < n; ++i) {\n      subviews[i] = backings[i]._view;\n    }\n\n    return subviews;\n  };\n\n  ViewBacking.prototype.onTickAdded = function onTickAdded() {\n    if (this._superview) {\n      this._superview.__view.addTickingView(this);\n    }\n  };\n\n  ViewBacking.prototype.onTickRemoved = function onTickRemoved() {\n    if (this._superview) {\n      this._superview.__view.removeTickingView(this);\n    }\n  };\n\n  ViewBacking.prototype.addTickingView = function addTickingView(backing) {\n    if (this._subviewsWithTicks === null) {\n      this._subviewsWithTicks = [];\n    }\n\n    var idx = this._subviewsWithTicks.indexOf(backing);\n    if (idx === -1) {\n      this._subviewsWithTicks.push(backing);\n      if (!this._hasTick && this._subviewsWithTicks.length === 1) {\n        // first time that this view needs to be registered as ticking\n        this.onTickAdded();\n      }\n    }\n  };\n\n  ViewBacking.prototype.removeTickingView = function removeTickingView(backing) {\n    if (this._subviewsWithTicks === null) {\n      return;\n    }\n\n    var idx = this._subviewsWithTicks.indexOf(backing);\n    if (idx !== -1) {\n      this._subviewsWithTicks.splice(idx, 1);\n      if (!this._hasTick && this._subviewsWithTicks.length === 0) {\n        // no more reason to be registered as ticking\n        this.onTickRemoved();\n      }\n    }\n  };\n\n  ViewBacking.prototype.addSubview = function addSubview(view) {\n    var backing = view.__view;\n    var superview = backing._superview;\n    if (superview == this._view || this == backing) {\n      return false;\n    }\n    if (superview) {\n      superview.__view.removeSubview(view);\n    }\n\n    var n = this._subviews.length;\n    this._subviews[n] = backing;\n\n    backing._superview = this._view;\n    backing._addedAt = ++ADD_COUNTER;\n\n    if (n && compareZOrder(backing, this._subviews[n - 1]) < 0) {\n      this._shouldSort = true;\n    }\n\n    if (backing._hasTick || backing._subviewsWithTicks !== null) {\n      this.addTickingView(backing);\n    }\n\n    if (backing._visible) {\n      this.addVisibleSubview(backing);\n    }\n\n    return true;\n  };\n\n  ViewBacking.prototype.removeSubview = function removeSubview(view) {\n    var backing = view.__view;\n    if (backing._visible) {\n      this.removeVisibleSubview(backing);\n    }\n\n    var index = this._subviews.indexOf(backing);\n    if (index !== -1) {\n      if (backing._hasTick || backing._subviewsWithTicks !== null) {\n        this.removeTickingView(backing);\n      }\n\n      this._subviews.splice(index, 1);\n\n      // this._view.needsRepaint();\n      backing._superview = null;\n      return true;\n    }\n\n    return false;\n  };\n\n  ViewBacking.prototype._replaceSubview = function _replaceSubview(subview, newSubview) {\n    var subviewIdx = this._subviews.indexOf(subview);\n    this._subviews[subviewIdx] = newSubview;\n    var visibleSubviewIdx = this._visibleSubviews.indexOf(subview);\n    if (visibleSubviewIdx !== -1) {\n      this._visibleSubviews[visibleSubviewIdx] = newSubview;\n    }\n  };\n\n  ViewBacking.prototype.addVisibleSubview = function addVisibleSubview(backing) {\n    this._visibleSubviews.push(backing);\n    this._shouldSortVisibleSubviews = true;\n  };\n\n  ViewBacking.prototype.removeVisibleSubview = function removeVisibleSubview(backing) {\n    var index = this._visibleSubviews.indexOf(backing);\n    if (index !== -1) {\n      this._visibleSubviews.splice(index, 1);\n    }\n  };\n\n  ViewBacking.prototype.wrapTick = function wrapTick(dt, app) {\n    if (this._hasTick) {\n      this._view.tick(dt, app);\n    }\n\n    var backings = this._subviewsWithTicks;\n    if (backings !== null) {\n      for (var i = 0; i < backings.length; ++i) {\n        backings[i].wrapTick(dt, app);\n      }\n    }\n  };\n\n  ViewBacking.prototype.updateGlobalTransform = function updateGlobalTransform(pgt) {\n    var flipX = this.flipX ? -1 : 1;\n    var flipY = this.flipY ? -1 : 1;\n\n    var gt = this._globalTransform;\n    var sx = this.scaleX * this.scale * flipX;\n    var sy = this.scaleY * this.scale * flipY;\n    var ax = this.flipX ? this._width - this.anchorX : this.anchorX;\n    var ay = this.flipY ? this._height - this.anchorY : this.anchorY;\n    var tx = this.x + this.offsetX + this.anchorX;\n    var ty = this.y + this.offsetY + this.anchorY;\n\n    if (this.r === 0) {\n      tx -= ax * sx;\n      ty -= ay * sy;\n      gt.a = pgt.a * sx;\n      gt.b = pgt.b * sx;\n      gt.c = pgt.c * sy;\n      gt.d = pgt.d * sy;\n      gt.tx = tx * pgt.a + ty * pgt.c + pgt.tx;\n      gt.ty = tx * pgt.b + ty * pgt.d + pgt.ty;\n    } else {\n      if (this.r !== this._cachedRotation) {\n        this._cachedRotation = this.r;\n        this._cachedSin = sin(this.r);\n        this._cachedCos = cos(this.r);\n      }\n      var a = this._cachedCos * sx;\n      var b = this._cachedSin * sx;\n      var c = -this._cachedSin * sy;\n      var d = this._cachedCos * sy;\n\n      if (ax || ay) {\n        tx -= a * ax + c * ay;\n        ty -= b * ax + d * ay;\n      }\n\n      gt.a = a * pgt.a + b * pgt.c;\n      gt.b = a * pgt.b + b * pgt.d;\n      gt.c = c * pgt.a + d * pgt.c;\n      gt.d = c * pgt.b + d * pgt.d;\n      gt.tx = tx * pgt.a + ty * pgt.c + pgt.tx;\n      gt.ty = tx * pgt.b + ty * pgt.d + pgt.ty;\n    }\n  };\n\n  ViewBacking.prototype.wrapRender = function wrapRender(ctx, parentTransform, parentOpacity) {\n    if (this._shouldSortVisibleSubviews) {\n      this._shouldSortVisibleSubviews = false;\n      this._visibleSubviews.sort(compareZOrder);\n    }\n\n    var width = this._width;\n    var height = this._height;\n    if (width < 0 || height < 0) {\n      return;\n    }\n\n    var saveContext = this.clip || this.compositeOperation || !this._view.__parent;\n    if (saveContext) {\n      ctx.save();\n    }\n\n    this.updateGlobalTransform(parentTransform);\n    var gt = this._globalTransform;\n    ctx.setTransform(gt.a, gt.b, gt.c, gt.d, gt.tx, gt.ty);\n\n    var globalAlpha = this.opacity * parentOpacity;\n    ctx.globalAlpha = globalAlpha;\n\n    if (this.clip) {\n      ctx.clipRect(0, 0, width, height);\n    }\n\n    var filter = this._view.getFilter();\n    if (filter) {\n      ctx.setFilter(filter);\n    } else {\n      ctx.clearFilter();\n    }\n\n    if (this.compositeOperation) {\n      ctx.globalCompositeOperation = this.compositeOperation;\n    }\n\n    if (this.backgroundColor) {\n      ctx.fillStyle = this.backgroundColor;\n      ctx.fillRect(0, 0, width, height);\n    }\n\n    if (this._hasRender) {\n      this._view._render(ctx, gt);\n    }\n\n    var subviews = this._visibleSubviews;\n    for (var i = 0; i < subviews.length; i++) {\n      subviews[i].wrapRender(ctx, gt, globalAlpha);\n    }\n\n    if (this._usesSeparateViewport) {\n      this._view.popViewport();\n    }\n\n    ctx.clearFilter();\n\n    if (saveContext) {\n      ctx.restore();\n    }\n  };\n\n  ViewBacking.prototype._onResize = function _onResize() {\n    this._onLayoutChange();\n\n    // enforce center anchor on width / height change\n    var s = this._view.style;\n    if (s.centerAnchor) {\n      s.anchorX = (s._width || 0) / 2;\n      s.anchorY = (s._height || 0) / 2;\n    }\n  };\n\n  ViewBacking.prototype._onZIndex = function _onZIndex() {\n    this._view.needsRepaint();\n\n    var superview = this._view.getSuperview();\n    if (superview) {\n      superview.__view._shouldSort = true;\n      superview.__view._shouldSortVisibleSubviews = true;\n    }\n  };\n\n  ViewBacking.prototype._onVisible = function _onVisible() {\n    if (this._superview === null) {\n      return;\n    }\n\n    if (this._visible) {\n      this._superview.__view.addVisibleSubview(this);\n    } else {\n      this._superview.__view.removeVisibleSubview(this);\n    }\n  };\n\n  ViewBacking.prototype._onInLayout = function _onInLayout() {\n    var layout = this._superview && this._superview._layout;\n    if (layout) {\n      if (this._inLayout) {\n        layout.add(this._view);\n      } else {\n        layout.remove(this._view);\n        this._view.needsReflow();\n      }\n    }\n  };\n\n  // trigger a reflow, optionally of the parent if the parent has layout too\n  ViewBacking.prototype._onLayoutChange = function _onLayoutChange() {\n    if (this._inLayout) {\n      var superview = this.getSuperview();\n      if (superview && superview._layout) {\n        superview.needsReflow();\n      }\n    }\n\n    // child view properties might be invalidated\n    this._view.needsReflow();\n  };\n\n  ViewBacking.prototype._onOffsetX = function _onOffsetX(n) {\n    this.offsetX = n * this.width / 100;\n  };\n\n  ViewBacking.prototype._onOffsetY = function _onOffsetY(n) {\n    this.offsetY = n * this.height / 100;\n  };\n\n  ViewBacking.prototype.updateAspectRatio = function updateAspectRatio(width, height) {\n    this.aspectRatio = (width || this.width) / (height || this.height);\n  };\n\n  ViewBacking.prototype._onFixedAspectRatio = function _onFixedAspectRatio() {\n    if (this._fixedAspectRatio) {\n      this.updateAspectRatio();\n    }\n  };\n\n  ViewBacking.prototype.enforceAspectRatio = function enforceAspectRatio(iw, ih, isTimeout) {\n    if (iw && ih) {\n      this.updateAspectRatio(iw, ih);\n    }\n    var parent = this._view.getSuperview();\n    var opts = this._view._opts;\n    iw = iw || opts.width;\n    ih = ih || opts.height;\n    if (opts.width) {\n      iw = opts.width;\n      ih = opts.width / this.aspectRatio;\n    } else if (opts.height) {\n      ih = opts.height;\n      iw = opts.height * this.aspectRatio;\n    } else if (parent) {\n      if (parent.style.width) {\n        iw = parent.style.width;\n        ih = iw / this.aspectRatio;\n      } else if (parent.style.height) {\n        ih = parent.style.height;\n        iw = ih * this.aspectRatio;\n      } else if (!isTimeout) {\n        setTimeout(bind(this, 'enforceAspectRatio', iw, ih, true), 0);\n      }\n    }\n    this.width = iw;\n    this.height = ih;\n  };\n\n  _createClass(ViewBacking, [{\n    key: 'layout',\n    get: function get() {\n      return this._view._layoutName;\n    },\n    set: function set(layoutName) {\n      this._view._setLayout(layoutName);\n    }\n  }]);\n\n  return ViewBacking;\n}(_BaseBacking3.default);\n\nexports.default = ViewBacking;\n;\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/modules/timestep/src/ui/backend/canvas/ViewBacking.js\n// module id = 28\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/modules/timestep/src/ui/backend/canvas/ViewBacking.js?");

/***/ },
/* 29 */
/*!****************************************************************************!*\
  !*** ./modules/devkit-core/modules/timestep/src/ui/backend/BaseBacking.js ***!
  \****************************************************************************/
/***/ function(module, exports) {

	eval("'use strict';\n\nexports.__esModule = true;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * @license\n * This file is part of the Game Closure SDK.\n *\n * The Game Closure SDK is free software: you can redistribute it and/or modify\n * it under the terms of the Mozilla Public License v. 2.0 as published by Mozilla.\n\n * The Game Closure SDK is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * Mozilla Public License v. 2.0 for more details.\n\n * You should have received a copy of the Mozilla Public License v. 2.0\n * along with the Game Closure SDK.  If not, see <http://mozilla.org/MPL/2.0/>.\n */\n\nvar BaseBacking = function () {\n  function BaseBacking() {\n    _classCallCheck(this, BaseBacking);\n\n    this.x = 0;\n    this.y = 0;\n    this.offsetX = 0;\n    this.offsetY = 0;\n    this.anchorX = 0;\n    this.anchorY = 0;\n    this.centerAnchor = false;\n    this._width = 0;\n    this._height = 0;\n    this.r = 0;\n    this.opacity = 1;\n    this._zIndex = 0;\n    this.scale = 1;\n    this.scaleX = 1;\n    this.scaleY = 1;\n    this.flipX = false;\n    this.flipY = false;\n    this._visible = true;\n    this.clip = false;\n    this.backgroundColor = '';\n    this.compositeOperation = '';\n    this._inLayout = true;\n    this._aspectRatio = 1;\n    this._fixedAspectRatio = false;\n  }\n\n  // Abstract methods\n  BaseBacking.prototype._onVisible = function _onVisible() {};\n\n  BaseBacking.prototype._onResize = function _onResize() {};\n\n  BaseBacking.prototype._onZIndex = function _onZIndex() {};\n\n  BaseBacking.prototype._onInLayout = function _onInLayout() {};\n\n  BaseBacking.prototype._onLayoutChange = function _onLayoutChange() {};\n\n  BaseBacking.prototype._onFixedAspectRatio = function _onFixedAspectRatio() {};\n\n  BaseBacking.prototype.localizePoint = function localizePoint(pt) {\n    pt.x -= this.x + this.anchorX + this.offsetX;\n    pt.y -= this.y + this.anchorY + this.offsetY;\n    if (this.r) {\n      pt.rotate(-this.r);\n    }\n    pt.scale(1 / this.scale);\n    pt.x += this.anchorX;\n    pt.y += this.anchorY;\n    return pt;\n  };\n\n  BaseBacking.prototype.copy = function copy() {\n    var copy = {\n      x: this.x,\n      y: this.y,\n      offsetX: this.offsetX,\n      offsetY: this.offsetY,\n      anchorX: this.anchorX,\n      anchorY: this.anchorY,\n      centerAnchor: this.centerAnchor,\n      width: this._width,\n      height: this._height,\n      r: this.r,\n      opacity: this.opacity,\n      zIndex: this._zIndex,\n      scale: this.scale,\n      scaleX: this.scaleX,\n      scaleY: this.scaleY,\n      flipX: this.flipX,\n      flipY: this.flipY,\n      visible: this._visible,\n      clip: this.clip,\n      backgroundColor: this.backgroundColor,\n      compositeOperation: this.compositeOperation,\n      inLayout: this._inLayout,\n      fixedAspectRatio: this._fixedAspectRatio,\n      aspectRatio: this._aspectRatio\n    };\n\n    return copy;\n  };\n\n  BaseBacking.prototype.update = function update(style) {\n    for (var key in style) {\n      if (this[key] !== void 0) {\n        this[key] = style[key];\n      }\n    }\n\n    return this;\n  };\n\n  _createClass(BaseBacking, [{\n    key: 'visible',\n    get: function get() {\n      return this._visible;\n    },\n    set: function set(visible) {\n      if (this._visible === visible) {\n        return;\n      }\n      this._visible = visible;\n      this._onVisible();\n    }\n  }, {\n    key: 'width',\n    get: function get() {\n      return this._width;\n    },\n    set: function set(width) {\n      if (this._width === width) {\n        return;\n      }\n      this._width = width;\n      this._onResize();\n    }\n  }, {\n    key: 'height',\n    get: function get() {\n      return this._height;\n    },\n    set: function set(height) {\n      if (this._height === height) {\n        return;\n      }\n      this._height = height;\n      this._onResize();\n    }\n  }, {\n    key: 'zIndex',\n    get: function get() {\n      return this._zIndex;\n    },\n    set: function set(zIndex) {\n      if (this._zIndex === zIndex) {\n        return;\n      }\n      this._zIndex = zIndex;\n      this._onZIndex();\n    }\n  }, {\n    key: 'inLayout',\n    get: function get() {\n      return this._inLayout;\n    },\n    set: function set(inLayout) {\n      if (inLayout === this._inLayout) {\n        return;\n      }\n      this._inLayout = inLayout;\n      this._onInLayout();\n    }\n  }, {\n    key: 'aspectRatio',\n    get: function get() {\n      return this._aspectRatio;\n    },\n    set: function set(aspectRatio) {\n      if (aspectRatio === this._aspectRatio) {\n        return;\n      }\n      this._aspectRatio = aspectRatio;\n      this._onLayoutChange();\n    }\n  }, {\n    key: 'fixedAspectRatio',\n    get: function get() {\n      return this._fixedAspectRatio;\n    },\n    set: function set(fixedAspectRatio) {\n      if (fixedAspectRatio === this._fixedAspectRatio) {\n        return;\n      }\n      this._fixedAspectRatio = fixedAspectRatio;\n      this._onFixedAspectRatio();\n    }\n  }]);\n\n  return BaseBacking;\n}();\n\nexports.default = BaseBacking;\n;\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/modules/timestep/src/ui/backend/BaseBacking.js\n// module id = 29\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/modules/timestep/src/ui/backend/BaseBacking.js?");

/***/ },
/* 30 */
/*!**************************************************************************************!*\
  !*** ./modules/devkit-core/modules/timestep/src/platforms/browser/webgl/Matrix2D.js ***!
  \**************************************************************************************/
/***/ function(module, exports) {

	eval("\"use strict\";\n\nexports.__esModule = true;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _exports = {};\n\nvar sin = Math.sin;\nvar cos = Math.cos;\n\nvar Matrix2D = function () {\n  function Matrix2D() {\n    _classCallCheck(this, Matrix2D);\n\n    this.identity();\n  }\n\n  Matrix2D.prototype.identity = function identity() {\n    this.a = 1;\n    this.b = 0;\n    this.c = 0;\n    this.d = 1;\n    this.tx = 0;\n    this.ty = 0;\n  };\n\n  Matrix2D.prototype.clone = function clone() {\n    var result = new Matrix2D();\n    result.copy(this);\n    return result;\n  };\n\n  Matrix2D.prototype.copy = function copy(matrix) {\n    this.a = matrix.a;\n    this.b = matrix.b;\n    this.c = matrix.c;\n    this.d = matrix.d;\n    this.tx = matrix.tx;\n    this.ty = matrix.ty;\n  };\n\n  Matrix2D.prototype.scale = function scale(x, y) {\n    this.a *= x;\n    this.b *= x;\n    this.c *= y;\n    this.d *= y;\n  };\n\n  Matrix2D.prototype.rotate = function rotate(angle) {\n    var a = this.a;\n    var b = this.b;\n    var c = this.c;\n    var d = this.d;\n    var sinA = sin(angle);\n    var cosA = cos(angle);\n    this.a = a * cosA + c * sinA;\n    this.b = b * cosA + d * sinA;\n    this.c = a * -sinA + c * cosA;\n    this.d = b * -sinA + d * cosA;\n  };\n\n  Matrix2D.prototype.translate = function translate(x, y) {\n    this.tx += this.a * x + this.c * y;\n    this.ty += this.b * x + this.d * y;\n  };\n\n  Matrix2D.prototype.transform = function transform(matrix) {\n    helperMatrix.copy(this);\n\n    if (matrix.a !== 1 || matrix.b !== 0 || matrix.c !== 0 || matrix.d !== 1) {\n      this.a = helperMatrix.a * matrix.a + helperMatrix.c * matrix.b;\n      this.b = helperMatrix.b * matrix.a + helperMatrix.d * matrix.b;\n      this.c = helperMatrix.a * matrix.c + helperMatrix.c * matrix.d;\n      this.d = helperMatrix.b * matrix.c + helperMatrix.d * matrix.d;\n    }\n\n    this.tx = helperMatrix.a * matrix.tx + helperMatrix.c * matrix.ty + helperMatrix.tx;\n    this.ty = helperMatrix.b * matrix.tx + helperMatrix.d * matrix.ty + helperMatrix.ty;\n\n    return this;\n  };\n\n  Matrix2D.prototype.setTo = function setTo(a, b, c, d, tx, ty) {\n    this.a = a;\n    this.b = b;\n    this.c = c;\n    this.d = d;\n    this.tx = tx;\n    this.ty = ty;\n  };\n\n  Matrix2D.prototype.invert = function invert() {\n    var dtr = this.a * this.d - this.b * this.c;\n    if (dtr === 0) {\n      return;\n    }\n\n    dtr = 1 / dtr;\n    helperMatrix.copy(this);\n\n    this.a = helperMatrix.d * dtr;\n    this.b = -helperMatrix.b * dtr;\n    this.c = -helperMatrix.c * dtr;\n    this.d = helperMatrix.a * dtr;\n    this.tx = (helperMatrix.c * helperMatrix.ty - helperMatrix.d * helperMatrix.tx) * dtr;\n    this.ty = (helperMatrix.b * helperMatrix.tx - helperMatrix.a * helperMatrix.ty) * dtr;\n\n    return this;\n  };\n\n  Matrix2D.prototype.isEqualTo = function isEqualTo(matrix) {\n    return this.a === matrix.a && this.b === matrix.b && this.c === matrix.c && this.d === matrix.d && this.tx === matrix.tx && this.ty === matrix.ty;\n  };\n\n  Matrix2D.prototype.concat = function concat(matrix) {\n    helperMatrix.copy(this);\n\n    if (matrix.a !== 1 || matrix.b !== 0 || matrix.c !== 0 || matrix.d !== 1) {\n      this.a = helperMatrix.a * matrix.a + helperMatrix.c * matrix.b;\n      this.b = helperMatrix.b * matrix.a + helperMatrix.d * matrix.b;\n      this.c = helperMatrix.a * matrix.c + helperMatrix.c * matrix.d;\n      this.d = helperMatrix.b * matrix.c + helperMatrix.d * matrix.d;\n    }\n\n    this.tx = matrix.a * helperMatrix.tx + matrix.c * helperMatrix.ty + matrix.tx;\n    this.ty = matrix.b * helperMatrix.tx + matrix.d * helperMatrix.ty + matrix.ty;\n\n    return this;\n  };\n\n  return Matrix2D;\n}();\n\nexports.default = Matrix2D;\n\n\nvar helperMatrix = new Matrix2D();\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/modules/timestep/src/platforms/browser/webgl/Matrix2D.js\n// module id = 30\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/modules/timestep/src/platforms/browser/webgl/Matrix2D.js?");

/***/ },
/* 31 */
/*!*********************************************************************************!*\
  !*** ./modules/devkit-core/modules/timestep/src/ui/layout/LayoutViewBacking.js ***!
  \*********************************************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nexports.__esModule = true;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _base = __webpack_require__(/*! base */ 2);\n\nvar _View = __webpack_require__(/*! ../View */ 17);\n\nvar _View2 = _interopRequireDefault(_View);\n\nvar _strPad = __webpack_require__(/*! ../backend/strPad */ 27);\n\nvar _strPad2 = _interopRequireDefault(_strPad);\n\nvar _ViewBacking2 = __webpack_require__(/*! ../backend/canvas/ViewBacking */ 28);\n\nvar _ViewBacking3 = _interopRequireDefault(_ViewBacking2);\n\nvar _Padding = __webpack_require__(/*! ./Padding */ 26);\n\nvar _Padding2 = _interopRequireDefault(_Padding);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @license\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * This file is part of the Game Closure SDK.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * The Game Closure SDK is free software: you can redistribute it and/or modify\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * it under the terms of the Mozilla Public License v. 2.0 as published by Mozilla.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               \n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * The Game Closure SDK is distributed in the hope that it will be useful,\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * but WITHOUT ANY WARRANTY; without even the implied warranty of\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Mozilla Public License v. 2.0 for more details.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               \n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * You should have received a copy of the Mozilla Public License v. 2.0\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * along with the Game Closure SDK.  If not, see <http://mozilla.org/MPL/2.0/>.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\n\nvar LayoutViewBacking = function (_ViewBacking) {\n  _inherits(LayoutViewBacking, _ViewBacking);\n\n  function LayoutViewBacking(view) {\n    _classCallCheck(this, LayoutViewBacking);\n\n    var _this = _possibleConstructorReturn(this, _ViewBacking.call(this, view));\n\n    _this._order = 0;\n    _this._direction = 'vertical';\n    _this._flex = 0;\n    _this._justifyContent = 'start';\n    _this._centerX = false;\n    _this._centerY = false;\n\n    _this._top = undefined;\n    _this._right = undefined;\n    _this._bottom = undefined;\n    _this._left = undefined;\n\n    _this._minWidth = undefined;\n    _this._minHeight = undefined;\n    _this._maxWidth = undefined;\n    _this._maxHeight = undefined;\n\n    _this._layoutWidth = undefined;\n    _this._layoutHeight = undefined;\n\n    _this._padding = undefined;\n    _this._margin = null;\n\n    _this._sortOrder = _strPad2.default.initialValue;\n\n    _this._layoutWidthValue = 0;\n    _this._layoutWidthIsPercent = false;\n\n    _this._layoutHeightValue = 0;\n    _this._layoutHeightIsPercent = false;\n    return _this;\n  }\n\n  LayoutViewBacking.prototype.copy = function copy() {\n    var copy = _ViewBacking.prototype.copy.call(this);\n\n    copy.order = this._order;\n    copy.direction = this._direction;\n    copy.flex = this._flex;\n    copy.justifyContent = this._justifyContent;\n    copy.centerX = this._centerX;\n    copy.centerY = this._centerY;\n    copy.top = this._top;\n    copy.right = this._right;\n    copy.bottom = this._bottom;\n    copy.left = this._left;\n    copy.minWidth = this._minWidth;\n    copy.minHeight = this._minHeight;\n    copy.maxWidth = this._maxWidth;\n    copy.maxHeight = this._maxHeight;\n    copy.layoutWidth = this._layoutWidth;\n    copy.layoutHeight = this._layoutHeight;\n    copy.margin = this._margin;\n    copy.padding = this._padding;\n\n    copy._sortOrder = this._sortOrder.initialValue;\n\n    copy.layoutWidthValue = this._layoutWidthValue;\n    copy.layoutWidthIsPercent = this._layoutWidthIsPercent;\n\n    copy.layoutHeightValue = this._layoutHeightValue;\n    copy.layoutHeightIsPercent = this._layoutHeightIsPercent;\n\n    return copy;\n  };\n\n  LayoutViewBacking.prototype.update = function update(style) {\n    _ViewBacking.prototype.update.call(this, style);\n\n    // updating properties that are initialized as undefined\n    // they need to be checked manually\n    if (style.top !== undefined) {\n      this.top = style.top;\n    }\n    if (style.right !== undefined) {\n      this.right = style.right;\n    }\n    if (style.bottom !== undefined) {\n      this.bottom = style.bottom;\n    }\n    if (style.left !== undefined) {\n      this.left = style.left;\n    }\n\n    if (style.minWidth !== undefined) {\n      this.minWidth = style.minWidth;\n    }\n    if (style.minHeight !== undefined) {\n      this.minHeight = style.minHeight;\n    }\n    if (style.maxWidth !== undefined) {\n      this.maxWidth = style.maxWidth;\n    }\n    if (style.maxHeight !== undefined) {\n      this.maxHeight = style.maxHeight;\n    }\n\n    if (style.layoutWidth !== undefined) {\n      this.layoutWidth = style.layoutWidth;\n    }\n    if (style.layoutHeight !== undefined) {\n      this.layoutHeight = style.layoutHeight;\n    }\n\n    if (style.padding !== undefined) {\n      this.padding = style.padding;\n    }\n\n    return this;\n  };\n\n  LayoutViewBacking.prototype._onOrder = function _onOrder() {\n    this._sortOrder = _strPad2.default.pad(this._order);\n    this._onLayoutChange();\n  };\n\n  LayoutViewBacking.prototype._onMarginChange = function _onMarginChange() {\n    if (this._cachedMargin) {\n      this._cachedMargin.update(this._margin);\n    } else {\n      this._cachedMargin = new _Padding2.default(this._margin);\n    }\n\n    this.top = this._cachedMargin.top;\n    this.bottom = this._cachedMargin.bottom;\n    this.left = this._cachedMargin.left;\n    this.right = this._cachedMargin.right;\n\n    this._onLayoutChange();\n  };\n\n  LayoutViewBacking.prototype.enforceAspectRatio = function enforceAspectRatio(iw, ih, isTimeout) {\n    if (iw && ih) {\n      this.updateAspectRatio(iw, ih);\n    }\n    var parent = this._view.getSuperview();\n    var opts = this._view._opts;\n    iw = iw || opts.width;\n    ih = ih || opts.height;\n    if (opts.width) {\n      iw = opts.width;\n      ih = opts.width / this.aspectRatio;\n    } else if (opts.height) {\n      ih = opts.height;\n      iw = opts.height * this.aspectRatio;\n    } else if (parent) {\n      if (this.layoutWidth && parent.style.width) {\n        iw = parent.style.width * parseFloat(this.layoutWidth) / 100;\n        ih = iw / this.aspectRatio;\n      } else if (this.layoutHeight && parent.style.height) {\n        ih = parent.style.height * parseFloat(this.layoutHeight) / 100;\n        iw = ih * this.aspectRatio;\n      } else if (this.flex && parent.style.direction === 'horizontal' && this.width) {\n        iw = this.width;\n        ih = iw / this.aspectRatio;\n      } else if (this.flex && parent.style.direction === 'vertical' && this.height) {\n        ih = this.height;\n        iw = ih * this.aspectRatio;\n      } else if (!isTimeout) {\n        setTimeout((0, _base.bind)(this, 'enforceAspectRatio', iw, ih, true), 0);\n      }\n    }\n    this.width = iw;\n    this.height = ih;\n  };\n\n  LayoutViewBacking.prototype._onResize = function _onResize() {\n    if (this._maxWidth !== undefined) {\n      this._width = Math.min(this._maxWidth, this._width);\n    }\n    if (this._minWidth !== undefined) {\n      this._width = Math.max(this._minWidth, this._width);\n    }\n    if (this._maxHeight !== undefined) {\n      this._height = Math.min(this._maxHeight, this._height);\n    }\n    if (this._minHeight !== undefined) {\n      this._height = Math.max(this._minHeight, this._height);\n    }\n\n    _ViewBacking.prototype._onResize.call(this);\n  };\n\n  LayoutViewBacking.prototype._onLayoutWidth = function _onLayoutWidth() {\n    if (this._layoutWidth.charAt(this._layoutWidth.length - 1) === '%') {\n      this._layoutWidthValue = parseFloat(this._layoutWidth) / 100;\n      this._layoutWidthIsPercent = true;\n    } else {\n      this._layoutWidthValue = 0;\n      this._layoutWidthIsPercent = false;\n    }\n\n    this._onLayoutChange();\n  };\n\n  LayoutViewBacking.prototype._onLayoutHeight = function _onLayoutHeight() {\n    if (this._layoutHeight.charAt(this._layoutHeight.length - 1) === '%') {\n      this._layoutHeightValue = parseFloat(this._layoutHeight) / 100;\n      this._layoutHeightIsPercent = true;\n    } else {\n      this._layoutHeightValue = 0;\n      this._layoutHeightIsPercent = false;\n    }\n\n    this._onLayoutChange();\n  };\n\n  _createClass(LayoutViewBacking, [{\n    key: 'direction',\n    get: function get() {\n      return this._direction;\n    },\n    set: function set(direction) {\n      if (direction === this._direction) {\n        return;\n      }\n      this._direction = direction;\n      this._onLayoutChange();\n    }\n  }, {\n    key: 'flex',\n    get: function get() {\n      return this._flex;\n    },\n    set: function set(flex) {\n      if (flex === this._flex) {\n        return;\n      }\n      this._flex = flex;\n      this._onLayoutChange();\n    }\n  }, {\n    key: 'justifyContent',\n    get: function get() {\n      return this._justifyContent;\n    },\n    set: function set(justifyContent) {\n      if (justifyContent === this._justifyContent) {\n        return;\n      }\n      this._justifyContent = justifyContent;\n      this._onLayoutChange();\n    }\n  }, {\n    key: 'centerX',\n    get: function get() {\n      return this._centerX;\n    },\n    set: function set(centerX) {\n      if (centerX === this._centerX) {\n        return;\n      }\n      this._centerX = centerX;\n      this._onLayoutChange();\n    }\n  }, {\n    key: 'centerY',\n    get: function get() {\n      return this._centerY;\n    },\n    set: function set(centerY) {\n      if (centerY === this._centerY) {\n        return;\n      }\n      this._centerY = centerY;\n      this._onLayoutChange();\n    }\n  }, {\n    key: 'top',\n    get: function get() {\n      return this._top;\n    },\n    set: function set(top) {\n      if (top === this._top) {\n        return;\n      }\n      this._top = top;\n      this._onLayoutChange();\n    }\n  }, {\n    key: 'right',\n    get: function get() {\n      return this._right;\n    },\n    set: function set(right) {\n      if (right === this._right) {\n        return;\n      }\n      this._right = right;\n      this._onLayoutChange();\n    }\n  }, {\n    key: 'bottom',\n    get: function get() {\n      return this._bottom;\n    },\n    set: function set(bottom) {\n      if (bottom === this._bottom) {\n        return;\n      }\n      this._bottom = bottom;\n      this._onLayoutChange();\n    }\n  }, {\n    key: 'left',\n    get: function get() {\n      return this._left;\n    },\n    set: function set(left) {\n      if (left === this._left) {\n        return;\n      }\n      this._left = left;\n      this._onLayoutChange();\n    }\n  }, {\n    key: 'minWidth',\n    get: function get() {\n      return this._minWidth;\n    },\n    set: function set(minWidth) {\n      if (minWidth === this._minWidth) {\n        return;\n      }\n      this._minWidth = minWidth;\n      this._onLayoutChange();\n    }\n  }, {\n    key: 'minHeight',\n    get: function get() {\n      return this._minHeight;\n    },\n    set: function set(minHeight) {\n      if (minHeight === this._minHeight) {\n        return;\n      }\n      this._minHeight = minHeight;\n      this._onLayoutChange();\n    }\n  }, {\n    key: 'maxWidth',\n    get: function get() {\n      return this._maxWidth;\n    },\n    set: function set(maxWidth) {\n      if (maxWidth === this._maxWidth) {\n        return;\n      }\n      this._maxWidth = maxWidth;\n      this._onLayoutChange();\n    }\n  }, {\n    key: 'maxHeight',\n    get: function get() {\n      return this._maxHeight;\n    },\n    set: function set(maxHeight) {\n      if (maxHeight === this._maxHeight) {\n        return;\n      }\n      this._maxHeight = maxHeight;\n      this._onLayoutChange();\n    }\n  }, {\n    key: 'layoutWidth',\n    get: function get() {\n      return this._layoutWidth;\n    },\n    set: function set(layoutWidth) {\n      if (layoutWidth === this._layoutWidth) {\n        return;\n      }\n      this._layoutWidth = layoutWidth;\n      this._onLayoutWidth();\n    }\n  }, {\n    key: 'layoutHeight',\n    get: function get() {\n      return this._layoutHeight;\n    },\n    set: function set(layoutHeight) {\n      if (layoutHeight === this._layoutHeight) {\n        return;\n      }\n      this._layoutHeight = layoutHeight;\n      this._onLayoutHeight();\n    }\n  }, {\n    key: 'margin',\n    get: function get() {\n      return this._margin;\n    },\n    set: function set(margin) {\n      if (margin === this._margin) {\n        return;\n      }\n      this._margin = margin;\n      this._onMarginChange();\n    }\n  }, {\n    key: 'padding',\n    get: function get() {\n      return this._padding || (this._padding = new _Padding2.default());\n    },\n    set: function set(padding) {\n      if (this._padding) {\n        this._padding.update(padding);\n      } else {\n        this._padding = new _Padding2.default(padding);\n      }\n\n      this._onLayoutChange();\n    }\n  }]);\n\n  return LayoutViewBacking;\n}(_ViewBacking3.default);\n\nexports.default = LayoutViewBacking;\n;\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/modules/timestep/src/ui/layout/LayoutViewBacking.js\n// module id = 31\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/modules/timestep/src/ui/layout/LayoutViewBacking.js?");

/***/ },
/* 32 */
/*!******************************************************************************!*\
  !*** ./modules/devkit-core/modules/timestep/src/ui/backend/ReflowManager.js ***!
  \******************************************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nexports.__esModule = true;\n\nvar _base = __webpack_require__(/*! base */ 2);\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _exports = {};\n\n/**\n * @license\n * This file is part of the Game Closure SDK.\n *\n * The Game Closure SDK is free software: you can redistribute it and/or modify\n * it under the terms of the Mozilla Public License v. 2.0 as published by Mozilla.\n\n * The Game Closure SDK is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * Mozilla Public License v. 2.0 for more details.\n\n * You should have received a copy of the Mozilla Public License v. 2.0\n * along with the Game Closure SDK.  If not, see <http://mozilla.org/MPL/2.0/>.\n */\nvar DEBUG_REFLOW = false;\nvar DEBUG_TIME = false;\nif (DEBUG_REFLOW || DEBUG_TIME) {\n  var _debug = {\n    space: '',\n    stepIn: function stepIn() {\n      this.space += ' ';\n      return true;\n    },\n    stepOut: function stepOut() {\n      this.space = this.space.slice(0, this.space.length - 1);\n      return true;\n    },\n    log: function log() {\n      _base.logger.log.apply(_base.logger, [this.space].concat(Array.prototype.slice.call(arguments, 0)));\n      return true;\n    }\n  };\n  _base.logger.log('===== CREATING REFLOW MANAGER');\n}\n\n// max reflows for any view in a given tick\nvar MAX_REFLOW_THRESHOLD = 20;\n\nvar Pool = function () {\n  function Pool() {\n    _classCallCheck(this, Pool);\n  }\n\n  Pool.prototype.recycle = function recycle(item) {\n    item.view = null;\n    this._pool.push(item);\n  };\n\n  Pool.prototype.get = function get(view) {\n    var item = this._pool.pop() || {};\n    item.view = view;\n    item.count = 0;\n    item.needsReflow = false;\n    return item;\n  };\n\n  return Pool;\n}();\n\nPool.prototype._pool = [];\nvar _pool = new Pool();\n\n/**\n * The ReflowManager is the controller for view layout.  It hooks into\n * the render cycle in two places:\n *  1. at the start of a render to reflow any views that we know\n *     need layout.  This is signalled by calling calls to needsReflow\n *     on a view between render cycles that result in a call to\n *     `ReflowMgr.add`.\n *  2. during render, if the view hasn't ever been rendered, the\n *     ReflowManager is notified to initiate the buildView call\n *     and handle any reflow logic before the view's first render.\n * The ReflowManager uses a queue-like structure to resolve the reflow\n * constraints. Views notify the ReflowManager through the add(view)\n * method, which then adds the view to the queue.  During a reflow cycle,\n * the ReflowManager tracks how many iterations through the queue each\n * view actually gets reflowed.  If the number of reflows exceeds the\n * MAX_REFLOW_THRESHOLD, reflow stops for that view, preventing infinite\n * loops when reflow cycles occur.\n */\n_exports = function () {\n  function exports() {\n    _classCallCheck(this, exports);\n\n    this._pending = {};\n    this._iter = 0;\n    this._pendingCount = 0;\n  }\n\n  exports.prototype.add = function add(view) {\n    if (view.reflow === view.DEFAULT_REFLOW && !view._layout) {\n      return;\n    }\n\n    var uid = view.uid;\n    var item = this._pending[uid] || (this._pending[uid] = _pool.get(view));\n\n    if (!item.needsReflow) {\n      ++this._pendingCount;\n      item.needsReflow = true;\n\n      DEBUG_REFLOW && _debug.log('adding ' + view + ' (' + view.uid + ')' + (' ' + view._layoutName || '') + ':', (view.style.width === undefined ? '?' : view.style.width) + 'x' + (view.style.height === undefined ? '?' : view.style.height));\n    }\n\n    // increment count once per reflow iteration\n    if (item.iter != this._iter) {\n      item.iter = this._iter;\n    }\n  };\n\n  exports.prototype.reflow = function reflow(view) {\n    if (view.style.__cachedWidth === null) {\n      view.style.__cachedWidth = view.style.width;\n    }\n\n    if (view.style.__cachedHeight === null) {\n      view.style.__cachedHeight = view.style.height;\n    }\n\n    var item = this._pending[view.uid];\n    if (item && item.needsReflow) {\n      item.needsReflow = false;\n      --this._pendingCount;\n    }\n\n    if (view._layout) {\n      view._layout.reflow();\n    }\n\n    view.reflow();\n\n    // always reflow children if a layout changes sizes\n    if (view._layout) {\n      var style = view.style;\n      if (style.__cachedWidth !== style.width || style.__cachedHeight !== style.height) {\n        var subviews = view.getSubviews();\n        for (var i = 0, n = subviews.length; i < n; ++i) {\n          this.add(subviews[i]);\n        }\n      }\n    }\n  };\n\n  exports.prototype.reflowViews = function reflowViews(_ctx) {\n    if (!this._pendingCount) {\n      return;\n    }\n\n    this._iter = 0;\n\n    var count;\n    var uid;\n\n    DEBUG_REFLOW && _debug.stepIn();\n    if (DEBUG_TIME) {\n      var startTime = Date.now();\n    }\n\n    // outer loop manages batched resize events\n    // inner loop manages recursive reflow\n    while (this._pendingCount) {\n      // as long as we reflowed some views, keep looping\n      while (this._pendingCount) {\n        ++this._iter;\n\n        // what iteration are we on? only increment a view's count once per iteration\n        count = 0;\n        for (uid in this._pending) {\n          DEBUG_REFLOW && count == 0 && this._iter == 1 && console.log(' == beginning reflow == ');\n\n          var item = this._pending[uid];\n          if (item.count > MAX_REFLOW_THRESHOLD) {\n            _base.logger.warn('reflow loop detected for view', item.view.uid);\n            this.cleanUp();\n            break;\n          }\n\n          if (item.needsReflow) {\n            ++item.count;\n            DEBUG_REFLOW && _debug.log('-- reflow view', item.view.uid, '(' + item.count + ' times)') && _debug.stepIn();\n            this.reflow(item.view);\n            DEBUG_REFLOW && _debug.stepOut();\n            ++count;\n          }\n        }\n\n        DEBUG_REFLOW && count && _debug.log('***** iteration', this._iter, 'reflowed', count, 'views');\n      }\n\n      for (uid in this._pending) {\n        var view = this._pending[uid].view;\n        if (view.hasListeners('resize')) {\n          var style = view.style;\n          var w = style.width;\n          var h = style.height;\n          if (style.__cachedWidth != w || style.__cachedHeight != h) {\n            DEBUG_REFLOW && _debug.log('view', view.uid, 'resize event firing', w + 'x' + h, '(prev: ' + style.__cachedWidth + 'x' + style.__cachedHeight + ')');\n            style.__cachedWidth = w;\n            style.__cachedHeight = h;\n            view.emit('resize');\n          }\n        }\n      }\n    }\n\n    this.cleanUp();\n\n    if (DEBUG_REFLOW) {\n      _debug.stepOut();\n    }\n\n    if (DEBUG_TIME && this._iter) {\n      var now = Date.now();\n      _debug.log('total reflow time:', now - startTime);\n    }\n  };\n\n  exports.prototype.cleanUp = function cleanUp() {\n    // recyle items\n    for (var uid in this._pending) {\n      _pool.recycle(this._pending[uid]);\n      delete this._pending[uid];\n    }\n\n    this._pendingCount = 0;\n  };\n\n  return exports;\n}();\nvar ReflowManager = _exports;\n\nvar _instance = null;\n_exports.get = function () {\n  return _instance || (_instance = new ReflowManager());\n};\n\nexports.default = _exports;\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/modules/timestep/src/ui/backend/ReflowManager.js\n// module id = 32\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/modules/timestep/src/ui/backend/ReflowManager.js?");

/***/ },
/* 33 */
/*!**************************************************************************!*\
  !*** ./modules/devkit-core/modules/timestep/src/event/input/dispatch.js ***!
  \**************************************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nexports.__esModule = true;\n\nvar _Point = __webpack_require__(/*! math/geom/Point */ 19);\n\nvar _Point2 = _interopRequireDefault(_Point);\n\nvar _Enum = __webpack_require__(/*! lib/Enum */ 21);\n\nvar _Enum2 = _interopRequireDefault(_Enum);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar _exports = {};\n\n/**\n * @license\n * This file is part of the Game Closure SDK.\n *\n * The Game Closure SDK is free software: you can redistribute it and/or modify\n * it under the terms of the Mozilla Public License v. 2.0 as published by Mozilla.\n\n * The Game Closure SDK is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * Mozilla Public License v. 2.0 for more details.\n\n * You should have received a copy of the Mozilla Public License v. 2.0\n * along with the Game Closure SDK.  If not, see <http://mozilla.org/MPL/2.0/>.\n */\n/**\n * @module event.input.dispatch;\n * This namespace includes functions to dispatch touch events starting from the\n * root application view, which are traced through the hierarchy to each view's\n * individual InputHandler proxy. Additionally, this namespace includes those\n * functions actually in timestep.input, like InputListener and KeyListener classes.\n */\n\n\n_exports.eventTypes = new _Enum2.default('START', 'MOVE', 'SELECT', 'SCROLL', 'CLEAR');\n_exports.VERTICAL_AXIS = 2;\n_exports.HORIZONTAL_AXIS = 1;\n\n/**\n * capture/bubble event, starting from root Application view\n *  - publish <inputTypeCapture> on the way down (e.g. onInputStartCapture)\n *  - call callbacks (e.g. onInputStart) and publish <inputType> (e.g. onInputstart)\n *    on the way up, checking evt.cancelled to see if someone has cancelled the event\n */\n_exports.dispatchEvent = function (root, evt) {\n  // if (evt.type == input.eventTypes.MOVE) { var now = +new Date(); }\n  // store the root in case an event listener wants the top-most view?\n  evt.root = root;\n\n  // SHOULD_HANDLE = LOCALIZE = 0;\n  // grab the bottom-most view whose bounding box contains the evt.srcPt\n  // also updates the evt object with a trace of localized points and views\n  _exports.traceEvt(root, evt, evt.srcPt);\n\n  // if (now) { logger.log('TRACED A', LOCALIZE, SHOULD_HANDLE) }\n  // once we've traced the event, we know how deep it goes\n  var depth = evt.depth;\n\n  _exports._evtHistory[evt.type] = evt;\n\n  var signal = _exports._evtCb[evt.type] || _exports.getEvtCbName(evt.type);\n\n  for (var i = depth - 1; i >= 0; --i) {\n    var view = evt.trace[i],\n        pt = evt.pt[view.uid];\n    view.publish(signal + 'Capture', evt, pt, i == 0);\n    if (evt.cancelled || view.__input.blockEvents) {\n      return;\n    }\n  }\n\n  var cbName = 'on' + signal;\n  for (var i = 0; i < depth; ++i) {\n    var view = evt.trace[i];\n    if (view.__input.canHandleEvents) {\n      var pt = evt.pt[view.uid];\n      if (view[cbName]) {\n        view[cbName](evt, pt, i == 0);\n      }\n      view.publish(signal, evt, pt, i == 0);\n      view._onEventPropagate(evt, pt, i == 0);\n      if (evt.cancelled) {\n        break;\n      }\n    }\n  }\n};\n\n/**\n * Trace an event recursively down to the view on which the event is triggered.\n */\n_exports.traceEvt = function (view, evt, pt) {\n  // var now = +new Date();\n  var localPt = view.style.localizePoint(new _Point2.default(pt));\n  var inputHandler = view.getInput();\n  if (!inputHandler.containsEvent(evt, localPt)) {\n    return false;\n  }\n\n  var canHandleEvents = view.getInput().canHandleEvents;\n  if (canHandleEvents) {\n    evt.depth++;\n    evt.trace.unshift(view);\n    evt.pt[view.uid] = localPt;\n  }\n\n  var subviews = view.getSubviews();\n  for (var i = subviews.length - 1; i >= 0; --i) {\n    if (subviews[i].style.visible && _exports.traceEvt(subviews[i], evt, localPt)) {\n      return true;\n    }\n  }\n\n  if (canHandleEvents) {\n    evt.target = view;\n    return true;\n  }\n};\n\n_exports._evtHistory = {};\n_exports._activeInputOver = {};\n\n_exports.clearOverState = function (id) {\n  if (id) {\n    var evt = _exports._activeInputOver[id];\n    if (evt) {\n      delete _exports._activeInputOver[id];\n      var trace = evt.trace;\n      if (trace) {\n        for (var i = 0, view; view = trace[i]; ++i) {\n          view.__input.onLeave(id);\n        }\n      }\n    }\n  } else {\n    for (var id in _exports._activeInputOver) {\n      _exports.clearOverState(id);\n    }\n  }\n};\n\n_exports._isDragging = false;\n_exports.isDragging = function () {\n  return _exports._isDragging;\n};\n\n_exports._evtCb = {};\n_exports.getEvtCbName = function (evtType) {\n  var name = _exports.eventTypes[evtType];\n  return _exports._evtCb[evtType] = 'Input' + name.charAt(0) + name.substring(1).toLowerCase();\n};\n\nexports.default = _exports;\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/modules/timestep/src/event/input/dispatch.js\n// module id = 33\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/modules/timestep/src/event/input/dispatch.js?");

/***/ },
/* 34 */
/*!******************************************************************************!*\
  !*** ./modules/devkit-core/modules/timestep/src/event/input/InputHandler.js ***!
  \******************************************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nexports.__esModule = true;\n\nvar _Point = __webpack_require__(/*! math/geom/Point */ 19);\n\nvar _Point2 = _interopRequireDefault(_Point);\n\nvar _dispatch = __webpack_require__(/*! event/input/dispatch */ 33);\n\nvar _dispatch2 = _interopRequireDefault(_dispatch);\n\nvar _InputEvent = __webpack_require__(/*! event/input/InputEvent */ 35);\n\nvar _InputEvent2 = _interopRequireDefault(_InputEvent);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _exports = {};\n\n/**\n * @license\n * This file is part of the Game Closure SDK.\n *\n * The Game Closure SDK is free software: you can redistribute it and/or modify\n * it under the terms of the Mozilla Public License v. 2.0 as published by Mozilla.\n\n * The Game Closure SDK is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * Mozilla Public License v. 2.0 for more details.\n\n * You should have received a copy of the Mozilla Public License v. 2.0\n * along with the Game Closure SDK.  If not, see <http://mozilla.org/MPL/2.0/>.\n */\n/**\n * @class event.input.InputHandler;\n * An event handler proxy for an individual view. This handles dispatching\n * of events onto the actual view itself, as well as determining if the view\n * is the actual target of a propagated event.\n */\n\n\n_exports = function () {\n  function exports(view, opts) {\n    _classCallCheck(this, exports);\n\n    this.view = view;\n    this.view.subscribe('InputStart', this, 'onInputStart');\n    this.update(opts);\n  }\n\n  exports.prototype.update = function update(opts) {\n    if ('canHandleEvents' in opts) {\n      this.canHandleEvents = opts.canHandleEvents;\n    }\n\n    if ('blockEvents' in opts) {\n      this.blockEvents = opts.blockEvents;\n    }\n  };\n\n  exports.prototype.containsEvent = function containsEvent(evt, localPt) {\n    // block events must be false\n    return !this.blockEvents && (!this.view._superview || // top-view captures all events\n    this.view.containsLocalPoint(localPt));\n  };\n\n  exports.prototype.onEnter = function onEnter(id, atTarget) {\n    var view = this.view;\n    var over = this._over || (this._over = {});\n    if (id in over) {\n      return;\n    }\n\n    over[id] = true;\n    this.overCount++;\n\n    if (view.onInputOver) {\n      view.onInputOver(over, this.overCount, atTarget);\n    }\n    view.publish('InputOver', over, this.overCount, atTarget);\n  };\n\n  exports.prototype.onLeave = function onLeave(id, atTarget) {\n    var view = this.view;\n    var over = this._over || (this._over = {});\n    if (!(id in over)) {\n      return;\n    }\n\n    delete over[id];\n    --this.overCount;\n\n    if (view.onInputOut) {\n      view.onInputOut(over, this.overCount, atTarget);\n    }\n    view.publish('InputOut', over, this.overCount, atTarget);\n  };\n\n  exports.prototype.resetOver = function resetOver() {\n    delete this._over;\n    this.overCount = 0;\n  };\n\n  exports.prototype.startDrag = function startDrag(opts) {\n    opts = opts || {};\n    var view = this.view;\n    var inputStartEvt = opts.inputStartEvt || opts.inputStartEvent || _dispatch2.default._evtHistory[_dispatch2.default.eventTypes.START];\n    var id = inputStartEvt.id;\n\n    // dedup drags from same input ID\n    var dragging = this._isDragging || (this._isDragging = {});\n    if (dragging[id]) {\n      return;\n    }\n    dragging[id] = true;\n\n    ++this.dragCount;\n    ++this.startCount;\n\n    var root = inputStartEvt.root;\n    var dragEvt = new _InputEvent2.default(inputStartEvt.id, 'input:drag', inputStartEvt.srcPt.x, inputStartEvt.srcPt.y, root, view);\n\n    dragEvt.didDrag = false;\n    dragEvt.radius = opts.radius * opts.radius || 0;\n\n    root.subscribe('InputMoveCapture', this, 'onDragStart', dragEvt);\n    root.subscribe('InputSelectCapture', this, 'onDragStop', dragEvt);\n  };\n\n  exports.prototype.isDragging = function isDragging() {\n    return this.dragCount && _dispatch2.default._isDragging;\n  };\n\n  exports.prototype.onDragStart = function onDragStart(dragEvt, moveEvt) {\n    // have we exceeded the move radius?\n    var dx = moveEvt.srcPt.x - dragEvt.srcPt.x;\n    var dy = moveEvt.srcPt.y - dragEvt.srcPt.y;\n    if (dx * dx + dy * dy <= dragEvt.radius) {\n      return;\n    }\n\n    if (dragEvt.didDrag) {\n      return;\n    }\n    dragEvt.didDrag = true;\n    --this.startCount;\n\n    var view = this.view;\n\n    // no longer need to listen for move events for onDragStart\n    if (this.startCount == 0) {\n      dragEvt.root.unsubscribe('InputMoveCapture', this, 'onDragStart');\n    }\n\n    // want to fire onDragStart with the current point equal to the initial point\n    // even though the user has moved away by now\n    dragEvt.currPt = dragEvt.srcPt;\n    dragEvt.localPt = view.localizePoint(new _Point2.default(dragEvt.currPt));\n\n    if (view.onDragStart) {\n      view.onDragStart(dragEvt);\n    }\n    view.publish('DragStart', dragEvt);\n\n    // future move events should be captured by _onDrag\n    // we should also call _onDrag now to handle the current move event delta\n    dragEvt.root.subscribe('InputMoveCapture', this, 'onDrag', dragEvt);\n    this.onDrag(dragEvt, moveEvt);\n  };\n\n  exports.prototype.onDrag = function onDrag(dragEvt, moveEvt) {\n    if (dragEvt.id != moveEvt.id || moveEvt.srcPt.x == dragEvt.currPt.x && moveEvt.srcPt.y == dragEvt.currPt.y) {\n      return;\n    }\n\n    var view = this.view;\n\n    dragEvt.prevPt = dragEvt.currPt;\n    dragEvt.currPt = moveEvt.srcPt;\n\n    dragEvt.prevLocalPt = dragEvt.localPt;\n    dragEvt.localPt = view.localizePoint(new _Point2.default(dragEvt.currPt));\n\n    var delta = _Point2.default.subtract(dragEvt.localPt, dragEvt.prevLocalPt);\n\n    _dispatch2.default._isDragging = true;\n\n    if (view.onDrag) {\n      view.onDrag(dragEvt, moveEvt, delta);\n    }\n    view.publish('Drag', dragEvt, moveEvt, delta);\n  };\n\n  exports.prototype.onDragStop = function onDragStop(dragEvt, selectEvt) {\n    var id = dragEvt.id;\n    var dragging = this._isDragging || (this._isDragging = {});\n    if (!dragging[id] || dragEvt.id != selectEvt.id) {\n      return;\n    }\n\n    delete dragging[id];\n    --this.dragCount;\n\n    if (!this.dragCount) {\n      dragEvt.root.unsubscribe('InputMoveCapture', this, 'onDragStart');\n      dragEvt.root.unsubscribe('InputMoveCapture', this, 'onDrag');\n      dragEvt.root.unsubscribe('InputSelectCapture', this, 'onDragStop');\n      _dispatch2.default._isDragging = false;\n    }\n\n    if (dragEvt.didDrag) {\n      var view = this.view;\n\n      // a subscription can later 'uncancel' the selectEvt by setting 'selectEvt.cancelled = false;'\n      selectEvt.cancel();\n\n      if (view.onDragStop) {\n        view.onDragStop(dragEvt, selectEvt);\n      }\n      view.publish('DragStop', dragEvt, selectEvt);\n    }\n  };\n\n  exports.prototype.onInputStart = function onInputStart(evt) {\n    if (this.view.listeners('InputActivate').length === 0) {\n      return;\n    }\n    this._isDown = true;\n    this.view.subscribe('InputSelect', this, 'onInputSelect');\n    evt.root.subscribeOnce('InputSelect', this, 'onGlobalInputSelect');\n  };\n\n  exports.prototype.onInputSelect = function onInputSelect(evt, localPt) {\n    if (this._isDown) {\n      this.view.publish('InputActivate', evt, localPt);\n    }\n    this._isDown = false;\n    this.view.unsubscribe('InputSelect', this, 'onInputSelect');\n  };\n\n  exports.prototype.onGlobalInputSelect = function onGlobalInputSelect(evt) {\n    if (this._isDown) {\n      this.view.unsubscribe('InputSelect', this, 'onInputSelect');\n    }\n    this._isDown = false;\n  };\n\n  return exports;\n}();\n_exports.prototype.startCount = 0;\n_exports.prototype.dragCount = 0;\n_exports.prototype.overCount = 0;\n_exports.prototype.canHandleEvents = true;\n_exports.prototype.blockEvents = false;\nvar InputHandler = _exports;\n\nexports.default = _exports;\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/modules/timestep/src/event/input/InputHandler.js\n// module id = 34\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/modules/timestep/src/event/input/InputHandler.js?");

/***/ },
/* 35 */
/*!****************************************************************************!*\
  !*** ./modules/devkit-core/modules/timestep/src/event/input/InputEvent.js ***!
  \****************************************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nexports.__esModule = true;\n\nvar _Point = __webpack_require__(/*! math/geom/Point */ 19);\n\nvar _Point2 = _interopRequireDefault(_Point);\n\nvar _timer = __webpack_require__(/*! timer */ 36);\n\nvar _timer2 = _interopRequireDefault(_timer);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _exports = {};\n\n/**\n * @license\n * This file is part of the Game Closure SDK.\n *\n * The Game Closure SDK is free software: you can redistribute it and/or modify\n * it under the terms of the Mozilla Public License v. 2.0 as published by Mozilla.\n\n * The Game Closure SDK is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * Mozilla Public License v. 2.0 for more details.\n\n * You should have received a copy of the Mozilla Public License v. 2.0\n * along with the Game Closure SDK.  If not, see <http://mozilla.org/MPL/2.0/>.\n */\n/**\n * @class event.input.InputEvent;\n * This class represents an input event.\n *\n * It assumes a tree structure of View objects.  The top (root) of the\n * tree is typically the main Application view.\n *\n * Events are assigned a root and a target.  View::dispatchEvent\n * computes the root and target from the event location (x, y).\n *\n * Propogation has two phases: capturing and bubbling.  Users\n * can mostly ignore capturing as the primary hooks are in the\n * bubbling.  Bubbling is defined as calling event handlers on\n * each view starting with 'target' and then continuing up\n * superview pointers until reaching 'root'.  Views can listen\n * to the event bubbling by adding methods such as:\n * \"input:start\" -> \"function onInputStart(evt)\"\n * \"input:drag\" -> \"function onDrag(dragEvt, moveEvt, delta)\"\n *\n * Other code can hook into a view's events by calling:\n *   myView.subscribe('input:start', function () { alert('Mouse Down'); });\n *   myView.subscribe('input:end', this, 'onChildViewClick');\n *\n * Propogation of events can be cancelled by calling evt.cancel().\n *\n * Note that onDrag is a special event that receives not only\n * a move event from an 'input:move' event, but also a custom\n * dragEvt object that contains extra data such as the start\n * position of the drag.\n *\n * @doc http://doc.gameclosure.com/api/event.html#class-event.input.inputevent\n * @docsrc https://github.com/gameclosure/doc/blob/master/api/event.md\n */\n\n\n_exports = function () {\n  function exports(id, evtType, x, y, root, target) {\n    _classCallCheck(this, exports);\n\n    // unique ID for a particular input - the ID should be constant for a given input\n    // for example, the mouse should always have the same ID.  Each finger (touch)\n    // should have the same ID throughout the touch start/move/end process\n    this.id = id;\n\n    // string evtType, e.g. 'input:start'\n    this.type = evtType;\n\n    // localized point coordinates, indexed by a view's uid (View::uid)\n    // @internal --at least for now, concerns over performance.\n    this.point = this.pt = {};\n\n    // raw (x, y) coordinates\n    this.srcPoint = this.srcPt = new _Point2.default(x, y);\n\n    // list of View nodes from target to root\n    this.trace = [];\n\n    // Top-most view where event is dispatched (e.g. the tree root)\n    this.root = root || null;\n\n    // time of dispatch\n    this.when = _timer2.default.now;\n\n    // Bottom-most view where the event occurred\n    this.target = target || null;\n  }\n\n  exports.prototype.cancel = function cancel() {\n    this.cancelled = true;\n  };\n\n  exports.prototype.clone = function clone() {\n    return new InputEvent(this.id, this.type, this.srcPt.x, this.srcPt.y, this.root, this.target);\n  };\n\n  return exports;\n}();\n_exports.prototype.cancelled = false;\n_exports.prototype.depth = 0;\nvar InputEvent = _exports;\n\nexports.default = _exports;\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/modules/timestep/src/event/input/InputEvent.js\n// module id = 35\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/modules/timestep/src/event/input/InputEvent.js?");

/***/ },
/* 36 */
/*!***********************************************************!*\
  !*** ./modules/devkit-core/modules/timestep/src/timer.js ***!
  \***********************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nexports.__esModule = true;\n\nvar _base = __webpack_require__(/*! base */ 2);\n\nvar _platformImport = __webpack_require__(/*! platformImport */ 12);\n\nvar _exports = {};\n\n/**\n * @license\n * This file is part of the Game Closure SDK.\n *\n * The Game Closure SDK is free software: you can redistribute it and/or modify\n * it under the terms of the Mozilla Public License v. 2.0 as published by Mozilla.\n\n * The Game Closure SDK is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * Mozilla Public License v. 2.0 for more details.\n\n * You should have received a copy of the Mozilla Public License v. 2.0\n * along with the Game Closure SDK.  If not, see <http://mozilla.org/MPL/2.0/>.\n */\n/**\n * @module timer\n *\n * Implements an independent, singleton timer for use by the environment.\n * The Application Engine binds to this to generate the rendering tick.\n */\n\n\nvar Timer = (0, _platformImport.getImport)('Timer');\n\n// ticks over 10 seconds will be considered too large to process\n_exports.now = 0;\n_exports.frames = 0;\n_exports.reset = function () {\n  this._last = null;\n};\n\nvar MAX_TICK = _base.CONFIG.maxTick;\n\n_exports.tick = function (dt) {\n  if (dt > MAX_TICK) {\n    dt = MAX_TICK;\n  }\n\n  _exports.now += dt;\n  _exports.frames++;\n  _exports.onTick(dt);\n};\n\n/**\n * If our computer falls asleep, dt might be an insanely large number.\n * If we're running a simulation of sorts, we don't want the computer\n * to freeze while computing 1000s of simulation steps, so just drop\n * this tick.  Anyone who is interested can listen for a call to 'onLargeTick'\n */\n_exports.onLargeTick = function (largeDt, threshold) {\n  _base.logger.warn('Dropping large tick: ' + largeDt + '; Threshold is set at: ' + threshold);\n};\n\n_exports.onTick = function (dt) {};\n\n_exports.debug = false;\n\n// TODO: <jsio>('from iOS import start as exports.start, stop as exports.stop');\n_exports.start = function (minDt) {\n  this.reset();\n  this.isRunning = true;\n  (0, _platformImport.getImport)('Timer').start(_exports.tick, minDt);\n};\n\n_exports.stop = function () {\n  this.reset();\n  this.isRunning = false;\n  (0, _platformImport.getImport)('Timer').stop();\n};\n\n_exports.getTickProgress = function () {\n  var now = +new Date();\n  return -(Timer.last || now) + now;\n};\n\nexports.default = _exports;\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/modules/timestep/src/timer.js\n// module id = 36\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/modules/timestep/src/timer.js?");

/***/ },
/* 37 */
/*!*************************************************************!*\
  !*** ./modules/devkit-core/modules/timestep/src/animate.js ***!
  \*************************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nexports.__esModule = true;\n\nvar _animate = __webpack_require__(/*! ui/backend/canvas/animate */ 38);\n\nvar _animate2 = _interopRequireDefault(_animate);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar _exports = {};\n\n/**\n * @license\n * This file is part of the Game Closure SDK.\n *\n * The Game Closure SDK is free software: you can redistribute it and/or modify\n * it under the terms of the Mozilla Public License v. 2.0 as published by Mozilla.\n\n * The Game Closure SDK is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * Mozilla Public License v. 2.0 for more details.\n\n * You should have received a copy of the Mozilla Public License v. 2.0\n * along with the Game Closure SDK.  If not, see <http://mozilla.org/MPL/2.0/>.\n */\n/**\n * @module animate\n * Import the DOM/Canvas implementation of animate. Also define the transition function aliases.\n *\n * @doc http://doc.gameclosure.com/api/animate.html\n * @docsrc https://github.com/gameclosure/doc/blob/master/api/animate.md\n */\n\n_exports = _animate2.default;\n\nexports.default = _exports;\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/modules/timestep/src/animate.js\n// module id = 37\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/modules/timestep/src/animate.js?");

/***/ },
/* 38 */
/*!*******************************************************************************!*\
  !*** ./modules/devkit-core/modules/timestep/src/ui/backend/canvas/animate.js ***!
  \*******************************************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nexports.__esModule = true;\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _base = __webpack_require__(/*! base */ 2);\n\nvar _Emitter4 = __webpack_require__(/*! event/Emitter */ 9);\n\nvar _Emitter5 = _interopRequireDefault(_Emitter4);\n\nvar _transitions = __webpack_require__(/*! animate/transitions */ 39);\n\nvar _transitions2 = _interopRequireDefault(_transitions);\n\nvar _timer = __webpack_require__(/*! timer */ 36);\n\nvar _timer2 = _interopRequireDefault(_timer);\n\nvar _ObjectPool = __webpack_require__(/*! ObjectPool */ 40);\n\nvar _ObjectPool2 = _interopRequireDefault(_ObjectPool);\n\nvar _device = __webpack_require__(/*! device */ 1);\n\nvar _device2 = _interopRequireDefault(_device);\n\nvar _engineInstance = __webpack_require__(/*! ui/engineInstance */ 41);\n\nvar _engineInstance2 = _interopRequireDefault(_engineInstance);\n\nvar _IView = __webpack_require__(/*! ui/IView */ 18);\n\nvar _IView2 = _interopRequireDefault(_IView);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _exports = {};\n\n/**\n * @license\n * This file is part of the Game Closure SDK.\n *\n * The Game Closure SDK is free software: you can redistribute it and/or modify\n * it under the terms of the Mozilla Public License v. 2.0 as published by Mozilla.\n\n * The Game Closure SDK is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * Mozilla Public License v. 2.0 for more details.\n\n * You should have received a copy of the Mozilla Public License v. 2.0\n * along with the Game Closure SDK.  If not, see <http://mozilla.org/MPL/2.0/>.\n */\n/**\n * package ui.backend.canvas.animate;\n *\n * Canvas animate namespace and functions.\n *\n * Internal Class Note:\n *   Animators are kept on subjects, and only get GC'd if subject does\n *   Frames are pooled and recycled internally\n */\n\n\nvar engine = null;\nvar groups = {};\nvar DEFAULT_GROUP_ID = '__default_group';\n\n_exports = function exports(subject, groupID) {\n  // TODO: we have a circular import, so do the Engine import on first use\n  if (!engine) {\n    engine = _engineInstance2.default.get();\n  }\n\n  if (_device2.default.useDOM && subject instanceof _IView2.default && !groupID) {\n    return subject.getAnimation();\n  }\n\n  // create a group for this groupID if it doesn't exist\n  groupID = groupID || DEFAULT_GROUP_ID;\n  !groups[groupID] && (groups[groupID] = new Group(groupID));\n\n  // animators created once and cached on subject '__anims' object by groupID\n  // so they're only garbage collected when the subject is garbage collected\n  var anims = subject.__anims || (subject.__anims = {});\n  var anim = anims[groupID];\n  if (!anim) {\n    anim = subject instanceof _IView2.default ? new ViewAnimator(subject) : new Animator(subject);\n    anim.groupID = groupID;\n    anims[groupID] = anim;\n  }\n\n  return anim;\n};\n\n// get all animations on a given subject\n_exports.getSubjectAnimations = function (subject) {\n  var anims = subject.__anims || {};\n  var animsArray = [];\n  for (var id in anims) {\n    animsArray.push(anims[id]);\n  }\n  return animsArray;\n};\n\n// clear all animations on a given subject\n_exports.clearSubjectAnimations = function (subject) {\n  var anims = this.getSubjectAnimations(subject);\n  for (var i = 0; i < anims.length; i++) {\n    anims[i].clear();\n  }\n};\n\n// commit all animations on a given subject\n_exports.commitSubjectAnimations = function (subject) {\n  var anims = this.getSubjectAnimations(subject);\n  for (var i = 0; i < anims.length; i++) {\n    anims[i].commit();\n  }\n};\n\n// pause all animations on a given subject\n_exports.pauseSubjectAnimations = function (subject) {\n  var anims = this.getSubjectAnimations(subject);\n  for (var i = 0; i < anims.length; i++) {\n    anims[i].pause();\n  }\n};\n\n// resume all animations on a given subject\n_exports.resumeSubjectAnimations = function (subject) {\n  var anims = this.getSubjectAnimations(subject);\n  for (var i = 0; i < anims.length; i++) {\n    anims[i].resume();\n  }\n};\n\n// clear all animations globally\n_exports.clearAllAnimations = function () {\n  for (var id in groups) {\n    groups[id].clear();\n  }\n};\n\n// commit all animations globally\n_exports.commitAllAnimations = function () {\n  for (var id in groups) {\n    groups[id].commit();\n  }\n};\n\n// pause all animations globally\n_exports.pauseAllAnimations = function () {\n  for (var id in groups) {\n    groups[id].pause();\n  }\n};\n\n// resume all animations globally\n_exports.resumeAllAnimations = function () {\n  for (var id in groups) {\n    groups[id].resume();\n  }\n};\n\n// see Group Class notes below\n_exports.getGroup = function (groupID) {\n  return groups[groupID || DEFAULT_GROUP_ID];\n};\n\n/**\n * Group Class\n * - a collection of animations by groupID across different subjects\n * - accessed by animate.getGroup()\n * - subscribe to the 'Finish' event to fire a callback when\n *     all animations in the group are complete or cleared, for example:\n *     myGroup.once('Finish', function () { ... });\n * - exposes clear, commit, pause, and resume to apply to all group animations\n */\n\nvar Group = function (_Emitter) {\n  _inherits(Group, _Emitter);\n\n  function Group(groupID) {\n    _classCallCheck(this, Group);\n\n    var _this = _possibleConstructorReturn(this, _Emitter.call(this));\n\n    _this.groupID = groupID + '';\n    _this.anims = [];\n    return _this;\n  }\n\n  Group.prototype.add = function add(anim) {\n    if (this.anims.indexOf(anim) === -1) {\n      this.anims.push(anim);\n    }\n  };\n\n  Group.prototype.remove = function remove(anim) {\n    var index = this.anims.indexOf(anim);\n    if (index !== -1) {\n      this.anims.splice(index, 1);\n\n      // fire Finish event after final animation removed\n      if (this.anims.length === 0) {\n        this.publish('Finish');\n      }\n    }\n  };\n\n  Group.prototype.isActive = function isActive() {\n    return this.anims.length > 0;\n  };\n\n  Group.prototype.clear = function clear() {\n    var anims = this.anims;\n    for (var i = anims.length - 1; i >= 0; i--) {\n      anims[i].clear();\n    }\n    return this;\n  };\n\n  Group.prototype.commit = function commit() {\n    var anims = this.anims;\n    for (var i = anims.length - 1; i >= 0; i--) {\n      anims[i].commit();\n    }\n    return this;\n  };\n\n  Group.prototype.pause = function pause() {\n    var anims = this.anims;\n    for (var i = anims.length - 1; i >= 0; i--) {\n      anims[i].pause();\n    }\n    return this;\n  };\n\n  Group.prototype.resume = function resume() {\n    var anims = this.anims;\n    for (var i = anims.length - 1; i >= 0; i--) {\n      anims[i].resume();\n    }\n    return this;\n  };\n\n  return Group;\n}(_Emitter5.default);\n\nvar TRANSITIONS = [_transitions2.default.easeInOut,\n// 0: default\n_transitions2.default.linear,\n// 1\n_transitions2.default.easeIn,\n// 2\n_transitions2.default.easeOut,\n// 3\n_transitions2.default.easeInOut,\n// 4\n_transitions2.default.easeInQuad,\n// 5\n_transitions2.default.easeOutQuad,\n// 6\n_transitions2.default.easeInOutQuad,\n// 7\n_transitions2.default.easeInCubic,\n// 8\n_transitions2.default.easeOutCubic,\n// 9\n_transitions2.default.easeInOutCubic,\n// 10\n_transitions2.default.easeInQuart,\n// 11\n_transitions2.default.easeOutQuart,\n// 12\n_transitions2.default.easeInOutQuart,\n// 13\n_transitions2.default.easeInQuint,\n// 14\n_transitions2.default.easeOutQuint,\n// 15\n_transitions2.default.easeInOutQuint,\n// 16\n_transitions2.default.easeInSine,\n// 17\n_transitions2.default.easeOutSine,\n// 18\n_transitions2.default.easeInOutSine,\n// 19\n_transitions2.default.easeInExpo,\n// 20\n_transitions2.default.easeOutExpo,\n// 21\n_transitions2.default.easeInOutExpo,\n// 22\n_transitions2.default.easeInCirc,\n// 23\n_transitions2.default.easeOutCirc,\n// 24\n_transitions2.default.easeInOutCirc,\n// 25\n_transitions2.default.easeInElastic,\n// 26\n_transitions2.default.easeOutElastic,\n// 27\n_transitions2.default.easeInOutElastic,\n// 28\n_transitions2.default.easeInBack,\n// 29\n_transitions2.default.easeOutBack,\n// 30\n_transitions2.default.easeInOutBack,\n// 31\n_transitions2.default.easeInBounce,\n// 32\n_transitions2.default.easeOutBounce,\n// 33\n_transitions2.default.easeInOutBounce];\n\n// 34\n_exports.linear = 1;\n_exports.easeIn = 2;\n_exports.easeOut = 3;\n_exports.easeInOut = 4;\n_exports.easeInQuad = 5;\n_exports.easeOutQuad = 6;\n_exports.easeInOutQuad = 7;\n_exports.easeInCubic = 8;\n_exports.easeOutCubic = 9;\n_exports.easeInOutCubic = 10;\n_exports.easeInQuart = 11;\n_exports.easeOutQuart = 12;\n_exports.easeInOutQuart = 13;\n_exports.easeInQuint = 14;\n_exports.easeOutQuint = 15;\n_exports.easeInOutQuint = 16;\n_exports.easeInSine = 17;\n_exports.easeOutSine = 18;\n_exports.easeInOutSine = 19;\n_exports.easeInExpo = 20;\n_exports.easeOutExpo = 21;\n_exports.easeInOutExpo = 22;\n_exports.easeInCirc = 23;\n_exports.easeOutCirc = 24;\n_exports.easeInOutCirc = 25;\n_exports.easeInElastic = 26;\n_exports.easeOutElastic = 27;\n_exports.easeInOutElastic = 28;\n_exports.easeInBack = 29;\n_exports.easeOutBack = 30;\n_exports.easeInOutBack = 31;\n_exports.easeInBounce = 32;\n_exports.easeOutBounce = 33;\n_exports.easeInOutBounce = 34;\n\nfunction getTransition(n) {\n  return typeof n == 'function' ? n : TRANSITIONS[n | 0];\n};\n\nvar Frame = function () {\n  function Frame() {\n    _classCallCheck(this, Frame);\n\n    this.subject = null;\n    this.target = null;\n    this.duration = 0;\n    this.transition = null;\n    this.base = null;\n    this._baseStyle = null;\n    // ObjectPool book-keeping\n    this.pool = null;\n    this._poolIndex = 0;\n    this._obtainedFromPool = false;\n  }\n\n  Frame.prototype.reset = function reset(subject, target, duration, transition) {\n    this.subject = subject;\n    this.target = target;\n    this.duration = duration === 0 ? 0 : duration || 500;\n    this.transition = getTransition(transition);\n    this.base = null;\n    this._baseStyle = null;\n    if (this.duration < 0) {\n      throw new Error('Animations cannot have negative durations!');\n    }\n  };\n\n  Frame.prototype.recycle = function recycle() {\n    this.pool.release(this);\n  };\n\n  Frame.prototype.exec = function exec(tt, t, debug) {};\n\n  Frame.prototype.debugLog = function debugLog(tt) {};\n\n  return Frame;\n}();\n\nvar CallbackFrame = function (_Frame) {\n  _inherits(CallbackFrame, _Frame);\n\n  function CallbackFrame() {\n    _classCallCheck(this, CallbackFrame);\n\n    return _possibleConstructorReturn(this, _Frame.apply(this, arguments));\n  }\n\n  CallbackFrame.prototype.reset = function reset(subject, target, duration, transition) {\n    _Frame.prototype.reset.call(this, subject, target, duration, transition);\n    // CallbackFrames act like tick functions when given durations\n    this.duration = duration || 0;\n  };\n\n  CallbackFrame.prototype.exec = function exec(tt, t, debug) {\n    this.target.call(this.subject, tt, t, debug);\n  };\n\n  return CallbackFrame;\n}(Frame);\n\nvar ObjectFrame = function (_Frame2) {\n  _inherits(ObjectFrame, _Frame2);\n\n  function ObjectFrame() {\n    _classCallCheck(this, ObjectFrame);\n\n    return _possibleConstructorReturn(this, _Frame2.apply(this, arguments));\n  }\n\n  ObjectFrame.prototype.exec = function exec(tt, t, debug) {\n    // set starting values on first execution\n    if (!this.base) {\n      this.base = {};\n      for (var key in this.target) {\n        this.base[key] = this.subject[key];\n      }\n    }\n\n    for (var key in this.target) {\n      var baseValue = this.base[key];\n      this.subject[key] = baseValue + tt * (this.target[key] - baseValue);\n    }\n    debug && this.debugLog(tt);\n  };\n\n  ObjectFrame.prototype.debugLog = function debugLog(tt) {\n    var changed = {};\n    for (var key in this.target) {\n      changed[key] = this.subject[key] + ' -> ' + this.target[key];\n    }\n    _base.logger.log(this.duration, tt, JSON.stringify(changed));\n  };\n\n  return ObjectFrame;\n}(Frame);\n\n// a ViewStyleFrame updates a view's style in exec\n\n\nvar ViewStyleFrame = function (_Frame3) {\n  _inherits(ViewStyleFrame, _Frame3);\n\n  function ViewStyleFrame() {\n    _classCallCheck(this, ViewStyleFrame);\n\n    return _possibleConstructorReturn(this, _Frame3.apply(this, arguments));\n  }\n\n  ViewStyleFrame.prototype.resolveDeltas = function resolveDeltas(againstStyle) {\n    var style = this.target;\n    for (var key in style) {\n      var baseKey = key.substring(1);\n      if (key.charAt(0) == 'd' && !(key in againstStyle) && baseKey in againstStyle) {\n        style[baseKey] = style[key] + againstStyle[baseKey];\n        delete style[key];\n      }\n    }\n  };\n\n  ViewStyleFrame.prototype.exec = function exec(tt, t, debug) {\n    var oldStyle = this._baseStyle;\n    var newStyle = this.target;\n    var viewStyle = this.subject.style;\n\n    // resolve deltas and starting style on first execution\n    if (!oldStyle) {\n      oldStyle = this._baseStyle = viewStyle.copy();\n      this.resolveDeltas(oldStyle);\n    }\n\n    for (var key in newStyle) {\n      if (key in oldStyle) {\n        var oldValue = oldStyle[key];\n        viewStyle[key] = oldValue + tt * (newStyle[key] - oldValue);\n      }\n    }\n    debug && this.debugLog(tt);\n  };\n\n  ViewStyleFrame.prototype.debugLog = function debugLog(tt) {\n    var changed = {};\n    var newStyle = this.target;\n    var viewStyle = this.subject.style;\n    for (var key in newStyle) {\n      changed[key] = viewStyle[key] + ' -> ' + newStyle[key];\n    }\n    _base.logger.log(_timer2.default.now, this.duration, tt, JSON.stringify(changed));\n  };\n\n  return ViewStyleFrame;\n}(Frame);\n\nvar AnimatorScheduler = function (_Emitter2) {\n  _inherits(AnimatorScheduler, _Emitter2);\n\n  function AnimatorScheduler() {\n    _classCallCheck(this, AnimatorScheduler);\n\n    return _possibleConstructorReturn(this, _Emitter2.apply(this, arguments));\n  }\n\n  AnimatorScheduler.prototype.schedule = function schedule(anim) {\n    engine.subscribe('Tick', anim, 'onTick');\n  };\n\n  AnimatorScheduler.prototype.unschedule = function unschedule(anim) {\n    engine.unsubscribe('Tick', anim, 'onTick');\n  };\n\n  return AnimatorScheduler;\n}(_Emitter5.default);\n\n_exports.AnimatorScheduler = AnimatorScheduler;\n\nvar DEFAULT_ANIMATOR_SCHEDULER = new AnimatorScheduler();\n\n_exports.Animator = function (_Emitter3) {\n  _inherits(_class, _Emitter3);\n\n  function _class(subject) {\n    _classCallCheck(this, _class);\n\n    var _this6 = _possibleConstructorReturn(this, _Emitter3.call(this));\n\n    _this6.subject = subject;\n    _this6._queue = [];\n    _this6._elapsed = 0;\n    _this6._isPaused = false;\n    _this6._isScheduled = false;\n    _this6._debug = false;\n\n    _this6._scheduler = DEFAULT_ANIMATOR_SCHEDULER;\n    return _this6;\n  }\n\n  _class.prototype.scheduler = function scheduler(_scheduler) {\n    var wasScheduled = false;\n    if (this._scheduler) {\n      if (this._scheduler === _scheduler) {\n        // Dont need to do anything\n        return;\n      } else {\n        // Detach from old scheduler\n        if (this._isScheduled) {\n          this._scheduler.unschedule(this);\n          wasScheduled = true;\n        }\n      }\n    }\n    this._scheduler = _scheduler || DEFAULT_ANIMATOR_SCHEDULER;\n    if (wasScheduled) {\n      // Attach to new scheduler\n      this.scheduler.schedule(this);\n    }\n    return this;\n  };\n\n  _class.prototype.clear = function clear() {\n    var queue = this._queue;\n    var len = queue.length;\n    for (var i = 0; i < len; i++) {\n      queue[i].recycle();\n    }\n    queue.length = 0;\n    this._elapsed = 0;\n    this._unschedule();\n    this._removeFromGroup();\n    return this;\n  };\n\n  _class.prototype.pause = function pause() {\n    if (!this._isPaused) {\n      this._isPaused = true;\n      this._unschedule();\n    }\n    return this;\n  };\n\n  _class.prototype.resume = function resume() {\n    if (this._isPaused) {\n      this._isPaused = false;\n      this._schedule();\n    }\n    return this;\n  };\n\n  _class.prototype._schedule = function _schedule() {\n    if (!this._isScheduled) {\n      this._isScheduled = true;\n      this._scheduler.schedule(this);\n    }\n  };\n\n  _class.prototype._unschedule = function _unschedule() {\n    if (this._isScheduled) {\n      this._isScheduled = false;\n      this._scheduler.unschedule(this);\n    }\n  };\n\n  _class.prototype.isPaused = function isPaused() {\n    return this._isPaused;\n  };\n\n  _class.prototype.hasFrames = function hasFrames() {\n    return !!this._queue[0];\n  };\n\n  _class.prototype.wait = function wait(duration) {\n    return this.then(undefined, duration);\n  };\n\n  _class.prototype.buildFrame = function buildFrame(target, duration, transition) {\n    var frame;\n    var subject = this.subject;\n    var targetType = typeof target === 'undefined' ? 'undefined' : _typeof(target);\n    if (targetType === 'function') {\n      frame = callbackFramePool.obtain();\n      frame.pool = callbackFramePool;\n    } else if (targetType === 'object') {\n      frame = objectFramePool.obtain();\n      frame.pool = objectFramePool;\n    } else {\n      frame = framePool.obtain();\n      frame.pool = framePool;\n    }\n    frame.reset(subject, target, duration, transition);\n    return frame;\n  };\n\n  _class.prototype.now = function now(target, duration, transition) {\n    this.clear();\n    return this.then(target, duration, transition);\n  };\n\n  _class.prototype.then = function then(target, duration, transition) {\n    if (!this._queue.length) {\n      this._elapsed = 0;\n    }\n\n    this._queue.push(this.buildFrame(target, duration, transition));\n    this._schedule();\n    this._addToGroup();\n    return this;\n  };\n\n  _class.prototype.debug = function debug() {\n    this._debug = true;\n    return this;\n  };\n\n  _class.prototype.commit = function commit() {\n    this.resume();\n    this._elapsed = 0;\n    for (var i = 0, p; p = this._queue[i]; ++i) {\n      this._elapsed += p.duration;\n    }\n\n    this.next();\n    return this;\n  };\n\n  _class.prototype.onTick = function onTick(dt) {\n    if (!this._isScheduled) {\n      return;\n    }\n\n    this._elapsed += dt;\n    this.next();\n  };\n\n  _class.prototype.next = function next() {\n    var p = this._queue[0];\n    while (p) {\n      var duration = p.duration;\n      var frameFinished = this._elapsed >= duration;\n      var t = frameFinished ? 1 : this._elapsed / duration;\n      var tt = p.transition(t);\n\n      if (frameFinished) {\n        this._elapsed -= duration;\n      }\n\n      p.exec(tt, t, this._debug);\n\n      // remove frame if finished and queue wasn't modified by a callback\n      if (frameFinished && p === this._queue[0]) {\n        var frame = this._queue.shift();\n        frame.recycle();\n      }\n\n      // if paused during a callback or frame not finished, don't continue\n      if (!frameFinished || this._isPaused) {\n        return;\n      }\n\n      p = this._queue[0];\n    }\n\n    // nothing left in the queue!\n    this._unschedule();\n    this._removeFromGroup();\n  };\n\n  _class.prototype._addToGroup = function _addToGroup() {\n    var group = groups[this.groupID];\n    group && group.add(this);\n  };\n\n  _class.prototype._removeFromGroup = function _removeFromGroup() {\n    var group = groups[this.groupID];\n    group && group.remove(this);\n  };\n\n  return _class;\n}(_Emitter5.default);\nvar Animator = _exports.Animator;\n\nvar ViewAnimator = function (_Animator) {\n  _inherits(ViewAnimator, _Animator);\n\n  function ViewAnimator() {\n    _classCallCheck(this, ViewAnimator);\n\n    return _possibleConstructorReturn(this, _Animator.apply(this, arguments));\n  }\n\n  ViewAnimator.prototype.buildFrame = function buildFrame(target, duration, transition) {\n    if ((typeof target === 'undefined' ? 'undefined' : _typeof(target)) === 'object') {\n      var frame = viewStyleFramePool.obtain();\n      frame.pool = viewStyleFramePool;\n      frame.reset(this.subject, target, duration, transition);\n      return frame;\n    } else {\n      return _Animator.prototype.buildFrame.call(this, target, duration, transition);\n    }\n  };\n\n  return ViewAnimator;\n}(Animator);\n\n// used to get/set native or browser ViewAnimator constructors\n\n\n_exports.getViewAnimator = function () {\n  return ViewAnimator;\n};\n_exports.setViewAnimator = function (ctor) {\n  ViewAnimator = ctor;\n};\n\n// pool frame classes to minimize mem allocation and garbage collection\nvar framePool = new _ObjectPool2.default({ ctor: Frame });\nvar objectFramePool = new _ObjectPool2.default({ ctor: ObjectFrame });\nvar callbackFramePool = new _ObjectPool2.default({ ctor: CallbackFrame });\nvar viewStyleFramePool = new _ObjectPool2.default({ ctor: ViewStyleFrame });\n\n// API for pre-populating frame pools\n//   this is useful if you plan on launching many animations at once\n_exports.initializeFrameCount = function (count) {\n  count -= framePool.getTotalCount();\n  for (var i = 0; i < count; i++) {\n    framePool.create();\n  }\n};\n\n_exports.initializeObjectFrameCount = function (count) {\n  count -= objectFramePool.getTotalCount();\n  for (var i = 0; i < count; i++) {\n    objectFramePool.create();\n  }\n};\n\n_exports.initializeCallbackFrameCount = function (count) {\n  count -= callbackFramePool.getTotalCount();\n  for (var i = 0; i < count; i++) {\n    callbackFramePool.create();\n  }\n};\n\n_exports.initializeViewStyleFrameCount = function (count) {\n  count -= viewStyleFramePool.getTotalCount();\n  for (var i = 0; i < count; i++) {\n    viewStyleFramePool.create();\n  }\n};\n\nexports.default = _exports;\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/modules/timestep/src/ui/backend/canvas/animate.js\n// module id = 38\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/modules/timestep/src/ui/backend/canvas/animate.js?");

/***/ },
/* 39 */
/*!*************************************************************************!*\
  !*** ./modules/devkit-core/modules/timestep/src/animate/transitions.js ***!
  \*************************************************************************/
/***/ function(module, exports) {

	eval("\"use strict\";\n\nexports.__esModule = true;\nvar _exports = {};\n\n/**\n * @license\n * This file is part of the Game Closure SDK.\n *\n * The Game Closure SDK is free software: you can redistribute it and/or modify\n * it under the terms of the Mozilla Public License v. 2.0 as published by Mozilla.\n\n * The Game Closure SDK is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * Mozilla Public License v. 2.0 for more details.\n\n * You should have received a copy of the Mozilla Public License v. 2.0\n * along with the Game Closure SDK.  If not, see <http://mozilla.org/MPL/2.0/>.\n */\n/**\n * @module animate.transitions\n *\n * Transition functions for use by the animate features. These aren't referenced\n * directly by the animate namespace, but by numerical reference.\n *\n * @doc http://doc.gameclosure.com/api/animate.html\n * @docsrc https://github.com/gameclosure/doc/blob/master/api/animate.md\n */\n_exports.linear = function (n) {\n  return n;\n};\n_exports.easeInQuad = function (n) {\n  return n * n;\n};\n_exports.easeIn = _exports.easeInQuad;\n_exports.easeOutQuad = function (n) {\n  return n * (2 - n);\n};\n_exports.easeOut = _exports.easeOutQuad;\n_exports.easeInOutQuad = function (n) {\n  if ((n *= 2) < 1) {\n    return 0.5 * n * n;\n  }\n  return -0.5 * (--n * (n - 2) - 1);\n};\n_exports.easeInCubic = function (n) {\n  return n * n * n;\n};\n_exports.easeOutCubic = function (n) {\n  return (n -= 1) * n * n + 1;\n};\n_exports.easeInOutCubic = function (n) {\n  if ((n *= 2) < 1) {\n    return 0.5 * n * n * n;\n  }\n  return 0.5 * ((n -= 2) * n * n + 2);\n};\n_exports.easeInOut = _exports.easeInOutCubic;\n_exports.easeInQuart = function (n) {\n  return n * n * n * n;\n};\n_exports.easeOutQuart = function (n) {\n  return -1 * ((n -= 1) * n * n * n - 1);\n};\n_exports.easeInOutQuart = function (n) {\n  if ((n *= 2) < 1) {\n    return 0.5 * n * n * n * n;\n  }\n  return -0.5 * ((n -= 2) * n * n * n - 2);\n};\n_exports.easeInQuint = function (n) {\n  return n * n * n * n * n;\n};\n_exports.easeOutQuint = function (n) {\n  return (n -= 1) * n * n * n * n + 1;\n};\n_exports.easeInOutQuint = function (n) {\n  if ((n *= 2) < 1) {\n    return 0.5 * n * n * n * n * n;\n  }\n  return 0.5 * ((n -= 2) * n * n * n * n + 2);\n};\n_exports.easeInSine = function (n) {\n  if (n == 0) {\n    return 0;\n  }\n  if (n == 1) {\n    return 1;\n  }\n  return -1 * Math.cos(n * (Math.PI / 2)) + 1;\n};\n_exports.easeOutSine = function (n) {\n  if (n == 0) {\n    return 0;\n  }\n  if (n == 1) {\n    return 1;\n  }\n  return Math.sin(n * (Math.PI / 2));\n};\n_exports.easeInOutSine = function (n) {\n  if (n == 0) {\n    return 0;\n  }\n  if (n == 1) {\n    return 1;\n  }\n  return -0.5 * (Math.cos(Math.PI * n) - 1);\n};\n_exports.easeInExpo = function (n) {\n  if (n == 0) {\n    return 0;\n  }\n  if (n == 1) {\n    return 1;\n  }\n  return n == 0 ? 0 : Math.pow(2, 10 * (n - 1));\n};\n_exports.easeOutExpo = function (n) {\n  if (n == 0) {\n    return 0;\n  }\n  if (n == 1) {\n    return 1;\n  }\n  return n == 1 ? 1 : -Math.pow(2, -10 * n) + 1;\n};\n_exports.easeInOutExpo = function (n) {\n  if (n == 0) {\n    return 0;\n  }\n  if (n == 1) {\n    return 1;\n  }\n  if ((n *= 2) < 1) {\n    return 0.5 * Math.pow(2, 10 * (n - 1));\n  }\n  return 0.5 * (-Math.pow(2, -10 * --n) + 2);\n};\n_exports.easeInCirc = function (n) {\n  if (n == 0) {\n    return 0;\n  }\n  if (n == 1) {\n    return 1;\n  }\n  return -1 * (Math.sqrt(1 - n * n) - 1);\n};\n_exports.easeOutCirc = function (n) {\n  if (n == 0) {\n    return 0;\n  }\n  if (n == 1) {\n    return 1;\n  }\n  return Math.sqrt(1 - (n -= 1) * n);\n};\n_exports.easeInOutCirc = function (n) {\n  if (n == 0) {\n    return 0;\n  }\n  if (n == 1) {\n    return 1;\n  }\n  if ((n *= 2) < 1) {\n    return -0.5 * (Math.sqrt(1 - n * n) - 1);\n  }\n  return 0.5 * (Math.sqrt(1 - (n -= 2) * n) + 1);\n};\n_exports.easeInElastic = function (n) {\n  if (n == 0) {\n    return 0;\n  }\n  if (n == 1) {\n    return 1;\n  }\n  var p = 0.3;\n  var s = 0.075;\n  // p / (2 * Math.PI) * Math.asin(1)\n  return -(Math.pow(2, 10 * (n -= 1)) * Math.sin((n - s) * (2 * Math.PI) / p));\n};\n_exports.easeOutElastic = function (n) {\n  if (n == 0) {\n    return 0;\n  }\n  if (n == 1) {\n    return 1;\n  }\n  var p = 0.3;\n  var s = 0.075;\n  // p / (2 * Math.PI) * Math.asin(1)\n  return Math.pow(2, -10 * n) * Math.sin((n - s) * (2 * Math.PI) / p) + 1;\n};\n_exports.easeInOutElastic = function (n) {\n  if (n == 0) {\n    return 0;\n  }\n  if ((n *= 2) == 2) {\n    return 1;\n  }\n  var p = 0.45;\n  // 0.3 * 1.5\n  var s = 0.1125;\n  // p / (2 * Math.PI) * Math.asin(1)\n  if (n < 1) {\n    return -0.5 * (Math.pow(2, 10 * (n -= 1)) * Math.sin((n * 1 - s) * (2 * Math.PI) / p));\n  }\n  return Math.pow(2, -10 * (n -= 1)) * Math.sin((n * 1 - s) * (2 * Math.PI) / p) * 0.5 + 1;\n};\n_exports.easeInBack = function (n) {\n  if (n == 0) {\n    return 0;\n  }\n  if (n == 1) {\n    return 1;\n  }\n  var s = 1.70158;\n  return n * n * ((s + 1) * n - s);\n};\n_exports.easeOutBack = function (n) {\n  if (n == 0) {\n    return 0;\n  }\n  if (n == 1) {\n    return 1;\n  }\n  var s = 1.70158;\n  return (n -= 1) * n * ((s + 1) * n + s) + 1;\n};\n_exports.easeInOutBack = function (n) {\n  if (n == 0) {\n    return 0;\n  }\n  if (n == 1) {\n    return 1;\n  }\n  var s = 1.70158;\n  if ((n *= 2) < 1) {\n    return 0.5 * (n * n * (((s *= 1.525) + 1) * n - s));\n  }\n  return 0.5 * ((n -= 2) * n * (((s *= 1.525) + 1) * n + s) + 2);\n};\n_exports.easeOutBounce = function (n) {\n  if (n == 0) {\n    return 0;\n  }\n  if (n == 1) {\n    return 1;\n  }\n  if (n < 1 / 2.75) {\n    return 7.5625 * n * n;\n  } else if (n < 2 / 2.75) {\n    return 7.5625 * (n -= 1.5 / 2.75) * n + 0.75;\n  } else if (n < 2.5 / 2.75) {\n    return 7.5625 * (n -= 2.25 / 2.75) * n + 0.9375;\n  } else {\n    return 7.5625 * (n -= 2.625 / 2.75) * n + 0.984375;\n  }\n};\n_exports.easeInBounce = function (n) {\n  return 1 - _exports.easeOutBounce(1 - n);\n};\n_exports.easeInOutBounce = function (n) {\n  if (n < 0.5) {\n    return _exports.easeInBounce(n * 2) * 0.5;\n  }\n  return _exports.easeOutBounce(n * 2 - 1) * 0.5 + 0.5;\n};\n\nexports.default = _exports;\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/modules/timestep/src/animate/transitions.js\n// module id = 39\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/modules/timestep/src/animate/transitions.js?");

/***/ },
/* 40 */
/*!****************************************************************!*\
  !*** ./modules/devkit-core/modules/timestep/src/ObjectPool.js ***!
  \****************************************************************/
/***/ function(module, exports) {

	eval("\"use strict\";\n\nexports.__esModule = true;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _exports = {};\n\n/**\n * @license\n * This file is part of the Game Closure SDK.\n *\n * The Game Closure SDK is free software: you can redistribute it and/or modify\n * it under the terms of the Mozilla Public License v. 2.0 as published by Mozilla.\n\n * The Game Closure SDK is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * Mozilla Public License v. 2.0 for more details.\n\n * You should have received a copy of the Mozilla Public License v. 2.0\n * along with the Game Closure SDK.  If not, see <http://mozilla.org/MPL/2.0/>.\n */\n/**\n * @class ObjectPool\n *  class instances can be very costly to garbage collect and initialize, so\n *  be good to the environment, and always recycle!\n */\n_exports = function () {\n  function exports(opts) {\n    _classCallCheck(this, exports);\n\n    this._ctor = opts.ctor;\n    this._pool = [];\n    this._freshIndex = 0;\n\n    var initCount = opts.initCount || 0;\n    for (var i = 0; i < initCount; i++) {\n      this.create();\n    }\n  }\n\n  exports.prototype.create = function create() {\n    var pool = this._pool;\n    var obj = new this._ctor();\n    obj._poolIndex = pool.length;\n    pool.push(obj);\n    return obj;\n  };\n\n  exports.prototype.obtain = function obtain() {\n    var obj;\n    var pool = this._pool;\n    if (this._freshIndex < pool.length) {\n      obj = pool[this._freshIndex];\n    } else {\n      obj = this.create();\n    }\n    obj._obtainedFromPool = true;\n    this._freshIndex++;\n    return obj;\n  };\n\n  exports.prototype.release = function release(obj) {\n    var pool = this._pool;\n    if (obj._obtainedFromPool) {\n      obj._obtainedFromPool = false;\n      var temp = pool[this._freshIndex - 1];\n      pool[this._freshIndex - 1] = obj;\n      pool[obj._poolIndex] = temp;\n      var tempIndex = temp._poolIndex;\n      temp._poolIndex = obj._poolIndex;\n      obj._poolIndex = tempIndex;\n      this._freshIndex--;\n    }\n  };\n\n  exports.prototype.forEachActive = function forEachActive(fn, ctx) {\n    var pool = this._pool;\n    for (var i = this._freshIndex - 1; i >= 0; i--) {\n      fn.call(ctx, pool[i], i);\n    }\n  };\n\n  exports.prototype.getActiveCount = function getActiveCount() {\n    return this._freshIndex;\n  };\n\n  exports.prototype.getTotalCount = function getTotalCount() {\n    return this._pool.length;\n  };\n\n  return exports;\n}();\n\nexports.default = _exports;\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/modules/timestep/src/ObjectPool.js\n// module id = 40\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/modules/timestep/src/ObjectPool.js?");

/***/ },
/* 41 */
/*!***********************************************************************!*\
  !*** ./modules/devkit-core/modules/timestep/src/ui/engineInstance.js ***!
  \***********************************************************************/
/***/ function(module, exports) {

	eval("\"use strict\";\n\nexports.__esModule = true;\nvar _exports = {};\n\nvar instance;\n\n_exports.setInstance = function (inst) {\n  instance = inst;\n};\n\n_exports.get = function () {\n  return instance;\n};\n\nexports.default = _exports;\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/modules/timestep/src/ui/engineInstance.js\n// module id = 41\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/modules/timestep/src/ui/engineInstance.js?");

/***/ },
/* 42 */
/*!********************************************************************************!*\
  !*** ./modules/devkit-core/modules/timestep/src/ui/resource/ImageViewCache.js ***!
  \********************************************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nexports.__esModule = true;\n\nvar _Image = __webpack_require__(/*! ./Image */ 43);\n\nvar _Image2 = _interopRequireDefault(_Image);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar _exports = {};\n\n// cache of Images for ImageView and ImageScaleView\n_exports.cache = {};\n\n_exports.clear = function () {\n  _exports.cache = {};\n};\n\n_exports.getImage = function (url, forceReload, crossOrigin) {\n  var img;\n  if (!forceReload) {\n    img = _exports.cache[url];\n  }\n\n  if (!img) {\n    img = _exports.cache[url] = new _Image2.default({\n      url: url,\n      forceReload: !!forceReload,\n      crossOrigin: crossOrigin\n    });\n  }\n\n  return img;\n};\n\nexports.default = _exports;\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/modules/timestep/src/ui/resource/ImageViewCache.js\n// module id = 42\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/modules/timestep/src/ui/resource/ImageViewCache.js?");

/***/ },
/* 43 */
/*!***********************************************************************!*\
  !*** ./modules/devkit-core/modules/timestep/src/ui/resource/Image.js ***!
  \***********************************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nexports.__esModule = true;\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _base = __webpack_require__(/*! base */ 2);\n\nvar _device = __webpack_require__(/*! device */ 1);\n\nvar _device2 = _interopRequireDefault(_device);\n\nvar _PubSub2 = __webpack_require__(/*! lib/PubSub */ 10);\n\nvar _PubSub3 = _interopRequireDefault(_PubSub2);\n\nvar _Callback = __webpack_require__(/*! event/Callback */ 44);\n\nvar _Callback2 = _interopRequireDefault(_Callback);\n\nvar _loader = __webpack_require__(/*! ui/resource/loader */ 46);\n\nvar _loader2 = _interopRequireDefault(_loader);\n\nvar _filterRenderer = __webpack_require__(/*! ui/backend/canvas/filterRenderer */ 50);\n\nvar _filterRenderer2 = _interopRequireDefault(_filterRenderer);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _exports = {};\n\n/**\n * @license\n * This file is part of the Game Closure SDK.\n *\n * The Game Closure SDK is free software: you can redistribute it and/or modify\n * it under the terms of the Mozilla Public License v. 2.0 as published by Mozilla.\n\n * The Game Closure SDK is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * Mozilla Public License v. 2.0 for more details.\n\n * You should have received a copy of the Mozilla Public License v. 2.0\n * along with the Game Closure SDK.  If not, see <http://mozilla.org/MPL/2.0/>.\n */\n/**\n * @class ui.resource.Image;\n * Model an Image for rendering. Supports taking a subset of images, to support\n * extracting from compacted sprite sheets. Also supports applying filters to\n * an image, usually by the View class.\n *\n * @doc http://doc.gameclosure.com/api/ui-imageview.html#class-ui.resource.image\n * @docsrc https://github.com/gameclosure/doc/blob/master/api/ui/imageview.md\n */\n\n\nvar ImageCache = {};\n\nvar GET_IMAGE_DATA_NOT_SUPPORTED = !_base.GLOBAL.document || !document.createElement;\n\n/**\n * Callback when images are loaded. This has a failsafe that runs up to a certain\n * threshold asynchronously, attempting to read the image size, before dying.\n */\n// `imageOnLoad` is called when a DOM image object fires a `load` or `error`\n// event.  Fire the internal `cb` with the error status.\nfunction imageOnLoad(success, evt, failCount) {\n  if (success && !this.width) {\n    // Some browsers fire the load event before the image width is\n    // available.  Wait up to 3 frames for the width.  Note that an image\n    // with zero-width will be considered an error.\n    if (failCount <= 3) {\n      setTimeout((0, _base.bind)(this, imageOnLoad, success, evt, (failCount || 0) + 1), 0);\n    } else {\n      this.__cb.fire(false);\n    }\n  } else {\n    this.__cb.fire(!success);\n  }\n}\n\n// Listen for preloaded images and add them to cache\n_loader2.default.on(_loader2.default.IMAGE_LOADED, function (image, src) {\n  ImageCache[src.resource] = image;\n  image.__cb = new _Callback2.default();\n  imageOnLoad.call(image, true);\n});\n\n/**\n * This class models the region of a larger image that this \"Image\" references.\n */\nvar ImageMap = !_base.CONFIG.disableNativeViews && _base.NATIVE.timestep && _base.NATIVE.timestep.ImageMap;\nif (!ImageMap) {\n  ImageMap = function ImageMap(parentImage, x, y, width, height, marginTop, marginRight, marginBottom, marginLeft, url) {\n    _classCallCheck(this, ImageMap);\n\n    this.url = url;\n    this.x = x;\n    this.y = y;\n    this.width = width;\n    this.height = height;\n    this.marginTop = marginTop;\n    this.marginRight = marginRight;\n    this.marginBottom = marginBottom;\n    this.marginLeft = marginLeft;\n  };\n}\n\nvar isNative = _base.GLOBAL.NATIVE && !_device2.default.isNativeSimulator;\nvar Canvas = _device2.default.get('Canvas');\n\n// helper canvases for image data, initialized when/if needed\nvar _imgDataCanvas = null;\nvar _imgDataCtx = null;\n\nvar ImageWrapper = function (_PubSub) {\n  _inherits(ImageWrapper, _PubSub);\n\n  function ImageWrapper(opts) {\n    _classCallCheck(this, ImageWrapper);\n\n    var _this = _possibleConstructorReturn(this, _PubSub.call(this));\n\n    if (!opts) {\n      opts = {};\n    }\n\n    _this._crossOrigin = opts.crossOrigin !== undefined ? opts.crossOrigin : 'use-credentials';\n\n    _this._cb = new _Callback2.default();\n    _this._map = new ImageMap(_this, 0, 0, -1, -1, 0, 0, 0, 0, opts.url || '');\n    _this._originalURL = opts.url || '';\n    _this._scale = opts.scale || 1;\n    _this._isError = false;\n\n    _loader2.default._updateImageMap(_this._map, opts.url, opts.sourceX, opts.sourceY, opts.sourceW, opts.sourceH);\n\n    // srcImage can be null, then setSrcImg will create one\n    // (use the map's URL in case it was updated to a spritesheet)\n    _this._setSrcImg(opts.srcImage, _this._map.url, opts.forceReload);\n    return _this;\n  }\n\n  ImageWrapper.prototype._setSrcImg = function _setSrcImg(img, url, forceReload) {\n    this._cb.reset();\n    this._isError = false;\n\n    // if we haven't found an image, look in the image cache\n    if (!img && url && !forceReload && ImageCache[url]) {\n      img = ImageCache[url];\n    }\n\n    // look up the base64 cache -- if it's been preloaded, we'll get back an image that's already loaded\n    // if it has not been preloaded, we'll get back raw base64 in the b64 variable\n    if (!img && !forceReload && Image.get) {\n      var b64 = Image.get(url);\n      if ((typeof b64 === 'undefined' ? 'undefined' : _typeof(b64)) === 'object') {\n        img = b64;\n      } else if (b64) {\n        url = b64;\n      }\n    }\n\n    if (forceReload) {\n      // clear native texture in an image object\n      if (img && img.destroy) {\n        img.destroy();\n      }\n\n      // clear native textures by URL\n      if (url && _base.NATIVE.gl && _base.NATIVE.gl.deleteTexture) {\n        _base.NATIVE.gl.deleteTexture(url);\n      }\n    }\n\n    // create an image if we don't have one\n    if (!img) {\n      img = new Image();\n      img.crossOrigin = this._crossOrigin;\n    }\n\n    this._srcImg = img;\n\n    if (img instanceof HTMLCanvasElement || img instanceof Canvas) {\n      this._onLoad(false, img);\n    } else\n      // no error\n      {\n        // if it's already loaded, we call _onLoad immediately. Note that\n        // we don't use `.complete` here intentionally since web browsers\n        // set `.complete = true` before firing on the load/error\n        // callbacks, so we can't actually detect whether there's an error\n        // in some cases.\n        if (!img.__cb) {\n          img.__cb = new _Callback2.default();\n          img.addEventListener('load', (0, _base.bind)(img, imageOnLoad, true), false);\n          img.addEventListener('error', (0, _base.bind)(img, imageOnLoad, false), false);\n\n          if (url) {\n            ImageCache[url] = img;\n          }\n\n          if (!img.src && url) {\n            img.src = this._map.url = url;\n          }\n        }\n\n        img.__cb.run(this, function (err) {\n          this._onLoad(err, img);\n        });\n      }\n  };\n\n  ImageWrapper.prototype.getSrcImg = function getSrcImg() {\n    return this._srcImg;\n  };\n\n  ImageWrapper.prototype.setSrcImg = function setSrcImg(srcImg) {\n    this._setSrcImg(srcImg);\n  };\n\n  ImageWrapper.prototype.reload = function reload(cb) {\n    var srcImg = this._srcImg;\n    if (srcImg) {\n      // if passed a lib.Callback, chain it\n      if (cb && cb.chain) {\n        cb = cb.chain();\n      }\n\n      var hasFired = this._cb.fired();\n\n      // GC native has a reload method to force reload\n      if (srcImg.reload) {\n        var onReload = (0, _base.bind)(this, function () {\n          srcImg.removeEventListener('reload', onReload, false);\n          if (hasFired) {\n            this._cb.fire(null, this);\n          }\n          cb && cb();\n        });\n        srcImg.addEventListener('reload', onReload, false);\n        srcImg.reload();\n\n        if (hasFired) {\n          this._cb.reset();\n        }\n      } else if (cb) {\n        if (this._cb.fired()) {\n          // always wait a frame before calling the callback\n          setTimeout(cb, 0);\n        } else {\n          this._cb.run(cb);\n        }\n      }\n    }\n  };\n\n  ImageWrapper.prototype.getURL = function getURL() {\n    return this._map.url;\n  };\n\n  ImageWrapper.prototype.getOriginalURL = function getOriginalURL() {\n    return this._originalURL;\n  };\n\n  ImageWrapper.prototype.getSourceX = function getSourceX() {\n    return this._map.x;\n  };\n\n  ImageWrapper.prototype.getSourceY = function getSourceY() {\n    return this._map.y;\n  };\n\n  ImageWrapper.prototype.getSourceW = function getSourceW() {\n    return this._map.width;\n  };\n\n  ImageWrapper.prototype.getSourceH = function getSourceH() {\n    return this._map.height;\n  };\n\n  ImageWrapper.prototype.getOrigW = function getOrigW() {\n    return this._srcImg.width;\n  };\n\n  ImageWrapper.prototype.getOrigH = function getOrigH() {\n    return this._srcImg.height;\n  };\n\n  ImageWrapper.prototype.setSourceX = function setSourceX(x) {\n    this._map.x = x;\n  };\n\n  ImageWrapper.prototype.setSourceY = function setSourceY(y) {\n    this._map.y = y;\n  };\n\n  ImageWrapper.prototype.setSourceW = function setSourceW(w) {\n    this._map.width = w;\n  };\n\n  ImageWrapper.prototype.setSourceH = function setSourceH(h) {\n    this._map.height = h;\n  };\n\n  ImageWrapper.prototype.setMarginTop = function setMarginTop(n) {\n    this._map.marginTop = n;\n  };\n\n  ImageWrapper.prototype.setMarginRight = function setMarginRight(n) {\n    this._map.marginRight = n;\n  };\n\n  ImageWrapper.prototype.setMarginBottom = function setMarginBottom(n) {\n    this._map.marginBottom = n;\n  };\n\n  ImageWrapper.prototype.setMarginLeft = function setMarginLeft(n) {\n    this._map.marginLeft = n;\n  };\n\n  ImageWrapper.prototype.setURL = function setURL(url, forceReload) {\n    _loader2.default._updateImageMap(this._map, url);\n    this._setSrcImg(null, this._map.url, forceReload);\n  };\n\n  ImageWrapper.prototype.getWidth = function getWidth() {\n    var map = this._map;\n    return (map.width == -1 ? 0 : map.width + map.marginLeft + map.marginRight) / map.scale;\n  };\n\n  ImageWrapper.prototype.getHeight = function getHeight() {\n    var map = this._map;\n    return (map.height === -1 ? 0 : map.height + map.marginTop + map.marginBottom) / map.scale;\n  };\n\n  ImageWrapper.prototype.getBounds = function getBounds() {\n    return this._map;\n  };\n\n  ImageWrapper.prototype.setBounds = function setBounds(x, y, w, h, marginTop, marginRight, marginBottom, marginLeft) {\n    var map = this._map;\n    map.x = x;\n    map.y = y;\n    map.width = w;\n    map.height = h;\n    map.marginTop = marginTop || 0;\n    map.marginRight = marginRight || 0;\n    map.marginBottom = marginBottom || 0;\n    map.marginLeft = marginLeft || 0;\n    this.emit('changeBounds');\n  };\n\n  ImageWrapper.prototype.doOnLoad = function doOnLoad() {\n    this._cb.forward(arguments);\n    return this;\n  };\n\n  ImageWrapper.prototype._onLoad = function _onLoad(err, img) {\n    var map = this._map;\n    var srcImg = this._srcImg;\n    // if our source image has changed we should ignore this onload callback\n    // this can happen if _setSrcImg is called multiple times with different urls/images\n    if (img && img !== srcImg) {\n      return;\n    }\n\n    if (err) {\n      // TODO: something better?\n      _base.logger.error('Image failed to load:', map.url);\n      this._isError = true;\n      this._cb.fire({ NoImage: true });\n      return;\n    }\n\n    this._isError = false;\n\n    if (srcImg.width === 0) {\n      _base.logger.warn('Image has no width', this._url);\n    }\n\n    if (this._scale !== 1 && (map.width !== -1 || map.height !== -1)) {\n      // requested scale & provided a width or height\n      if (map.width === -1) {\n        // by the above check, this._sourceH should not be -1\n        map.width = srcImg.width * map.height / srcImg.height;\n      }\n\n      if (map.height === -1) {\n        // this._sourceW was initialized above\n        map.height = srcImg.height * map.width / srcImg.width;\n      }\n\n      // TODO: sourceImage might be shared so we can't actually modify width/height. This is a bug.\n      srcImg.width = map.width;\n      srcImg.height = map.height;\n    } else {\n      if (map.width === -1) {\n        map.width = srcImg.width;\n      }\n      if (map.height === -1) {\n        map.height = srcImg.height;\n      }\n    }\n\n    map.url = srcImg.src;\n    this._cb.fire(null, this);\n  };\n\n  ImageWrapper.prototype.isError = function isError() {\n    return this._isError;\n  };\n\n  ImageWrapper.prototype.isReady = function isReady() {\n    return !this._isError && this._cb.fired();\n  };\n\n  /**\n   * Easy-to-use 5 param render function that relies on the internal _map\n   */\n\n\n  ImageWrapper.prototype.renderShort = function renderShort(ctx, destX, destY, destW, destH) {\n    if (!this.isReady()) {\n      return;\n    }\n\n    var map = this._map;\n    var srcX = map.x;\n    var srcY = map.y;\n    var srcW = map.width;\n    var srcH = map.height;\n    var scaleX = destW / (map.marginLeft + srcW + map.marginRight);\n    var scaleY = destH / (map.marginTop + srcH + map.marginBottom);\n    destX += scaleX * map.marginLeft;\n    destY += scaleY * map.marginTop;\n    destW = scaleX * srcW;\n    destH = scaleY * srcH;\n\n    this.render(ctx, srcX, srcY, srcW, srcH, destX, destY, destW, destH);\n  };\n\n  /**\n   * Optimized, non-polymorphic render, requires all 9 params\n   */\n\n\n  ImageWrapper.prototype.render = function render(ctx, srcX, srcY, srcW, srcH, destX, destY, destW, destH) {\n    if (!this.isReady()) {\n      return;\n    }\n\n    var srcImg = this._srcImg;\n\n    if (!isNative && ctx.filter) {\n      var filterImg = _filterRenderer2.default.renderFilter(ctx, this, srcX, srcY, srcW, srcH);\n      if (filterImg) {\n        srcImg = filterImg;\n        srcX = 0;\n        srcY = 0;\n      }\n    }\n\n    ctx.drawImage(srcImg, srcX, srcY, srcW, srcH, destX, destY, destW, destH);\n  };\n\n  ImageWrapper.prototype.getImageData = function getImageData(x, y, width, height) {\n    // initialize a shared imgDataCanvas when/if needed\n    if (_imgDataCanvas === null) {\n      _imgDataCanvas = new Canvas();\n      _imgDataCtx = _imgDataCanvas.getContext('2d');\n    }\n\n    var map = this._map;\n    if (GET_IMAGE_DATA_NOT_SUPPORTED) {\n      throw 'Not supported';\n    }\n    if (!map.width || !map.height) {\n      throw 'Not loaded';\n    }\n\n    x = x || 0;\n    y = y || 0;\n    width = width || map.width;\n    height = height || map.height;\n    _imgDataCanvas.width = width;\n    _imgDataCanvas.height = height;\n\n    _imgDataCtx.clear();\n    this.render(_imgDataCtx, x, y, width, height, 0, 0, width, height);\n    return _imgDataCtx.getImageData(0, 0, width, height);\n  };\n\n  ImageWrapper.prototype.setImageData = function setImageData(data) {};\n\n  ImageWrapper.prototype.destroy = function destroy() {\n    this._srcImg.destroy && this._srcImg.destroy();\n  };\n\n  return ImageWrapper;\n}(_PubSub3.default);\n\nexports.default = ImageWrapper;\n;\n\nImageWrapper.__clearCache__ = function () {\n  ImageCache = {};\n};\n\nImageWrapper.prototype.getSource = ImageWrapper.prototype.getSrcImg;\nImageWrapper.prototype.setSource = ImageWrapper.prototype.setSrcImg;\n\nImageWrapper.prototype.getSourceWidth = ImageWrapper.prototype.getSourceW;\nImageWrapper.prototype.getSourceHeight = ImageWrapper.prototype.getSourceH;\nImageWrapper.prototype.getOrigWidth = ImageWrapper.prototype.getOrigW;\nImageWrapper.prototype.getOrigHeight = ImageWrapper.prototype.getOrigH;\n\nImageWrapper.prototype.setSourceWidth = ImageWrapper.prototype.setSourceW;\nImageWrapper.prototype.setSourceHeight = ImageWrapper.prototype.setSourceH;\n\nImageWrapper.prototype.getMap = ImageWrapper.prototype.getBounds;\nImageWrapper.prototype.setMap = ImageWrapper.prototype.setBounds;\n\nImageWrapper.prototype.isLoaded = ImageWrapper.prototype.isReady;\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/modules/timestep/src/ui/resource/Image.js\n// module id = 43\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/modules/timestep/src/ui/resource/Image.js?");

/***/ },
/* 44 */
/*!********************************************************************!*\
  !*** ./modules/devkit-core/modules/timestep/src/event/Callback.js ***!
  \********************************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nexports.__esModule = true;\n\nvar _Callback = __webpack_require__(/*! lib/Callback */ 45);\n\nvar _Callback2 = _interopRequireDefault(_Callback);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar _exports = {};\n\n/**\n * @license\n * This file is part of the Game Closure SDK.\n *\n * The Game Closure SDK is free software: you can redistribute it and/or modify\n * it under the terms of the Mozilla Public License v. 2.0 as published by Mozilla.\n\n * The Game Closure SDK is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * Mozilla Public License v. 2.0 for more details.\n\n * You should have received a copy of the Mozilla Public License v. 2.0\n * along with the Game Closure SDK.  If not, see <http://mozilla.org/MPL/2.0/>.\n */\n/**\n * @class event.Callback;\n * Namespace shim to bring in Callback from jsio.\n *\n * @doc http://doc.gameclosure.com/api/event.html#class-event.callback\n * @docsrc https://github.com/gameclosure/doc/blob/master/api/event.md\n */\n// FIXME: remove this file\n\n_exports = _Callback2.default;\n\nexports.default = _exports;\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/modules/timestep/src/event/Callback.js\n// module id = 44\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/modules/timestep/src/event/Callback.js?");

/***/ },
/* 45 */
/*!*************************************************************!*\
  !*** ./modules/devkit-core/~/jsio/packages/lib/Callback.js ***!
  \*************************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nexports.__esModule = true;\n\nvar _base = __webpack_require__(/*! base */ 2);\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _exports = {};\n\n_exports = function () {\n  function exports() {\n    _classCallCheck(this, exports);\n\n    this._run = [];\n  }\n\n  exports.prototype.fired = function fired() {\n    return this._fired;\n  };\n\n  exports.prototype.reset = function reset() {\n    this._args = [];\n    this._fired = false;\n  };\n\n  exports.prototype.clear = function clear() {\n    this.reset();\n    this._run = [];\n    this._pending = null;\n    this._stat = null;\n  };\n\n  exports.prototype.forward = function forward(args) {\n    this.run.apply(this, args);\n  };\n\n  exports.prototype.run = function run(ctx, method) {\n    var f = method ? _base.bind.apply(this, arguments) : ctx;\n    if (f) {\n      if (this._fired) {\n        f.apply(this, this._args);\n      } else {\n        this._run.push(f);\n      }\n    }\n    return this;\n  };\n\n  exports.prototype.runOrTimeout = function runOrTimeout(onFire, onTimeout, duration) {\n    if (!onFire && !onTimeout) {\n      return;\n    }\n\n    if (this._fired) {\n      onFire.apply(this, this._args);\n    } else {\n      var f = (0, _base.bind)(this, function () {\n        clearTimeout(timeout);\n        onFire.apply(this, this._args);\n      });\n\n      this.run(f);\n\n      var timeout = setTimeout((0, _base.bind)(this, function () {\n        for (var i = 0, n = this._run.length; i < n; ++i) {\n          if (this._run[i] == f) {\n            this._run.splice(i, 1);\n            break;\n          }\n        }\n\n        onTimeout();\n      }), duration);\n    }\n  };\n\n  exports.prototype.fire = function fire() {\n    if (this._fired) {\n      return;\n    }\n    this._fired = true;\n\n    var cbs = this._run;\n    this._args = arguments;\n    for (var i = 0, len = cbs.length; i < len; ++i) {\n      if (cbs[i]) {\n        cbs[i].apply(this, arguments);\n      }\n    }\n  };\n\n  exports.prototype.chain = function chain(id) {\n    if (!this._pending) {\n      this._pending = {};\n    }\n    if (id === undefined) {\n      id = this._id++;\n    }\n    this._pending[id] = true;\n\n    this.reset();\n    return (0, _base.bind)(this, '_deferred', id);\n  };\n\n  exports.prototype._deferred = function _deferred(id) {\n    if (!this._stat) {\n      this._stat = {};\n    }\n    if (this._stat.hasOwnProperty(id)) {\n      return;\n    }\n\n    this._stat[id] = Array.prototype.slice.call(arguments, 1);\n    var pending = this._pending;\n    delete pending[id];\n    for (var id in pending) {\n      if (pending.hasOwnProperty(id)) {\n        return;\n      }\n    }\n\n    this.fire(this._stat);\n  };\n\n  return exports;\n}();\n\n_exports.prototype._fired = false;\n_exports.prototype._id = 0;\n_exports.prototype._pending = null;\n_exports.prototype.hasFired = _exports.prototype.fired;\nexports.default = _exports;\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/~/jsio/packages/lib/Callback.js\n// module id = 45\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/~/jsio/packages/lib/Callback.js?");

/***/ },
/* 46 */
/*!************************************************************************!*\
  !*** ./modules/devkit-core/modules/timestep/src/ui/resource/loader.js ***!
  \************************************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nexports.__esModule = true;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _base = __webpack_require__(/*! base */ 2);\n\nvar _i18n = __webpack_require__(/*! ./i18n */ 47);\n\nvar _i18n2 = _interopRequireDefault(_i18n);\n\nvar _Callback = __webpack_require__(/*! lib/Callback */ 45);\n\nvar _Callback2 = _interopRequireDefault(_Callback);\n\nvar _Emitter2 = __webpack_require__(/*! event/Emitter */ 9);\n\nvar _Emitter3 = _interopRequireDefault(_Emitter2);\n\nvar _AudioManager = __webpack_require__(/*! AudioManager */ 48);\n\nvar _AudioManager2 = _interopRequireDefault(_AudioManager);\n\nvar _userAgent = __webpack_require__(/*! userAgent */ 7);\n\nvar _userAgent2 = _interopRequireDefault(_userAgent);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _exports = {};\n\n/**\n * @license\n * This file is part of the Game Closure SDK.\n *\n * The Game Closure SDK is free software: you can redistribute it and/or modify\n * it under the terms of the Mozilla Public License v. 2.0 as published by Mozilla.\n\n * The Game Closure SDK is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * Mozilla Public License v. 2.0 for more details.\n\n * You should have received a copy of the Mozilla Public License v. 2.0\n * along with the Game Closure SDK.  If not, see <http://mozilla.org/MPL/2.0/>.\n */\n\n\nvar LOW_RES_KEY = 'low_res_';\nvar LOW_RES_ENABLED = false;\nif (_userAgent2.default.OS_TYPE === 'Android') {\n  LOW_RES_ENABLED = CONFIG.android.enableLowRes;\n} else if (_userAgent2.default.OS_TYPE === 'iPhone OS') {\n  LOW_RES_ENABLED = CONFIG.ios.enableLowRes;\n}\n\n// special application resolution settings\nvar RES_KEY = CONFIG.appID + '.resolution';\nvar _resolution = '';\n\ntry {\n  _resolution = localStorage.getItem(RES_KEY) || '';\n} catch (e) {}\n\nif (_resolution === 'LOW') {\n  LOW_RES_ENABLED = true;\n} else if (_resolution === 'HIGH') {\n  LOW_RES_ENABLED = false;\n}\n\nvar _cache = {};\n\nvar MIME = {\n  '.js': 'text',\n  '.png': 'image',\n  '.jpg': 'image',\n  '.bmp': 'image',\n  '.css': 'css',\n  '.html': 'html',\n  '.mp3': 'audio',\n  '.ogg': 'audio',\n  '.mp4': 'audio',\n  '.3gp': 'audio',\n  '.m4a': 'audio',\n  '.aac': 'audio',\n  '.flac': 'audio',\n  '.mkv': 'audio',\n  '.wav': 'audio'\n};\n\nvar globalItemsToLoad = 0;\nvar globalItemsLoaded = 0;\n\nvar _soundManager = null;\nvar _soundLoader = null;\n\nvar Loader = function (_Emitter) {\n  _inherits(Loader, _Emitter);\n\n  function Loader() {\n    _classCallCheck(this, Loader);\n\n    return _possibleConstructorReturn(this, _Emitter.apply(this, arguments));\n  }\n\n  Loader.prototype.has = function has(src) {\n    return this._map[src];\n  };\n\n  Loader.prototype.restoreMap = function restoreMap() {\n    this._map = this._originalMap;\n  };\n\n  Loader.prototype.getMap = function getMap() {\n    return this._map;\n  };\n\n  Loader.prototype.setMap = function setMap(language) {\n    this.restoreMap();\n    if (!language) {\n      this._map = _i18n2.default.localizeResourceMap(this._map);\n    } else {\n      this._map = _i18n2.default.applyResourceMap(this._map, language);\n    }\n  };\n\n  Loader.prototype.get = function get(file) {\n    return 'resources/images/' + file;\n  };\n\n  Loader.prototype.addSheets = function addSheets(sheets) {\n    Object.keys(sheets).forEach(function (name) {\n      // exclude sheets of the resolution not in use\n      var isLowRes = name.indexOf(LOW_RES_KEY) >= 0;\n      if (LOW_RES_ENABLED !== isLowRes) {\n        return;\n      }\n\n      var sheet = sheets[name];\n      sheet.forEach(function (info) {\n        this._map[info.f] = {\n          sheet: name,\n          x: info.x || 0,\n          y: info.y || 0,\n          w: info.w || 0,\n          h: info.h || 0,\n          scale: info.s || 1,\n          marginTop: info.t || 0,\n          marginRight: info.r || 0,\n          marginBottom: info.b || 0,\n          marginLeft: info.l || 0\n        };\n      }, this);\n    }, this);\n\n    this._originalMap = this._map;\n  };\n\n  Loader.prototype.addAudioMap = function addAudioMap(map) {\n    Object.keys(map).forEach(function (name) {\n      this._audioMap[name] = true;\n    }, this);\n  };\n\n  Loader.prototype.preload = function preload(pathPrefix, opts, cb) {\n    if (typeof opts == 'function') {\n      cb = opts;\n      opts = undefined;\n    }\n\n    // process an array of items, where cb is run at completion of the final one\n    if ((0, _base.isArray)(pathPrefix)) {\n      var chainCb = new _Callback2.default();\n      pathPrefix.forEach(function (prefix) {\n        if (prefix) {\n          this.preload(prefix, opts, chainCb.chain());\n        }\n      }, this);\n      cb && chainCb.run(cb);\n      return chainCb;\n    } else {\n      pathPrefix = pathPrefix.replace(/^\\//, '');\n      // remove leading slash\n      // if an item is found in the map, add that item's sheet to the group.\n      // If there is no sheet in the map (i.e. for sounds), load that file directly.\n      var preloadSheets = {};\n      var map = this._map;\n      for (var uri in map) {\n        if (uri.indexOf(pathPrefix) === 0) {\n          // sprites have sheet; sounds are just by the filename key itself\n          preloadSheets[map[uri] && map[uri].sheet || uri] = true;\n        }\n      }\n\n      var audioMap = this._audioMap;\n      var audioToLoad = {};\n      for (var uri in audioMap) {\n        if (uri.indexOf(pathPrefix) === 0) {\n          audioToLoad[uri] = true;\n        }\n      }\n      var files = Object.keys(preloadSheets);\n      files = files.concat(Object.keys(audioToLoad));\n      // If no files were specified by the preload command,\n      if (files.length == 0) {\n        files = [pathPrefix];\n      }\n\n      var callback = this._loadGroup((0, _base.merge)({ resources: files }, opts));\n      cb && callback.run(cb);\n      return callback;\n    }\n  };\n\n  Loader.prototype.getSound = function getSound(src) {\n    if (!_soundManager) {\n      _soundManager = new _AudioManager2.default({ preload: true });\n      _soundLoader = _soundManager.getAudioLoader();\n    }\n\n    if (_base.GLOBAL.NATIVE && _base.GLOBAL.NATIVE.sound && _base.GLOBAL.NATIVE.sound.preloadSound) {\n      return _base.NATIVE.sound.preloadSound(src);\n    } else {\n      _soundManager.addSound(src);\n      // HACK to make the preloader continue in the browser\n      return {\n        complete: true,\n        loader: _soundLoader\n      };\n    }\n  };\n\n  Loader.prototype.getText = function getText(url) {\n    var xhr = new XMLHttpRequest();\n    xhr.open('GET', url, true);\n    xhr.onreadystatechange = function () {\n      if (this.readyState === 4 && this.status === 200) {\n        _base.CACHE[url] = this.responseText;\n      }\n    };\n    xhr.send();\n    return xhr;\n  };\n\n  Loader.prototype.getImagePaths = function getImagePaths(prefix) {\n    prefix = prefix.replace(/^\\//, '');\n    // remove leading slash\n    var images = [];\n    var map = this._map;\n    for (var uri in map) {\n      if (uri.indexOf(prefix) == 0) {\n        images.push(uri);\n      }\n    }\n    return images;\n  };\n\n  Loader.prototype.getImage = function getImage(src, noWarn) {\n    // create the image\n    var img = new Image();\n    img.crossOrigin = 'use-credentials';\n\n    // find the base64 image if it exists\n    if (Image.get) {\n      var b64 = Image.get(src);\n      if (b64 instanceof Image) {\n        return b64;\n      }\n    }\n\n    if (b64) {\n      img.src = b64;\n      Image.set(src, img);\n    } else {\n      if (!noWarn) {\n        _base.logger.warn('Preload Warning:', src, 'not properly cached!');\n      }\n      img.src = src;\n    }\n\n    return img;\n  };\n\n  Loader.prototype._updateImageMap = function _updateImageMap(map, url, x, y, w, h) {\n    x = x || 0;\n    y = y || 0;\n    w = w == undefined ? -1 : w;\n    h = h == undefined ? -1 : h;\n\n    var info = this._map[url];\n    if (!info || !info.sheet) {\n      map.x = x;\n      map.y = y;\n      map.width = w;\n      map.height = h;\n      map.scale = 1;\n      map.url = url;\n      return;\n    }\n\n    var scale = info.scale || 1;\n\n    // calculate the source rectangle, with margins added to the edges\n    // (disregarding the fact that they may fall off the edge of the sheet)\n    map.x = info.x - info.marginLeft;\n    map.y = info.y - info.marginTop;\n    map.width = info.w + info.marginLeft + info.marginRight;\n    map.height = info.h + info.marginTop + info.marginBottom;\n\n    // Add in any source map options passed in to get the actual offsets\n    map.x += x * scale;\n    map.y += y * scale;\n    if (w > 0) {\n      map.width = w * scale;\n    }\n    if (h > 0) {\n      map.height = h * scale;\n    }\n\n    // now updatea the margins to account for the new source map\n    map.marginLeft = Math.max(0, info.x - map.x);\n    map.marginTop = Math.max(0, info.y - map.y);\n    map.marginRight = Math.max(0, map.x + map.width - (info.x + info.w));\n    map.marginBottom = Math.max(0, map.y + map.height - (info.y + info.h));\n\n    // and re-offset the source map to exclude margins\n    map.x += map.marginLeft;\n    map.y += map.marginTop;\n    map.width -= map.marginLeft + map.marginRight;\n    map.height -= map.marginTop + map.marginBottom;\n\n    // the scale of the source image, if scaled in a spritesheet\n    map.scale = scale;\n    map.url = info.sheet;\n    return map;\n  };\n\n  Loader.prototype._getRaw = function _getRaw(type, src, copy, noWarn) {\n    // always return the cached copy unless specifically requested not to\n    if (!copy && _cache[src]) {\n      return _cache[src];\n    }\n    var res = null;\n\n    switch (type) {\n\n      case 'audio':\n        res = this.getSound(src);\n        break;\n\n      case 'image':\n        res = this.getImage(src, noWarn);\n        break;\n\n      case 'text':\n        res = this.getText(src);\n        break;\n\n      default:\n        _base.logger.error('Preload Error: Unknown Type', type);\n    }\n    return _cache[src] = res;\n  };\n\n  Loader.prototype._loadGroup = function _loadGroup(opts, cb) {\n    var timeout = opts.timeout;\n    var callback = new _Callback2.default();\n    var that = this;\n\n    // compute a list of images using file extensions\n    var resources = opts.resources || [];\n    var n = resources.length || 0;\n    var loadableResources = [];\n\n    for (var i = 0; i < n; ++i) {\n      var ext = resources[i].substring(resources[i].lastIndexOf('.')).split('|')[0];\n      var type = MIME[ext];\n      var found = false;\n      var foundCount = 0;\n\n      var requested;\n\n      for (var j = 0; j < this._requestedResources.length; j++) {\n        requested = this._requestedResources[j];\n\n        if (requested.type === type && requested.resource === resources[i]) {\n          found = true;\n          foundCount++;\n          break;\n        }\n      }\n\n      if (!found) {\n        if (type === 'image' || type === 'audio' || type === 'text') {\n          requested = {\n            type: type,\n            resource: resources[i]\n          };\n\n          loadableResources.push(requested);\n\n          this._requestedResources.push(requested);\n        }\n\n        if (type == 'image' && _base.GLOBAL.NATIVE && _base.NATIVE.gl) {\n          _base.NATIVE.gl.touchTexture(resources[i]);\n        }\n      }\n    }\n\n    // If no resources were loadable...\n    if (!loadableResources.length) {\n      if (!foundCount) {\n        _base.logger.warn('Preload Fail: No Loadable Resources Found');\n      }\n\n      if (cb) {\n        callback.run(cb);\n      }\n\n      callback.fire();\n\n      return callback;\n    }\n\n    // do the preload asynchronously (note that base64 is synchronous, only downloads are asynchronous)\n    var nextIndexToLoad = 0;\n    var numResources = loadableResources.length;\n    globalItemsToLoad += numResources;\n    var parallel = Math.min(numResources, opts.parallel || 5);\n    // how many should we try to download at a time?\n    var numLoaded = 0;\n\n    var loadResource = (0, _base.bind)(this, function () {\n      var currentIndex = nextIndexToLoad++;\n      var src = loadableResources[currentIndex];\n      var res;\n      if (src) {\n        res = this._getRaw(src.type, src.resource, false, true);\n      } else {\n        // End of resource list, done!\n        return;\n      }\n\n      var next = function next(failed) {\n        // If already complete, stub this out\n        if (numLoaded >= numResources) {\n          return;\n        }\n\n        // Set stubs for the reload and load events so that code\n        // elsewhere can blindly call these without causing problems.\n        // An alternative would be to set these to null but not every\n        // piece of code that uses this does the right checks.\n        res.onreload = res.onload = res.onerror = function () {};\n\n        // The number of loads (success or failure) has increased.\n        ++numLoaded;\n        ++globalItemsLoaded;\n\n        // REALLY hacky progress tracker\n        if (globalItemsLoaded === globalItemsToLoad) {\n          globalItemsLoaded = globalItemsToLoad = 0;\n        }\n\n        // If we have loaded all of the resources,\n        if (numLoaded >= numResources) {\n          // Call the progress callback with isComplete == true\n          cb && cb(src, failed, true, numLoaded, numResources);\n\n          // If a timeout was set, clear it\n          if (_timeout) {\n            clearTimeout(_timeout);\n          }\n\n          // Fire the completion callback chain\n          _base.logger.log('Preload Complete:', src.resource);\n          callback.fire();\n        } else {\n          // Call the progress callback with the current progress\n          cb && cb(src, failed, false, numLoaded, numResources);\n\n          // Restart on next image in list\n          setTimeout(loadResource, 0);\n        }\n      };\n\n      // IF this is the type of resource that has a reload method,\n      if (res.reload && res.complete) {\n        // Use the magic of closures to create a chain of onreload\n        // completion callbacks.  This is really important because\n        // we can be be preloading the same resource twice, and we can\n        // also be simultaneously preloading two groups at once.\n        var prevOnLoad = res.onreload;\n        var prevOnError = res.onerror;\n\n        // When the resource completes loading, either with success\n        // or failure:\n        res.onreload = function () {\n          // If previous callback exists, run it first in a chain\n          prevOnLoad && prevOnLoad();\n\n          // React to successful load of this resource\n          next(false);\n        };\n\n        res.onerror = function () {\n          // If previous callback exists, run it first in a chain\n          prevOnError && prevOnError();\n\n          // React to failed load of this resource\n          next(true);\n        };\n\n        // Start it reloading\n        res.reload();\n      } else if (res.complete) {\n        if (res.loader) {\n          // real sound loading with AudioContext ...\n          res.loader.load([src.resource], next);\n        } else {\n          // Let subscribers know an image was loaded\n          if (src.type === 'image') {\n            that.emit(Loader.IMAGE_LOADED, res, src);\n          }\n          // Since the resource has already completed loading, go\n          // ahead and invoke the next callback indicating the previous\n          // success or failure.\n          next(res.failed === true);\n        }\n      } else {\n        // The comments above about onreload callback chaining equally\n        // apply here.  See above.\n        var prevOnLoad = res.onload;\n        var prevOnError = res.onerror;\n\n        // When the resource completes loading, either with success\n        // or failure:\n        res.onload = function () {\n          // If previous callback exists, run it first in a chain\n          prevOnLoad && prevOnLoad();\n\n          // Reset fail flag\n          res.failed = false;\n\n          // Let subscribers know an image was loaded\n          if (src.type === 'image') {\n            that.emit(Loader.IMAGE_LOADED, res, src);\n          }\n\n          // React to successful load of this resource\n          next(false);\n        };\n\n        res.onerror = function () {\n          // If previous callback exists, run it first in a chain\n          prevOnError && prevOnError();\n\n          // Set fail flag\n          res.failed = true;\n\n          // React to failed load of this resource\n          next(true);\n        };\n      }\n    });\n\n    var _timeout = null;\n    setTimeout(function () {\n      // spin up n simultaneous loaders!\n      for (var i = 0; i < parallel; ++i) {\n        loadResource();\n      }\n\n      // register timeout call\n      if (timeout) {\n        _timeout = setTimeout(function () {\n          _base.logger.warn('Preload Timeout: Something Failed to Load');\n          callback.fire();\n          numLoaded = numResources;\n        }, timeout);\n      }\n    }, 0);\n    return callback;\n  };\n\n  _createClass(Loader, [{\n    key: 'progress',\n    get: function get() {\n      return globalItemsToLoad > 0 ? globalItemsLoaded / globalItemsToLoad : 1;\n    }\n  }]);\n\n  return Loader;\n}(_Emitter3.default);\n\nLoader.prototype._map = {};\nLoader.prototype._originalMap = {};\nLoader.prototype._audioMap = {};\nLoader.prototype._requestedResources = [];\nLoader.IMAGE_LOADED = 'imageLoaded';\n\n_exports = new Loader();\n\n_exports.IMAGE_LOADED = Loader.IMAGE_LOADED;\n_exports.LOW_RES_ENABLED = LOW_RES_ENABLED;\n_exports.LOW_RES_KEY = LOW_RES_KEY;\n\n_exports.setLowResEnabled = function (value) {\n  LOW_RES_ENABLED = value;\n  _exports.LOW_RES_ENABLED = value;\n};\n\nexports.default = _exports;\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/modules/timestep/src/ui/resource/loader.js\n// module id = 46\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/modules/timestep/src/ui/resource/loader.js?");

/***/ },
/* 47 */
/*!**********************************************************************!*\
  !*** ./modules/devkit-core/modules/timestep/src/ui/resource/i18n.js ***!
  \**********************************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nexports.__esModule = true;\n\nvar _base = __webpack_require__(/*! base */ 2);\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _exports = {};\n\n/**\n * @license\n * This file is part of the Game Closure SDK.\n *\n * The Game Closure SDK is free software: you can redistribute it and/or modify\n * it under the terms of the Mozilla Public License v. 2.0 as published by Mozilla.\n\n * The Game Closure SDK is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * Mozilla Public License v. 2.0 for more details.\n\n * You should have received a copy of the Mozilla Public License v. 2.0\n * along with the Game Closure SDK.  If not, see <http://mozilla.org/MPL/2.0/>.\n */\nvar LOCALE_CODES = navigator.language && navigator.language.split('-');\nvar LANGUAGE_CODE = (LOCALE_CODES[0] || 'en').toLowerCase();\nvar REGION_CODE = (LOCALE_CODES[1] || 'US').toUpperCase();\n\nvar EU_REGIONS = ['AD', 'AT', 'BE', 'BL', 'CY', 'DE', 'EE', 'ES', 'EU', 'FI', 'FR', 'GR', 'IE', 'IT', 'LU', 'LV', 'MC', 'ME', 'MT', 'MQ', 'NL', 'PM', 'PT', 'RE', 'SI', 'SK', 'SM', 'VA', 'YT'];\n\nvar defaultOpts = {\n  languageCode: LANGUAGE_CODE,\n  regionCode: REGION_CODE,\n  stringsPath: 'resources/strings/',\n  defaultStringsFile: 'en.json'\n};\n\n/**\n * The i18n Class provides localization support for string JSON files.\n */\n_exports = function () {\n  function exports(opts) {\n    _classCallCheck(this, exports);\n\n    opts = (0, _base.merge)(opts, defaultOpts);\n    this._languageCode = opts.languageCode;\n    this._regionCode = opts.regionCode;\n    this._stringsPath = opts.stringsPath;\n    this._defaultStringsFile = opts.defaultStringsFile;\n    this._strings = {};\n\n    this.loadStrings(this._stringsPath, this._defaultStringsFile);\n  }\n\n  exports.prototype.getLanguageCode = function getLanguageCode() {\n    return this._languageCode;\n  };\n\n  exports.prototype.getRegionCode = function getRegionCode() {\n    return this._regionCode;\n  };\n\n  exports.prototype.loadStrings = function loadStrings(path, defaultFile) {\n    var lc = this._languageCode;\n    var rc = this._regionCode;\n    var locPath = path + lc + '-' + rc + '.json';\n    var langPath = path + lc + '.json';\n    var defPath = path + defaultFile;\n    var data = _base.CACHE[locPath] || _base.CACHE[langPath] || _base.CACHE[defPath];\n    if (data) {\n      try {\n        this._strings = JSON.parse(data);\n      } catch (e) {\n        console.error('Error loading strings JSON:');\n        console.error(e);\n      }\n    } else {\n      console.error('No JSON found for files:', locPath, langPath, defPath);\n    }\n  };\n\n  exports.prototype.getString = function getString(key) {\n    var value = this._strings[key];\n    return value !== undefined ? value : key;\n  };\n\n  return exports;\n}();\n\n/**\n * This function is used by resource/loader to map localized resources to\n * the base resources directory automatically.\n *\n * To leverage this resource localization, structure your resource\n * directories like this:\n *\n * default directory:\n *   resources\n *   └── images\n *       └── hero.png\n *\n * language localized directory:\n *   resources-zh\n *   └── images\n *       └── hero.png\n *\n * regional localized directory:\n *   resources-zh-TW\n *   └── images\n *       └── hero.png\n *\n * You can then always use resources/images/hero.png, and the image will\n * automatically point to the best image for your user's language or region.\n *\n * It also supports regional localization for the EU, to aid in localizing\n * images of currency or currency symbols.\n */\n_exports.localizeResourceMap = function (map) {\n  var localizedMap = {};\n  // directories listed in order of priority\n  var localeRes = 'resources-' + LANGUAGE_CODE + '-' + REGION_CODE;\n  var langRes = 'resources-' + LANGUAGE_CODE;\n  var regionRes = 'resources-' + REGION_CODE;\n  var euroRes = 'resources-EU';\n  for (var key in map) {\n    var path = key;\n    var localeIndex = key.indexOf(localeRes);\n    var langIndex = key.indexOf(langRes);\n    var regionIndex = key.indexOf(regionRes);\n    var euroIndex = key.indexOf(euroRes);\n    // replace localized path with default path\n    // i.e. resources-en-US can now be accessed by resources\n    if (localeIndex === 0) {\n      path = 'resources' + key.substring(localeRes.length);\n    } else if (langIndex === 0) {\n      path = 'resources' + key.substring(langRes.length);\n    } else if (regionIndex === 0) {\n      path = 'resources' + key.substring(regionRes.length);\n    } else if (euroIndex === 0 && EU_REGIONS.indexOf(REGION_CODE) !== -1) {\n      path = 'resources' + key.substring(euroRes.length);\n    }\n    localizedMap[path] = map[key];\n  }\n  return localizedMap;\n};\n\n_exports.applyResourceMap = function (map, language) {\n  var localizedMap = {};\n  var langRes = 'resources-' + language;\n  for (var key in map) {\n    var path = key;\n    var langIndex = key.indexOf(langRes);\n    if (langIndex === 0) {\n      path = 'resources' + key.substring(langRes.length);\n      localizedMap[path] = map[key];\n    } else if (Object.keys(localizedMap).indexOf(path) < 0) {\n      // without this block, the same name default resource would replace the localized resource\n      localizedMap[path] = map[key];\n    }\n  }\n  return localizedMap;\n};\n\nexports.default = _exports;\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/modules/timestep/src/ui/resource/i18n.js\n// module id = 47\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/modules/timestep/src/ui/resource/i18n.js?");

/***/ },
/* 48 */
/*!******************************************************************!*\
  !*** ./modules/devkit-core/modules/timestep/src/AudioManager.js ***!
  \******************************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nexports.__esModule = true;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _base = __webpack_require__(/*! base */ 2);\n\nvar _device = __webpack_require__(/*! device */ 1);\n\nvar _device2 = _interopRequireDefault(_device);\n\nvar _path = __webpack_require__(/*! util/path */ 15);\n\nvar _path2 = _interopRequireDefault(_path);\n\nvar _Emitter2 = __webpack_require__(/*! event/Emitter */ 9);\n\nvar _Emitter3 = _interopRequireDefault(_Emitter2);\n\nvar _AudioLoader = __webpack_require__(/*! ui/backend/sound/AudioLoader */ 49);\n\nvar _AudioLoader2 = _interopRequireDefault(_AudioLoader);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _exports = {};\n\n/**\n* @license\n* This file is part of the Game Closure SDK.\n*\n* The Game Closure SDK is free software: you can redistribute it and/or modify\n* it under the terms of the Mozilla Public License v. 2.0 as published by Mozilla.\n\n* The Game Closure SDK is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n* Mozilla Public License v. 2.0 for more details.\n\n* You should have received a copy of the Mozilla Public License v. 2.0\n* along with the Game Closure SDK.  If not, see <http://mozilla.org/MPL/2.0/>.\n*/\n/**\n * @class AudioManager;\n * Implements platform-aware Audio support.\n *\n * @doc http://doc.gameclosure.com/api/sound.html\n * @docsrc https://github.com/gameclosure/doc/blob/master/api/sound.md\n */\n\n\n// An API for playing named sounds. Sounds can be given a single file source\n// or multiple sources which will be chosen at random at play time. Sounds may\n// also be given a default volume and loop boolean.\n//\n// Only one background sound can be played at a time. They are streamed, not\n// preloaded, on native.\n// define AudioContext as best as possible; it may not exist\nvar AudioContext = window.AudioContext || window.webkitAudioContext;\n\n// global private variables\nvar _ctx = null;\n\n// use an AudioContext if available, otherwise fallback to Audio\nif (AudioContext) {\n  try {\n    _ctx = new AudioContext();\n  } catch (e) {\n    // most commonly due to hardware limits on AudioContext instances\n    _base.logger.warn('HTML5 AudioContext init failed, falling back to Audio!');\n  }\n} else {\n  _base.logger.warn('HTML5 AudioContext not supported, falling back to Audio!');\n}\n\nvar _muteAll = false;\nvar _registeredAudioManagers = [];\n\n/**\n * RawAudio Class\n *\n * Extend the local instance of Audio objects.\n * Created and used by MultiSound Class.\n */\n\nvar RawAudio = function () {\n  function RawAudio() {\n    _classCallCheck(this, RawAudio);\n\n    if (typeof Audio === 'undefined') {\n      return null;\n    }\n\n    // we can't extend an HTML5 audio object in a browser, so do our best\n    var audio = new Audio();\n    var proto = RawAudio.prototype;\n    for (var i in proto) {\n      if (!audio[i] && proto.hasOwnProperty(i)) {\n        audio[i] = proto[i];\n      }\n    }\n\n    var playTimeout = null;\n    audio.oldPlay = audio.play;\n    audio.play = function () {\n      if (audio.readyState === 4) {\n        audio.oldPlay();\n      } else {\n        playTimeout = setTimeout(audio.play, 32);\n      }\n    };\n    audio.oldPause = audio.pause;\n    audio.pause = function () {\n      if (playTimeout !== null) {\n        clearTimeout(playTimeout);\n        playTimeout = null;\n      }\n      audio.oldPause();\n    };\n\n    return audio;\n  }\n\n  RawAudio.prototype.stop = function stop() {\n    !this.paused && this.pause();\n    if ((this.NETWORK_LOADING === undefined || this.networkState !== this.NETWORK_LOADING || this.networkState !== this.NETWORK_NO_SOURCE) && !isNaN(this.duration)) {\n      this.currentTime = 0;\n    }\n  };\n\n  return RawAudio;\n}();\n\n/**\n * MultiSound Class\n *\n * A sound object that can play one of a collection of audio sources.\n * Created and used by exported AudioManager Class.\n */\n\n\nvar MultiSound = function () {\n  function MultiSound(soundManager, name, opts) {\n    _classCallCheck(this, MultiSound);\n\n    opts = typeof opts === 'string' ? { sources: [opts] } : opts || {};\n\n    this._soundManager = soundManager;\n    this._name = name;\n    this._isPaused = false;\n    this._isStopped = false;\n    this._lastSrc = null;\n    this._sources = [];\n    this._paths = [];\n\n    this._useAudioContext = false;\n    this._loader = null;\n    this._gainNode = null;\n\n    this.loop = opts.loop !== undefined ? opts.loop : opts.background;\n    this.isBackgroundMusic = opts.background;\n\n    // if a list of file names is given in sources, load them as alternative\n    // clips for this sound. Else, assume the only clip for this sound\n    // is the file with its same name\n    var srcList = opts.sources || [name];\n    var sources = this._sources;\n    var paths = this._paths;\n    var basePath = soundManager.getPath();\n    var ext = soundManager.getExt();\n    var extTestExp = new RegExp(ext + '$', 'i');\n    var loop = this.loop;\n    var volume = opts.volume !== undefined ? opts.volume : 1;\n\n    if (_ctx) {\n      this._useAudioContext = true;\n      this._loader = soundManager.getAudioLoader();\n      this._gainNode = _ctx.createGain();\n      this._gainNode.connect(_ctx.destination);\n      this._gainNode.gain.value = volume;\n    }\n\n    for (var i = 0, src; src = srcList[i]; ++i) {\n      // file paths are relative to the base path\n      var fullPath = _path2.default.join(basePath, opts.path, src);\n      // append the extension if not already provided\n      if (!extTestExp.test(fullPath)) {\n        fullPath += ext;\n      }\n      paths.push(fullPath);\n\n      // prefer AudioContext over Audio\n      if (!this._useAudioContext) {\n        var audio = new RawAudio();\n        if (audio) {\n          audio.loop = loop;\n          audio.volume = volume;\n          audio.isBackgroundMusic = opts.background;\n          audio.src = fullPath;\n          audio.preload = audio.readyState !== 4 || soundManager._preload && !opts.background ? 'auto' : 'none';\n\n          sources.push(audio);\n          if (audio.isBackgroundMusic && _base.NATIVE && _base.NATIVE.sound) {\n            _base.NATIVE.sound.registerMusic(fullPath, audio);\n          }\n        }\n      }\n    }\n  }\n\n  MultiSound.prototype.getVolume = function getVolume() {\n    if (this._useAudioContext) {\n      return this._gainNode.gain.value;\n    } else {\n      var src = this._sources[0];\n      return src && src.volume || 0;\n    }\n  };\n\n  MultiSound.prototype.setVolume = function setVolume(volume) {\n    if (this._useAudioContext) {\n      this._gainNode.gain.value = volume;\n    } else {\n      for (var i = 0, src; src = this._sources[i]; ++i) {\n        src.volume = volume;\n      }\n    }\n  };\n\n  MultiSound.prototype.stop = function stop() {\n    this._isStopped = true;\n    if (this._useAudioContext) {\n      if (!this.isBackgroundMusic && this.lastSrc) {\n        this.lastSrc.stop();\n      }\n      // our lastSrc setter will stop this automatically for background music, see below\n      this.lastSrc = null;\n    } else {\n      for (var i = 0, src; src = this._sources[i]; ++i) {\n        src.stop();\n      }\n    }\n  };\n\n  MultiSound.prototype.pause = function pause() {\n    this._isPaused = true;\n    if (this._useAudioContext) {\n      this.stop();\n    } else {\n      for (var i = 0, src; src = this._sources[i]; ++i) {\n        src.pause();\n      }\n    }\n  };\n\n  MultiSound.prototype.isPaused = function isPaused() {\n    return this._isPaused;\n  };\n\n  MultiSound.prototype.isStopped = function isStopped() {\n    return this._isStopped;\n  };\n\n  MultiSound.prototype.isPlaying = function isPlaying() {\n    var isPlaying = false;\n    if (!this._useAudioContext && this.lastSrc !== null) {\n      var cur = this.lastSrc.currentTime;\n      var dur = this.lastSrc.duration;\n      // NaN duration means the duration isn't loaded yet,\n      // meaning the sound was started very recently. Since\n      // this.lastSrc is defined, we know that the sound has\n      // been played, so it's playing unless it's paused :)\n      if (isNaN(dur) || cur < dur) {\n        isPlaying = !this.isPaused();\n      }\n    }\n    return isPlaying;\n  };\n\n  MultiSound.prototype.getDuration = function getDuration() {\n    return this.lastSrc && this.lastSrc.duration || 0;\n  };\n\n  MultiSound.prototype.getTime = function getTime() {\n    return this.lastSrc && this.lastSrc.currentTime || 0;\n  };\n\n  MultiSound.prototype.setTime = function setTime(t) {\n    if (!this._useAudioContext && this.lastSrc && this.isBackgroundMusic) {\n      if (this.lastSrc.duration) {\n        this.lastSrc.currentTime = t;\n      } else {}\n    }\n  };\n\n  MultiSound.prototype.play = function play(opts) {\n    opts = opts || {};\n    var loop = opts.loop || this.loop;\n    var time = opts.time || 0;\n    var duration = opts.duration ? opts.duration * 1000 : undefined;\n\n    if (this._useAudioContext) {\n      var loader = this._loader;\n      var index = Math.random() * this._paths.length | 0;\n      var path = this._paths[index];\n      var buffer = loader.getBuffer(path);\n      if (!buffer) {\n        loader.doOnLoad(path, (0, _base.bind)(this, function (buffers) {\n          // handle async pause and stop\n          if (!this._isPaused && !this._isStopped) {\n            this._playFromBuffer(buffers[0], loop, time, duration);\n          }\n        }));\n      } else {\n        this._playFromBuffer(buffer, loop, time, duration);\n      }\n    } else {\n      var src = this._getRandom();\n      src.play();\n      if (src.muted) {\n        // Chrome bug? Audio objects with muted set before they\n        // are played won't be muted, so toggle the mute state\n        // twice after calling play.\n        src.muted = false;\n        src.muted = true;\n      }\n      this.setTime(time);\n      if (duration !== undefined) {\n        setTimeout((0, _base.bind)(this, 'pause'), duration);\n      }\n      this.lastSrc = src;\n    }\n    this._isPaused = false;\n    this._isStopped = false;\n  };\n\n  MultiSound.prototype._playFromBuffer = function _playFromBuffer(buffer, loop, time, duration) {\n    if (buffer) {\n      var src = _ctx.createBufferSource();\n      src.buffer = buffer;\n      src.loop = loop;\n      src.connect(this._gainNode);\n      if (duration !== undefined) {\n        src.start(_ctx.currentTime, time, duration);\n      } else {\n        src.start(_ctx.currentTime, time);\n      }\n      this.lastSrc = src;\n    }\n  };\n\n  MultiSound.prototype._getRandom = function _getRandom() {\n    var index = Math.random() * this._sources.length | 0;\n    return this._sources[index];\n  };\n\n  _createClass(MultiSound, [{\n    key: 'lastSrc',\n    set: function set(src) {\n      if (this.isBackgroundMusic && this._lastSrc) {\n        this._lastSrc.stop(0);\n      }\n      this._lastSrc = src;\n    },\n    get: function get() {\n      return this._lastSrc;\n    }\n  }]);\n\n  return MultiSound;\n}();\n\n/**\n * AudioManager Class\n *\n * @extends event.Emitter\n */\n\n\n_exports = function (_Emitter) {\n  _inherits(exports, _Emitter);\n\n  function exports(opts) {\n    _classCallCheck(this, exports);\n\n    opts = opts || {};\n\n    var _this = _possibleConstructorReturn(this, _Emitter.call(this, opts));\n\n    _this._loader = null;\n    _this.setPath(opts.path);\n    _this._map = opts.files || opts.map;\n    _this._preload = opts.preload;\n    _this._sounds = {};\n    _this._isMusicMuted = false;\n    _this._areEffectsMuted = false;\n    _this._currentMusic = null;\n    _this._key = '';\n\n    // register instances of AudioManager for global app mute\n    _this.setMuted(_muteAll);\n    _registeredAudioManagers.push(_this);\n\n    opts.persist && _this.persistState(opts.persist);\n\n    // pass the global AudioContext instance to AudioLoaders\n    _ctx && _this.setAudioContext();\n\n    // determine whether browser supports mp3 or ogg. Default to mp3 if\n    // both are supported. Native will return true for everything, but\n    // on native, we store ogg files as .mp3 files, so return .mp3...\n    if (typeof Audio !== 'undefined') {\n      var sound = new Audio();\n      if (sound.canPlayType('audio/mpeg')) {\n        _this._ext = '.mp3';\n      } else if (sound.canPlayType('audio/ogg')) {\n        _this._ext = '.ogg';\n      }\n    } else {\n      _base.logger.warn('HTML5 Audio not supported!');\n    }\n\n    if (_this._ext === undefined) {\n      _this._ext = '.mp3';\n      _base.logger.warn('Warning: sound support unclear - defaulting to .mp3');\n    }\n\n    // add sounds to the audio API's list of sounds and preload them\n    for (var key in _this._map) {\n      var item = _this._map[key];\n      _this.addSound(key, item);\n    }\n\n    // AudioContext preloading\n    if (_ctx && _this._preload) {\n      var urls = [];\n      for (var key in _this._sounds) {\n        var sound = _this._sounds[key];\n        urls = urls.concat(sound._paths);\n      }\n      _this.preloadSounds(urls);\n    }\n    return _this;\n  }\n\n  exports.prototype.getAudioContext = function getAudioContext() {\n    return _ctx;\n  };\n\n  exports.prototype.setAudioContext = function setAudioContext() {\n    if (this._loader) {\n      this._loader.setAudioContext(_ctx);\n    } else {\n      this._loader = new _AudioLoader2.default({ ctx: _ctx });\n    }\n  };\n\n  exports.prototype.getAudioLoader = function getAudioLoader() {\n    return this._loader;\n  };\n\n  exports.prototype.preloadSounds = function preloadSounds(urls) {\n    // used for AudioContext only\n    this._loader && this._loader.load(urls);\n  };\n\n  exports.prototype.getExt = function getExt() {\n    return this._ext;\n  };\n\n  exports.prototype.getPath = function getPath() {\n    return this._path;\n  };\n\n  exports.prototype.setPath = function setPath(path) {\n    if (path) {\n      path = path.replace(/\\/$/, '');\n    }\n    this._path = path || '';\n  };\n\n  exports.prototype.addSound = function addSound(name, opts) {\n    this._sounds[name] = new MultiSound(this, name, opts);\n  };\n\n  exports.prototype.persistState = function persistState(key) {\n    this._key = key;\n\n    var value = localStorage.getItem(this._key);\n    if (value) {\n      try {\n        value = JSON.parse(value);\n      } catch (e) {}\n    }\n\n    if (value) {\n      _base.logger.log('Restoring Audio API state!');\n      this.setMusicMuted(value.isMusicMuted);\n      this.setEffectsMuted(value.areEffectsMuted);\n    }\n  };\n\n  exports.prototype._persist = function _persist() {\n    if (this._key !== '') {\n      localStorage.setItem(this._key, JSON.stringify({\n        isMusicMuted: this._isMusicMuted,\n        areEffectsMuted: this._areEffectsMuted\n      }));\n    }\n  };\n\n  exports.prototype.getMuted = function getMuted() {\n    return this._isMusicMuted && this._areEffectsMuted;\n  };\n\n  exports.prototype.getMusicMuted = function getMusicMuted() {\n    return this._isMusicMuted;\n  };\n\n  exports.prototype.getEffectsMuted = function getEffectsMuted() {\n    return this._areEffectsMuted;\n  };\n\n  exports.prototype.setMuted = function setMuted(isMuted) {\n    this.setMusicMuted(isMuted);\n    this.setEffectsMuted(isMuted);\n  };\n\n  exports.prototype.setMusicMuted = function setMusicMuted(isMusicMuted) {\n    if (_muteAll) {\n      isMusicMuted = true;\n    }\n    this._isMusicMuted = isMusicMuted;\n    this._persist();\n    // resume music on unmute\n    if (this.currentMusic) {\n      this.currentMusic.pause();\n      if (!isMusicMuted) {\n        this.currentMusic.play();\n      }\n    }\n  };\n\n  exports.prototype.setEffectsMuted = function setEffectsMuted(areEffectsMuted) {\n    if (_muteAll) {\n      areEffectsMuted = true;\n    }\n    this._areEffectsMuted = areEffectsMuted;\n    this._persist();\n    if (areEffectsMuted) {\n      for (var key in this._sounds) {\n        var sound = this._sounds[key];\n        if (!sound.isBackgroundMusic) {\n          sound.stop();\n        }\n      }\n    }\n  };\n\n  exports.prototype.getSound = function getSound(name) {\n    var sound = this._sounds[name];\n    if (!sound) {\n      _base.logger.warn('Warning: no sound named ' + name);\n    }\n    return sound;\n  };\n\n  exports.prototype.setVolume = function setVolume(name, volume) {\n    var sound = this.getSound(name);\n    if (sound) {\n      sound.setVolume(volume);\n      return true;\n    }\n    return false;\n  };\n\n  exports.prototype.getVolume = function getVolume(name) {\n    var sound = this.getSound(name);\n    if (sound) {\n      return sound.getVolume();\n    } else {\n      return null;\n    }\n  };\n\n  exports.prototype.setTime = function setTime(name, t) {\n    var sound = this.getSound(name);\n    if (!sound) {\n      return false;\n    }\n    sound.setTime(t || 0);\n    return true;\n  };\n\n  exports.prototype.getTime = function getTime(name) {\n    var sound = this.getSound(name);\n    if (!sound) {\n      return false;\n    }\n    return sound.getTime();\n  };\n\n  exports.prototype.getDuration = function getDuration(name) {\n    var sound = this.getSound(name);\n    if (!sound) {\n      return false;\n    }\n    return sound.getDuration();\n  };\n\n  exports.prototype.play = function play(name, opts) {\n    var sound = this.getSound(name);\n    if (!sound) {\n      return false;\n    }\n\n    opts = opts || {};\n    var isBackgroundMusic = sound.isBackgroundMusic;\n    if (isBackgroundMusic) {\n      // some platforms enforce only one simultaneous background music\n      // (native) while others do not.  Enforce it always.\n      if (this.currentMusic) {\n        this.currentMusic.stop();\n      }\n      this.currentMusic = sound;\n      // if we're muted, make sure to resume the music if we unmute\n      if (!this._isMusicMuted) {\n        sound.play(opts);\n      }\n    } else if (!this._areEffectsMuted) {\n      sound.play(opts);\n    }\n    return true;\n  };\n\n  exports.prototype.pause = function pause(name) {\n    var sound = this.getSound(name);\n    if (!sound) {\n      return false;\n    }\n    // if muted and we pause current music, don't resume it on unmute\n    if (this.currentMusic === sound) {\n      this.currentMusic = null;\n    }\n    sound.pause();\n    return true;\n  };\n\n  exports.prototype.stop = function stop(name) {\n    var sound = this.getSound(name);\n    if (!sound) {\n      return false;\n    }\n    // if muted and we pause current music, don't resume it on unmute\n    if (this.currentMusic === sound) {\n      this.currentMusic = null;\n    }\n    sound.stop();\n    return true;\n  };\n\n  exports.prototype.isPaused = function isPaused(name) {\n    var sound = this.getSound(name);\n    if (!sound) {\n      return false;\n    }\n    return sound.isPaused();\n  };\n\n  exports.prototype.isPlaying = function isPlaying(name) {\n    var sound = this.getSound(name);\n    if (!sound) {\n      return false;\n    }\n    return sound.isPlaying();\n  };\n\n  exports.prototype.pauseBackgroundMusic = function pauseBackgroundMusic() {\n    this.currentMusic && this.currentMusic.pause();\n  };\n\n  _createClass(exports, [{\n    key: 'currentMusic',\n    set: function set(music) {\n      if (this._currentMusic) {\n        this._currentMusic.stop();\n      }\n      this._currentMusic = music;\n    },\n    get: function get() {\n      return this._currentMusic;\n    }\n  }]);\n\n  return exports;\n}(_Emitter3.default);\n\n_exports.prototype.playBackgroundMusic = _exports.prototype.play;\n// expose a global mute function (GC.app.muteAll)\n_exports.muteAll = function (mute) {\n  _muteAll = mute;\n  for (var i = 0, len = _registeredAudioManagers.length; i < len; i++) {\n    _registeredAudioManagers[i].setMuted(mute);\n  }\n};\n\nexports.default = _exports;\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/modules/timestep/src/AudioManager.js\n// module id = 48\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/modules/timestep/src/AudioManager.js?");

/***/ },
/* 49 */
/*!**********************************************************************************!*\
  !*** ./modules/devkit-core/modules/timestep/src/ui/backend/sound/AudioLoader.js ***!
  \**********************************************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nexports.__esModule = true;\n\nvar _base = __webpack_require__(/*! base */ 2);\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _exports = {};\n\n/**\n * @license\n * This file is part of the Game Closure SDK.\n *\n * The Game Closure SDK is free software: you can redistribute it and/or modify\n * it under the terms of the Mozilla Public License v. 2.0 as published by Mozilla.\n\n * The Game Closure SDK is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * Mozilla Public License v. 2.0 for more details.\n\n * You should have received a copy of the Mozilla Public License v. 2.0\n * along with the Game Closure SDK.  If not, see <http://mozilla.org/MPL/2.0/>.\n */\nvar _ctx = null;\nvar _bufferMap = {};\nvar _loadingMap = {};\nvar _onLoadMap = {};\n\n/*\n * Private fn to react to buffer loading / errors; guarantees that preload\n * callbacks get fired regardless of success so that nothing gets held up;\n * however, does not call individual sound onload callbacks on errors\n */\nfunction onResponse(url, index, batch, buffer) {\n  if (!buffer) {\n    _base.logger.error('Error decoding audio file data:', url);\n  } else {\n    batch.buffers[index] = _bufferMap[url] = buffer;\n    // on load callbacks for individual sounds\n    var cb = _onLoadMap[url];\n    if (cb) {\n      cb([buffer]);\n      _onLoadMap[url] = null;\n    }\n  }\n\n  _loadingMap[url] = false;\n  // batch callback for preloading, called regardless of success\n  if (++batch.loadedCount === batch.fileCount) {\n    batch.callback(batch.buffers);\n  }\n};\n\n/**\n * AudioContextLoader Class designed to work with HTML5 AudioContext\n */\n_exports = function () {\n  function exports(opts) {\n    _classCallCheck(this, exports);\n\n    _ctx = opts.ctx;\n  }\n\n  exports.prototype.load = function load(urls, callback) {\n    var batch = {\n      fileCount: urls.length,\n      loadedCount: 0,\n      buffers: [],\n      callback: callback || function () {\n        _base.logger.log('Finished loading audio files:', urls);\n      }\n    };\n\n    for (var i = 0, len = urls.length; i < len; i++) {\n      this._loadFile(urls[i], i, batch);\n    }\n  };\n\n  exports.prototype._loadFile = function _loadFile(url, index, batch) {\n    var request = new XMLHttpRequest();\n    request.open('GET', url, true);\n    request.responseType = 'arraybuffer';\n    request.onload = function () {\n      _ctx.decodeAudioData(request.response, function (buffer) {\n        onResponse(url, index, batch, buffer);\n      }, function (e) {\n        _base.logger.error('Error with AudioContext decodeAudioData:', e && e.err || e);\n        onResponse(url, index, batch, null);\n      });\n    };\n    request.onerror = function () {\n      _base.logger.error('Error with audio XHR on URL:', url);\n      onResponse(url, index, batch, null);\n    };\n\n    _loadingMap[url] = true;\n    request.send();\n  };\n\n  exports.prototype.getAudioContext = function getAudioContext() {\n    return _ctx;\n  };\n\n  exports.prototype.setAudioContext = function setAudioContext(ctx) {\n    _ctx = ctx;\n  };\n\n  exports.prototype.getBuffer = function getBuffer(url) {\n    return _bufferMap[url] || null;\n  };\n\n  exports.prototype.isLoading = function isLoading(url) {\n    return _loadingMap[url] || false;\n  };\n\n  exports.prototype.doOnLoad = function doOnLoad(url, cb) {\n    if (this.isLoading(url)) {\n      _onLoadMap[url] = cb;\n    } else {\n      var buffer = this.getBuffer(url);\n      if (buffer) {\n        cb([buffer]);\n      } else {\n        this.load([url], cb);\n      }\n    }\n  };\n\n  return exports;\n}();\n\nexports.default = _exports;\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/modules/timestep/src/ui/backend/sound/AudioLoader.js\n// module id = 49\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/modules/timestep/src/ui/backend/sound/AudioLoader.js?");

/***/ },
/* 50 */
/*!**************************************************************************************!*\
  !*** ./modules/devkit-core/modules/timestep/src/ui/backend/canvas/filterRenderer.js ***!
  \**************************************************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nexports.__esModule = true;\n\nvar _base = __webpack_require__(/*! base */ 2);\n\nvar _LRUCache = __webpack_require__(/*! cache/LRUCache */ 51);\n\nvar _LRUCache2 = _interopRequireDefault(_LRUCache);\n\nvar _device = __webpack_require__(/*! device */ 1);\n\nvar _device2 = _interopRequireDefault(_device);\n\nvar _Engine = __webpack_require__(/*! ui/Engine */ 52);\n\nvar _Engine2 = _interopRequireDefault(_Engine);\n\nvar _userAgent = __webpack_require__(/*! userAgent */ 7);\n\nvar _userAgent2 = _interopRequireDefault(_userAgent);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _exports = {};\n\n/**\n * @license\n * This file is part of the Game Closure SDK.\n *\n * The Game Closure SDK is free software: you can redistribute it and/or modify\n * it under the terms of the Mozilla Public License v. 2.0 as published by Mozilla.\n\n * The Game Closure SDK is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * Mozilla Public License v. 2.0 for more details.\n\n * You should have received a copy of the Mozilla Public License v. 2.0\n * along with the Game Closure SDK.  If not, see <http://mozilla.org/MPL/2.0/>.\n */\n/**\n * @class ui.backend.canvas.FilterRenderer;\n * Renders filter effects to a canvas. Manages filtered canvas caching.\n */\n\n\nvar COMPOSITE_MULTIPLY_SUPPORTED = _userAgent2.default.browserType !== 'Internet Explorer';\n\nvar Canvas = null;\nvar noCacheCanvas = null;\nvar noCacheColorCanvas = null;\nvar unusedCanvas = null;\n\nvar CACHE_SIZE = 1024;\nvar CACHE_FRAME_THRESHOLD = 3;\n\nvar activeChecks = {};\nvar pendingChecks = {};\nvar currentFrame = 0;\n\nvar needsInitialization = true;\n\nvar FilterRenderer = function () {\n  function FilterRenderer() {\n    _classCallCheck(this, FilterRenderer);\n  }\n\n  FilterRenderer.prototype.initialize = function initialize() {\n    Canvas = _device2.default.get('Canvas');\n    noCacheCanvas = new Canvas({ useWebGL: _base.CONFIG.useWebGL });\n    noCacheColorCanvas = new Canvas({ useWebGL: false });\n    needsInitialization = false;\n    var engine = _Engine2.default.get();\n    this.useWebGL = engine.useWebGL;\n    this.useCache = !this.useWebGL;\n    if (this.useCache) {\n      // If we're using canvas caching, set up the tick subscription\n      engine.subscribe('Tick', this, this.onTick);\n    }\n  };\n\n  FilterRenderer.prototype.onTick = function onTick(dt) {\n    currentFrame++;\n    activeChecks = pendingChecks;\n    pendingChecks = {};\n  };\n\n  FilterRenderer.prototype.renderFilter = function renderFilter(ctx, srcImg, srcX, srcY, srcW, srcH) {\n    if (needsInitialization) {\n      this.initialize();\n    }\n\n    var filter = ctx.filter;\n    var filterName = filter && filter.getType && filter.getType();\n\n    // Ugly hack, but WebGL still needs this class, for now, for masking.\n    // The other filters are handled by the WebGL context itself.\n    var filterNotSupported = ctx.canvas.isWebGL && filterName !== 'NegativeMask' && filterName !== 'PositiveMask';\n\n    if (!filter || filterNotSupported || !filter.getType) {\n      return null;\n    }\n\n    if (this.useCache) {\n      var cacheKey = this.getCacheKey(srcImg.getURL(), srcX, srcY, srcW, srcH, filter);\n      var resultImg = this.cache.get(cacheKey);\n      if (resultImg) {\n        return resultImg;\n      }\n    }\n\n    var shouldCache = this.useCache && this.testShouldCache(cacheKey);\n    if (shouldCache) {\n      resultImg = this.getCanvas(srcW, srcH);\n    } else {\n      resultImg = filterNotSupported ? noCacheCanvas : noCacheColorCanvas;\n      resultImg.width = srcW;\n      resultImg.height = srcH;\n    }\n\n    switch (filterName) {\n      case 'LinearAdd':\n        this.renderColorFilter(ctx, srcImg, srcX, srcY, srcW, srcH, filter, 'lighter', resultImg);\n        break;\n\n      case 'Tint':\n        this.renderColorFilter(ctx, srcImg, srcX, srcY, srcW, srcH, filter, 'source-over', resultImg);\n        break;\n\n      case 'Multiply':\n        if (COMPOSITE_MULTIPLY_SUPPORTED) {\n          this.renderColorFilter(ctx, srcImg, srcX, srcY, srcW, srcH, filter, 'multiply', resultImg);\n        } else {\n          this.renderMultiply(ctx, srcImg, srcX, srcY, srcW, srcH, filter, resultImg);\n        }\n        break;\n\n      case 'NegativeMask':\n        this.renderMask(ctx, srcImg, srcX, srcY, srcW, srcH, filter.getMask(), 'source-in', resultImg);\n        break;\n\n      case 'PositiveMask':\n        this.renderMask(ctx, srcImg, srcX, srcY, srcW, srcH, filter.getMask(), 'source-out', resultImg);\n        break;\n    }\n\n    if (shouldCache) {\n      var removedEntry = this.cache.put(cacheKey, resultImg);\n      unusedCanvas = removedEntry ? removedEntry.value : null;\n    }\n\n    return resultImg;\n  };\n\n  FilterRenderer.prototype.testShouldCache = function testShouldCache(key) {\n    var checkFrame = pendingChecks[key] = activeChecks[key] || currentFrame;\n    return currentFrame - checkFrame > CACHE_FRAME_THRESHOLD;\n  };\n\n  FilterRenderer.prototype.renderColorFilter = function renderColorFilter(ctx, srcImg, srcX, srcY, srcW, srcH, filter, op, destCanvas) {\n    var result = destCanvas;\n    var resultCtx = result.getContext('2d');\n    // render the base image\n    resultCtx.globalCompositeOperation = 'source-over';\n    srcImg.render(resultCtx, srcX, srcY, srcW, srcH, 0, 0, srcW, srcH);\n    // render the filter color\n    resultCtx.globalCompositeOperation = op;\n    resultCtx.fillStyle = filter.getColorString();\n    resultCtx.fillRect(0, 0, srcW, srcH);\n    // use our base image to cut out the image shape from the rect\n    resultCtx.globalCompositeOperation = 'destination-in';\n    srcImg.render(resultCtx, srcX, srcY, srcW, srcH, 0, 0, srcW, srcH);\n    return result;\n  };\n\n  FilterRenderer.prototype.renderMultiply = function renderMultiply(ctx, srcImg, srcX, srcY, srcW, srcH, filter, destCanvas) {\n    var color = filter.get();\n    var result = destCanvas;\n    var resultCtx = result.getContext('2d');\n    var imgData = srcImg.getImageData(srcX, srcY, srcW, srcH);\n    var data = imgData.data;\n    // simplified multiply math outside of the massive for loop\n    var a = color.a;\n    var mr = 1 + a * (color.r / 255 - 1);\n    var mg = 1 + a * (color.g / 255 - 1);\n    var mb = 1 + a * (color.b / 255 - 1);\n    for (var i = 0, len = data.length; i < len; i += 4) {\n      data[i] *= mr;\n      data[i + 1] *= mg;\n      data[i + 2] *= mb;\n    }\n    // put the updated rgb data into our new canvas\n    resultCtx.putImageData(imgData, 0, 0);\n    return result;\n  };\n\n  FilterRenderer.prototype.renderMask = function renderMask(ctx, srcImg, srcX, srcY, srcW, srcH, mask, op, destCanvas) {\n    var result = destCanvas;\n    var resultCtx = result.getContext('2d');\n    // render the mask image\n    var srcMaskX = mask.getSourceX();\n    var srcMaskY = mask.getSourceY();\n    var srcMaskW = mask.getSourceW();\n    var srcMaskH = mask.getSourceH();\n    resultCtx.globalCompositeOperation = 'source-over';\n    mask.render(resultCtx, srcMaskX, srcMaskY, srcMaskW, srcMaskH, 0, 0, srcW, srcH);\n    // render the base image\n    resultCtx.globalCompositeOperation = op;\n    srcImg.render(resultCtx, srcX, srcY, srcW, srcH, 0, 0, srcW, srcH);\n    return result;\n  };\n\n  FilterRenderer.prototype.clearCache = function clearCache() {\n    this.cache.removeAll();\n  };\n\n  FilterRenderer.prototype.getCacheKey = function getCacheKey(url, srcX, srcY, srcW, srcH, filter) {\n    var filterType = filter && filter.getType && filter.getType();\n    var suffix;\n    if (filterType === 'NegativeMask' || filterType === 'PositiveMask') {\n      suffix = filter.getMask().getURL();\n    } else {\n      var color = filter.get();\n      var alpha = color.a * 255 & 255;\n      suffix = '' + alpha + '|' + color.r + '|' + color.g + '|' + color.b;\n    }\n    var cacheKey = filterType + '|' + url + '|' + srcX + '|' + srcY + '|' + srcW + '|' + srcH + '|' + suffix;\n    return cacheKey;\n  };\n\n  FilterRenderer.prototype.getCanvas = function getCanvas(width, height) {\n    var result;\n    if (unusedCanvas) {\n      result = unusedCanvas;\n      result.width = width;\n      result.height = height;\n      unusedCanvas = null;\n    } else {\n      result = new Canvas({\n        width: width,\n        height: height\n      });\n    }\n    return result;\n  };\n\n  return FilterRenderer;\n}();\n\nFilterRenderer.prototype.cache = new _LRUCache2.default(CACHE_SIZE);\n_exports = new FilterRenderer();\n\nexports.default = _exports;\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/modules/timestep/src/ui/backend/canvas/filterRenderer.js\n// module id = 50\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/modules/timestep/src/ui/backend/canvas/filterRenderer.js?");

/***/ },
/* 51 */
/*!********************************************************************!*\
  !*** ./modules/devkit-core/modules/timestep/src/cache/LRUCache.js ***!
  \********************************************************************/
/***/ function(module, exports) {

	eval("'use strict';\n\nexports.__esModule = true;\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _exports = {};\n\n/**\n* Copyright (c) 2010 Rasmus Andersson http://hunch.se/\n*\n* MIT LICENSE\n*\n* Permission is hereby granted, free of charge, to any person obtaining a copy of\n* this software and associated documentation files (the \"Software\"), to deal in the\n* Software without restriction, including without limitation the rights to use, copy,\n* modify, merge, publish, distribute, sublicense, and/or sell copies of the Software,\n* and to permit persons to whom the Software is furnished to do so, subject to the\n* following conditions:\n*\n* The above copyright notice and this permission notice shall be included in all\n* copies or substantial portions of the Software.\n*\n* THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n* IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS\n* FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR\n* COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN\n* AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n* WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n * A doubly linked list-based Least Recently Used (LRU) cache. Will keep most\n * recently used items while discarding least recently used items when its limit\n * is reached.\n *\n * Illustration of the design:\n *\n *       entry             entry             entry             entry\n *       ______            ______            ______            ______\n *      | head |.newer => |      |.newer => |      |.newer => | tail |\n *      |  A   |          |  B   |          |  C   |          |  D   |\n *      |______| <= older.|______| <= older.|______| <= older.|______|\n *\n *  removed  <--  <--  <--  <--  <--  <--  <--  <--  <--  <--  <--  added\n */\nvar LRUCache = function LRUCache(limit) {\n  // Current size of the cache. (Read-only).\n  this.size = 0;\n  // Maximum number of items this cache can hold.\n  this.limit = limit;\n  this._keymap = {};\n};\n\n/**\n * Put <value> into the cache associated with <key>. Returns the entry which was\n * removed to make room for the new entry. Otherwise undefined is returned\n * (i.e. if there was enough room already).\n */\nLRUCache.prototype.put = function (key, value) {\n  var entry = {\n    key: key,\n    value: value\n  };\n  // Note: No protection agains replacing, and thus orphan entries. By design.\n  this._keymap[key] = entry;\n  if (this.tail) {\n    // link previous tail to the new tail (entry)\n    this.tail.newer = entry;\n    entry.older = this.tail;\n  } else {\n    // we're first in -- yay\n    this.head = entry;\n  }\n  // add new entry to the end of the linked list -- it's now the freshest entry.\n  this.tail = entry;\n  if (this.size === this.limit) {\n    // we hit the limit -- remove the head\n    return this.shift();\n  } else {\n    // increase the size counter\n    this.size++;\n  }\n};\n\n/**\n * Purge the least recently used (oldest) entry from the cache. Returns the\n * removed entry or undefined if the cache was empty.\n *\n * If you need to perform any form of finalization of purged items, this is a\n * good place to do it. Simply override/replace this function:\n *\n *   var c = new LRUCache(123);\n *   c.shift = function() {\n *     var entry = LRUCache.prototype.shift.call(this);\n *     doSomethingWith(entry);\n *     return entry;\n *   }\n */\nLRUCache.prototype.shift = function () {\n  // todo: handle special case when limit == 1\n  var entry = this.head;\n  if (entry) {\n    if (this.head.newer) {\n      this.head = this.head.newer;\n      this.head.older = undefined;\n    } else {\n      this.head = undefined;\n    }\n    // Remove last strong reference to <entry> and remove links from the purged\n    // entry being returned:\n    entry.newer = entry.older = undefined;\n    // delete is slow, but we need to do this to avoid uncontrollable growth:\n    delete this._keymap[entry.key];\n  }\n  return entry;\n};\n\n/**\n * Get and register recent use of <key>. Returns the value associated with <key>\n * or undefined if not in cache.\n */\nLRUCache.prototype.get = function (key, returnEntry) {\n  // First, find our cache entry\n  var entry = this._keymap[key];\n  if (entry === undefined) {\n    return;\n  }\n  // Not cached. Sorry.\n  // As <key> was found in the cache, register it as being requested recently\n  if (entry === this.tail) {\n    // Already the most recenlty used entry, so no need to update the list\n    return returnEntry ? entry : entry.value;\n  }\n  // HEAD--------------TAIL\n  //   <.older   .newer>\n  //  <--- add direction --\n  //   A  B  C  <D>  E\n  if (entry.newer) {\n    if (entry === this.head) {\n      this.head = entry.newer;\n    }\n    entry.newer.older = entry.older;\n  }\n  // C <-- E.\n  if (entry.older) {\n    entry.older.newer = entry.newer;\n  }\n  // C. --> E\n  entry.newer = undefined;\n  // D --x\n  entry.older = this.tail;\n  // D. --> E\n  if (this.tail) {\n    this.tail.newer = entry;\n  }\n  // E. <-- D\n  this.tail = entry;\n  return returnEntry ? entry : entry.value;\n};\n\n// ----------------------------------------------------------------------------\n// Following code is optional and can be removed without breaking the core\n// functionality.\n/**\n * Check if <key> is in the cache without registering recent use. Feasible if\n * you do not want to chage the state of the cache, but only \"peek\" at it.\n * Returns the entry associated with <key> if found, or undefined if not found.\n */\nLRUCache.prototype.find = function (key) {\n  return this._keymap[key];\n};\n\n/**\n * Update the value of entry with <key>. Returns the old value, or undefined if\n * entry was not in the cache.\n */\nLRUCache.prototype.set = function (key, value) {\n  var oldvalue,\n      entry = this.get(key, true);\n  if (entry) {\n    oldvalue = entry.value;\n    entry.value = value;\n  } else {\n    oldvalue = this.put(key, value);\n    if (oldvalue) {\n      oldvalue = oldvalue.value;\n    }\n  }\n  return oldvalue;\n};\n\n/**\n * Remove entry <key> from cache and return its value. Returns undefined if not\n * found.\n */\nLRUCache.prototype.remove = function (key) {\n  var entry = this._keymap[key];\n  if (!entry) {\n    return;\n  }\n  delete this._keymap[entry.key];\n  // need to do delete unfortunately\n  if (entry.newer && entry.older) {\n    // relink the older entry with the newer entry\n    entry.older.newer = entry.newer;\n    entry.newer.older = entry.older;\n  } else if (entry.newer) {\n    // remove the link to us\n    entry.newer.older = undefined;\n    // link the newer entry to head\n    this.head = entry.newer;\n  } else if (entry.older) {\n    // remove the link to us\n    entry.older.newer = undefined;\n    // link the newer entry to head\n    this.tail = entry.older;\n  } else {\n    // if(entry.older === undefined && entry.newer === undefined) {\n    this.head = this.tail = undefined;\n  }\n\n  this.size--;\n  return entry.value;\n};\n\n/** Removes all entries */\nLRUCache.prototype.removeAll = function () {\n  // This should be safe, as we never expose strong refrences to the outside\n  this.head = this.tail = undefined;\n  this.size = 0;\n  this._keymap = {};\n};\n\n/**\n * Return an array containing all keys of entries stored in the cache object, in\n * arbitrary order.\n */\nif (typeof Object.keys === 'function') {\n  LRUCache.prototype.keys = function () {\n    return Object.keys(this._keymap);\n  };\n} else {\n  LRUCache.prototype.keys = function () {\n    var keys = [];\n    for (var k in this._keymap) {\n      keys.push(k);\n    }\n    return keys;\n  };\n}\n\n/**\n * Call `fun` for each entry. Starting with the newest entry if `desc` is a true\n * value, otherwise starts with the oldest (head) enrty and moves towards the\n * tail.\n *\n * `fun` is called with 3 arguments in the context `context`:\n *   `fun.call(context, Object key, Object value, LRUCache self)`\n */\nLRUCache.prototype.forEach = function (fun, context, desc) {\n  var entry;\n  if (context === true) {\n    desc = true;\n    context = undefined;\n  } else if ((typeof context === 'undefined' ? 'undefined' : _typeof(context)) !== 'object') {\n    context = this;\n  }\n  if (desc) {\n    entry = this.tail;\n    while (entry) {\n      fun.call(context, entry.key, entry.value, this);\n      entry = entry.older;\n    }\n  } else {\n    entry = this.head;\n    while (entry) {\n      fun.call(context, entry.key, entry.value, this);\n      entry = entry.newer;\n    }\n  }\n};\n\n/** Returns a JSON (array) representation */\nLRUCache.prototype.toJSON = function () {\n  var s = [],\n      entry = this.head;\n  while (entry) {\n    s.push({\n      key: entry.key.toJSON(),\n      value: entry.value.toJSON()\n    });\n    entry = entry.newer;\n  }\n  return s;\n};\n\n/** Returns a String representation */\nLRUCache.prototype.toString = function () {\n  var s = '',\n      entry = this.head;\n  while (entry) {\n    s += String(entry.key) + ':' + entry.value;\n    entry = entry.newer;\n    if (entry) {\n      s += ' < ';\n    }\n  }\n  return s;\n};\n\n_exports = LRUCache;\n\nexports.default = _exports;\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/modules/timestep/src/cache/LRUCache.js\n// module id = 51\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/modules/timestep/src/cache/LRUCache.js?");

/***/ },
/* 52 */
/*!***************************************************************!*\
  !*** ./modules/devkit-core/modules/timestep/src/ui/Engine.js ***!
  \***************************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nexports.__esModule = true;\n\nvar _base = __webpack_require__(/*! base */ 2);\n\nvar _Emitter2 = __webpack_require__(/*! event/Emitter */ 9);\n\nvar _Emitter3 = _interopRequireDefault(_Emitter2);\n\nvar _dispatch = __webpack_require__(/*! event/input/dispatch */ 33);\n\nvar _dispatch2 = _interopRequireDefault(_dispatch);\n\nvar _timer = __webpack_require__(/*! timer */ 36);\n\nvar _timer2 = _interopRequireDefault(_timer);\n\nvar _ReflowManager = __webpack_require__(/*! ui/backend/ReflowManager */ 32);\n\nvar _ReflowManager2 = _interopRequireDefault(_ReflowManager);\n\nvar _FPSView = __webpack_require__(/*! ui/backend/debug/FPSView */ 53);\n\nvar _FPSView2 = _interopRequireDefault(_FPSView);\n\nvar _engineInstance = __webpack_require__(/*! ./engineInstance */ 41);\n\nvar _engineInstance2 = _interopRequireDefault(_engineInstance);\n\nvar _StackView = __webpack_require__(/*! ./StackView */ 54);\n\nvar _StackView2 = _interopRequireDefault(_StackView);\n\nvar _device = __webpack_require__(/*! device */ 1);\n\nvar _device2 = _interopRequireDefault(_device);\n\nvar _InputEvent = __webpack_require__(/*! event/input/InputEvent */ 35);\n\nvar _InputEvent2 = _interopRequireDefault(_InputEvent);\n\nvar _platformImport = __webpack_require__(/*! platformImport */ 12);\n\nvar _Matrix2D = __webpack_require__(/*! ../platforms/browser/webgl/Matrix2D */ 30);\n\nvar _Matrix2D2 = _interopRequireDefault(_Matrix2D);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _exports = {};\n\n/**\n * @license\n * This file is part of the Game Closure SDK.\n *\n * The Game Closure SDK is free software: you can redistribute it and/or modify\n * it under the terms of the Mozilla Public License v. 2.0 as published by Mozilla.\n\n * The Game Closure SDK is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * Mozilla Public License v. 2.0 for more details.\n\n * You should have received a copy of the Mozilla Public License v. 2.0\n * along with the Game Closure SDK.  If not, see <http://mozilla.org/MPL/2.0/>.\n */\n/**\n * @class ui.Engine\n *\n * This is the game engine for timestep. It is built on a scene graph composed\n * of \"views\", and has canvas and DOM rendering backends.\n *\n * Responsibilities for the application engine includes initializing the canvas,\n * input and key listeners, game loop, animation tick, the view hierarchy and\n * rendering the scene graph.\n *\n * Not to be confused with GC.Application, the superclass exposed to games which\n * controls the game loop. A single ui.Engine is instantiated for\n * games which resides at GC.app.engine.\n *\n * @doc http://doc.gameclosure.com/api/appengine.html\n * @docsrc https://github.com/gameclosure/doc/blob/master/api/appengine.md\n */\n\n\nvar IDENTITY_MATRIX = new _Matrix2D2.default();\n\nvar KeyListener = (0, _platformImport.getImport)('KeyListener');\nvar InputListener = (0, _platformImport.getImport)('Input');\n\nvar _timers = [];\n_timer2.default.onTick = function (dt) {\n  var i = _timers.length;\n  while (i--) {\n    _timers[i](dt);\n  }\n};\n\nvar __instance = null;\n\n/**\n * @extends event.Emitter\n */\n_exports = function (_Emitter) {\n  _inherits(exports, _Emitter);\n\n  function exports(opts) {\n    _classCallCheck(this, exports);\n\n    var _this = _possibleConstructorReturn(this, _Emitter.call(this));\n\n    if (!__instance) {\n      __instance = _this;\n      _engineInstance2.default.setInstance(_this);\n    }\n\n    var canvas = opts && opts.canvas;\n    if (typeof canvas == 'string' && _base.GLOBAL.document && document.getElementById) {\n      var canvasID = canvas;\n      canvas = document.getElementById(canvasID);\n      if (!canvas) {\n        throw new Error('Canvas not found for ID: ' + canvasID);\n      }\n    }\n\n    _this._opts = opts = (0, _base.merge)(opts, {\n      keyListenerEnabled: true,\n      width: canvas && canvas.width || _device2.default.width,\n      height: canvas && canvas.height || _device2.default.height,\n      view: null,\n      dtFixed: 0,\n      dtMinimum: 0,\n      clearEachFrame: true,\n      alwaysRepaint: true,\n      repaintOnEvent: true,\n      mergeMoveEvents: false,\n      continuousInputCheck: !_device2.default.isMobileBrowser && !_device2.default.isMobile,\n      showFPS: false\n    });\n\n    _timers.push((0, _base.bind)(_this, _this._tick));\n\n    _this._doubleBuffered = true;\n    _this._countdown = null;\n\n    var Canvas = _device2.default.get('Canvas');\n    _this._rootElement = new Canvas({\n      el: canvas,\n      // use an existing canvas if one was provided, but wrap the 2D context\n      useWebGL: true,\n      // use WebGL if supported\n      width: opts.width,\n      height: opts.height,\n      offscreen: false\n    });\n\n    _this.useWebGL = _this._rootElement.isWebGL;\n\n    canvas = _this._rootElement;\n\n    var dpr = _device2.default.screen.devicePixelRatio;\n    _this._rootElement.style.width = opts.width / dpr + 'px';\n    _this._rootElement.style.height = opts.height / dpr + 'px';\n    _this._rootElement.id = 'timestep_onscreen_canvas';\n    _this._ctx = _this._rootElement.getContext('2d');\n    _this._ctx.font = '11px ' + _device2.default.defaultFontFamily;\n\n    _this._view = opts.view || new _StackView2.default();\n    _this._view.style.update({\n      width: opts.width,\n      height: opts.height\n    });\n\n    // __root is a pointer to the Engine instance that a view\n    // is currently attached to.  If __root is null, the view\n    // is not currently in a view hierarchy.\n    _this._view.__root = _this;\n\n    _this._events = [];\n\n    if (KeyListener) {\n      _this._keyListener = new KeyListener();\n    }\n\n    _this._inputListener = new InputListener({\n      rootView: _this._view,\n      el: _this._rootElement,\n      keyListener: _this._keyListener,\n      engine: _this\n    });\n\n    _this._reflowMgr = _ReflowManager2.default.get();\n\n    _this._tickBuffer = 0;\n    _this._onTick = [];\n\n    // configure auto-layout in the browser (expand\n    // to fill the viewport)\n    if (_device2.default.name == 'browser') {\n      _device2.default.width = opts.width;\n      _device2.default.height = opts.height;\n      _device2.default.screen.width = opts.width;\n      _device2.default.screen.height = opts.height;\n      var doc = _device2.default.get('doc');\n      if (doc) {\n        doc.setEngine(_this);\n      }\n    }\n\n    _this._needsRepaint = false;\n\n    _this.updateOpts(_this._opts);\n    return _this;\n  }\n\n  exports.prototype.getOpt = function getOpt(key) {\n    return this._opts[key];\n  };\n\n  exports.prototype.updateOpts = function updateOpts(opts) {\n    this._opts = (0, _base.merge)(opts, this._opts);\n    if (this._keyListener) {\n      this._keyListener.setEnabled(this._opts.keyListenerEnabled);\n    }\n\n    if (this._opts.scaleUI) {\n      if (Array.isArray(this._opts.scaleUI)) {\n        if (this._opts.scaleUI.length != 2) {\n          throw new Error('Illegal value for engine option scaleUI: ' + this._opts.scaleUI);\n        }\n        this.scaleUI(this._opts.scaleUI[0], this._opts.scaleUI[1]);\n      } else {\n        this.scaleUI(576, 1024);\n      }\n    }\n\n    if (this._opts.showFPS) {\n      if (!this._applicationFPS) {\n        this._applicationFPS = new _FPSView2.default({ application: this });\n      }\n\n      this._renderFPS = (0, _base.bind)(this._applicationFPS, this._applicationFPS.render);\n      this._tickFPS = (0, _base.bind)(this._applicationFPS, this._applicationFPS.tick);\n    } else {\n      this._renderFPS = function () {};\n      this._tickFPS = function () {};\n    }\n  };\n\n  exports.prototype.scaleUI = function scaleUI(w, h) {\n    if (_device2.default.height > _device2.default.width) {\n      this._view.baseWidth = w;\n      this._view.baseHeight = _device2.default.height * (w / _device2.default.width);\n      this._view.scale = _device2.default.width / this._view.baseWidth;\n    } else {\n      this._view.baseWidth = h;\n      this._view.baseHeight = _device2.default.height * (h / _device2.default.width);\n      this._view.scale = _device2.default.height / this._view.baseHeight;\n    }\n    this._view.style.scale = this._view.scale;\n  };\n\n  exports.prototype.supports = function supports(key) {\n    return this._opts[key];\n  };\n\n  exports.prototype.getInput = function getInput() {\n    return this._inputListener;\n  };\n\n  exports.prototype.getKeyListener = function getKeyListener() {\n    return this._keyListener;\n  };\n\n  exports.prototype.getEvents = function getEvents() {\n    return this._events;\n  };\n\n  exports.prototype.getCanvas = function getCanvas() {\n    return this._rootElement;\n  };\n\n  exports.prototype.getViewCtor = function getViewCtor() {\n    return View;\n  };\n\n  exports.prototype.getView = function getView() {\n    return this._view;\n  };\n\n  exports.prototype.setView = function setView(view) {\n    this._view = view;\n    return this;\n  };\n\n  exports.prototype.show = function show() {\n    this._rootElement.style.display = 'block';\n    return this;\n  };\n\n  exports.prototype.hide = function hide() {\n    this._rootElement.style.display = 'none';\n    return this;\n  };\n\n  exports.prototype.pause = function pause() {\n    this.stopLoop();\n    if (this._keyListener) {\n      this._keyListener.setEnabled(false);\n    }\n  };\n\n  exports.prototype.resume = function resume() {\n    this.startLoop();\n    if (this._keyListener) {\n      this._keyListener.setEnabled(true);\n    }\n  };\n\n  exports.prototype.stepFrame = function stepFrame(n) {\n    this.pause();\n    n = n || 1;\n    this._countdown = n;\n    this.resume();\n  };\n\n  exports.prototype.startLoop = function startLoop(dtMin) {\n    if (this._running) {\n      return;\n    }\n    this._running = true;\n\n    this.now = 0;\n    _timer2.default.start(dtMin || this._opts.dtMinimum);\n    this.emit('resume');\n    return this;\n  };\n\n  exports.prototype.stopLoop = function stopLoop() {\n    if (!this._running) {\n      return;\n    }\n    this._running = false;\n    _timer2.default.stop();\n    this.emit('pause');\n    return this;\n  };\n\n  exports.prototype.isRunning = function isRunning() {\n    return this._running;\n  };\n\n  exports.prototype.doOnTick = function doOnTick(cb) {\n    if (arguments.length > 1) {\n      cb = _base.bind.apply(this, arguments);\n    }\n    this._onTick.push(cb);\n  };\n\n  exports.prototype._tick = function _tick(dt) {\n    // if the countdown is defined\n    if (this._countdown !== null) {\n      this._countdown--;\n\n      // if below zero, stop timer\n      if (this._countdown === -1) {\n        this.pause();\n        this._countdown = null;\n      }\n    }\n\n    if (this._ctx) {\n      var el = this._ctx.getElement();\n      var s = this._view.style;\n      if (el && (s.width != el.width / s.scale || s.height != el.height / s.scale)) {\n        s.width = el.width / s.scale;\n        s.height = el.height / s.scale;\n      }\n    }\n\n    for (var i = 0, cb; cb = this._onTick[i]; ++i) {\n      cb(dt);\n    }\n\n    var events = this._inputListener.getEvents();\n    var n = events.length;\n\n    this._events = events;\n    if (this._opts._mergeMoveEvents) {\n      var hasMove = false;\n      for (var i = n - 1; i >= 0; --i) {\n        if (events[i].type == _dispatch2.default.eventTypes.MOVE) {\n          if (!hasMove) {\n            hasMove = true;\n          } else {\n            events.splice(i, 1);\n          }\n        }\n      }\n    }\n\n    for (var i = 0, evt; evt = events[i]; ++i) {\n      evt.srcApp = this;\n      _dispatch2.default.dispatchEvent(this._view, evt);\n    }\n\n    if (!_device2.default.useDOM) {\n      if (i > 0) {\n        if (this._opts.repaintOnEvent) {\n          this.needsRepaint();\n        }\n      } else if (this._opts.continuousInputCheck) {\n        var prevMove = _dispatch2.default._evtHistory['input:move'];\n        if (prevMove) {\n          _dispatch2.default.dispatchEvent(this._view, new _InputEvent2.default(prevMove.id, prevMove.type, prevMove.srcPt));\n        }\n      }\n    }\n\n    if (this._opts.dtFixed) {\n      this._tickBuffer += dt;\n      while (this._tickBuffer >= this._opts.dtFixed) {\n        this._tickBuffer -= this._opts.dtFixed;\n        this.now += this._opts.dtFixed;\n        this.__tick(this._opts.dtFixed);\n      }\n    } else {\n      this.__tick(dt);\n    }\n\n    this._reflowMgr.reflowViews(this._ctx);\n\n    var doRepaint = this._opts.alwaysRepaint || this._needsRepaint;\n    if (!doRepaint && this._doubleBuffered && this._doubleBufferedState > 0) {\n      // even if we don't repaint, we need to paint at least 1 more time\n      // for devices that use multiple buffers (like the ios, I think...)\n      --this._doubleBufferedState;\n      this.render(dt);\n    } else if (doRepaint) {\n      this._doubleBufferedState = 3;\n      this.render(dt);\n    }\n\n    this._needsRepaint = false;\n  };\n\n  exports.prototype.render = function render(dt) {\n    if (this._opts.clearEachFrame) {\n      this._ctx && this._ctx.clear();\n    }\n\n    this._view.__view.constructor.absScale = 1;\n    this._view.__view.wrapRender(this._ctx, IDENTITY_MATRIX, 1);\n    this.publish('Render', this._ctx);\n\n    if (this._ctx) {\n      if (false) {\n        this._renderFPS(this._ctx, dt);\n      }\n\n      this._ctx.swap();\n    }\n  };\n\n  exports.prototype.needsRepaint = function needsRepaint() {\n    this._needsRepaint = true;\n    return this;\n  };\n\n  exports.prototype.__tick = function __tick(dt) {\n    this._tickFPS(dt);\n    this.publish('Tick', dt);\n    this._view.__view.wrapTick(dt, this);\n  };\n\n  return exports;\n}(_Emitter3.default);\n\nvar Engine = _exports;\n\nEngine.prototype.getElement = Engine.prototype.getCanvas;\n\n_exports.get = function () {\n  return __instance;\n};\n\nexports.default = _exports;\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/modules/timestep/src/ui/Engine.js\n// module id = 52\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/modules/timestep/src/ui/Engine.js?");

/***/ },
/* 53 */
/*!******************************************************************************!*\
  !*** ./modules/devkit-core/modules/timestep/src/ui/backend/debug/FPSView.js ***!
  \******************************************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nexports.__esModule = true;\n\nvar _device = __webpack_require__(/*! device */ 1);\n\nvar _device2 = _interopRequireDefault(_device);\n\nvar _Enum = __webpack_require__(/*! lib/Enum */ 21);\n\nvar _Enum2 = _interopRequireDefault(_Enum);\n\nvar _Rect = __webpack_require__(/*! math/geom/Rect */ 20);\n\nvar _Rect2 = _interopRequireDefault(_Rect);\n\nvar _intersect = __webpack_require__(/*! math/geom/intersect */ 23);\n\nvar _intersect2 = _interopRequireDefault(_intersect);\n\nvar _dispatch = __webpack_require__(/*! event/input/dispatch */ 33);\n\nvar _dispatch2 = _interopRequireDefault(_dispatch);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _exports = {};\n\n/**\n * @license\n * This file is part of the Game Closure SDK.\n *\n * The Game Closure SDK is free software: you can redistribute it and/or modify\n * it under the terms of the Mozilla Public License v. 2.0 as published by Mozilla.\n\n * The Game Closure SDK is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * Mozilla Public License v. 2.0 for more details.\n\n * You should have received a copy of the Mozilla Public License v. 2.0\n * along with the Game Closure SDK.  If not, see <http://mozilla.org/MPL/2.0/>.\n */\n/**\n * @package ui.backend.debug.FPSView;\n *\n * The view which renders the FPS when showFPS is set to true on the\n * Application options.\n *\n * TODO Move to debug package.\n */\n\n\nvar viewModes = new _Enum2.default('FPS', 'DT');\n\nfunction strokeRect(ctx, rect, color) {\n  ctx.fillStyle = color;\n  ctx.fillRect(rect.x, rect.y, 1, rect.height);\n  ctx.fillRect(rect.x, rect.y, rect.width, 1);\n  ctx.fillRect(rect.x + rect.width - 1, rect.y, 1, rect.height);\n  ctx.fillRect(rect.x, rect.y + rect.height - 1, rect.width, 1);\n};\n\nfunction fillRect(ctx, rect, color) {\n  ctx.fillStyle = color;\n  ctx.fillRect(rect.x, rect.y, rect.width, rect.height);\n};\n\nvar Graph = function () {\n  function Graph(opts) {\n    _classCallCheck(this, Graph);\n\n    var Canvas = _device2.default.get('Canvas');\n\n    this._width = opts.width;\n    this._height = opts.height;\n\n    this._maxValue = opts.maxValue;\n    this._backgroundColor = opts.backgroundColor;\n    this._colors = opts.colors;\n    this._axisColor = opts.axisColor;\n\n    this._canvas = new Canvas({\n      width: opts.width,\n      height: opts.height\n    });\n    this._ctx = this._canvas.getContext('2d');\n    this._ctx.fillStyle = opts.backgroundColor;\n    this._ctx.fillRect(0, 0, opts.width, opts.height);\n\n    this._offset = 0;\n    this._index = 0;\n  }\n\n  Graph.prototype.addValues = function addValues(values, timeAxis) {\n    var ctx = this._ctx,\n        width = this._width,\n        height = this._height,\n        value,\n        maxValue = this._maxValue,\n        x = (this._offset + this._index) % width,\n        y = this._height,\n        n,\n        i,\n        j;\n\n    ctx.fillStyle = this._backgroundColor;\n    ctx.fillRect(x, 0, 2, height);\n\n    i = values.length;\n    while (i) {\n      value = values[--i];\n      if (value > maxValue) {\n        value = maxValue;\n      }\n      n = ~~(value / maxValue * height);\n      ctx.fillStyle = this._colors[i];\n      ctx.fillRect(x, height - n, 2, n);\n    }\n\n    ctx.fillStyle = this._axisColor;\n    if (timeAxis) {\n      ctx.fillRect(x, 0, 1, height);\n    }\n    ctx.fillRect(x, 25, 2, 1);\n    ctx.fillRect(x, 50, 2, 1);\n    ctx.fillRect(x, 75, 2, 1);\n\n    if (this._index < width) {\n      this._index += 2;\n    } else {\n      this._offset += 2;\n      if (this._offset >= width) {\n        this._offset = 0;\n      }\n    }\n  };\n\n  Graph.prototype.render = function render(ctx, x, y) {\n    var offset = this._offset,\n        width = this._width,\n        height = this._height;\n\n    if (offset === 0) {\n      ctx.drawImage(this._canvas, 0, 0, width, height, x, y, width, height);\n    } else {\n      ctx.drawImage(this._canvas, offset, 0, width - offset, height, x, y, width - offset, height);\n      ctx.drawImage(this._canvas, 0, 0, offset, height, width - offset + x, y, offset, height);\n    }\n  };\n\n  return Graph;\n}();\n\n_exports = function () {\n  function exports(opts) {\n    _classCallCheck(this, exports);\n\n    this._application = opts.application;\n\n    this._time = +new Date() + 1000;\n    this._frames = 0;\n    this._fps = 20;\n    this._dt = 10;\n\n    this._minimized = true;\n\n    var width = 200,\n        height = 100;\n\n    this._rectTop = new _Rect2.default(1, 1, width, 16);\n    this._rectMin = new _Rect2.default(0, 0, 24, 15);\n    this._rectMax = new _Rect2.default(0, 0, width + 2, height + 17);\n    this._rect = this._rectMin;\n\n    this._rectFPS = new _Rect2.default(141, 1, 30, 15);\n    this._rectDT = new _Rect2.default(171, 1, 30, 15);\n\n    this._borderColor = 'rgb(100,100,150)';\n    this._backgroundColor = '#17182E';\n    this._textColor = '#FFFFFF';\n\n    this._viewMode = viewModes.DT;\n\n    this._graphs = {};\n    this._graphs[viewModes.FPS] = new Graph({\n      width: width,\n      height: height,\n      maxValue: 60,\n      backgroundColor: this._backgroundColor,\n      colors: ['rgba(170,170,252,0.3)', 'rgb(170,170,252)'],\n      axisColor: '#FFFFFF'\n    });\n    this._graphs[viewModes.DT] = new Graph({\n      width: width,\n      height: height,\n      maxValue: 66,\n      backgroundColor: this._backgroundColor,\n      colors: ['rgba(255,0,0,0.5)', 'rgb(254,255,170)'],\n      axisColor: '#FFFFFF'\n    });\n  }\n\n  exports.prototype.tick = function tick(dt) {\n    var time = +new Date();\n    if (time > this._time) {\n      this._time = time + 1000;\n      this._fps = this._frames;\n      this._frames = 1;\n    } else {\n      this._frames++;\n    }\n\n    var events = this._application.getEvents();\n    if (events.length) {\n      this._handleEvents(events);\n    }\n\n    this._dt = this._dt * 0.8 + dt * 0.2;\n\n    if (!this._minimized) {\n      switch (this._viewMode) {\n        case viewModes.DT:\n          this._graphs[viewModes.DT].addValues([this._dt, dt], this._frames === 1);\n          break;\n\n        case viewModes.FPS:\n          this._graphs[viewModes.FPS].addValues([this._fps, 1000 / dt], this._frames === 1);\n          break;\n      }\n    }\n  };\n\n  exports.prototype._handleEvents = function _handleEvents(events) {\n    var types = _dispatch2.default.eventTypes;\n    var i = events.length;\n\n    while (i) {\n      var event = events[--i];\n      switch (event.type) {\n        case types.START:\n          if (_intersect2.default.ptAndRect(event.srcPt, this._rect)) {\n            if (this._minimized) {\n              this._minimized = false;\n            } else {\n              if (_intersect2.default.ptAndRect(event.srcPt, this._rectFPS)) {\n                this._viewMode = viewModes.FPS;\n              } else if (_intersect2.default.ptAndRect(event.srcPt, this._rectDT)) {\n                this._viewMode = viewModes.DT;\n              } else {\n                this._minimized = true;\n              }\n            }\n            this._rect = this._minimized ? this._rectMin : this._rectMax;\n          }\n          break;\n      }\n    }\n  };\n\n  exports.prototype.render = function render(ctx) {\n    ctx.save();\n\n    ctx.textBaseline = 'top';\n    ctx.textAlign = 'center';\n    ctx.font = '12px Verdana';\n\n    if (this._minimized) {\n      fillRect(ctx, this._rect, this._backgroundColor);\n    } else {\n      fillRect(ctx, this._rectTop, this._backgroundColor);\n      this._graphs[this._viewMode].render(ctx, 1, 17);\n      ctx.fillStyle = this._borderColor;\n      ctx.fillRect(0, 16, this._rect.width, 1);\n\n      var fpsMode = this._viewMode === viewModes.FPS,\n          dtMode = this._viewMode === viewModes.DT;\n\n      fillRect(ctx, this._rectFPS, fpsMode ? this._borderColor : this._backgroundColor);\n      ctx.fillStyle = fpsMode ? this._textColor : this._borderColor;\n      ctx.fillText('FPS', this._rectFPS.x + this._rectFPS.width / 2, 0);\n\n      fillRect(ctx, this._rectDT, dtMode ? this._borderColor : this._backgroundColor);\n      ctx.fillStyle = dtMode ? this._textColor : this._borderColor;\n      ctx.fillText('DT', this._rectDT.x + this._rectDT.width / 2, 0);\n    }\n\n    strokeRect(ctx, this._rect, this._borderColor);\n\n    ctx.fillStyle = this._textColor;\n    ctx.fillText(this._fps, 12, 0);\n\n    ctx.restore();\n  };\n\n  exports.prototype.getFPS = function getFPS() {\n    return this._fps;\n  };\n\n  return exports;\n}();\n\nexports.default = _exports;\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/modules/timestep/src/ui/backend/debug/FPSView.js\n// module id = 53\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/modules/timestep/src/ui/backend/debug/FPSView.js?");

/***/ },
/* 54 */
/*!******************************************************************!*\
  !*** ./modules/devkit-core/modules/timestep/src/ui/StackView.js ***!
  \******************************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nexports.__esModule = true;\n\nvar _base = __webpack_require__(/*! base */ 2);\n\nvar _View2 = __webpack_require__(/*! ui/View */ 17);\n\nvar _View3 = _interopRequireDefault(_View2);\n\nvar _animate = __webpack_require__(/*! animate */ 37);\n\nvar _animate2 = _interopRequireDefault(_animate);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _exports = {};\n\n/**\n * @license\n * This file is part of the Game Closure SDK.\n *\n * The Game Closure SDK is free software: you can redistribute it and/or modify\n * it under the terms of the Mozilla Public License v. 2.0 as published by Mozilla.\n\n * The Game Closure SDK is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * Mozilla Public License v. 2.0 for more details.\n\n * You should have received a copy of the Mozilla Public License v. 2.0\n * along with the Game Closure SDK.  If not, see <http://mozilla.org/MPL/2.0/>.\n */\n/**\n * @class ui.StackView;\n * Implements a view which can switch out one of several child views to display at the front.\n *\n * @doc http://doc.gameclosure.com/api/ui-stackview.html\n * @docsrc https://github.com/gameclosure/doc/blob/master/api/ui/stackview.md\n */\n\n\n/**\n * @extends ui.View\n */\n_exports = function (_View) {\n  _inherits(exports, _View);\n\n  function exports(opts) {\n    _classCallCheck(this, exports);\n\n    opts = (0, _base.merge)(opts, { layout: 'box' });\n\n    var _this = _possibleConstructorReturn(this, _View.call(this, opts));\n\n    _this.stack = [];\n    return _this;\n  }\n\n  exports.prototype.getStack = function getStack() {\n    return this.stack;\n  };\n\n  exports.prototype.getCurrentView = function getCurrentView() {\n    if (!this.stack.length) {\n      return null;\n    }\n    return this.stack[this.stack.length - 1];\n  };\n\n  exports.prototype.push = function push(view, dontAnimate, reverse) {\n    // don't animate the first (base) view of a stackview unless explicitly asked to\n    if (!this.stack[0] && dontAnimate !== false) {\n      dontAnimate = true;\n    }\n\n    var current = this.getCurrentView();\n    if (current) {\n      this._hide(current, dontAnimate);\n    }\n    view.style.y = 0;\n    view.style.width = this.style.width / view.style.scale;\n    view.style.height = this.style.height / view.style.scale;\n    this.stack.push(view);\n    this._show(view, dontAnimate, reverse);\n    return view;\n  };\n\n  exports.prototype._hide = function _hide(view, dontAnimate, reverse) {\n    view.publish('ViewWillDisappear');\n    if (!dontAnimate) {\n      this.getInput().blockEvents = true;\n      (0, _animate2.default)(view).then({ x: (reverse ? 1 : -1) * this.style.width }).then((0, _base.bind)(this, function () {\n        this.removeSubview(view);\n        view.publish('ViewDidDisappear');\n        this.getInput().blockEvents = false;\n      }));\n    } else {\n      this.removeSubview(view);\n      view.publish('ViewDidDisappear');\n    }\n  };\n\n  exports.prototype._show = function _show(view, dontAnimate, reverse) {\n    view.publish('ViewWillAppear');\n    view.style.visible = true;\n    if (!dontAnimate) {\n      view.style.x = (reverse ? -1 : 1) * this.style.width;\n      this.addSubview(view);\n      (0, _animate2.default)(view).then({ x: 0 }).then((0, _base.bind)(view, 'publish', 'ViewDidAppear'));\n    } else {\n      this.addSubview(view);\n      view.style.x = 0;\n      view.publish('ViewDidAppear');\n    }\n  };\n\n  exports.prototype.hasView = function hasView(view) {\n    return this.stack.indexOf(view) >= 0;\n  };\n\n  exports.prototype.remove = function remove(view) {\n    var i = this.stack.indexOf(view);\n    if (i >= 0) {\n      this.stack.splice(i, 1);\n    }\n  };\n\n  exports.prototype.pop = function pop(dontAnimate, reverse) {\n    if (!this.stack.length) {\n      return false;\n    }\n    var view = this.stack.pop();\n    // reverse by default\n    this._hide(view, dontAnimate, reverse === false ? false : true);\n\n    if (this.stack.length) {\n      this._show(this.stack[this.stack.length - 1], dontAnimate, true);\n    }\n\n    return view;\n  };\n\n  exports.prototype.popAll = function popAll(dontAnimate) {\n    while (this.stack[1]) {\n      this.pop(dontAnimate);\n    }\n  };\n\n  return exports;\n}(_View3.default);\n\nexports.default = _exports;\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/modules/timestep/src/ui/StackView.js\n// module id = 54\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/modules/timestep/src/ui/StackView.js?");

/***/ },
/* 55 */
/*!********************************************************************************!*\
  !*** ./modules/devkit-core/modules/timestep/src/ui/backend/canvas/TextFlow.js ***!
  \********************************************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nexports.__esModule = true;\n\nvar _Enum = __webpack_require__(/*! lib/Enum */ 21);\n\nvar _Enum2 = _interopRequireDefault(_Enum);\n\nvar _PubSub2 = __webpack_require__(/*! lib/PubSub */ 10);\n\nvar _PubSub3 = _interopRequireDefault(_PubSub2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @license\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * This file is part of the Game Closure SDK.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * The Game Closure SDK is free software: you can redistribute it and/or modify\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * it under the terms of the Mozilla Public License v. 2.0 as published by Mozilla.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               \n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * The Game Closure SDK is distributed in the hope that it will be useful,\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * but WITHOUT ANY WARRANTY; without even the implied warranty of\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Mozilla Public License v. 2.0 for more details.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               \n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * You should have received a copy of the Mozilla Public License v. 2.0\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * along with the Game Closure SDK.  If not, see <http://mozilla.org/MPL/2.0/>.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\nvar textFlowMode = (0, _Enum2.default)('NONE', 'WRAP', 'AUTOSIZE', 'AUTOSIZE_WRAP', 'AUTOFONTSIZE', 'AUTOFONTSIZE_WRAP', 'AUTOFONTSIZE_AUTOSIZE', 'AUTOFONTSIZE_WRAP_AUTOSIZE');\n\nvar TextFlow = function (_PubSub) {\n  _inherits(TextFlow, _PubSub);\n\n  function TextFlow(opts) {\n    _classCallCheck(this, TextFlow);\n\n    var _this = _possibleConstructorReturn(this, _PubSub.call(this, opts));\n\n    _this._target = opts.target;\n    _this._lineWidth = 0;\n    _this._line = [];\n    _this._lines = [];\n\n    _this._words = [];\n\n    _this._maxWordWidth = 0;\n    _this._maxWidth = 0;\n    _this._maxHeight = 0;\n\n    _this._heightFound = 0;\n\n    _this._offsetRect = {\n      x: 0,\n      y: 0,\n      width: 0,\n      height: 0\n    };\n    return _this;\n  }\n\n  TextFlow.prototype.measureText = function measureText(ctx, text) {\n    var opts = this._opts;\n\n    var emoticonData = text[0] == '(' && opts.emoticonData && opts.emoticonData.data[text];\n    if (emoticonData) {\n      return opts.size;\n    } else {\n      return ctx.measureText(text).width;\n    }\n  };\n\n  TextFlow.prototype._lineSplit = function _lineSplit(ctx) {\n    var opts = this._opts;\n    var spaceWidth = opts.wrapCharacter ? 0 : ctx.measureText(' ').width;\n    var text = opts.text || '';\n    var words = opts.wrapCharacter ? text.replace(/\\t/g, ' ').match(/\\S[。，]?|[\\n]/g) || [] : opts.wrap || opts.horizontalAlign === 'justify' ? text.replace(/\\t/g, ' ').match(/\\S+|[\\n]| +(?= )/g) || [] : text.split('\\n');\n\n    var splitWords = [];\n    for (i in words) {\n      var word = words[i];\n      var eStart = -1;\n      var lastSplit = 0;\n      for (var index = 0; index < word.length; index++) {\n        var c = word[index];\n        if (c == '(') {\n          eStart = index;\n        } else if (c == ')') {\n          if (eStart > -1) {\n            eStart - lastSplit > 0 && splitWords.push(word.substring(lastSplit, eStart));\n            splitWords.push(word.substring(eStart, index + 1));\n            lastSplit = index + 1;\n            eStart = -1;\n          }\n        }\n      }\n      if (lastSplit < word.length) {\n        splitWords.push(word.substring(lastSplit));\n      }\n    }\n    words = splitWords;\n    var currentWord = 0;\n    var wordCount = words.length;\n\n    this._line = [];\n    this._lineWidth = 0;\n    this._maxWordWidth = 0;\n\n    var availableWidth = this.getAvailableWidth();\n    if ((opts.hardWrap || exports.hardWrap) && words.length && this.measureText(ctx, text) > availableWidth) {\n      words = [];\n\n      var s = '';\n      var i = 0;\n\n      while (i < text.length) {\n        var c = text[i++];\n        if (ctx.measureText(s + c).width >= availableWidth) {\n          words.push(s);\n          s = c;\n        } else {\n          s += c;\n        }\n      }\n      if (s !== '') {\n        words.push(s);\n      }\n      wordCount = words.length;\n    }\n\n    while (currentWord < wordCount) {\n      var word = {\n        word: words[currentWord],\n        width: this.measureText(ctx, words[currentWord]),\n        line: 1\n      };\n      this._line.push(word);\n      this._lineWidth += word.width + spaceWidth;\n      this._maxWordWidth = Math.max(this._maxWordWidth, word.width);\n      currentWord++;\n    }\n    this._lineWidth -= spaceWidth;\n  };\n\n  TextFlow.prototype._measureWords = function _measureWords(ctx) {\n    var spaceWidth = this._opts.wrapCharacter ? 0 : ctx.measureText(' ').width;\n    var currentWord = 0;\n    var wordCount = this._line.length;\n\n    this._lineWidth = 0;\n    this._maxWordWidth = 0;\n\n    while (currentWord < wordCount) {\n      var word = this._line[currentWord];\n      word.line = 1;\n      word.width = this.measureText(ctx, word.word);\n      this._lineWidth += word.width + spaceWidth;\n      this._maxWordWidth = Math.max(this._maxWordWidth, word.width);\n      currentWord++;\n    }\n    this._lineWidth -= spaceWidth;\n  };\n\n  TextFlow.prototype._wrap = function _wrap(ctx, width) {\n    var spaceWidth = this._opts.wrapCharacter ? 0 : ctx.measureText(' ').width;\n    var currentWidth = 0;\n    var lines = [];\n    var line = [];\n    var s = '';\n\n    this._lines = lines;\n    this._maxWidth = 0;\n\n    var currentWord = 0;\n    var wordCount = this._line.length;\n\n    if (this._opts.horizontalAlign === 'justify') {\n      while (currentWord < wordCount) {\n        var word = this._line[currentWord++];\n        currentWidth += word.width + spaceWidth;\n        if (word.word === '\\n') {\n          lines.push(line);\n          line = [];\n          currentWidth = 0;\n        } else if (currentWidth > width) {\n          line.length && lines.push(line);\n          line = [word];\n          currentWidth = word.width + spaceWidth;\n        } else {\n          line.push(word);\n        }\n      }\n      line.length && lines.push(line);\n    } else {\n      // Note: this algorithm isn't 100% accurate because we are going\n      // to use the cumulative width of the line (sum up widths of all\n      // measured words plus space widths), which on some platforms will\n      // actually be slightly longer than the actual line length.  Usually\n      // we're only off by a few pixels, so it doesn't matter.  However,\n      // if we remeasured each line after computing the full line length,\n      // we'd end up with a shorter line than we expected, and if we then\n      // resize our view to fit the width and try to wrap text again, we'd\n      // find that the width of the line is now longer than the width of\n      // the view, resulting in the line wrapping shorter than the previous\n      // time (unnecessarily).  Additionally, this extra measure is\n      // expensive, so we'll just use our rough approximation.\n      while (currentWord < wordCount) {\n        var word = this._line[currentWord++];\n        // currentWidth = ctx.measureText(s).width;\n        if (word.word === '\\n') {\n          // lines.push([{word: s, width: currentWidth, line: lines.length}]);\n          // s = \"\";\n          lines.push(line);\n          line = [];\n          currentWidth = 0;\n        } else {\n          var isLineEmpty = !line.length;\n          // var isLineEmpty = !s.length;\n          var hasSpace = !isLineEmpty && !this._opts.wrapCharacter;\n          var offset = hasSpace ? spaceWidth : 0;\n          if (currentWidth + word.width + offset > width) {\n            var wordWidth = word.width;\n\n            // if word is longer than the entire line width\n            if (wordWidth > width) {\n              var current = word.word;\n\n              // split word into lines\n              var wordPiece = '';\n              for (var i = 0, n = current.length; i < n; ++i) {\n                if (isLineEmpty && !wordPiece || this.measureText(ctx, wordPiece + current[i]) + offset + currentWidth <= width) {\n                  wordPiece += current[i];\n                } else {\n                  /*\n                  var line = s + (hasSpace ? \" \" : \"\") + wordPiece;\n                  currentWidth = ctx.measureText(line).width;\n                  lines.push([{word: line, width: currentWidth, line: lines.length}]);\n                  */\n                  currentWidth = this.measureText(ctx, wordPiece);\n                  line.push({\n                    word: wordPiece,\n                    width: currentWidth,\n                    line: lines.length\n                  });\n                  lines.push(line);\n                  line = [];\n                  currentWidth = 0;\n                  offset = 0;\n                  // s = \"\";\n                  isLineEmpty = true;\n                  hasSpace = false;\n                  wordPiece = current[i];\n                }\n              }\n\n              if (wordPiece) {\n                /*\n                var line = s + (hasSpace ? \" \" : \"\") + wordPiece;\n                currentWidth = ctx.measureText(line).width;\n                lines.push([{word: line, width: currentWidth, line: lines.length}]);\n                */\n                currentWidth = this.measureText(ctx, wordPiece);\n                line.push({\n                  word: wordPiece,\n                  width: currentWidth,\n                  line: lines.length\n                });\n              }\n            } else\n              // lines.push(line);\n              {\n                // (!isLineEmpty) && lines.push([{word: s, width: currentWidth, line: lines.length}]);\n                !isLineEmpty && lines.push(line);\n                // s = word.word;\n                line = [word];\n                currentWidth = word.width;\n              }\n          } else {\n            line.push(word);\n            // s += (hasSpace ? \" \" : \"\") + word.word;\n            currentWidth += word.width + offset;\n          }\n        }\n      }\n\n      // if (s !== \"\") {\n      if (line.length > 0) {\n        // lines.push([{word: s, width: currentWidth, line: lines.length}]);\n        lines.push(line);\n      }\n    }\n  };\n\n  TextFlow.prototype._getLineSize = function _getLineSize(lineCount) {\n    var opts = this._opts;\n    return (lineCount <= 1 ? 1 : opts.lineHeight) * opts.size;\n  };\n\n  TextFlow.prototype._wordFlow = function _wordFlow(ctx) {\n    var spaceWidth = this._opts.wrapCharacter ? 0 : ctx.measureText(' ').width;\n    var lines = this._lines;\n\n    this._words = [];\n\n    this._maxWidth = 0;\n    this._maxHeight = 0;\n\n    var currentLine = 0;\n    var lineCount = lines.length;\n    var lineSize = this._getLineSize(lineCount);\n    var y = 0;\n\n    while (currentLine < lineCount) {\n      var line = lines[currentLine++];\n      var currentWord = 0;\n      var wordCount = line.length;\n      var x = 0;\n\n      while (currentWord < wordCount) {\n        var word = line[currentWord++];\n\n        word.x = x;\n        word.y = y;\n        word.line = currentLine;\n        this._words.push(word);\n\n        x += word.width + spaceWidth;\n      }\n\n      y += lineSize;\n      x -= spaceWidth;\n\n      this._maxWidth = Math.max(this._maxWidth, x);\n      this._maxHeight = Math.max(this._maxHeight, y);\n    }\n  };\n\n  TextFlow.prototype._checkWidth = function _checkWidth(ctx, width) {\n    if (this._opts.text === '') {\n      return false;\n    }\n    var opts = this._opts;\n\n    if (width > this.getAvailableWidth()) {\n      var size = opts.size * this._target.style.width / width | 0;\n      opts.size !== size && this.publish('ChangeSize', size, ctx);\n      return true;\n    }\n    return false;\n  };\n\n  TextFlow.prototype._checkHeight = function _checkHeight(ctx, loSize, hiSize, cb) {\n    if (this._opts.text === '') {\n      return;\n    }\n    if (Math.abs(hiSize - loSize) < 2) {\n      return;\n    }\n\n    var pivot = Math.max(loSize + hiSize >> 1, 1);\n    this.publish('ChangeSize', pivot, ctx);\n    cb();\n    if (pivot === 1) {\n      return;\n    }\n\n    var opts = this._opts;\n    var lineSize = this._getLineSize(this._lines.length);\n    if (this._lines.length * lineSize > this.getAvailableHeight()) {\n      this._checkHeight(ctx, loSize, pivot, cb);\n    } else {\n      this._heightFound = opts.size;\n      this._checkHeight(ctx, pivot, hiSize, cb);\n    }\n  };\n\n  TextFlow.prototype._horizontalAlign = function _horizontalAlign(ctx) {\n    var words = this._words;\n    if (words.length) {\n      var spaceWidth = this._opts.wrapCharacter ? 0 : ctx.measureText(' ').width;\n      var lastLineSpaceWidth = spaceWidth;\n      var lastLine = words[words.length - 1].line;\n      var paddingLeft = this.getPaddingLeft();\n      var div = {\n        left: -1,\n        center: 2,\n        right: 1,\n        justify: 3\n      }[this._opts.horizontalAlign] || -1;\n      var availableWidth = this.getAvailableWidth();\n\n      if (div === 3) {\n        spaceWidth = 0;\n      }\n\n      var endWordIndex = 0;\n      var wordCount = words.length;\n      // for each line\n      while (endWordIndex < wordCount) {\n        // compute length of line\n        var wordIndex = endWordIndex;\n        var line = words[endWordIndex].line;\n        var lineWidth = 0;\n        while (endWordIndex < wordCount && line === words[endWordIndex].line) {\n          lineWidth += words[endWordIndex].width + spaceWidth;\n          endWordIndex++;\n        }\n\n        // align words in line\n        if (div === -1) {\n          // left\n          while (wordIndex < endWordIndex) {\n            words[wordIndex++].x += paddingLeft;\n          }\n        } else if (div === 3) {\n          // justify\n          var wordSpacing = line < lastLine ? (availableWidth - lineWidth) / (endWordIndex - wordIndex - 1) : lastLineSpaceWidth;\n          var x = paddingLeft;\n          while (wordIndex < endWordIndex) {\n            words[wordIndex].x = x;\n            x += words[wordIndex].width + wordSpacing;\n            wordIndex++;\n          }\n        } else {\n          // center|right\n          var offset = (availableWidth - lineWidth + spaceWidth) / div + paddingLeft;\n          while (wordIndex < endWordIndex) {\n            words[wordIndex++].x += offset;\n          }\n        }\n      }\n    }\n  };\n\n  TextFlow.prototype._verticalAlign = function _verticalAlign() {\n    var lineCount = this._lines.length;\n    var verticalAlign = this._opts.verticalAlign;\n    var words = this._words;\n    var availableHeight = this.getAvailableHeight();\n    var i = words.length;\n    if (i) {\n      var offset;\n      if (verticalAlign == 'top') {\n        offset = this.getPaddingTop();\n      } else {\n        var div = verticalAlign == 'middle' ? 2 : 1;\n        var lineSize = this._getLineSize(lineCount);\n        offset = (availableHeight - lineCount * lineSize) / div + this.getPaddingTop();\n      }\n\n      while (i) {\n        words[--i].y += offset;\n      }\n\n      this._offsetRect.y += offset;\n    }\n  };\n\n  TextFlow.prototype.reflow = function reflow(ctx, mode) {\n    var _this2 = this;\n\n    var opts = this._opts;\n    var availableWidth = this.getAvailableWidth();\n    var availableHeight = this.getAvailableHeight();\n\n    this._lineSplit(ctx);\n\n    switch (mode) {\n      case textFlowMode.NONE:\n        this._lines = [this._line];\n        this._wordFlow(ctx);\n        break;\n\n      case textFlowMode.WRAP:\n        this._wrap(ctx, availableWidth);\n        this._wordFlow(ctx);\n        break;\n\n      case textFlowMode.AUTOSIZE:\n      case textFlowMode.AUTOFONTSIZE_AUTOSIZE:\n        this._lines = [this._line];\n        this._wordFlow(ctx);\n\n        if (this._opts.fitWidth || availableWidth < this._maxWidth) {\n          this.publish('ChangeWidth', this._maxWidth + this.getHorizontalPadding());\n        }\n\n        if (this._opts.fitHeight || availableHeight < this._maxHeight) {\n          this.publish('ChangeHeight', this._maxHeight + this.getVerticalPadding());\n        }\n        break;\n\n      case textFlowMode.AUTOSIZE_WRAP:\n        this._wrap(ctx, availableWidth);\n        this._wordFlow(ctx);\n\n        if (this._opts.fitWidth || availableWidth < this._maxWidth) {\n          this.publish('ChangeWidth', this._maxWidth + this.getHorizontalPadding());\n        }\n\n        if (this._opts.fitHeight || availableHeight < this._maxHeight) {\n          this.publish('ChangeHeight', this._maxHeight + this.getVerticalPadding());\n        }\n        break;\n\n      case textFlowMode.AUTOFONTSIZE:\n        this._checkWidth(ctx, this._lineWidth) && this._lineSplit(ctx);\n        this._lines = [this._line];\n\n        // Don't use the lineHeight here because it's a single line\n        if (opts.allowVerticalSizing && opts.size > availableHeight) {\n          var cb = function cb() {\n            _this2._measureWords(ctx);\n            _this2._wordFlow(ctx);\n          };\n\n          this._checkHeight(ctx, 1, opts.size, cb);\n          this.publish('ChangeSize', this._heightFound, ctx);\n\n          cb();\n        } else {\n          this._wordFlow(ctx);\n        }\n        break;\n\n      case textFlowMode.AUTOFONTSIZE_WRAP:\n        this._wrap(ctx, availableWidth);\n        this._wordFlow(ctx);\n\n        var lineCount = this._lines.length;\n        var lineSize = this._getLineSize(lineCount);\n        if (opts.allowVerticalSizing && lineCount * lineSize > availableHeight) {\n          var cb = function cb() {\n            _this2._measureWords(ctx);\n            _this2._wrap(ctx, availableWidth);\n            _this2._wordFlow(ctx);\n          };\n\n          this._checkHeight(ctx, 1, opts.size, cb);\n          this.publish('ChangeSize', this._heightFound, ctx);\n\n          cb();\n        }\n        break;\n\n      case textFlowMode.AUTOFONTSIZE_WRAP_AUTOSIZE:\n        this._wrap(ctx, availableWidth);\n        this._wordFlow(ctx);\n\n        if (availableHeight < this._maxHeight) {\n          this.publish('ChangeHeight', this._maxHeight + this.getVerticalPadding());\n        }\n        break;\n    }\n\n    var words = this._words;\n    var lastWord = words[words.length - 1];\n\n    if (words.length) {\n      var strokeWidth = this._target.getStrokeWidth();\n      var lineSize = Math.ceil(opts.size * opts.lineHeight + strokeWidth);\n      this._offsetRect.x = this.getPaddingLeft();\n      this._offsetRect.y = this.getPaddingTop();\n      this._offsetRect.width = availableWidth;\n      this._offsetRect.height = lastWord.line * lineSize;\n\n      this._horizontalAlign(ctx);\n      this._verticalAlign();\n\n      if (lastWord.line === 1) {\n        this._offsetRect.x = words[0].x;\n        this._offsetRect.width = lastWord.x + lastWord.width - words[0].x;\n      }\n\n      this._offsetRect.width += strokeWidth;\n    }\n  };\n\n  TextFlow.prototype.setOpts = function setOpts(opts) {\n    this._opts = opts;\n  };\n\n  TextFlow.prototype.getWords = function getWords() {\n    return this._words;\n  };\n\n  TextFlow.prototype.getPaddingLeft = function getPaddingLeft() {\n    var padding = this._target.style.padding;\n    if (padding) {\n      return padding.left || 0;\n    }\n    return 0;\n  };\n\n  TextFlow.prototype.getPaddingRight = function getPaddingRight() {\n    var padding = this._target.style.padding;\n    if (padding) {\n      return padding.right || 0;\n    }\n    return 0;\n  };\n\n  TextFlow.prototype.getPaddingTop = function getPaddingTop() {\n    var padding = this._target.style.padding;\n    if (padding) {\n      return padding.top || 0;\n    }\n    return 0;\n  };\n\n  TextFlow.prototype.getPaddingBottom = function getPaddingBottom() {\n    var padding = this._target.style.padding;\n    if (padding) {\n      return padding.bottom || 0;\n    }\n    return 0;\n  };\n\n  TextFlow.prototype.getHorizontalPadding = function getHorizontalPadding() {\n    return this.getPaddingLeft() + this.getPaddingRight();\n  };\n\n  TextFlow.prototype.getVerticalPadding = function getVerticalPadding() {\n    return this.getPaddingTop() + this.getPaddingBottom();\n  };\n\n  TextFlow.prototype.getAvailableWidth = function getAvailableWidth() {\n    return this._target.style.width - this.getHorizontalPadding();\n  };\n\n  TextFlow.prototype.getAvailableHeight = function getAvailableHeight() {\n    return this._target.style.height - this.getVerticalPadding();\n  };\n\n  TextFlow.prototype.getOffsetRect = function getOffsetRect() {\n    return this._offsetRect;\n  };\n\n  return TextFlow;\n}(_PubSub3.default);\n\nexports.default = TextFlow;\n;\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/modules/timestep/src/ui/backend/canvas/TextFlow.js\n// module id = 55\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/modules/timestep/src/ui/backend/canvas/TextFlow.js?");

/***/ },
/* 56 */
/*!********************************************************************************!*\
  !*** ./modules/devkit-core/modules/timestep/src/ui/backend/canvas/TextView.js ***!
  \********************************************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nexports.__esModule = true;\n\nvar _base = __webpack_require__(/*! base */ 2);\n\nvar _View2 = __webpack_require__(/*! ui/View */ 17);\n\nvar _View3 = _interopRequireDefault(_View2);\n\nvar _Image = __webpack_require__(/*! ui/resource/Image */ 43);\n\nvar _Image2 = _interopRequireDefault(_Image);\n\nvar _device = __webpack_require__(/*! device */ 1);\n\nvar _device2 = _interopRequireDefault(_device);\n\nvar _FragmentBuffer = __webpack_require__(/*! ./util/FragmentBuffer */ 57);\n\nvar _FragmentBuffer2 = _interopRequireDefault(_FragmentBuffer);\n\nvar _TextFlow = __webpack_require__(/*! ./TextFlow */ 55);\n\nvar _TextFlow2 = _interopRequireDefault(_TextFlow);\n\nvar _legacySettings = __webpack_require__(/*! ../../legacySettings */ 60);\n\nvar _legacySettings2 = _interopRequireDefault(_legacySettings);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _exports = {};\n\n/**\n * @license\n * This file is part of the Game Closure SDK.\n *\n * The Game Closure SDK is free software: you can redistribute it and/or modify\n * it under the terms of the Mozilla Public License v. 2.0 as published by Mozilla.\n\n * The Game Closure SDK is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * Mozilla Public License v. 2.0 for more details.\n\n * You should have received a copy of the Mozilla Public License v. 2.0\n * along with the Game Closure SDK.  If not, see <http://mozilla.org/MPL/2.0/>.\n */\n/**\n * package ui.backend.canvas.TextView;\n *\n * canvas.TextView implementation.\n */\n\n\nvar messageFont = true;\n\n// Report first font error message\nvar textViewID = 1;\n\nvar DEPRECATED = {\n  multiline: { replacement: 'wrap' },\n  textAlign: { replacement: 'horizontalAlign' },\n  lineWidth: { replacement: 'strokeWidth' },\n  strokeStyle: { replacement: 'strokeColor' },\n  outlineColor: { replacement: 'strokeColor' }\n};\n\nvar defaults = {\n  // layout properties...\n  wrap: false,\n  autoSize: false,\n  autoFontSize: true,\n  lineHeight: 1.2,\n  // font properties...\n  color: '#000000',\n  fontFamily: _device2.default.defaultFontFamily,\n  fontWeight: _device2.default.defaultFontWeight,\n  size: 128,\n  strokeWidth: 2,\n  shadowWidth: 2,\n  strokeColor: null,\n  shadowColor: null,\n  // alignment properties...\n  verticalAlign: 'middle',\n  horizontalAlign: 'center',\n  // misc properties...\n  buffer: false,\n  // GLOBAL.NATIVE && !device.simulatingMobileNative,\n  backgroundColor: ''\n};\n\nvar clearCache = {\n  // basic widget properties...\n  width: true,\n  height: true,\n  // layout properties...\n  wrap: true,\n  autoSize: true,\n  autoFontSize: true,\n  padding: true,\n  lineHeight: true,\n  // font properties...\n  color: false,\n  fontFamily: true,\n  fontWeight: true,\n  size: true,\n  strokeWidth: true,\n  shadowWidth: true,\n  strokeColor: false,\n  shadowColor: false,\n  // alignment properties...\n  verticalAlign: true,\n  horizontalAlign: true,\n  // misc properties...\n  backgroundColor: false,\n  text: true\n};\nvar clearCacheKeys = Object.keys(clearCache);\n\nvar hashItems = {\n  // font properties...\n  color: true,\n  fontFamily: true,\n  fontWeight: true,\n  size: true,\n  strokeWidth: true,\n  shadowWidth: true,\n  strokeColor: false,\n  shadowColor: false,\n  // misc properties...\n  backgroundColor: true,\n  text: true\n};\nvar hashItemsKeys = Object.keys(hashItems);\n\nvar savedOpts = ['width', 'height', 'size'];\n\nvar fontBuffer = new _FragmentBuffer2.default();\n\nfontBuffer.onGetHash = function (desc) {\n  return desc.textView.getHash();\n};\n\n/**\n * @extends ui.View\n */\n_exports = function (_View) {\n  _inherits(TextView, _View);\n\n  function TextView(opts) {\n    _classCallCheck(this, TextView);\n\n    opts = (0, _base.merge)(opts, defaults);\n\n    var _this = _possibleConstructorReturn(this, _View.call(this, opts));\n\n    _this._opts = {};\n    _this._optsLast = {};\n    _this.updateCache();\n\n    _this._textFlow = new _TextFlow2.default({ target: _this });\n    _this._textFlow.subscribe('ChangeWidth', _this, 'onChangeWidth');\n    _this._textFlow.subscribe('ChangeHeight', _this, 'onChangeHeight');\n    _this._textFlow.subscribe('ChangeSize', _this, 'onChangeSize');\n\n    _this._id = textViewID++;\n\n    _this.__initCompleteTextView = true;\n    _this.updateOpts(opts);\n    return _this;\n  }\n\n  TextView.prototype.onChangeWidth = function onChangeWidth(width) {\n    this.updateOpts({ width: width }, true);\n  };\n\n  TextView.prototype.onChangeHeight = function onChangeHeight(height) {\n    this.updateOpts({ height: height }, true);\n  };\n\n  TextView.prototype.onChangeSize = function onChangeSize(size, ctx) {\n    this.updateOpts({ size: size }, true);\n    if (ctx) {\n      ctx.font = this._opts.fontWeight + ' ' + this._opts.size + 'px ' + this._opts.fontFamily;\n    }\n  };\n\n  TextView.prototype._restoreOpts = function _restoreOpts() {\n    var optsLast = this._optsLast;\n    if (!optsLast) {\n      console.warn('No _optsLast to restore');\n      return;\n    }\n\n    var optsKey;\n    var i = savedOpts.length;\n    while (i) {\n      optsKey = savedOpts[--i];\n      if (optsKey in optsLast) {\n        this._opts[optsKey] = optsLast[optsKey];\n      }\n    }\n  };\n\n  TextView.prototype._checkOpts = function _checkOpts(opts) {\n    var optsLast = this._optsLast;\n    if (!optsLast) {\n      console.warn('No _optsLast to check against');\n      return;\n    }\n\n    var optsKey;\n    var i = clearCacheKeys.length;\n\n    this._cacheUpdate = this._cacheUpdate || !Object.keys(this._opts).length;\n    if (this._cacheUpdate) {\n      this._hash = false;\n    }\n    while (i) {\n      optsKey = clearCacheKeys[--i];\n      if (optsKey in opts && clearCache[optsKey] && optsLast[optsKey] !== opts[optsKey]) {\n        this._cacheUpdate = true;\n      }\n      if (optsKey in opts) {\n        optsLast[optsKey] = opts[optsKey];\n      } else if (optsKey in this._opts) {\n        optsLast[optsKey] = this._opts[optsKey];\n      } else {\n        optsLast[optsKey] = defaults[optsKey];\n      }\n    }\n  };\n\n  TextView.prototype._checkDeprecatedOpts = function _checkDeprecatedOpts(opts) {\n    opts.allowVerticalSizing = !_legacySettings2.default.disableVerticalAutoSize;\n    for (var k in DEPRECATED) {\n      if (k in opts) {\n        var dep = DEPRECATED[k];\n        if (false) {\n          console.warn('TextView opts.' + k + ' is deprecated, please use ' + dep.replacement + '...');\n          dep.hasWarned = true;\n        }\n        opts[dep.replacement] = opts[k];\n      }\n    }\n    var font = opts.font;\n    if (font) {\n      if (false) {\n        console.warn('TextView opts.font is deprecated, please use fontFamily and size...');\n        messageFont = false;\n      }\n      while (font.length && font[0] === ' ') {\n        font = font.substr(1 - font.length);\n      }\n      var i = font.indexOf(' ');\n      if (i !== -1) {\n        opts.size = parseInt(font.substr(0, i).replace(/[pxtem\\s]/gi, ''), 10);\n        opts.fontFamily = font.substr(i + 1 - font.length);\n      }\n    }\n  };\n\n  TextView.prototype.updateCache = function updateCache() {\n    this._cacheUpdate = true;\n    this._hash = false;\n  };\n\n  TextView.prototype.updateOpts = function updateOpts(opts, dontCheck) {\n    var _View$prototype$updat2;\n\n    if (!this.__initCompleteTextView) {\n      console.warn('TextView instance not yet ready');\n      return;\n    }\n\n    // update emoticon data\n    if (opts.emoticonData) {\n      for (var key in opts.emoticonData.data) {\n        var data = opts.emoticonData.data[key];\n        if (!data.image) {\n          data.image = new _Image2.default({ url: data.url });\n        }\n      }\n    }\n\n    if (this._opts.buffer) {\n      fontBuffer.releaseBin(this.getHash());\n    }\n    this.updateCache();\n\n    this._checkDeprecatedOpts(opts);\n\n    if (!dontCheck) {\n      this._restoreOpts();\n      this._checkOpts(opts);\n      if (this._cacheUpdate) {\n        opts.hash = false;\n      } else {\n        var _View$prototype$updat;\n\n        (_View$prototype$updat = _View.prototype.updateOpts).call.apply(_View$prototype$updat, [this].concat(Array.prototype.slice.call(arguments)));\n        return;\n      }\n    }\n\n    opts = (_View$prototype$updat2 = _View.prototype.updateOpts).call.apply(_View$prototype$updat2, [this].concat(Array.prototype.slice.call(arguments)));\n\n    'text' in opts && this.setText(opts.text);\n    !dontCheck && this._textFlow.setOpts(this._opts);\n\n    return opts;\n  };\n\n  TextView.prototype._updateCtx = function _updateCtx(ctx) {\n    var opts = this._opts;\n\n    ctx.textAlign = 'left';\n    ctx.textBaseline = 'top';\n    ctx.fillStyle = opts.color;\n    ctx.font = opts.fontWeight + ' ' + opts.size + 'px ' + opts.fontFamily;\n    ctx.lineWidth = this.getStrokeWidth();\n  };\n\n  TextView.prototype._renderToCtx = function _renderToCtx(ctx, offsetX, offsetY) {\n    var opts = this._opts;\n    var words = this._textFlow.getWords();\n    var maxWidth = opts.autoFontSize ? this._textFlow.getAvailableWidth() : 1000000;\n    var item;\n    var word;\n    var color = opts.color;\n    var strokeColor = opts.strokeColor;\n    var shadowColor = opts.shadowColor;\n    var lineOffset = this.getStrokeWidth() / 2;\n    var x, y;\n    var i = words.length;\n\n    if (_legacySettings2.default.textViewColor && this.color) {\n      color = this.color;\n    }\n\n    this._updateCtx(ctx);\n\n    while (i) {\n      item = words[--i];\n      word = item.word;\n\n      x = offsetX + item.x;\n      y = offsetY + item.y;\n\n      var emoticonData = word[0] == '(' && opts.emoticonData && opts.emoticonData.data[word];\n      if (emoticonData) {\n        // ctx.fillStyle = color;\n        // ctx.fillRect(x + lineOffset, y + lineOffset, opts.size, opts.size);\n        if (emoticonData.image) {\n          emoticonData.image.renderShort(ctx, x + lineOffset, y + lineOffset, opts.size, opts.size);\n        }\n      } else {\n        if (shadowColor) {\n          var shadowOffsetX = this._opts.shadowWidth || 0;\n          var shadowOffsetY = this._opts.shadowWidth || 0;\n          if ('shadowDx' in this._opts || 'shadowDy' in this._opts) {\n            var shadowOffsetX = this._opts.shadowDx | 0;\n            var shadowOffsetY = this._opts.shadowDy | 0;\n          }\n          var hasShadowOpacity = 'shadowOpacity' in this._opts;\n          var oldOpacity = ctx.globalAlpha;\n          if (hasShadowOpacity) {\n            ctx.globalAlpha *= this._opts.shadowOpacity;\n          }\n          if (strokeColor) {\n            ctx.strokeStyle = shadowColor;\n            ctx.strokeText(word, x + lineOffset + shadowOffsetX, y + lineOffset + shadowOffsetY, maxWidth);\n          } else {\n            ctx.fillStyle = shadowColor;\n            ctx.fillText(word, x + lineOffset + shadowOffsetX, y + lineOffset + shadowOffsetY, maxWidth);\n          }\n          if (hasShadowOpacity) {\n            ctx.globalAlpha = oldOpacity;\n          }\n        }\n\n        if (strokeColor) {\n          ctx.strokeStyle = strokeColor;\n          ctx.strokeText(word, x + lineOffset, y + lineOffset, maxWidth);\n        }\n\n        ctx.fillStyle = color;\n        ctx.fillText(word, x + lineOffset, y + lineOffset, maxWidth);\n      }\n    }\n    if (this._opts.debug) {\n      ctx.strokeStyle = 'black';\n      ctx.strokeRect(x, y, item.width, this.style.height - 2 * y);\n      ctx.strokeStyle = 'red';\n      ctx.strokeRect(0, 0, this.style.width, this.style.height);\n    }\n  };\n\n  TextView.prototype._renderBuffer = function _renderBuffer(ctx) {\n    var fontBufferCtx = fontBuffer.getContext();\n    var offsetRect = this._textFlow.getOffsetRect();\n    var width = offsetRect.width;\n    var height = offsetRect.height;\n    var words = this._textFlow.getWords();\n    var desc;\n\n    if (width && height) {\n      this._opts.lineCount = words[words.length - 1].line;\n      offsetRect.text = this._opts.text;\n      offsetRect.textView = this;\n      // When we support clearing offscreen buffers then this line can be activated instead of the next one...\n      // desc = fontBuffer.getPositionForText(offsetRect) || fontBuffer.getPositionForText(offsetRect);\n      desc = fontBuffer.getPositionForText(offsetRect);\n      if (desc != null) {\n        if (this._cacheUpdate) {\n          fontBufferCtx.clearRect(desc.x, desc.y, desc.width, desc.height);\n          this._renderToCtx(fontBufferCtx, desc.x - offsetRect.x, desc.y - offsetRect.y);\n        }\n        ctx.drawImage(fontBuffer.getCanvas(), desc.x, desc.y, width, height, offsetRect.x, offsetRect.y, width, height);\n      } else {\n        this._opts.buffer = false;\n      }\n    }\n  };\n\n  TextView.prototype.computeSize = function computeSize(ctx) {\n    if (this._cacheUpdate) {\n      this._updateCtx(ctx);\n      var opts = this._opts;\n      this._textFlow.reflow(ctx, 1 + (opts.autoFontSize ? 4 : 0) + (opts.autoSize ? 2 : 0) + (opts.wrap ? 1 : 0));\n    }\n  };\n\n  TextView.prototype.render = function render(ctx) {\n    this.computeSize(ctx);\n    if (!this._textFlow.getWords().length) {\n      this._cacheUpdate = false;\n      return;\n    }\n\n    if (this._opts.buffer) {\n      this._renderBuffer(ctx);\n    } else {\n      var strokeWidthOffset = -this.getStrokeWidth() / 2;\n      this._renderToCtx(ctx, strokeWidthOffset, strokeWidthOffset);\n    }\n\n    this._cacheUpdate = false;\n  };\n\n  TextView.prototype.clearBuffers = function clearBuffers() {\n    fontBuffer.clearBuffer();\n  };\n\n  TextView.prototype.getFontBuffer = function getFontBuffer() {\n    return fontBuffer;\n  };\n\n  TextView.prototype.setText = function setText(textData) {\n    var text = textData != undefined ? textData.toString() : '';\n\n    var emoticonData = this._opts.emoticonData;\n    if (emoticonData) {\n      for (var key in emoticonData.map) {\n        var re = new RegExp(key.replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&'), 'g');\n        text = text.replace(re, emoticonData.map[key]);\n      }\n    }\n\n    if (this._opts.text !== text) {\n      if (this._opts.buffer) {\n        fontBuffer.releaseBin(this.getHash());\n      }\n\n      this._restoreOpts();\n      this._opts.text = text;\n      this.updateCache();\n      this.needsRepaint();\n    }\n  };\n\n  TextView.prototype.getStrokeWidth = function getStrokeWidth() {\n    return this._opts.strokeColor ? this._opts.strokeWidth : 0;\n  };\n\n  TextView.prototype.getText = function getText() {\n    return this._opts.text;\n  };\n\n  TextView.prototype.getTag = function getTag() {\n    return 'TextView' + this.uid + ':' + (this.tag || (this._opts.text || '').substring(0, 20));\n  };\n\n  TextView.prototype.getOpts = function getOpts() {\n    return this._opts;\n  };\n\n  TextView.prototype.getHash = function getHash() {\n    if (!this._hash) {\n      this._hash = '';\n\n      var opts = this._opts;\n      var i = hashItemsKeys.length;\n      while (i) {\n        this._hash += opts[hashItemsKeys[--i]];\n      }\n    }\n    return this._hash;\n  };\n\n  TextView.prototype.reflow = function reflow() {\n    this._restoreOpts();\n    this._cacheUpdate = true;\n  };\n\n  return TextView;\n}(_View3.default);\nvar TextView = _exports;\n\n_exports.clearBuffers = TextView.prototype.clearBuffers;\n_exports.getFontBuffer = TextView.prototype.getFontBuffer;\n\nexports.default = _exports;\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/modules/timestep/src/ui/backend/canvas/TextView.js\n// module id = 56\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/modules/timestep/src/ui/backend/canvas/TextView.js?");

/***/ },
/* 57 */
/*!*******************************************************************************************!*\
  !*** ./modules/devkit-core/modules/timestep/src/ui/backend/canvas/util/FragmentBuffer.js ***!
  \*******************************************************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nexports.__esModule = true;\n\nvar _base = __webpack_require__(/*! base */ 2);\n\nvar _device = __webpack_require__(/*! device */ 1);\n\nvar _device2 = _interopRequireDefault(_device);\n\nvar _FragmentBin = __webpack_require__(/*! ./FragmentBin */ 58);\n\nvar _FragmentBin2 = _interopRequireDefault(_FragmentBin);\n\nvar _SortedLinkedList = __webpack_require__(/*! ./SortedLinkedList */ 59);\n\nvar _SortedLinkedList2 = _interopRequireDefault(_SortedLinkedList);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _exports = {};\n\n/**\n * @license\n * This file is part of the Game Closure SDK.\n *\n * The Game Closure SDK is free software: you can redistribute it and/or modify\n * it under the terms of the Mozilla Public License v. 2.0 as published by Mozilla.\n\n * The Game Closure SDK is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * Mozilla Public License v. 2.0 for more details.\n\n * You should have received a copy of the Mozilla Public License v. 2.0\n * along with the Game Closure SDK.  If not, see <http://mozilla.org/MPL/2.0/>.\n */\n\n\nvar debug = false;\n\nvar sort = function sort(a, b) {\n  return a.size() > b.size();\n};\n\nvar randomColor = function randomColor() {\n  var color = 'rgba(' + (Math.random() * 255).toFixed() + ',' + (Math.random() * 255).toFixed() + ',' + (Math.random() * 255).toFixed() + ',' + '1)';\n  return color;\n};\n\nvar rectIntersectsRect = function rectIntersectsRect(r1, r2) {\n  var ax1 = r1.x;\n  var ax2 = r1.x + r1.width;\n  var ay1 = r1.y;\n  var ay2 = r1.y + r1.height;\n  var bx1 = r2.x;\n  var bx2 = r2.x + r2.width;\n  var by1 = r2.y;\n  var by2 = r2.y + r2.height;\n  return ax1 < bx2 && ax2 > bx1 && ay1 < by2 && ay2 > by1;\n};\n\nvar debugCheck = function debugCheck(bin, list) {\n  if (!bin) {\n    return;\n  }\n  var iter = list.iterator();\n  var ok = true;\n  while (iter.hasNext() && ok) {\n    var next = iter.next();\n    ok = next == bin || !rectIntersectsRect(next, bin);\n    if (!ok) {\n      _base.logger.error('rect overlaps');\n      _base.logger.error(iter.current(), bin);\n    }\n  }\n};\n\n_exports = function () {\n  function exports(opts) {\n    _classCallCheck(this, exports);\n\n    this.opts = (0, _base.merge)(opts, {});\n    this._cache = {};\n    this._decriptions = [];\n    window.addEventListener('pageshow', (0, _base.bind)(this, 'clearBuffer'), false);\n  }\n\n  exports.prototype._build = function _build() {\n    var Canvas = _device2.default.get('Canvas');\n    this._canvas = new Canvas({\n      width: 1024,\n      height: 1024\n    });\n    this._ctx = this.getCanvas().getContext('2d', (0, _base.bind)(this, function () {\n      _base.logger.log('{fragment-buffer} Reacting to lost canvas by clearing text buffer');\n      // On canvas loss:\n      this._canvas = null;\n      this.clearBuffer();\n    }));\n    this._ctx.clearRect(0, 0, 1024, 1024);\n    this._ctx.textAlign = 'left';\n    this._ctx.textBaseline = 'middle';\n    this._ctx.globalCompositeOperation = 'source-over';\n    this._binList = new _SortedLinkedList2.default(sort);\n    var head = new _FragmentBin2.default({\n      x: 0,\n      y: 0,\n      width: 1024,\n      height: 1024\n    });\n    this._binList.insert(head);\n    debug && window.open().document.body.appendChild(this._canvas);\n  };\n\n  exports.prototype.getCanvas = function getCanvas() {\n    if (!this._canvas) {\n      this._build();\n    }\n    return this._canvas;\n  };\n\n  exports.prototype.getContext = function getContext() {\n    if (!this._ctx) {\n      this._build();\n    }\n    return this._ctx;\n  };\n\n  exports.prototype.onGetHash = function onGetHash(description) {\n    throw Error('onGetHash should be implemented.');\n  };\n\n  exports.prototype._insertText = function _insertText(description) {\n    var width = Math.ceil(description.width) + 1;\n    var height = Math.ceil(description.height) + 1;\n    var iter = this._binList.iterator();\n    var bin = null;\n    var found = false;\n    while (iter.hasNext() && !found) {\n      bin = iter.next();\n      if (!bin.filled && bin.width >= width && bin.height >= height) {\n        found = true;\n      } else {\n        // we don't want to insert in filled bins\n        bin = null;\n      }\n    }\n    if (bin) {\n      newBins = bin.split(width, height);\n      for (var i = 0; i < newBins.length; i++) {\n        this._binList.insert(newBins[i]);\n      }\n    } else {\n      _base.logger.log('buffer full, further TextViews will not be cached');\n    }\n\n    // When we support clearing buffers then this should be enabled again...\n    // this.clearBuffer();\n    return bin;\n  };\n\n  exports.prototype.getPositionForText = function getPositionForText(description) {\n    var hash = this.onGetHash(description);\n    var width = Math.ceil(description.width) + 1;\n\n    if (!this._cache[hash] && width > 0) {\n      this._cache[hash] = this._insertText(description, false);\n      this._decriptions.push(description);\n    }\n    if (debug && false) {\n      debugCheck(description, this._binList);\n    }\n    return this._cache[hash];\n  };\n\n  exports.prototype.releaseBin = function releaseBin(hash) {\n    if (this._cache[hash]) {}\n  };\n\n  exports.prototype.clearBuffer = function clearBuffer() {\n    this._cache = {};\n    this._binList = new _SortedLinkedList2.default(sort);\n    this._binList.insert(new _FragmentBin2.default({\n      x: 0,\n      y: 0,\n      width: 1024,\n      height: 1024\n    }));\n    this._ctx && this._ctx.clearRect(0, 0, 1024, 1024);\n    while (this._decriptions.length) {\n      this._decriptions.pop().textView.updateCache();\n    }\n  };\n\n  return exports;\n}();\nvar FragmentBuffer = _exports;\n\nexports.default = _exports;\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/modules/timestep/src/ui/backend/canvas/util/FragmentBuffer.js\n// module id = 57\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/modules/timestep/src/ui/backend/canvas/util/FragmentBuffer.js?");

/***/ },
/* 58 */
/*!****************************************************************************************!*\
  !*** ./modules/devkit-core/modules/timestep/src/ui/backend/canvas/util/FragmentBin.js ***!
  \****************************************************************************************/
/***/ function(module, exports) {

	eval("\"use strict\";\n\nexports.__esModule = true;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _exports = {};\n\n/**\n * @license\n * This file is part of the Game Closure SDK.\n *\n * The Game Closure SDK is free software: you can redistribute it and/or modify\n * it under the terms of the Mozilla Public License v. 2.0 as published by Mozilla.\n\n * The Game Closure SDK is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * Mozilla Public License v. 2.0 for more details.\n\n * You should have received a copy of the Mozilla Public License v. 2.0\n * along with the Game Closure SDK.  If not, see <http://mozilla.org/MPL/2.0/>.\n */\n/**\n * TextBins are used in the FragmentBuffer caching of TextViews.\n **/\n_exports = function () {\n  function exports(opts) {\n    _classCallCheck(this, exports);\n\n    this.width = opts.width;\n    this.height = opts.height;\n    this.x = opts.x;\n    this.y = opts.y;\n  }\n\n  exports.prototype.size = function size() {\n    return this.width * this.height;\n  };\n\n  exports.prototype.split = function split(x, y) {\n    var newBins = [this];\n    if (this.width > 10 && this.height > 10) {\n      if (this.height - y > 10) {\n        var bin1 = new FragmentBin({\n          x: this.x,\n          y: this.y + y,\n          width: this.width,\n          height: this.height - y\n        });\n        newBins.push(bin1);\n      }\n      if (this.width - x > 10) {\n        var bin2 = new FragmentBin({\n          x: this.x + x,\n          y: this.y,\n          width: this.width - x,\n          height: y\n        });\n        newBins.push(bin2);\n      }\n    }\n    this.width = x;\n    this.height = y;\n    this.filled = true;\n\n    return newBins;\n  };\n\n  return exports;\n}();\nvar FragmentBin = _exports;\n\nexports.default = _exports;\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/modules/timestep/src/ui/backend/canvas/util/FragmentBin.js\n// module id = 58\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/modules/timestep/src/ui/backend/canvas/util/FragmentBin.js?");

/***/ },
/* 59 */
/*!*********************************************************************************************!*\
  !*** ./modules/devkit-core/modules/timestep/src/ui/backend/canvas/util/SortedLinkedList.js ***!
  \*********************************************************************************************/
/***/ function(module, exports) {

	eval("\"use strict\";\n\nexports.__esModule = true;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _exports = {};\n\n/**\n * @license\n * This file is part of the Game Closure SDK.\n *\n * The Game Closure SDK is free software: you can redistribute it and/or modify\n * it under the terms of the Mozilla Public License v. 2.0 as published by Mozilla.\n\n * The Game Closure SDK is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * Mozilla Public License v. 2.0 for more details.\n\n * You should have received a copy of the Mozilla Public License v. 2.0\n * along with the Game Closure SDK.  If not, see <http://mozilla.org/MPL/2.0/>.\n */\n\nvar Iterator = function () {\n  function Iterator(list) {\n    _classCallCheck(this, Iterator);\n\n    this.update(list);\n  }\n\n  Iterator.prototype.update = function update(list) {\n    this._list = list || this._list;\n    this._current = list.head;\n    this._count = 0;\n  };\n\n  Iterator.prototype.next = function next() {\n    var data = this._current.data;\n    this._current = this._current.next;\n    this._count++;\n    return data;\n  };\n\n  Iterator.prototype.current = function current() {\n    return this._current.data;\n  };\n\n  Iterator.prototype.insertBefore = function insertBefore(data) {\n    this._current.insertBefore(data);\n    this._list.count++;\n  };\n\n  Iterator.prototype.insertAfter = function insertAfter(data) {\n    this._current.insertAfter(data);\n    this._list.count++;\n  };\n\n  Iterator.prototype.remove = function remove() {\n    this._current.prev.remove();\n    if (this._current.prev == this._current) {\n      this._list.head = null;\n    }\n    this._list.count--;\n  };\n\n  Iterator.prototype.hasNext = function hasNext() {\n    return this._count < this._list.count;\n  };\n\n  Iterator.prototype.atHead = function atHead() {\n    return this._current == this._list.head;\n  };\n\n  return Iterator;\n}();\n\nvar Item = function () {\n  function Item(data, prev, next) {\n    _classCallCheck(this, Item);\n\n    this.data = data;\n    this.prev = prev || this;\n    this.next = next || this;\n  }\n\n  Item.prototype.insertBefore = function insertBefore(data) {\n    var item = new Item(data, this.prev, this);\n    this.prev.next = item;\n    this.prev = item;\n  };\n\n  Item.prototype.insertAfter = function insertAfter(data) {\n    var item = new Item(data, this, this.next);\n    this.next.prev = item;\n    this.next = item;\n  };\n\n  Item.prototype.remove = function remove() {\n    this.prev.next = this.next;\n    this.next.prev = this.prev;\n  };\n\n  return Item;\n}();\n\n_exports = function () {\n  function exports(comparator) {\n    _classCallCheck(this, exports);\n\n    this.head = null;\n    this._comparator = comparator;\n    this.count = 0;\n  }\n\n  exports.prototype.append = function append(data) {\n    this._head.insertAfter(data);\n    this.count++;\n  };\n\n  exports.prototype.insert = function insert(data) {\n    if (!this.head) {\n      this.head = new Item(data);\n      this.count++;\n    } else {\n      var i = this.iterator();\n      var d = i.current();\n      var found = false;\n      while (i.hasNext() && !found) {\n        found = !this._comparator(data, d);\n        if (!found) {\n          i.next();\n          d = i.current();\n        }\n      }\n      i.insertBefore(data);\n      if (found && i.atHead()) {\n        this.head = this.head.prev;\n      }\n    }\n  };\n\n  exports.prototype.iterator = function iterator() {\n    return new Iterator(this);\n  };\n\n  return exports;\n}();\n\nexports.default = _exports;\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/modules/timestep/src/ui/backend/canvas/util/SortedLinkedList.js\n// module id = 59\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/modules/timestep/src/ui/backend/canvas/util/SortedLinkedList.js?");

/***/ },
/* 60 */
/*!***********************************************************************!*\
  !*** ./modules/devkit-core/modules/timestep/src/ui/legacySettings.js ***!
  \***********************************************************************/
/***/ function(module, exports) {

	eval("\"use strict\";\n\nexports.__esModule = true;\nvar _exports = {};\n\n/**\n * @license\n * This file is part of the Game Closure SDK.\n *\n * The Game Closure SDK is free software: you can redistribute it and/or modify\n * it under the terms of the Mozilla Public License v. 2.0 as published by Mozilla.\n\n * The Game Closure SDK is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * Mozilla Public License v. 2.0 for more details.\n\n * You should have received a copy of the Mozilla Public License v. 2.0\n * along with the Game Closure SDK.  If not, see <http://mozilla.org/MPL/2.0/>.\n */\n_exports = {\n  disableVerticalAutoSize: false,\n  textViewColor: false\n};\n\n// use this.color in TextView if true\nexports.default = _exports;\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/modules/timestep/src/ui/legacySettings.js\n// module id = 60\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/modules/timestep/src/ui/legacySettings.js?");

/***/ },
/* 61 */
/*!************************************************************************************!*\
  !*** ./modules/devkit-core/modules/timestep/src/ui/backend/canvas/ViewDebugger.js ***!
  \************************************************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nexports.__esModule = true;\n\nvar _base = __webpack_require__(/*! base */ 2);\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _exports = {};\n\n/**\n * @license\n * This file is part of the Game Closure SDK.\n *\n * The Game Closure SDK is free software: you can redistribute it and/or modify\n * it under the terms of the Mozilla Public License v. 2.0 as published by Mozilla.\n\n * The Game Closure SDK is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * Mozilla Public License v. 2.0 for more details.\n\n * You should have received a copy of the Mozilla Public License v. 2.0\n * along with the Game Closure SDK.  If not, see <http://mozilla.org/MPL/2.0/>.\n */\n_exports = function () {\n  function exports(target, opts) {\n    _classCallCheck(this, exports);\n\n    this._target = target;\n    this._opts = opts = (0, _base.merge)(opts, {\n      trackClicks: false,\n      outline: false,\n      flash: false\n    });\n\n    this.outline = opts.outline;\n    this.trackClicks = opts.trackClicks;\n    this.flash = opts.flash;\n\n    this._flashState = 0;\n    this._nextFlash = 0;\n  }\n\n  exports.prototype.preRender = function preRender(ctx) {\n    if (!this._time) {\n      this._time = +new Date();\n    }\n    var prevTime = this._time;\n    this._time = +new Date();\n    this._dt = this._time - prevTime;\n\n    var s = this._target.style;\n    if (this.outline) {\n      ctx.save();\n      ctx.globalAlpha = 0.2;\n      ctx.strokeStyle = 'black';\n      ctx.lineWidth = 1;\n      ctx.strokeRect(0, 0, s.width, s.height);\n      ctx.restore();\n    }\n  };\n\n  exports.prototype.postRender = function postRender(ctx) {\n    var s = this._target.style;\n\n    var t = this._target;\n    if (this.trackClicks) {\n      for (var i = t._clicks.length - 1; i >= 0; --i) {\n        var c = t._clicks[i];\n        ctx.setFillStyle('rgba(0, 0, 0, ' + c.o + ')');\n        c.o -= 0.4 * this._dt / 1000;\n        if (c.o > 0) {\n          ctx.circle(c.x, c.y, 15);\n          ctx.fill();\n        } else {\n          t._clicks.splice(i, 1);\n        }\n      }\n    }\n\n    if (this.flash) {\n      switch (this._flashState) {\n        case 0:\n          ctx.setFillStyle('rgba(0, 0, 0, 0.5)');\n          break;\n        case 1:\n          ctx.setFillStyle('rgba(0, 0, 0, 0)');\n          break;\n        case 2:\n          ctx.setFillStyle('rgba(255, 255, 255, 0.5)');\n          break;\n        case 3:\n          ctx.setFillStyle('rgba(0, 0, 0, 0)');\n          break;\n      }\n\n      var now = +new Date();\n      if (now > this._nextFlash) {\n        this._flashState = (this._flashState + 1) % 4;\n        this._nextFlash = now + 300;\n      }\n\n      ctx.fillRect(0, 0, t.style.width, t.style.height);\n    }\n  };\n\n  return exports;\n}();\n\nexports.default = _exports;\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/modules/timestep/src/ui/backend/canvas/ViewDebugger.js\n// module id = 61\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/modules/timestep/src/ui/backend/canvas/ViewDebugger.js?");

/***/ },
/* 62 */
/*!*****************************************************************************!*\
  !*** ./modules/devkit-core/modules/timestep/src/platforms/browser ^.*\.js$ ***!
  \*****************************************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("var map = {\n\t\"./Audio.js\": 63,\n\t\"./Canvas.js\": 64,\n\t\"./Context2D.js\": 65,\n\t\"./EditText.js\": 77,\n\t\"./FlashAPI.js\": 78,\n\t\"./FontBuffer.js\": 81,\n\t\"./FontRenderer.js\": 66,\n\t\"./Input.js\": 82,\n\t\"./InputPrompt.js\": 83,\n\t\"./KeyListener.js\": 85,\n\t\"./MobileBrowserAPI.js\": 87,\n\t\"./SoundManager.js\": 79,\n\t\"./StatusBar.js\": 88,\n\t\"./TextBox.js\": 89,\n\t\"./TextInput.js\": 90,\n\t\"./Timer.js\": 91,\n\t\"./__imports__.js\": 92,\n\t\"./dev_error.js\": 93,\n\t\"./doc.js\": 94,\n\t\"./dom.js\": 95,\n\t\"./initialize.js\": 96,\n\t\"./inputDialog.js\": 97,\n\t\"./webgl/FontLoader.js\": 74,\n\t\"./webgl/Matrix2D.js\": 30,\n\t\"./webgl/Shaders.js\": 75,\n\t\"./webgl/TextManager.js\": 71,\n\t\"./webgl/WebGLContext2D.js\": 70,\n\t\"./webgl/WebGLTextureManager.js\": 76\n};\nfunction webpackContext(req) {\n\treturn __webpack_require__(webpackContextResolve(req));\n};\nfunction webpackContextResolve(req) {\n\treturn map[req] || (function() { throw new Error(\"Cannot find module '\" + req + \"'.\") }());\n};\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 62;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/modules/timestep/src/platforms/browser ^.*\\.js$\n// module id = 62\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/modules/timestep/src/platforms/browser_^.*\\.js$?");

/***/ },
/* 63 */
/*!*****************************************************************************!*\
  !*** ./modules/devkit-core/modules/timestep/src/platforms/browser/Audio.js ***!
  \*****************************************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nexports.__esModule = true;\n\nvar _base = __webpack_require__(/*! base */ 2);\n\nvar _exports = {};\n\n/**\n * @license\n * This file is part of the Game Closure SDK.\n *\n * The Game Closure SDK is free software: you can redistribute it and/or modify\n * it under the terms of the Mozilla Public License v. 2.0 as published by Mozilla.\n\n * The Game Closure SDK is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * Mozilla Public License v. 2.0 for more details.\n\n * You should have received a copy of the Mozilla Public License v. 2.0\n * along with the Game Closure SDK.  If not, see <http://mozilla.org/MPL/2.0/>.\n */\n/**\n * @package timestep.env.browser.Audio;\n *\n * Audio implementation using the <audio> element for browsers.\n */\n_exports = function exports(opts) {\n  var defaults = {\n    autoplay: false,\n    preload: 'auto',\n    volume: 1,\n    loop: 0,\n    src: ''\n  };\n\n  opts = (0, _base.merge)(opts, defaults);\n  var el = document.createElement('Audio');\n\n  el.autoplay = opts.autoplay;\n  el.preload = opts.preload;\n  el.volume = opts.volume;\n  el.loop = opts.loop;\n  el.src = opts.src;\n\n  return el;\n};\n\nexports.default = _exports;\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/modules/timestep/src/platforms/browser/Audio.js\n// module id = 63\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/modules/timestep/src/platforms/browser/Audio.js?");

/***/ },
/* 64 */
/*!******************************************************************************!*\
  !*** ./modules/devkit-core/modules/timestep/src/platforms/browser/Canvas.js ***!
  \******************************************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nexports.__esModule = true;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _base = __webpack_require__(/*! base */ 2);\n\nvar _Context2D = __webpack_require__(/*! ./Context2D */ 65);\n\nvar _Context2D2 = _interopRequireDefault(_Context2D);\n\nvar _WebGLContext2D = __webpack_require__(/*! ./webgl/WebGLContext2D */ 70);\n\nvar _WebGLContext2D2 = _interopRequireDefault(_WebGLContext2D);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _exports = {};\n\n/**\n * @license\n * This file is part of the Game Closure SDK.\n *\n * The Game Closure SDK is free software: you can redistribute it and/or modify\n * it under the terms of the Mozilla Public License v. 2.0 as published by Mozilla.\n\n * The Game Closure SDK is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * Mozilla Public License v. 2.0 for more details.\n\n * You should have received a copy of the Mozilla Public License v. 2.0\n * along with the Game Closure SDK.  If not, see <http://mozilla.org/MPL/2.0/>.\n */\n/**\n * @package timestep.env.browser.Canvas;\n *\n * Canvas implementation for browsers. Wraps a Context2D.\n */\n\n\n_exports = function () {\n  function exports(opts) {\n    _classCallCheck(this, exports);\n\n    opts = (0, _base.merge)(opts, {\n      width: 300,\n      height: 200\n    });\n\n    this._width = opts.width;\n    this._height = opts.height;\n    this.isWebGL = !!opts.useWebGL && !!_base.CONFIG.useWebGL && _WebGLContext2D2.default.isSupported;\n\n    var ctx;\n\n    if (this.isWebGL) {\n      ctx = _WebGLContext2D2.default.getContext(this, opts);\n    } else {\n      ctx = new _Context2D2.default(opts);\n    }\n\n    var el = this._el = ctx.getElement();\n\n    el.isWebGL = this.isWebGL;\n    el.complete = true;\n\n    if (el.style) {\n      el.style.userSelect = el.style.webkitUserSelect = el.style.webkitTouchCallout = 'none';\n    }\n\n    el.getContext = function () {\n      return ctx;\n    };\n\n    return el;\n  }\n\n  _createClass(exports, [{\n    key: 'width',\n    get: function get() {\n      return this._width;\n    },\n    set: function set(value) {\n      this._width = value;\n      if (this.isWebGL) {\n        this.getContext().resize(this.width, this.height);\n      }\n    }\n  }, {\n    key: 'height',\n    get: function get() {\n      return this._height;\n    },\n    set: function set(value) {\n      this._height = value;\n      if (this.isWebGL) {\n        this.getContext().resize(this.width, this.height);\n      }\n    }\n  }]);\n\n  return exports;\n}();\n\nexports.default = _exports;\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/modules/timestep/src/platforms/browser/Canvas.js\n// module id = 64\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/modules/timestep/src/platforms/browser/Canvas.js?");

/***/ },
/* 65 */
/*!*********************************************************************************!*\
  !*** ./modules/devkit-core/modules/timestep/src/platforms/browser/Context2D.js ***!
  \*********************************************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nexports.__esModule = true;\n\nvar _base = __webpack_require__(/*! base */ 2);\n\nvar _device = __webpack_require__(/*! device */ 1);\n\nvar _device2 = _interopRequireDefault(_device);\n\nvar _FontRenderer = __webpack_require__(/*! ./FontRenderer */ 66);\n\nvar _FontRenderer2 = _interopRequireDefault(_FontRenderer);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar _exports = {};\n\n/**\n * @license\n * This file is part of the Game Closure SDK.\n *\n * The Game Closure SDK is free software: you can redistribute it and/or modify\n * it under the terms of the Mozilla Public License v. 2.0 as published by Mozilla.\n\n * The Game Closure SDK is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * Mozilla Public License v. 2.0 for more details.\n\n * You should have received a copy of the Mozilla Public License v. 2.0\n * along with the Game Closure SDK.  If not, see <http://mozilla.org/MPL/2.0/>.\n */\n/**\n * @package timestep.env.browser.Context2D;\n *\n * Generates a rendering context by creating our own Canvas element.\n */\n\n\n_exports = function exports(opts) {\n  var parentNode = opts && opts.parent;\n  var el = opts && opts.el || document.createElement('canvas');\n\n  el.width = opts.width;\n  el.height = opts.height;\n\n  var ctx = el.getContext('2d');\n  ctx.font = '11px ' + _device2.default.defaultFontFamily;\n  ctx.getElement = function () {\n    return el;\n  };\n\n  Object.defineProperty(ctx, 'filter', {\n    get: function get() {\n      return this._filter;\n    },\n    set: function set(value) {\n      this._filter = value;\n    }\n  });\n\n  ctx.reset = function () {};\n\n  ctx.clear = function () {\n    this.save();\n    this.setTransform(1, 0, 0, 1, 0, 0);\n    this.clearRect(0, 0, el.width, el.height);\n    this.restore();\n  };\n\n  ctx.clipRect = function (x, y, w, h) {\n    ctx.beginPath();\n    ctx.rect(x, y, w, h);\n    ctx.clip();\n  };\n\n  ctx.swap = function () {};\n  ctx.execSwap = function () {};\n\n  ctx.circle = function (x, y, radius) {\n    this.beginPath();\n    this.arc(x, y, radius, 0, 2 * Math.PI, true);\n  };\n\n  var _lastPointSprite = {\n    img: null,\n    color: null,\n    canvas: null\n  };\n\n  ctx.drawPointSprites = function (x1, y1, x2, y2) {\n    var sprite = this.pointSprite;\n    if (!sprite || !sprite.complete) {\n      return;\n    }\n\n    var width = sprite.width;\n    var height = sprite.height;\n    var canvas = _lastPointSprite.canvas || (_lastPointSprite.canvas = document.createElement('canvas'));\n\n    if (sprite != _lastPointSprite.img || this.strokeStyle != _lastPointSprite.color) {\n      _lastPointSprite.img = sprite;\n      _lastPointSprite.color = this.strokeStyle;\n      canvas.width = width;\n      canvas.height = height;\n      var ctx = canvas.getContext('2d');\n      ctx.fillStyle = this.strokeStyle;\n      ctx.fillRect(0, 0, width, height);\n      ctx.globalCompositeOperation = 'destination-in';\n      ctx.drawImage(sprite, 0, 0);\n    }\n\n    // Add points to the buffer so there are drawing points every X pixels\n    var dx = x2 - x1;\n    var dy = y2 - y1;\n    var count = Math.ceil(Math.sqrt(dx * dx + dy * dy) / this.pointSpriteStep);\n    if (count < 1) {\n      count = 1;\n    }\n\n    var d = this.lineWidth;\n    for (var i = 0; i < count; ++i) {\n      var x = x1 + dx * i / count;\n      var y = y1 + dy * i / count;\n      this.drawImage(canvas, 0, 0, width, height, x - d / 2, y - d / 2, d, d);\n    }\n  };\n\n  ctx.roundRect = function (x, y, width, height, radius) {\n    this.beginPath();\n    this.moveTo(x, y + radius);\n    this.lineTo(x, y + height - radius);\n    this.quadraticCurveTo(x, y + height, x + radius, y + height);\n    this.lineTo(x + width - radius, y + height);\n    this.quadraticCurveTo(x + width, y + height, x + width, y + height - radius);\n    this.lineTo(x + width, y + radius);\n    this.quadraticCurveTo(x + width, y, x + width - radius, y);\n    this.lineTo(x + radius, y);\n    this.quadraticCurveTo(x, y, x, y + radius);\n  };\n\n  ctx.loadIdentity = function () {\n    this.setTransform(1, 0, 0, 1, 0, 0);\n  };\n\n  ctx.measureText = _FontRenderer2.default.wrapMeasureText(ctx.measureText);\n  ctx.fillText = _FontRenderer2.default.wrapFillText(ctx.fillText);\n  ctx.strokeText = _FontRenderer2.default.wrapStrokeText(ctx.strokeText);\n\n  ctx.filter = null;\n  ctx.setFilter = function (filter) {\n    this.filter = filter;\n  };\n  // deprecated API, we only support one filter per context\n  ctx.setFilters = function () {\n    _base.logger.warn('ctx.setFilters is deprecated, use ctx.setFilter instead.');\n    for (var id in filters) {\n      this.setFilter(filters[id]);\n      break;\n    }\n  };\n\n  ctx.clearFilter = function () {\n    this.filter = null;\n  };\n  // deprecated API, we only support one filter per context\n  ctx.clearFilters = function () {\n    _base.logger.warn('ctx.clearFilters is deprecated, use ctx.clearFilter instead.');\n    this.clearFilter();\n  };\n\n  return ctx;\n};\n\nexports.default = _exports;\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/modules/timestep/src/platforms/browser/Context2D.js\n// module id = 65\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/modules/timestep/src/platforms/browser/Context2D.js?");

/***/ },
/* 66 */
/*!************************************************************************************!*\
  !*** ./modules/devkit-core/modules/timestep/src/platforms/browser/FontRenderer.js ***!
  \************************************************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nexports.__esModule = true;\n\nvar _base = __webpack_require__(/*! base */ 2);\n\nvar _device = __webpack_require__(/*! device */ 1);\n\nvar _device2 = _interopRequireDefault(_device);\n\nvar _Image = __webpack_require__(/*! ui/resource/Image */ 43);\n\nvar _Image2 = _interopRequireDefault(_Image);\n\nvar _Color = __webpack_require__(/*! ui/Color */ 67);\n\nvar _Color2 = _interopRequireDefault(_Color);\n\nvar _filter = __webpack_require__(/*! ui/filter */ 68);\n\nvar _filter2 = _interopRequireDefault(_filter);\n\nvar _Font = __webpack_require__(/*! ui/resource/Font */ 69);\n\nvar _Font2 = _interopRequireDefault(_Font);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar _exports = {};\n\n/**\n * @license\n * This file is part of the Game Closure SDK.\n *\n * The Game Closure SDK is free software: you can redistribute it and/or modify\n * it under the terms of the Mozilla Public License v. 2.0 as published by Mozilla.\n\n * The Game Closure SDK is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * Mozilla Public License v. 2.0 for more details.\n\n * You should have received a copy of the Mozilla Public License v. 2.0\n * along with the Game Closure SDK.  If not, see <http://mozilla.org/MPL/2.0/>.\n */\n/**\n * @package env.browser.FontRenderer;\n *\n * Render fonts or custom fonts on a Canvas context.\n */\n\n\nvar max = Math.max;\n\nvar _customFonts = {};\nvar _customFontInfo = {};\nvar _origMeasureText;\n\n_exports.init = function () {\n  var manifest = window.CONFIG;\n  if (manifest && manifest.fonts) {\n    var fonts = manifest.fonts;\n    for (var i = 0, len = fonts.length; i < len; i++) {\n      var font = fonts[i];\n      var customFont = {\n        fontName: font.fontName,\n        settings: font,\n        imagesLoaded: -1,\n        imagesTotal: 0,\n        loaded: false\n      };\n      _customFonts[font.fontName] = customFont;\n      loadingCustomFont(customFont);\n    }\n  }\n};\n\nvar loadCustomFontImage = function loadCustomFontImage(customFont, index, stroke) {\n  var img = new _Image2.default({ url: 'resources/fonts/' + customFont.fontName + '_' + index + (stroke ? '_Stroke.png' : '.png') });\n  img.doOnLoad(function () {\n    customFont.imagesLoaded++;\n    customFont.loaded = customFont.imagesLoaded === customFont.imagesTotal;\n  });\n  return img;\n};\n\nvar findVerticalInfo = function findVerticalInfo(dimensions) {\n  // A..Z, a..z, all\n  var ranges = [{\n    start: 65,\n    end: 90\n  }, {\n    start: 97,\n    end: 122\n  }, {\n    start: 32,\n    end: 255\n  }];\n  var found = false;\n  var baseline = 0;\n  var bottom = 0;\n  for (var i = 0, len = ranges.length; i < len; i++) {\n    var range = ranges[i];\n    for (var j = range.start; j <= range.end; j++) {\n      var dimension = dimensions[j];\n      if (dimension) {\n        baseline = max(baseline, dimension.h);\n        bottom = max(bottom, dimension.h);\n        found = true;\n      }\n    }\n    if (found) {\n      break;\n    }\n  }\n  return {\n    baseline: baseline,\n    bottom: bottom\n  };\n};\n\nvar findHorizontalInfo = function findHorizontalInfo(dimensions) {\n  // a..z, A..Z\n  var ranges = [{\n    start: 97,\n    end: 122\n  }, {\n    start: 65,\n    end: 90\n  }, {\n    start: 32,\n    end: 255\n  }];\n  var width = 0;\n  var count = 0;\n  for (var i = 0, len = ranges.length; i < len; i++) {\n    var range = ranges[i];\n    for (var j = range.start; j <= range.end; j++) {\n      var dimension = dimensions[j];\n      if (dimension) {\n        width += dimension.w;\n        count++;\n      }\n    }\n    if (count !== 0) {\n      break;\n    }\n  }\n  return { width: 0.8 * width / count };\n};\n\nvar loadingCustomFont = function loadingCustomFont(customFont) {\n  if (customFont.imagesLoaded !== -1) {\n    return !customFont.loaded;\n  }\n\n  var settings = customFont.settings;\n  var fontName = settings.fontName;\n  var info = _customFontInfo[fontName];\n  if (info) {\n    customFont.dimensions = info.dimensions;\n    customFont.horizontal = info.horizontal;\n    customFont.vertical = info.vertical;\n  } else {\n    var json = _base.CACHE['resources/fonts/' + fontName + '.json'];\n    customFont.dimensions = JSON.parse(json);\n    customFont.horizontal = findHorizontalInfo(customFont.dimensions);\n    customFont.vertical = findVerticalInfo(customFont.dimensions);\n\n    _customFontInfo[fontName] = {\n      dimensions: customFont.dimensions,\n      horizontal: customFont.horizontal,\n      vertical: customFont.vertical\n    };\n  }\n\n  var images = customFont.images = [];\n  var strokeImages = customFont.strokeImages = [];\n  customFont.imagesLoaded = 0;\n  for (var i = 0; i < settings.count; i++) {\n    images.push(loadCustomFontImage(customFont, i, false));\n    customFont.imagesTotal++;\n\n    if (customFont.settings.stroke) {\n      strokeImages.push(loadCustomFontImage(customFont, i, true));\n      customFont.imagesTotal++;\n    }\n  }\n  return true;\n};\n\nvar measure = function measure(ctx, fontInfo, text) {\n  var customFont = fontInfo.customFont;\n  var dimensions = customFont.dimensions;\n  var scale = fontInfo.scale;\n  var spacing = (customFont.settings.spacing || 0) * scale;\n  var width = 0;\n  var failed = true;\n\n  if (dimensions) {\n    failed = false;\n    var prevCharCode = 0;\n    for (var i = 0, len = text.length; i < len; i++) {\n      var charCode = text.charCodeAt(i);\n      if (charCode === 9) {\n        // tab ...\n        width += customFont.horizontal.width * 4 * scale;\n      } else if (charCode === 32) {\n        // space ...\n        width += customFont.horizontal.width * scale;\n      } else {\n        if (dimensions[charCode]) {\n          var character = dimensions[charCode];\n          var kern = character.kerning[prevCharCode] || 0;\n          width += (character.xadvance + kern) * scale + spacing;\n        } else {\n          failed = true;\n        }\n      }\n      if (failed) {\n        break;\n      }\n      prevCharCode = charCode;\n    }\n  }\n\n  if (failed) {\n    var font = ctx.font;\n    ctx.font = fontInfo.size.value + fontInfo.size.unit + ' ' + (ctx.defaultFontFamily || _device2.default.defaultFontFamily);\n    var result = {\n      failed: true,\n      width: _origMeasureText.apply(ctx, [text])\n    };\n    ctx.font = font;\n    return result;\n  } else {\n    return {\n      failed: false,\n      width: width\n    };\n  }\n};\n\nvar renderCustomFont = function renderCustomFont(ctx, x, y, maxWidth, text, color, fontInfo, index) {\n  var measureInfo = measure(ctx, fontInfo, text);\n  if (measureInfo.failed) {\n    return false;\n  }\n\n  var customFont = fontInfo.customFont;\n  var srcBuffers = index === 0 ? customFont.images : customFont.strokeImages;\n  var dimensions = customFont.dimensions;\n  var scale = fontInfo.scale;\n  var width = measureInfo.width;\n  if (width > maxWidth) {\n    scale *= maxWidth / width;\n  }\n\n  var spacing = (customFont.settings.spacing || 0) * scale;\n\n  if (ctx.textBaseline === 'alphabetic') {\n    y -= customFont.vertical.baseline * scale;\n  } else if (ctx.textBaseline === 'middle') {\n    y -= customFont.vertical.bottom / 2 * scale;\n  } else if (ctx.textBaseline === 'bottom') {\n    y -= customFont.vertical.bottom * scale;\n  }\n\n  if (ctx.textAlign === 'center') {\n    x -= width / 2;\n  } else if (ctx.textAlign === 'right') {\n    x -= width;\n  }\n\n  var prevCharCode = 0;\n  for (var i = 0, len = text.length; i < len; i++) {\n    var charCode = text.charCodeAt(i);\n    if (charCode === 9) {\n      // tab ...\n      x += customFont.horizontal.width * 4 * scale;\n    } else if (charCode === 32) {\n      // space ...\n      x += customFont.horizontal.width * scale;\n    } else {\n      var character = dimensions[charCode];\n      var kern = character.kerning[prevCharCode] || 0;\n      x += kern;\n      var img = srcBuffers[character.sheetIndex];\n      img.render(ctx, character.x, character.y, character.w, character.h, x + character.ox * scale, y + character.oy * scale, character.w * scale, character.h * scale);\n      x += character.xadvance * scale + spacing;\n    }\n    prevCharCode = charCode;\n  }\n\n  return true;\n};\n\n_exports.findFontInfo = function (ctx) {\n  var font = _Font2.default.parse(ctx.font);\n  var name = font.getName();\n  if (name && _customFonts[name]) {\n    customFont = _customFonts[name];\n    font.customFont = customFont;\n    font.scale = font.getSize() / customFont.settings.size;\n    return font;\n  }\n  return null;\n};\n\n_exports.wrapMeasureText = function (origMeasureText) {\n  _origMeasureText = origMeasureText;\n  return function (text) {\n    var fontInfo = _exports.findFontInfo(this);\n    if (!fontInfo) {\n      return origMeasureText.apply(this, arguments);\n    }\n    var measureInfo = measure(this, fontInfo, text);\n    if (measureInfo.failed) {\n      return origMeasureText.apply(this, arguments);\n    }\n    return measureInfo;\n  };\n};\n\n_exports.wrapFillText = function (origFillText) {\n  return function (text, x, y, maxWidth) {\n    var fontInfo = _exports.findFontInfo(this);\n    if (!fontInfo) {\n      return origFillText.apply(this, arguments);\n    }\n    if (loadingCustomFont(fontInfo.customFont)) {\n      return;\n    }\n    if (isNaN(x)) {\n      x = 0;\n    }\n    if (isNaN(y)) {\n      y = 0;\n    }\n\n    // apply color filter if necessary\n    var color = _Color2.default.parse(this.fillStyle);\n    if (!this.filter) {\n      this.filter = new _filter2.default.TintFilter(color);\n    }\n    if (this.__bmpTxtColor !== color) {\n      this.__bmpTxtColor = color;\n      this.filter.update(color);\n    }\n\n    if (!renderCustomFont(this, x, y, maxWidth, text + '', this.fillStyle, fontInfo, 0)) {\n      var font = this.font;\n      this.font = fontInfo.size.value + fontInfo.size.unit + ' ' + (this.defaultFontFamily || _device2.default.defaultFontFamily);\n      origFillText.apply(this, [text, x, y]);\n      this.font = font;\n    }\n  };\n};\n\n_exports.wrapStrokeText = function (origStrokeText) {\n  return function (text, x, y, maxWidth) {\n    var fontInfo = _exports.findFontInfo(this);\n    if (!fontInfo) {\n      return origStrokeText.apply(this, arguments);\n    }\n    if (loadingCustomFont(fontInfo.customFont)) {\n      return;\n    }\n    if (isNaN(x)) {\n      x = 0;\n    }\n    if (isNaN(y)) {\n      y = 0;\n    }\n\n    // apply color filter if necessary\n    var color = _Color2.default.parse(this.strokeStyle);\n    if (!this.filter) {\n      this.filter = new _filter2.default.TintFilter(color);\n    }\n    if (this.__bmpTxtColor !== color) {\n      this.__bmpTxtColor = color;\n      this.filter.update(color);\n    }\n\n    if (!renderCustomFont(this, x, y, maxWidth, text + '', this.strokeStyle, fontInfo, 1)) {\n      var font = this.font;\n      this.font = fontInfo.size.value + fontInfo.size.unit + ' ' + (this.defaultFontFamily || _device2.default.defaultFontFamily);\n      origStrokeText.apply(this, [text, x, y]);\n      this.font = font;\n    }\n  };\n};\n\nexports.default = _exports;\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/modules/timestep/src/platforms/browser/FontRenderer.js\n// module id = 66\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/modules/timestep/src/platforms/browser/FontRenderer.js?");

/***/ },
/* 67 */
/*!**************************************************************!*\
  !*** ./modules/devkit-core/modules/timestep/src/ui/Color.js ***!
  \**************************************************************/
/***/ function(module, exports) {

	eval("'use strict';\n\nexports.__esModule = true;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _exports = {};\n\n/**\n * @license\n * This file is part of the Game Closure SDK.\n *\n * The Game Closure SDK is free software: you can redistribute it and/or modify\n * it under the terms of the Mozilla Public License v. 2.0 as published by Mozilla.\n\n * The Game Closure SDK is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * Mozilla Public License v. 2.0 for more details.\n\n * You should have received a copy of the Mozilla Public License v. 2.0\n * along with the Game Closure SDK.  If not, see <http://mozilla.org/MPL/2.0/>.\n */\n/**\n * @class ui.Color\n *\n * @doc http://doc.gameclosure.com/api/color.html\n * @docsrc https://github.com/gameclosure/doc/blob/master/api/color.md\n */\nvar rgbParser = /rgba?\\(\\s*([.0-9]+)\\s*,\\s*([.0-9]+)\\s*,\\s*([.0-9]+)\\s*,?\\s*([.0-9]+)?\\s*\\)/;\n\nfunction hexToRGB(a) {\n  a = '0x' + a.slice(1).replace(a.length < 5 && /./g, '$&$&');\n  return [a >> 16, a >> 8 & 255, a & 255];\n};\n\n_exports = function () {\n  function exports() {\n    _classCallCheck(this, exports);\n\n    this.r = 0;\n    this.g = 0;\n    this.b = 0;\n    this.a = 1;\n\n    this.update.apply(this, arguments);\n  }\n\n  exports.prototype.update = function update(rgba) {\n    if (arguments.length > 2) {\n      this.r = arguments[0];\n      this.g = arguments[1];\n      this.b = arguments[2];\n      this.a = arguments[3] !== undefined ? arguments[3] : 1;\n    } else if (typeof rgba === 'string') {\n      var cached = cache[rgba];\n      if (cached) {\n        this.set(cached);\n      } else {\n        this.parse(rgba);\n      }\n    } else if (rgba) {\n      this.set(rgba);\n    }\n  };\n\n  exports.prototype.get = function get() {\n    return {\n      r: this.r,\n      g: this.g,\n      b: this.b,\n      a: this.a\n    };\n  };\n\n  exports.prototype.set = function set(rgba) {\n    if (rgba !== undefined) {\n      this.r = rgba.r || 0;\n      this.g = rgba.g || 0;\n      this.b = rgba.b || 0;\n      this.a = rgba.a !== undefined ? rgba.a : 1;\n    }\n  };\n\n  exports.prototype.parse = function parse(str) {\n    var match = str.match(rgbParser);\n    if (match) {\n      this.r = parseInt(match[1]) || 0;\n      this.g = parseInt(match[2]) || 0;\n      this.b = parseInt(match[3]) || 0;\n      if (match[4] !== undefined) {\n        var a = parseFloat(match[4]);\n        this.a = isNaN(a) ? 1 : a;\n      } else {\n        this.a = 1;\n      }\n    } else {\n      // handles hex strings (#FC0, #FFCC00, #FC09, #FFCC0099)\n      this.a = 1;\n      var len = str.length;\n      if (len === 5) {\n        var a = str.substring(4, 5);\n        this.a = ('0x' + a + a | 0) / 255;\n        str = str.substring(0, 4);\n      } else if (len === 9) {\n        this.a = ('0x' + str.substring(7, 9) | 0) / 255;\n        str = str.substring(0, 7);\n      }\n      var match = hexToRGB(str);\n      if (match) {\n        this.r = match[0];\n        this.g = match[1];\n        this.b = match[2];\n      }\n    }\n  };\n\n  exports.prototype.toHex = function toHex() {\n    return '#' + ((256 + this.r << 8 | this.g) << 8 | this.b).toString(16).slice(1);\n  };\n\n  exports.prototype.toString = function toString() {\n    return 'rgba(' + this.r + ',' + this.g + ',' + this.b + ',' + this.a + ')';\n  };\n\n  return exports;\n}();\nvar RGBA = _exports;\n\n_exports.parse = function (str) {\n  return cache[str] || (cache[str] = new RGBA(str));\n};\n\nvar cache = {\n  aliceblue: new RGBA(240, 248, 255),\n  antiquewhite: new RGBA(250, 235, 215),\n  aqua: new RGBA(0, 255, 255),\n  aquamarine: new RGBA(127, 255, 212),\n  azure: new RGBA(240, 255, 255),\n  beige: new RGBA(245, 245, 220),\n  bisque: new RGBA(255, 228, 196),\n  black: new RGBA(0, 0, 0),\n  blanchedalmond: new RGBA(255, 235, 205),\n  blue: new RGBA(0, 0, 255),\n  blueviolet: new RGBA(138, 43, 226),\n  brown: new RGBA(165, 42, 42),\n  burlywood: new RGBA(222, 184, 135),\n  cadetblue: new RGBA(95, 158, 160),\n  chartreuse: new RGBA(127, 255, 0),\n  chocolate: new RGBA(210, 105, 30),\n  coral: new RGBA(255, 127, 80),\n  cornflowerblue: new RGBA(100, 149, 237),\n  cornsilk: new RGBA(255, 248, 220),\n  crimson: new RGBA(220, 20, 60),\n  cyan: new RGBA(0, 255, 255),\n  darkblue: new RGBA(0, 0, 139),\n  darkcyan: new RGBA(0, 139, 139),\n  darkgoldenrod: new RGBA(184, 134, 11),\n  darkgray: new RGBA(169, 169, 169),\n  darkgreen: new RGBA(0, 100, 0),\n  darkgrey: new RGBA(169, 169, 169),\n  darkkhaki: new RGBA(189, 183, 107),\n  darkmagenta: new RGBA(139, 0, 139),\n  darkolivegreen: new RGBA(85, 107, 47),\n  darkorange: new RGBA(255, 140, 0),\n  darkorchid: new RGBA(153, 50, 204),\n  darkred: new RGBA(139, 0, 0),\n  darksalmon: new RGBA(233, 150, 122),\n  darkseagreen: new RGBA(143, 188, 143),\n  darkslateblue: new RGBA(72, 61, 139),\n  darkslategray: new RGBA(47, 79, 79),\n  darkslategrey: new RGBA(47, 79, 79),\n  darkturquoise: new RGBA(0, 206, 209),\n  darkviolet: new RGBA(148, 0, 211),\n  deeppink: new RGBA(255, 20, 147),\n  deepskyblue: new RGBA(0, 191, 255),\n  dimgray: new RGBA(105, 105, 105),\n  dimgrey: new RGBA(105, 105, 105),\n  dodgerblue: new RGBA(30, 144, 255),\n  firebrick: new RGBA(178, 34, 34),\n  floralwhite: new RGBA(255, 250, 240),\n  forestgreen: new RGBA(34, 139, 34),\n  fuchsia: new RGBA(255, 0, 255),\n  gainsboro: new RGBA(220, 220, 220),\n  ghostwhite: new RGBA(248, 248, 255),\n  gold: new RGBA(255, 215, 0),\n  goldenrod: new RGBA(218, 165, 32),\n  gray: new RGBA(128, 128, 128),\n  grey: new RGBA(128, 128, 128),\n  green: new RGBA(0, 128, 0),\n  greenyellow: new RGBA(173, 255, 47),\n  honeydew: new RGBA(240, 255, 240),\n  hotpink: new RGBA(255, 105, 180),\n  indianred: new RGBA(205, 92, 92),\n  indigo: new RGBA(75, 0, 130),\n  ivory: new RGBA(255, 255, 240),\n  khaki: new RGBA(240, 230, 140),\n  lavender: new RGBA(230, 230, 250),\n  lavenderblush: new RGBA(255, 240, 245),\n  lawngreen: new RGBA(124, 252, 0),\n  lemonchiffon: new RGBA(255, 250, 205),\n  lightblue: new RGBA(173, 216, 230),\n  lightcoral: new RGBA(240, 128, 128),\n  lightcyan: new RGBA(224, 255, 255),\n  lightgoldenrodyellow: new RGBA(250, 250, 210),\n  lightgray: new RGBA(211, 211, 211),\n  lightgreen: new RGBA(144, 238, 144),\n  lightgrey: new RGBA(211, 211, 211),\n  lightpink: new RGBA(255, 182, 193),\n  lightsalmon: new RGBA(255, 160, 122),\n  lightseagreen: new RGBA(32, 178, 170),\n  lightskyblue: new RGBA(135, 206, 250),\n  lightslategray: new RGBA(119, 136, 153),\n  lightslategrey: new RGBA(119, 136, 153),\n  lightsteelblue: new RGBA(176, 196, 222),\n  lightyellow: new RGBA(255, 255, 224),\n  lime: new RGBA(0, 255, 0),\n  limegreen: new RGBA(50, 205, 50),\n  linen: new RGBA(250, 240, 230),\n  magenta: new RGBA(255, 0, 255),\n  maroon: new RGBA(128, 0, 0),\n  mediumaquamarine: new RGBA(102, 205, 170),\n  mediumblue: new RGBA(0, 0, 205),\n  mediumorchid: new RGBA(186, 85, 211),\n  mediumpurple: new RGBA(147, 112, 219),\n  mediumseagreen: new RGBA(60, 179, 113),\n  mediumslateblue: new RGBA(123, 104, 238),\n  mediumspringgreen: new RGBA(0, 250, 154),\n  mediumturquoise: new RGBA(72, 209, 204),\n  mediumvioletred: new RGBA(199, 21, 133),\n  midnightblue: new RGBA(25, 25, 112),\n  mintcream: new RGBA(245, 255, 250),\n  mistyrose: new RGBA(255, 228, 225),\n  moccasin: new RGBA(255, 228, 181),\n  navajowhite: new RGBA(255, 222, 173),\n  navy: new RGBA(0, 0, 128),\n  oldlace: new RGBA(253, 245, 230),\n  olive: new RGBA(128, 128, 0),\n  olivedrab: new RGBA(107, 142, 35),\n  orange: new RGBA(255, 165, 0),\n  orangered: new RGBA(255, 69, 0),\n  orchid: new RGBA(218, 112, 214),\n  palegoldenrod: new RGBA(238, 232, 170),\n  palegreen: new RGBA(152, 251, 152),\n  paleturquoise: new RGBA(175, 238, 238),\n  palevioletred: new RGBA(219, 112, 147),\n  papayawhip: new RGBA(255, 239, 213),\n  peachpuff: new RGBA(255, 218, 185),\n  peru: new RGBA(205, 133, 63),\n  pink: new RGBA(255, 192, 203),\n  plum: new RGBA(221, 160, 221),\n  powderblue: new RGBA(176, 224, 230),\n  purple: new RGBA(128, 0, 128),\n  red: new RGBA(255, 0, 0),\n  rosybrown: new RGBA(188, 143, 143),\n  royalblue: new RGBA(65, 105, 225),\n  saddlebrown: new RGBA(139, 69, 19),\n  salmon: new RGBA(250, 128, 114),\n  sandybrown: new RGBA(244, 164, 96),\n  seagreen: new RGBA(46, 139, 87),\n  seashell: new RGBA(255, 245, 238),\n  sienna: new RGBA(160, 82, 45),\n  silver: new RGBA(192, 192, 192),\n  skyblue: new RGBA(135, 206, 235),\n  slateblue: new RGBA(106, 90, 205),\n  slategray: new RGBA(112, 128, 144),\n  slategrey: new RGBA(112, 128, 144),\n  snow: new RGBA(255, 250, 250),\n  springgreen: new RGBA(0, 255, 127),\n  steelblue: new RGBA(70, 130, 180),\n  tan: new RGBA(210, 180, 140),\n  teal: new RGBA(0, 128, 128),\n  thistle: new RGBA(216, 191, 216),\n  tomato: new RGBA(255, 99, 71),\n  transparent: new RGBA(0, 0, 0, 0),\n  turquoise: new RGBA(64, 224, 208),\n  violet: new RGBA(238, 130, 238),\n  wheat: new RGBA(245, 222, 179),\n  white: new RGBA(255, 255, 255),\n  whitesmoke: new RGBA(245, 245, 245),\n  yellow: new RGBA(255, 255, 0),\n  yellowgreen: new RGBA(154, 205, 50)\n};\n\nexports.default = _exports;\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/modules/timestep/src/ui/Color.js\n// module id = 67\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/modules/timestep/src/ui/Color.js?");

/***/ },
/* 68 */
/*!***************************************************************!*\
  !*** ./modules/devkit-core/modules/timestep/src/ui/filter.js ***!
  \***************************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nexports.__esModule = true;\n\nvar _Color = __webpack_require__(/*! ui/Color */ 67);\n\nvar _Color2 = _interopRequireDefault(_Color);\n\nvar _Image = __webpack_require__(/*! ui/resource/Image */ 43);\n\nvar _Image2 = _interopRequireDefault(_Image);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _exports = {};\n\n/**\n * @license\n * This file is part of the Game Closure SDK.\n *\n * The Game Closure SDK is free software: you can redistribute it and/or modify\n * it under the terms of the Mozilla Public License v. 2.0 as published by Mozilla.\n\n * The Game Closure SDK is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * Mozilla Public License v. 2.0 for more details.\n\n * You should have received a copy of the Mozilla Public License v. 2.0\n * along with the Game Closure SDK.  If not, see <http://mozilla.org/MPL/2.0/>.\n */\n/**\n * @module ui.filter;\n *\n * A namespace for graphical filters used in games. These are attached using\n * View functions and applied using the Image class. This class is purely informational.\n *\n * If this is a namespace, the file name should be lower-case!\n *\n * Resources:\n *  http://jswidget.com/blog/2011/03/11/image-blending-algorithmpart-i/\n *  http://jswidget.com/blog/2011/03/11/image-blending-algorithmpart-ii/\n *\n * @doc http://doc.gameclosure.com/api/ui-filter.html\n * @docsrc https://github.com/gameclosure/doc/blob/master/api/ui/filter.md\n */\n\n\nvar Image;\n\n_exports.Filter = function () {\n  function _class(opts) {\n    _classCallCheck(this, _class);\n\n    this._color = new _Color2.default(opts);\n    this._type = opts.type || '';\n    this._views = [];\n  }\n\n  _class.prototype.get = function get() {\n    var opts = this._color.get();\n    opts.type = this._type;\n    opts.priority = 0;\n    return opts;\n  };\n\n  _class.prototype.getType = function getType() {\n    return this._type;\n  };\n\n  _class.prototype.update = function update(opts) {\n    opts = opts || this.get();\n    this._color.update(opts);\n    this._type = opts.type !== undefined ? opts.type : this._type;\n\n    var views = this._views;\n    for (var i = 0, len = views.length; i < len; i++) {\n      var view = views[i];\n      view.__view.filterColor = this.getColorString();\n      view.__view.filterType = Filter.TYPES[this.getType()] || 0;\n    }\n  };\n\n  _class.prototype.setView = function setView(view) {\n    var views = this._views;\n    if (views.indexOf(view) === -1) {\n      views.push(view);\n    }\n  };\n\n  _class.prototype.removeView = function removeView(view) {\n    var views = this._views;\n    var i = views.indexOf(view);\n    if (i !== -1) {\n      views.splice(i, 1);\n    }\n  };\n\n  _class.prototype.getColorString = function getColorString() {\n    return this._color.toString();\n  };\n\n  return _class;\n}();\nvar Filter = _exports.Filter;\n\nFilter.TYPES = {\n  'None': 0,\n  'LinearAdd': 1,\n  'Multiply': 2,\n  'Tint': 3\n};\n\n/**\n * Linear add (lighten) filter.\n */\n_exports.LinearAddFilter = function (_Filter) {\n  _inherits(_class2, _Filter);\n\n  function _class2(opts) {\n    _classCallCheck(this, _class2);\n\n    var _this = _possibleConstructorReturn(this, _Filter.call(this, opts));\n\n    _this._type = 'LinearAdd';\n    return _this;\n  }\n\n  return _class2;\n}(Filter);\n\n/**\n * Tint (averaging) filter.\n */\n_exports.TintFilter = function (_Filter2) {\n  _inherits(_class3, _Filter2);\n\n  function _class3(opts) {\n    _classCallCheck(this, _class3);\n\n    var _this2 = _possibleConstructorReturn(this, _Filter2.call(this, opts));\n\n    _this2._type = 'Tint';\n    return _this2;\n  }\n\n  return _class3;\n}(Filter);\n\n/**\n * Multiply filter.\n */\n_exports.MultiplyFilter = function (_Filter3) {\n  _inherits(_class4, _Filter3);\n\n  function _class4(opts) {\n    _classCallCheck(this, _class4);\n\n    var _this3 = _possibleConstructorReturn(this, _Filter3.call(this, opts));\n\n    _this3._type = 'Multiply';\n    return _this3;\n  }\n\n  return _class4;\n}(Filter);\n\n/**\n * Positive masking.\n */\n_exports.PositiveMaskFilter = function (_Filter4) {\n  _inherits(_class5, _Filter4);\n\n  function _class5(opts) {\n    _classCallCheck(this, _class5);\n\n    var _this4 = _possibleConstructorReturn(this, _Filter4.call(this, opts));\n\n    _this4._type = 'PositiveMask';\n    if (opts.image) {\n      Image = Image || _Image2.default;\n      _this4._mask = new Image({ url: opts.image });\n    }\n    return _this4;\n  }\n\n  _class5.prototype.getMask = function getMask() {\n    return this._mask;\n  };\n\n  return _class5;\n}(Filter);\n\n/**\n * Negative masking.\n */\n_exports.NegativeMaskFilter = function (_Filter5) {\n  _inherits(_class6, _Filter5);\n\n  function _class6(opts) {\n    _classCallCheck(this, _class6);\n\n    var _this5 = _possibleConstructorReturn(this, _Filter5.call(this, opts));\n\n    _this5._type = 'NegativeMask';\n    if (opts.image) {\n      Image = Image || _Image2.default;\n      _this5._mask = new Image({ url: opts.image });\n    }\n    return _this5;\n  }\n\n  _class6.prototype.getMask = function getMask() {\n    return this._mask;\n  };\n\n  return _class6;\n}(Filter);\n\nexports.default = _exports;\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/modules/timestep/src/ui/filter.js\n// module id = 68\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/modules/timestep/src/ui/filter.js?");

/***/ },
/* 69 */
/*!**********************************************************************!*\
  !*** ./modules/devkit-core/modules/timestep/src/ui/resource/Font.js ***!
  \**********************************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nexports.__esModule = true;\n\nvar _base = __webpack_require__(/*! base */ 2);\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _exports = {};\n\n/**\n * @license\n * This file is part of the Game Closure SDK.\n *\n * The Game Closure SDK is free software: you can redistribute it and/or modify\n * it under the terms of the Mozilla Public License v. 2.0 as published by Mozilla.\n\n * The Game Closure SDK is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * Mozilla Public License v. 2.0 for more details.\n\n * You should have received a copy of the Mozilla Public License v. 2.0\n * along with the Game Closure SDK.  If not, see <http://mozilla.org/MPL/2.0/>.\n */\n/**\n * @class ui.resource.Font;\n * Font string parser, a la CSS Font strings. Exports a Font object class.\n * This class is purely informational.\n *\n * @doc http://doc.gameclosure.com/api/ui-text.html#class-ui.resource.font\n * @docsrc https://github.com/gameclosure/doc/blob/master/api/ui/text.md\n */\nvar _cache = {},\n    weights = 'normal|bold|bolder|lighter|[1-9]00',\n    styles = 'normal|italic|oblique',\n    units = 'px|pt|pc|in|cm|mm|%',\n    name = '([\\\\w\"\\'\\\\- ]+(?:,|$))+',\n    fontParser = new RegExp('^ *' + '(?:(' + weights + ') *)?' + '(?:(' + styles + ') *)?' + '([\\\\d\\\\.]+)(' + units + ')' + '(' + name + ')', 'i'),\n    sizeParser = new RegExp('([\\\\d\\\\.]+)(' + units + ')', 'i'),\n    TO_PT = {\n  'pt': 1,\n  'px': 3 / 4,\n  'in': 3 / 4 * 96,\n  'mm': 3 / 4 * 96 / 25.4,\n  'cm': 3 / 4 * 96 / 2.54\n},\n    TO_PX = {\n  'pt': 4 / 3,\n  'px': 1,\n  'in': 96,\n  'mm': 96 / 25.4,\n  'cm': 96 / 2.54\n};\n\nfunction parseSize(sizeStr, unit) {\n  var match = sizeStr.match(sizeParser);\n  if (!match) {\n    throw 'invalid font size';\n  }\n  return {\n    value: parseFloat(match[1]),\n    unit: match[2]\n  };\n}\n\nfunction toPx(size) {\n  return {\n    value: size.value * TO_PX[size.unit],\n    unit: 'px'\n  };\n}\n\nfunction toPt(size) {\n  return {\n    value: size.value * TO_PT[size.unit],\n    unit: 'pt'\n  };\n}\n\nfunction parseFont(fontStr) {\n  var match = fontStr.match(fontParser);\n  if (!match) {\n    throw 'invalid font string';\n  }\n\n  var res = {};\n  res.weight = match[1] || 'normal';\n  res.style = match[2] || 'normal';\n  res.size = {\n    value: parseFloat(match[3]),\n    unit: match[4]\n  };\n\n  var splitStrings = match[5].split(',');\n\n  res.names = splitStrings.map(function (str) {\n    return str.replace(/[\\-_]/g, ' ').replace(/\\s+/g, ' ').replace(/['\"]/g, '').replace(/^\\s+|\\s+$/g, '');\n  });\n\n  res.name = res.names[0];\n\n  var origNames = splitStrings.map(function (str) {\n    return str.replace(/\\s+/g, ' ').replace(/['\"]/g, '').replace(/^\\s+|\\s+$/g, '');\n  });\n\n  res.origName = origNames[0];\n\n  return res;\n};\n\nvar _defaultFontFamily = null;\n\nvar defaults = {\n  name: _defaultFontFamily,\n  size: 20,\n  unit: 'px',\n  style: '',\n  weight: ''\n};\n\n_exports = function () {\n  function exports(opts) {\n    _classCallCheck(this, exports);\n\n    if (typeof opts === 'string') {\n      _cache[opts] = this;\n      this._string = opts;\n      opts = parseFont(opts);\n    } else {\n      opts = (0, _base.merge)(opts, defaults);\n    }\n\n    if (typeof opts.size == 'string') {\n      opts.size = parseSize(opts.size);\n    }\n\n    this._name = opts.name;\n    this._origName = opts.origName;\n    this._style = opts.style;\n    this.size = opts.size;\n    this.sizePx = toPx(this.size).value;\n    this.sizePt = toPt(this.size).value;\n    this._weight = opts.weight;\n\n    this._isBold = /bold/i.test(this._weight);\n  }\n\n  exports.prototype.getSize = function getSize() {\n    return this.sizePx;\n  };\n\n  exports.prototype.getName = function getName() {\n    return this._name;\n  };\n\n  exports.prototype.getOrigName = function getOrigName() {\n    return this._origName;\n  };\n\n  exports.prototype.getWeight = function getWeight() {\n    return this._weight;\n  };\n\n  return exports;\n}();\nvar Font = _exports;\n\nFont.parse = function (str) {\n  if (str in _cache) {\n    return _cache[str];\n  } else {\n    return new Font(str);\n  }\n};\n\nFont.prototype.constructor.setDefaultFontFamily = function (fontFamily) {\n  _defaultFontFamily = fontFamily;\n};\n\nexports.default = _exports;\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/modules/timestep/src/ui/resource/Font.js\n// module id = 69\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/modules/timestep/src/ui/resource/Font.js?");

/***/ },
/* 70 */
/*!********************************************************************************************!*\
  !*** ./modules/devkit-core/modules/timestep/src/platforms/browser/webgl/WebGLContext2D.js ***!
  \********************************************************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nexports.__esModule = true;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _base = __webpack_require__(/*! base */ 2);\n\nvar _device = __webpack_require__(/*! device */ 1);\n\nvar _device2 = _interopRequireDefault(_device);\n\nvar _loader = __webpack_require__(/*! ui/resource/loader */ 46);\n\nvar _loader2 = _interopRequireDefault(_loader);\n\nvar _Color = __webpack_require__(/*! ui/Color */ 67);\n\nvar _Color2 = _interopRequireDefault(_Color);\n\nvar _TextManager = __webpack_require__(/*! ./TextManager */ 71);\n\nvar _TextManager2 = _interopRequireDefault(_TextManager);\n\nvar _Shaders = __webpack_require__(/*! ./Shaders */ 75);\n\nvar _Shaders2 = _interopRequireDefault(_Shaders);\n\nvar _Matrix2D = __webpack_require__(/*! ./Matrix2D */ 30);\n\nvar _Matrix2D2 = _interopRequireDefault(_Matrix2D);\n\nvar _WebGLTextureManager = __webpack_require__(/*! ./WebGLTextureManager */ 76);\n\nvar _WebGLTextureManager2 = _interopRequireDefault(_WebGLTextureManager);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _exports = {};\n\n/**\n * @license\n * This file is part of the Game Closure SDK.\n *\n * The Game Closure SDK is free software: you can redistribute it and/or modify\n * it under the terms of the Mozilla Public License v. 2.0 as published by Mozilla.\n\n * The Game Closure SDK is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * Mozilla Public License v. 2.0 for more details.\n\n * You should have received a copy of the Mozilla Public License v. 2.0\n * along with the Game Closure SDK.  If not, see <http://mozilla.org/MPL/2.0/>.\n */\n/**\n * @package timestep.env.browser.WebGLContext2D;\n *\n * Generates a WebGL rendering context by creating our own Canvas element.\n */\n\nvar ContextStateStack = function () {\n  function ContextStateStack() {\n    _classCallCheck(this, ContextStateStack);\n\n    this._states = [this.getObject()];\n    this._stateIndex = 0;\n  }\n\n  ContextStateStack.prototype.save = function save() {\n    var lastState = this.state;\n    if (++this._stateIndex >= this._states.length) {\n      this._states[this._stateIndex] = this.getObject();\n    }\n\n    var s = this.state;\n    s.globalCompositeOperation = lastState.globalCompositeOperation;\n    s.globalAlpha = lastState.globalAlpha;\n    s.transform.copy(lastState.transform);\n    s.textBaseLine = lastState.textBaseLine;\n    s.lineWidth = lastState.lineWidth;\n    s.strokeStyle = lastState.strokeStyle;\n    s.fillStyle = lastState.fillStyle;\n    s.filter = lastState.filter;\n    s.clip = lastState.clip;\n    s.clipRect.x = lastState.clipRect.x;\n    s.clipRect.y = lastState.clipRect.y;\n    s.clipRect.width = lastState.clipRect.width;\n    s.clipRect.height = lastState.clipRect.height;\n  };\n\n  ContextStateStack.prototype.restore = function restore() {\n    if (this._stateIndex > 0) {\n      this._stateIndex--;\n    }\n  };\n\n  ContextStateStack.prototype.getObject = function getObject() {\n    return {\n      globalCompositeOperation: 'source-over',\n      globalAlpha: 1,\n      transform: new _Matrix2D2.default(),\n      lineWidth: 1,\n      filter: null,\n      clip: false,\n      clipRect: {\n        x: 0,\n        y: 0,\n        width: 0,\n        height: 0\n      },\n      fillStyle: '',\n      strokeStyle: ''\n    };\n  };\n\n  _createClass(ContextStateStack, [{\n    key: 'state',\n    get: function get() {\n      return this._states[this._stateIndex];\n    }\n  }, {\n    key: 'parentState',\n    get: function get() {\n      return this._stateIndex > 0 ? this._states[this._stateIndex - 1] : null;\n    }\n  }]);\n\n  return ContextStateStack;\n}();\n\nvar STRIDE = 24;\n\nvar RENDER_MODES = {\n  Default: 0,\n  LinearAdd: 1,\n  Tint: 2,\n  Multiply: 3,\n  Rect: 4,\n  PositiveMask: 0,\n  NegativeMask: 0\n};\n\nvar COLOR_MAP = {};\n\nvar getColor = function getColor(key) {\n  var result = COLOR_MAP[key];\n  if (!result) {\n    result = COLOR_MAP[key] = _Color2.default.parse(key);\n  }\n  return result;\n};\n\nvar MAX_BATCH_SIZE = 512;\nvar CACHE_UID = 0;\n\nvar GLManager = function () {\n  function GLManager() {\n    _classCallCheck(this, GLManager);\n\n    var webglSupported = false;\n\n    try {\n      var testCanvas = document.createElement('canvas');\n      webglSupported = !!(window.WebGLRenderingContext && testCanvas.getContext('webgl'));\n    } catch (e) {}\n\n    this.width = _device2.default.screen.width;\n    this.height = _device2.default.screen.height;\n    this.isSupported = webglSupported && _base.CONFIG.useWebGL;\n\n    if (!this.isSupported) {\n      return;\n    }\n\n    this.textManager = new _TextManager2.default();\n    this.textureManager = new _WebGLTextureManager2.default();\n\n    this.textureManager.on(_WebGLTextureManager2.default.TEXTURE_REMOVED, (0, _base.bind)(this, this.flush));\n\n    this._helperTransform = new _Matrix2D2.default();\n\n    this._canvas = document.createElement('canvas');\n    this._canvas.width = this.width;\n    this._canvas.height = this.height;\n    this._canvas.getWebGLContext = this._canvas.getContext.bind(this._canvas, 'webgl', {\n      depth: false,\n      antialias: false,\n      alpha: true,\n      premultipliedAlpha: true,\n      preserveDrawingBuffer: _base.CONFIG.preserveDrawingBuffer\n    });\n\n    this._indexCache = new Uint16Array(MAX_BATCH_SIZE * 6);\n    this._vertexCache = new ArrayBuffer(MAX_BATCH_SIZE * STRIDE * 4);\n    this._vertices = new Float32Array(this._vertexCache);\n    this._colors = new Uint8Array(this._vertexCache);\n\n    var indexCount = MAX_BATCH_SIZE * 6;\n    for (var i = 0, j = 0; i < indexCount; i += 6, j += 4) {\n      this._indexCache[i] = j;\n      this._indexCache[i + 1] = j + 2;\n      this._indexCache[i + 2] = j + 3;\n      this._indexCache[i + 3] = j;\n      this._indexCache[i + 4] = j + 3;\n      this._indexCache[i + 5] = j + 1;\n    }\n\n    this._batchQueue = new Array(MAX_BATCH_SIZE);\n\n    for (var i = 0; i <= MAX_BATCH_SIZE; i++) {\n      this._batchQueue[i] = {\n        textureId: 0,\n        index: 0,\n        clip: false,\n        filter: null,\n        clipRect: {\n          x: 0,\n          y: 0,\n          width: 0,\n          height: 0\n        },\n        renderMode: 0\n      };\n    }\n\n    this.contexts = [];\n    this.initGL();\n    this._primaryContext = new Context2D(this, this._canvas);\n    this.activate(this._primaryContext);\n\n    _loader2.default.on(_loader2.default.IMAGE_LOADED, function (image) {\n      this.createOrUpdateTexture(image, image.__GL_ID, true);\n    }.bind(this));\n\n    this.contextActive = true;\n\n    this._canvas.addEventListener('webglcontextlost', this.handleContextLost.bind(this), false);\n    this._canvas.addEventListener('webglcontextrestored', this.handleContextRestored.bind(this), false);\n  }\n\n  GLManager.prototype.handleContextLost = function handleContextLost(e) {\n    e.preventDefault();\n    this.contextActive = false;\n    this.gl = null;\n  };\n\n  GLManager.prototype.handleContextRestored = function handleContextRestored() {\n    this.initGL();\n    this.contextActive = true;\n  };\n\n  GLManager.prototype.initGL = function initGL() {\n    var gl = this.gl = this._canvas.getWebGLContext();\n\n    gl.clearColor(0, 0, 0, 0);\n    gl.disable(gl.DEPTH_TEST);\n    gl.disable(gl.CULL_FACE);\n    gl.enable(gl.BLEND);\n    gl.blendEquation(gl.FUNC_ADD);\n    gl.activeTexture(gl.TEXTURE0);\n\n    this._scissorEnabled = false;\n    this._activeScissor = {\n      x: 0,\n      y: 0,\n      width: 0,\n      height: 0\n    };\n\n    this._activeCompositeOperation = '';\n    this.setActiveCompositeOperation('source-over');\n    this._activeRenderMode = -1;\n    this._activeShader = null;\n\n    gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, true);\n\n    this._drawIndex = -1;\n    this._batchIndex = -1;\n\n    // Initialize Buffers\n    this._indexBuffer = gl.createBuffer();\n    this._vertexBuffer = gl.createBuffer();\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this._indexBuffer);\n    gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, this._indexCache, gl.STATIC_DRAW);\n    gl.bindBuffer(gl.ARRAY_BUFFER, this._vertexBuffer);\n    gl.bufferData(gl.ARRAY_BUFFER, this._vertexCache, gl.DYNAMIC_DRAW);\n\n    // Initialize Shaders\n    this.shaders = [];\n    this.shaders[RENDER_MODES.Default] = new _Shaders2.default.DefaultShader({ gl: gl });\n    this.shaders[RENDER_MODES.LinearAdd] = new _Shaders2.default.LinearAddShader({ gl: gl });\n    this.shaders[RENDER_MODES.Tint] = new _Shaders2.default.TintShader({ gl: gl });\n    this.shaders[RENDER_MODES.Multiply] = new _Shaders2.default.MultiplyShader({ gl: gl });\n    this.shaders[RENDER_MODES.Rect] = new _Shaders2.default.RectShader({ gl: gl });\n\n    this.textureManager.initGL(gl);\n    this.updateContexts();\n  };\n\n  GLManager.prototype.updateContexts = function updateContexts() {\n    for (var i = 0; i < this.contexts.length; i++) {\n      this.contexts[i].createOffscreenFrameBuffer();\n    }\n  };\n\n  GLManager.prototype.updateCanvasDimensions = function updateCanvasDimensions() {\n    this._primaryContext.resize(this._canvas.width, this._canvas.height);\n  };\n\n  GLManager.prototype.getContext = function getContext(canvas, opts) {\n    opts = opts || {};\n\n    var ctx;\n    if (opts.offscreen === false) {\n      ctx = this._primaryContext;\n      ctx.resize(opts.width, opts.height);\n    } else {\n      ctx = new Context2D(this, canvas);\n      ctx.createOffscreenFrameBuffer();\n      this.contexts.push(ctx);\n    }\n\n    return ctx;\n  };\n\n  GLManager.prototype.setActiveRenderMode = function setActiveRenderMode(id) {\n    if (this._activeRenderMode === id || !this.gl) {\n      return;\n    }\n\n    var ctx = this._activeCtx;\n    this._activeRenderMode = id;\n    var shader = this.shaders[id];\n\n    if (this._activeShader && this._activeShader !== shader) {\n      this._activeShader.disableVertexAttribArrays();\n    }\n\n    this._activeShader = shader;\n    var gl = this.gl;\n    gl.useProgram(shader.program);\n    shader.enableVertexAttribArrays();\n    gl.uniform2f(shader.uniforms.uResolution, ctx.width, ctx.height);\n    if (shader.uniforms.uSampler !== -1) {\n      gl.uniform1i(shader.uniforms.uSampler, 0);\n    }\n  };\n\n  GLManager.prototype.setActiveCompositeOperation = function setActiveCompositeOperation(op) {\n    op = op || 'source-over';\n    if (this._activeCompositeOperation === op || !this.gl) {\n      return;\n    }\n    this._activeCompositeOperation = op;\n\n    var gl = this.gl;\n    var source;\n    var destination;\n\n    switch (op) {\n      case 'source-over':\n        source = gl.ONE;\n        destination = gl.ONE_MINUS_SRC_ALPHA;\n        break;\n\n      case 'source-atop':\n        source = gl.DST_ALPHA;\n        destination = gl.ONE_MINUS_SRC_ALPHA;\n        break;\n\n      case 'source-in':\n        source = gl.DST_ALPHA;\n        destination = gl.ZERO;\n        break;\n\n      case 'source-out':\n        source = gl.ONE_MINUS_DST_ALPHA;\n        destination = gl.ZERO;\n        break;\n\n      case 'destination-atop':\n        source = gl.DST_ALPHA;\n        destination = gl.SRC_ALPHA;\n        break;\n\n      case 'destination-in':\n        source = gl.ZERO;\n        destination = gl.SRC_ALPHA;\n        break;\n\n      case 'destination-out':\n        source = gl.ONE_MINUS_SRC_ALPHA;\n        destination = gl.ONE_MINUS_SRC_ALPHA;\n        break;\n\n      case 'destination-over':\n        source = gl.DST_ALPHA;\n        destination = gl.SRC_ALPHA;\n        break;\n\n      case 'lighter':\n        source = gl.ONE;\n        destination = gl.ONE;\n        break;\n\n      case 'xor':\n      case 'copy':\n        source = gl.ONE;\n        destination = gl.ONE_MINUS_SRC_ALPHA;\n        break;\n\n      default:\n        source = gl.ONE;\n        destination = gl.ONE_MINUS_SRC_ALPHA;\n        break;\n    }\n    gl.blendFunc(source, destination);\n  };\n\n  GLManager.prototype.flush = function flush() {\n    if (this._batchIndex === -1 || !this.gl) {\n      return;\n    }\n\n    var gl = this.gl;\n    gl.bufferSubData(gl.ARRAY_BUFFER, 0, this._vertexCache);\n    this._batchQueue[this._batchIndex + 1].index = this._drawIndex + 1;\n\n    for (var i = 0; i <= this._batchIndex; i++) {\n      var curQueueObj = this._batchQueue[i];\n      if (curQueueObj.clip) {\n        var r = curQueueObj.clipRect;\n        this.enableScissor(r.x, r.y, r.width, r.height);\n      } else {\n        this.disableScissor();\n      }\n      var textureId = curQueueObj.textureId;\n      if (textureId !== -1) {\n        var texture = this.textureManager.getTexture(textureId);\n        if (!texture) {\n          continue;\n        }\n        gl.bindTexture(gl.TEXTURE_2D, texture);\n      }\n      this.setActiveCompositeOperation(curQueueObj.globalCompositeOperation);\n      this.setActiveRenderMode(curQueueObj.renderMode);\n      var start = curQueueObj.index;\n      var next = this._batchQueue[i + 1].index;\n      gl.drawElements(gl.TRIANGLES, (next - start) * 6, gl.UNSIGNED_SHORT, start * 12);\n    }\n\n    this._drawIndex = -1;\n    this._batchIndex = -1;\n  };\n\n  GLManager.prototype.createOrUpdateTexture = function createOrUpdateTexture(image, id, drawImmediately) {\n    var gl = this.gl;\n\n    if (!gl) {\n      return -1;\n    }\n\n    id = this.textureManager.createOrUpdateTexture(image, id);\n\n    if (drawImmediately) {\n      var currentAlpha = this._primaryContext.globalAlpha;\n      // Draw single, transparent pixel of image to ensure upload to buffer\n      this._primaryContext.globalAlpha = 0.00001;\n      this._primaryContext.drawImage(image, 0, 0, 1, 1, 0, 0, 1, 1);\n      this.flush();\n      this._primaryContext.globalAlpha = currentAlpha;\n    }\n\n    return id;\n  };\n\n  GLManager.prototype.getTexture = function getTexture(id) {\n    return this.textureManager.getTexture(id);\n  };\n\n  GLManager.prototype.deleteTexture = function deleteTexture(id) {\n    this.textureManager.deleteTexture(id);\n  };\n\n  GLManager.prototype.deleteTextureForImage = function deleteTextureForImage(image) {\n    this.textureManager.deleteTextureForImage(image);\n  };\n\n  GLManager.prototype.enableScissor = function enableScissor(x, y, width, height) {\n    if (!this.gl) {\n      return;\n    }\n\n    var gl = this.gl;\n    if (!this._scissorEnabled) {\n      gl.enable(gl.SCISSOR_TEST);\n      this._scissorEnabled = true;\n    }\n\n    var s = this._activeScissor;\n    var invertedY = this._activeCtx.height - height - y;\n    if (x !== s.x || invertedY !== s.y || width !== s.width || height !== s.height) {\n      s.x = x;\n      s.y = invertedY;\n      s.width = width;\n      s.height = height;\n      gl.scissor(x, invertedY, width, height);\n    }\n  };\n\n  GLManager.prototype.disableScissor = function disableScissor() {\n    if (!this.gl) {\n      return;\n    }\n\n    if (this._scissorEnabled) {\n      var gl = this.gl;\n      this._scissorEnabled = false;\n      gl.disable(gl.SCISSOR_TEST);\n    }\n  };\n\n  GLManager.prototype.addToBatch = function addToBatch(state, textureId) {\n    if (this._drawIndex >= MAX_BATCH_SIZE - 1) {\n      this.flush();\n    }\n    this._drawIndex++;\n\n    var filter = state.filter;\n    var clip = state.clip;\n    var clipRect = state.clipRect;\n\n    var queuedState = this._batchIndex > -1 ? this._batchQueue[this._batchIndex] : null;\n    var stateChanged = !queuedState || queuedState.textureId !== textureId || textureId === -1 && queuedState.fillStyle !== state.fillStyle || queuedState.globalCompositeOperation !== state.globalCompositeOperation || queuedState.filter !== filter || queuedState.clip !== clip || queuedState.clipRect.x !== clipRect.x || queuedState.clipRect.y !== clipRect.y || queuedState.clipRect.width !== clipRect.width || queuedState.clipRect.height !== clipRect.height;\n\n    if (stateChanged) {\n      var queueObject = this._batchQueue[++this._batchIndex];\n      queueObject.textureId = textureId;\n      queueObject.index = this._drawIndex;\n      queueObject.globalCompositeOperation = state.globalCompositeOperation;\n      queueObject.filter = filter;\n      queueObject.clip = clip;\n      queueObject.clipRect.x = clipRect.x;\n      queueObject.clipRect.y = clipRect.y;\n      queueObject.clipRect.width = clipRect.width;\n      queueObject.clipRect.height = clipRect.height;\n\n      if (textureId === -1) {\n        queueObject.renderMode = RENDER_MODES.Rect;\n      } else if (filter) {\n        queueObject.renderMode = RENDER_MODES[filter.getType()];\n      } else {\n        queueObject.renderMode = RENDER_MODES.Default;\n      }\n    }\n\n    return this._drawIndex;\n  };\n\n  GLManager.prototype.isPowerOfTwo = function isPowerOfTwo(width, height) {\n    return width > 0 && (width & width - 1) === 0 && height > 0 && (height & height - 1) === 0;\n  };\n\n  GLManager.prototype.activate = function activate(ctx, forceActivate) {\n    var gl = this.gl;\n    var sameContext = ctx === this._activeCtx;\n\n    if (sameContext && !forceActivate) {\n      return;\n    }\n\n    if (!sameContext) {\n      this.flush();\n      gl.finish();\n      this._activeCtx = ctx;\n    }\n\n    gl.bindFramebuffer(gl.FRAMEBUFFER, ctx.frameBuffer);\n    gl.viewport(0, 0, ctx.width, ctx.height);\n    this._activeRenderMode = -1;\n  };\n\n  return GLManager;\n}();\n\n// Create a context to measure text\n\n\nvar textCtx = document.createElement('canvas').getContext('2d');\n\n// ---------------------------------------------------------------------------\n// CONTEXT2D\n// ---------------------------------------------------------------------------\nvar min = Math.min;\nvar max = Math.max;\nvar floor = Math.floor;\nvar ceil = Math.ceil;\n\nvar Context2D = function () {\n  function Context2D(manager, canvas) {\n    _classCallCheck(this, Context2D);\n\n    this._manager = manager;\n    this.canvas = canvas;\n    this.width = canvas.width;\n    this.height = canvas.height;\n    this.stack = new ContextStateStack();\n    this.font = '11px ' + _device2.default.defaultFontFamily;\n    this.frameBuffer = null;\n    this.filter = null;\n  }\n\n  Context2D.prototype.createOffscreenFrameBuffer = function createOffscreenFrameBuffer() {\n    var gl = this._manager.gl;\n    if (!gl) {\n      return;\n    }\n\n    var activeCtx = this._manager._activeCtx;\n    var id = this._manager.createOrUpdateTexture(this.canvas);\n    this._texture = this._manager.getTexture(id);\n    this.frameBuffer = gl.createFramebuffer();\n    gl.bindFramebuffer(gl.FRAMEBUFFER, this.frameBuffer);\n    gl.bindTexture(gl.TEXTURE_2D, this._texture);\n    gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, this._texture, 0);\n    this.canvas.__glFlip = true;\n    this._manager.activate(activeCtx, true);\n  };\n\n  Context2D.prototype.loadIdentity = function loadIdentity() {\n    this.stack.state.transform.identity();\n  };\n\n  Context2D.prototype.setTransform = function setTransform(a, b, c, d, tx, ty) {\n    this.stack.state.transform.setTo(a, b, c, d, tx, ty);\n  };\n\n  Context2D.prototype.transform = function transform(a, b, c, d, tx, ty) {\n    this._helperTransform.setTo(a, b, c, d, tx, ty);\n    this.stack.state.transform.transform(this._helperTransform);\n  };\n\n  Context2D.prototype.scale = function scale(x, y) {\n    this.stack.state.transform.scale(x, y);\n  };\n\n  Context2D.prototype.translate = function translate(x, y) {\n    this.stack.state.transform.translate(x, y);\n  };\n\n  Context2D.prototype.rotate = function rotate(angle) {\n    this.stack.state.transform.rotate(angle);\n  };\n\n  Context2D.prototype.getElement = function getElement() {\n    return this.canvas;\n  };\n\n  Context2D.prototype.reset = function reset() {};\n\n  Context2D.prototype.clear = function clear() {\n    this._manager.activate(this);\n    this._manager.flush();\n    this._manager.disableScissor();\n    var gl = this._manager.gl;\n    if (gl) {\n      gl.clear(gl.COLOR_BUFFER_BIT);\n    }\n  };\n\n  Context2D.prototype.resize = function resize(width, height) {\n    this.width = width;\n    this.height = height;\n    if (this.canvas instanceof HTMLCanvasElement) {\n      this.canvas.width = width;\n      this.canvas.height = height;\n    }\n    this._manager.activate(this, true);\n    if (this._texture && this._manager.gl) {\n      var gl = this._manager.gl;\n      gl.bindTexture(gl.TEXTURE_2D, this._texture);\n      gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, width, height, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n    }\n  };\n\n  Context2D.prototype.clipRect = function clipRect(x, y, width, height) {\n    var m = this.stack.state.transform;\n    var xW = x + width;\n    var yH = y + height;\n    var x0 = x * m.a + y * m.c + m.tx;\n    var y0 = x * m.b + y * m.d + m.ty;\n    var x1 = xW * m.a + y * m.c + m.tx;\n    var y1 = xW * m.b + y * m.d + m.ty;\n    var x2 = x * m.a + yH * m.c + m.tx;\n    var y2 = x * m.b + yH * m.d + m.ty;\n    var x3 = xW * m.a + yH * m.c + m.tx;\n    var y3 = xW * m.b + yH * m.d + m.ty;\n\n    var minX, maxX, minY, maxY;\n    var parent = this.stack.parentState;\n    var parentClipRect = parent && parent.clip && parent.clipRect;\n\n    if (parentClipRect) {\n      minX = parentClipRect.x;\n      minY = parentClipRect.y;\n      maxX = parentClipRect.x + parentClipRect.width;\n      maxY = parentClipRect.y + parentClipRect.height;\n    } else {\n      minX = 0;\n      minY = 0;\n      maxX = this.width;\n      maxY = this.height;\n    }\n\n    var left = min(maxX, x0, x1, x2, x3);\n    var right = max(minX, x0, x1, x2, x3);\n    var top = min(maxY, y0, y1, y2, y3);\n    var bottom = max(minY, y0, y1, y2, y3);\n\n    if (left < minX) {\n      left = minX;\n    }\n    if (right > maxX) {\n      right = maxX;\n    }\n    if (top < minY) {\n      top = minY;\n    }\n    if (bottom > maxY) {\n      bottom = maxY;\n    }\n\n    this.stack.state.clip = true;\n    var r = this.stack.state.clipRect;\n    r.x = left;\n    r.y = top;\n    r.width = right - left;\n    r.height = bottom - top;\n  };\n\n  Context2D.prototype.swap = function swap() {\n    this._manager.flush();\n  };\n\n  Context2D.prototype.execSwap = function execSwap() {};\n\n  Context2D.prototype.setFilter = function setFilter(filter) {\n    this.filter = this.stack.state.filter = filter;\n  };\n\n  Context2D.prototype.setFilters = function setFilters(filters) {\n    _base.logger.warn('ctx.setFilters is deprecated, use ctx.setFilter instead.');\n    for (var filterId in filters) {\n      this.setFilter(filters[filterId]);\n      return;\n    }\n    this.clearFilter();\n  };\n\n  Context2D.prototype.clearFilter = function clearFilter() {\n    this.filter = this.stack.state.filter = null;\n  };\n\n  Context2D.prototype.clearFilters = function clearFilters() {\n    _base.logger.warn('ctx.clearFilters is deprecated, use ctx.clearFilter instead.');\n    this.clearFilter();\n  };\n\n  Context2D.prototype.save = function save() {\n    this.stack.save();\n  };\n\n  Context2D.prototype.restore = function restore() {\n    this.stack.restore();\n  };\n\n  Context2D.prototype.circle = function circle(x, y, radius) {};\n\n  Context2D.prototype.drawPointSprites = function drawPointSprites(x1, y1, x2, y2) {};\n\n  Context2D.prototype.roundRect = function roundRect(x, y, width, height, radius) {};\n\n  Context2D.prototype.fillText = function fillText(text, x, y) {\n    if (!this._manager.gl) {\n      return;\n    }\n    var textData = this._manager.textManager.get(this, text, false);\n    if (!textData) {\n      return;\n    }\n    var w = textData.image.width;\n    var h = textData.image.height;\n    this.drawImage(textData.image, 0, 0, w, h, x, y, w, h);\n  };\n\n  Context2D.prototype.strokeText = function strokeText(text, x, y) {\n    if (!this._manager.gl) {\n      return;\n    }\n    var textData = this._manager.textManager.get(this, text, true);\n    if (!textData) {\n      return;\n    }\n    var w = textData.image.width;\n    var h = textData.image.height;\n    this.drawImage(textData.image, 0, 0, w, h, x - this.lineWidth * 0.5, y - this.lineWidth * 0.5, w, h);\n  };\n\n  Context2D.prototype.measureText = function measureText(text) {\n    textCtx.font = this.font;\n    return textCtx.measureText(text);\n  };\n\n  Context2D.prototype.drawImage = function drawImage(image, sx, sy, sWidth, sHeight, dx, dy, dWidth, dHeight) {\n    if (!this._manager.gl) {\n      return;\n    }\n\n    var flip = !!image.__glFlip;\n    var state = this.stack.state;\n    var alpha = state.globalAlpha;\n    if (alpha === 0) {\n      return;\n    }\n\n    var manager = this._manager;\n    manager.activate(this);\n\n    var glId = image.__GL_ID;\n    if (glId === undefined || image.__needsUpload) {\n      // Invalid image? Early out if so.\n      if (image.width === 0 || image.height === 0 || !image.complete) {\n        return;\n      }\n      image.__needsUpload = false;\n      glId = manager.createOrUpdateTexture(image, glId);\n    }\n\n    var drawIndex = manager.addToBatch(this.stack.state, glId);\n    var width = this.width;\n    var height = this.height;\n    var imageWidth = image.width;\n    var imageHeight = image.height;\n    var m = state.transform;\n    var sxW = sx + sWidth;\n    var syH = sy + sHeight;\n    var dxW = dx + dWidth;\n    var dyH = dy + dHeight;\n\n    if (flip) {\n      sy = imageHeight - sy;\n      syH = sy - sHeight;\n    }\n\n    var needsTrim = sx < 0 || sxW > imageWidth || sy < 0 || syH > imageHeight;\n\n    if (needsTrim) {\n      var newSX = max(0, sx);\n      var newSY = max(0, sy);\n      var newSXW = min(sxW, imageWidth);\n      var newSYH = min(syH, imageHeight);\n      var scaleX = dWidth / sWidth;\n      var scaleY = dHeight / sHeight;\n      var trimLeft = (newSX - sx) * scaleX;\n      var trimRight = (sxW - newSXW) * scaleX;\n      var trimTop = (newSY - sy) * scaleY;\n      var trimBottom = (syH - newSYH) * scaleY;\n      dx += trimLeft;\n      dxW -= trimRight;\n      dy += trimTop;\n      dyH -= trimBottom;\n      sx = newSX;\n      sy = newSY;\n      sxW = newSXW;\n      syH = newSYH;\n    }\n\n    // Calculate 4 vertex positions\n    var x0 = dx * m.a + dy * m.c + m.tx;\n    var y0 = dx * m.b + dy * m.d + m.ty;\n    var x1 = dxW * m.a + dy * m.c + m.tx;\n    var y1 = dxW * m.b + dy * m.d + m.ty;\n    var x2 = dx * m.a + dyH * m.c + m.tx;\n    var y2 = dx * m.b + dyH * m.d + m.ty;\n    var x3 = dxW * m.a + dyH * m.c + m.tx;\n    var y3 = dxW * m.b + dyH * m.d + m.ty;\n\n    // TOOD: remove private access to _vertices\n    var tw = 1 / imageWidth;\n    var th = 1 / imageHeight;\n    var vc = manager._vertices;\n    var i = drawIndex * 6 * 4;\n\n    var uLeft = sx * tw;\n    var uRight = sxW * tw;\n    var vTop = sy * th;\n    var vBottom = syH * th;\n\n    vc[i + 0] = x0;\n    vc[i + 1] = y0;\n    vc[i + 2] = uLeft;\n    // u0\n    vc[i + 3] = vTop;\n    // v0\n    vc[i + 4] = alpha;\n\n    vc[i + 6] = x1;\n    vc[i + 7] = y1;\n    vc[i + 8] = uRight;\n    // u1\n    vc[i + 9] = vTop;\n    // v1\n    vc[i + 10] = alpha;\n\n    vc[i + 12] = x2;\n    vc[i + 13] = y2;\n    vc[i + 14] = uLeft;\n    // u2\n    vc[i + 15] = vBottom;\n    // v2\n    vc[i + 16] = alpha;\n\n    vc[i + 18] = x3;\n    vc[i + 19] = y3;\n    vc[i + 20] = uRight;\n    // u4\n    vc[i + 21] = vBottom;\n    // v4\n    vc[i + 22] = alpha;\n\n    if (state.filter) {\n      var color = state.filter.get();\n      var ci = drawIndex * 4 * STRIDE;\n      var cc = manager._colors;\n      cc[ci + 20] = cc[ci + 44] = cc[ci + 68] = cc[ci + 92] = color.r;\n      // R\n      cc[ci + 21] = cc[ci + 45] = cc[ci + 69] = cc[ci + 93] = color.g;\n      // G\n      cc[ci + 22] = cc[ci + 46] = cc[ci + 70] = cc[ci + 94] = color.b;\n      // B\n      cc[ci + 23] = cc[ci + 47] = cc[ci + 71] = cc[ci + 95] = color.a * 255;\n    }\n  };\n\n  Context2D.prototype.fillRect = function fillRect(x, y, width, height) {\n    if (this.globalAlpha === 0) {\n      return;\n    }\n\n    this._fillRect(x, y, width, height, getColor(this.stack.state.fillStyle));\n  };\n\n  Context2D.prototype.strokeRect = function strokeRect(x, y, width, height) {\n    var lineWidth = this.stack.state.lineWidth;\n    var halfWidth = lineWidth / 2;\n    var strokeColor = getColor(this.stack.state.strokeStyle);\n    this._fillRect(x + halfWidth, y - halfWidth, width - lineWidth, lineWidth, strokeColor);\n    this._fillRect(x + halfWidth, y + height - halfWidth, width - lineWidth, lineWidth, strokeColor);\n    this._fillRect(x - halfWidth, y - halfWidth, lineWidth, height + lineWidth, strokeColor);\n    this._fillRect(x + width - halfWidth, y - halfWidth, lineWidth, height + lineWidth, strokeColor);\n  };\n\n  Context2D.prototype._fillRect = function _fillRect(x, y, width, height, color) {\n    var m = this.stack.state.transform;\n    var xW = x + width;\n    var yH = y + height;\n\n    // Calculate 4 vertex positions\n    var x0 = x * m.a + y * m.c + m.tx;\n    var y0 = x * m.b + y * m.d + m.ty;\n    var x1 = xW * m.a + y * m.c + m.tx;\n    var y1 = xW * m.b + y * m.d + m.ty;\n    var x2 = x * m.a + yH * m.c + m.tx;\n    var y2 = x * m.b + yH * m.d + m.ty;\n    var x3 = xW * m.a + yH * m.c + m.tx;\n    var y3 = xW * m.b + yH * m.d + m.ty;\n\n    var manager = this._manager;\n    manager.activate(this);\n    var drawIndex = manager.addToBatch(this.stack.state, -1);\n\n    // TODO: remove private access to _vertices\n    var vc = manager._vertices;\n    var i = drawIndex * 6 * 4;\n\n    vc[i + 0] = x0;\n    vc[i + 1] = y0;\n    vc[i + 4] = this.globalAlpha;\n\n    vc[i + 6] = x1;\n    vc[i + 7] = y1;\n    vc[i + 10] = this.globalAlpha;\n\n    vc[i + 12] = x2;\n    vc[i + 13] = y2;\n    vc[i + 16] = this.globalAlpha;\n\n    vc[i + 18] = x3;\n    vc[i + 19] = y3;\n    vc[i + 22] = this.globalAlpha;\n\n    var ci = drawIndex * 4 * STRIDE;\n    var cc = manager._colors;\n    cc[ci + 20] = cc[ci + 44] = cc[ci + 68] = cc[ci + 92] = color.r;\n    // R\n    cc[ci + 21] = cc[ci + 45] = cc[ci + 69] = cc[ci + 93] = color.g;\n    // G\n    cc[ci + 22] = cc[ci + 46] = cc[ci + 70] = cc[ci + 94] = color.b;\n    // B\n    cc[ci + 23] = cc[ci + 47] = cc[ci + 71] = cc[ci + 95] = color.a * 255;\n  };\n\n  Context2D.prototype.deleteTextureForImage = function deleteTextureForImage(canvas) {\n    this._manager.deleteTextureForImage(canvas);\n  };\n\n  return Context2D;\n}();\n\nContext2D.prototype._helperTransform = new _Matrix2D2.default();\nvar createContextProperty = function createContextProperty(ctx, name) {\n  Object.defineProperty(ctx, name, {\n    get: function get() {\n      return this.stack.state[name];\n    },\n    set: function set(value) {\n      this.stack.state[name] = value;\n    }\n  });\n};\n\nvar contextProperties = ['globalAlpha', 'globalCompositeOperation', 'textBaseLine', 'lineWidth', 'strokeStyle', 'fillStyle', 'font'];\n\nfor (var i = 0; i < contextProperties.length; i++) {\n  createContextProperty(Context2D.prototype, contextProperties[i]);\n}\n\n_exports = new GLManager();\n\nexports.default = _exports;\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/modules/timestep/src/platforms/browser/webgl/WebGLContext2D.js\n// module id = 70\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/modules/timestep/src/platforms/browser/webgl/WebGLContext2D.js?");

/***/ },
/* 71 */
/*!*****************************************************************************************!*\
  !*** ./modules/devkit-core/modules/timestep/src/platforms/browser/webgl/TextManager.js ***!
  \*****************************************************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nexports.__esModule = true;\n\nvar _browser = __webpack_require__(/*! util/browser */ 72);\n\nvar _browser2 = _interopRequireDefault(_browser);\n\nvar _timer = __webpack_require__(/*! timer */ 36);\n\nvar _timer2 = _interopRequireDefault(_timer);\n\nvar _FontLoader = __webpack_require__(/*! ./FontLoader */ 74);\n\nvar _FontLoader2 = _interopRequireDefault(_FontLoader);\n\nvar _Font = __webpack_require__(/*! ui/resource/Font */ 69);\n\nvar _Font2 = _interopRequireDefault(_Font);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _exports = {};\n\nvar $ = _browser2.default.$;\n\n\nvar MAX_BUFFERS = 500;\n\n_exports = function () {\n  function exports() {\n    _classCallCheck(this, exports);\n\n    this._buffers = {};\n    this._numBuffers = 0;\n  }\n\n  exports.prototype.get = function get(ctx, text, stroked) {\n    var font = ctx.font;\n    var fontData = _Font2.default.parse(font);\n    if (!isFontLoaded(fontData.getOrigName())) {\n      return;\n    }\n\n    var bufferKey = (stroked ? ctx.lineWidth + '|' + ctx.strokeStyle + '|' : '-|' + ctx.fillStyle) + '|' + font + '|' + text;\n\n    if (!this._buffers[bufferKey]) {\n      if (this._numBuffers > MAX_BUFFERS) {\n        var oldest = Infinity;\n        var oldestKey = null;\n        for (var key in this._buffers) {\n          var lastUsed = this._buffers[key].lastUsed;\n          if (lastUsed < oldest) {\n            oldest = lastUsed;\n            oldestKey = key;\n          }\n        }\n\n        ctx.deleteTextureForImage(this._buffers[oldestKey].image);\n        delete this._buffers[oldestKey];\n      } else {\n        ++this._numBuffers;\n      }\n\n      var canvas = document.createElement('canvas');\n      canvas.complete = true;\n      this._buffers[bufferKey] = {\n        lastUsed: 0,\n        image: canvas,\n        metrics: this._render(canvas, text, font, stroked, ctx.fillStyle, ctx.strokeStyle, ctx.lineWidth)\n      };\n    }\n\n    this._buffers[bufferKey].lastUsed = _timer2.default.now;\n    return this._buffers[bufferKey];\n  };\n\n  exports.prototype._render = function _render(canvas, text, font, stroked, fillStyle, strokeStyle, lineWidth) {\n    var ctx = canvas.getContext('2d');\n    var metrics = getTextHeight(font);\n\n    ctx.font = font;\n\n    canvas.width = ctx.measureText(text).width + lineWidth;\n    canvas.height = metrics.height + lineWidth;\n\n    ctx.textBaseline = 'top';\n    ctx.font = font;\n    if (stroked) {\n      ctx.strokeStyle = strokeStyle;\n      ctx.lineWidth = lineWidth;\n      ctx.strokeText(text, lineWidth / 2, lineWidth / 2);\n    } else {\n      ctx.fillStyle = fillStyle;\n      ctx.fillText(text, 0, 0);\n    }\n\n    return metrics;\n  };\n\n  return exports;\n}();\n\nvar heightMeasure = document.body.appendChild(document.createElement('div'));\nvar contents = heightMeasure.appendChild(document.createElement('span'));\n$.setText(contents, 'Hg');\nvar baselineDiv = heightMeasure.appendChild(document.createElement('div'));\nbaselineDiv.style.cssText = 'display: inline-block; width: 1px; height: 0px; vertical-align: baseline';\nvar bottomDiv = heightMeasure.appendChild(document.createElement('div'));\nbottomDiv.style.cssText = 'display: inline-block; width: 1px; height: 0px; vertical-align: bottom';\nheightMeasure.style.cssText = 'position: absolute; top: 0px; left: -1000px; visibility: hidden; pointer-events: none';\n\nvar _fontHeightCache = {};\n\nfunction getTextHeight(font) {\n  if (!_fontHeightCache[font]) {\n    heightMeasure.style.font = font;\n    var metrics = {\n      ascent: baselineDiv.getBoundingClientRect().top,\n      height: bottomDiv.getBoundingClientRect().top,\n      descent: 0\n    };\n\n    metrics.descent = metrics.height - metrics.ascent;\n    _fontHeightCache[font] = metrics;\n  }\n\n  return _fontHeightCache[font];\n}\n\nvar isFontLoaded = function () {\n  var FONT_LOADER_TIMEOUT = 30 * 1000;\n  var _loaded = {};\n  var _loading = {};\n\n  function _checkFont(font) {\n    _loading[font] = true;\n\n    new _FontLoader2.default([font], {\n      fontLoaded: function fontLoaded() {\n        _loaded[font] = true;\n      },\n      fontsLoaded: function fontsLoaded(err) {\n        if (err) {\n          console.error(err);\n        }\n      }\n    }, FONT_LOADER_TIMEOUT).loadFonts();\n  }\n\n  return function isFontLoaded(font) {\n    if (!_loading[font]) {\n      _checkFont(font);\n    }\n\n    return _loaded[font];\n  };\n}();\n\nexports.default = _exports;\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/modules/timestep/src/platforms/browser/webgl/TextManager.js\n// module id = 71\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/modules/timestep/src/platforms/browser/webgl/TextManager.js?");

/***/ },
/* 72 */
/*!*************************************************************!*\
  !*** ./modules/devkit-core/~/jsio/packages/util/browser.js ***!
  \*************************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nexports.__esModule = true;\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _base = __webpack_require__(/*! base */ 2);\n\nvar _sizzle = __webpack_require__(/*! ./sizzle */ 73);\n\nvar _sizzle2 = _interopRequireDefault(_sizzle);\n\nvar _Rect = __webpack_require__(/*! math/geom/Rect */ 20);\n\nvar _Rect2 = _interopRequireDefault(_Rect);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar _exports = {};\n\nfunction isWindow(el) {\n  return el && !$.isElement(el) && $.isElement(el.document);\n}\n\nvar singleId = /^#([\\w-]+)$/;\n\n_exports.$ = function (selector, win) {\n  switch (typeof selector === 'undefined' ? 'undefined' : _typeof(selector)) {\n    case 'object':\n      if ($.isElement(selector)) {\n        return $.remove(selector);\n      } else if ($.isElement(selector.document && selector.document.body)) {\n        return $.size(selector);\n      }\n      return $.create(selector);\n    case 'string':\n      if (singleId.test(selector)) {\n        return $.id(selector.substring(1), win);\n      }\n      return _sizzle2.default.apply(_base.GLOBAL, arguments);\n  }\n};\nvar $ = _exports.$;\n\nvar DOM2 = (typeof HTMLElement === 'undefined' ? 'undefined' : _typeof(HTMLElement)) === 'object';\n$.isElement = DOM2 ? function (el) {\n  return el && el instanceof HTMLElement;\n} : function (el) {\n  return el && typeof el.nodeType == 'number' && typeof el.nodeName == 'string';\n};\n\n$.id = function (id, win) {\n  return typeof id == 'string' ? (win || window).document.getElementById(id) : id;\n};\n\n$.apply = function (el, params) {\n  if (params.attrs) {\n    for (var attr in params.attrs) {\n      el.setAttribute(attr, params.attrs[attr]);\n    }\n  }\n\n  if (params.id) {\n    el.id = params.id;\n  }\n  if (params.style) {\n    $.style(el, params.style);\n  }\n  if (params.src) {\n    el.src = params.src;\n  }\n  if (params['class'] || params['className']) {\n    el.className = params['class'] || params['className'];\n  }\n\n  var parent = params.parent || params.parentNode;\n  if (parent && params.first) {\n    $.insertBefore(parent, el, parent.firstChild);\n  } else if (params.before) {\n    $.insertBefore(params.before.parentNode || parent, el, params.before);\n  } else if (params.after) {\n    $.insertAfter(params.after.parentNode || parent, el, params.after);\n  } else if (parent) {\n    parent.appendChild(el);\n  }\n\n  if ('html' in params) {\n    el.innerHTML = params.html;\n  }\n  if ('text' in params) {\n    $.setText(el, params.text);\n  }\n\n  if (params.children) {\n    var c = params.children;\n    for (var i = 0, n = c.length; i < n; ++i) {\n      el.appendChild($.isElement(c[i]) ? c[i] : $(c[i]));\n    }\n  }\n\n  return el;\n};\n\n$.insertBefore = function (parentNode, el, beforeNode) {\n  if (!parentNode || !el) {\n    return;\n  }\n  if (beforeNode && beforeNode.parentNode == parentNode) {\n    parentNode.insertBefore(el, beforeNode);\n  } else {\n    parentNode.appendChild(el);\n  }\n};\n\n$.insertAfter = function (parentNode, el, afterNode) {\n  if (!parentNode || !el) {\n    return;\n  }\n  if (!afterNode || afterNode.parentNode != parentNode) {\n    $.insertBefore(parentNode, el, parentNode.firstChild);\n  } else if (!afterNode.nextSibling) {\n    parentNode.appendChild(el);\n  } else {\n    parentNode.insertBefore(el, afterNode.nextSibling);\n  }\n};\n\n$.create = function (params) {\n  var doc = (params && params.win || window).document;\n  if (!params || typeof params == 'string') {\n    return doc.createElement(params || 'div');\n  };\n\n  return $.apply(params.el || doc.createElement(params.tag || params.tagName || 'div'), params);\n};\n\n$.show = function (el, how) {\n  $.id(el).style.display = how || 'block';\n};\n$.hide = function (el) {\n  $.id(el).style.display = 'none';\n};\n\n// accepts an array or a space-delimited string of classNames\n$.addClass = function (el, classNames) {\n  if (!el) {\n    return;\n  }\n  var el = $.id(el);\n  if (typeof classNames == 'string') {\n    classNames = classNames.split(' ');\n  }\n\n  var current = ' ' + el.className + ' ';\n  for (var i = 0, len = classNames.length; i < len; ++i) {\n    var c = classNames[i];\n    if (current.indexOf(' ' + c + ' ') == -1) {\n      current += c + ' ';\n    }\n  }\n\n  el.className = current.replace(/^\\s+|\\s+$/g, '');\n  return $;\n};\n\n/* returns true if the given className is found in the list of\n * classes on the given element.\n */\n$.hasClass = function (el, className) {\n  if (!el) {\n    return false;\n  }\n\n  var el = $.id(el);\n  var classNames = el.className.split(' ');\n\n  for (var i = 0, len = classNames.length; i < len; ++i) {\n    if (classNames[i].trim() === className) {\n      return true;\n    }\n  }\n\n  return false;\n};\n\n$.getTag = function (from, tag) {\n  return from.getElementsByTagName(tag);\n};\n\n$.removeClass = function (el, classNames) {\n  if (!el) {\n    return;\n  }\n  var el = $.id(el);\n  el.className = (' ' + el.className + ' ').replace(' ', '  ').replace(new RegExp('( ' + classNames.replace('s+', ' | ').replace('-', '-') + ' )', 'g'), ' ').replace(/\\s+/, ' ').replace(/^\\s+|\\s+$/g, '');\n};\n\nfunction ieGetAlpha(el) {\n  try {\n    return el.filters.item('alpha');\n  } catch (e) {}\n\n  try {\n    return el.filters.item('progid:DXImageTransform.Microsoft.Alpha');\n  } catch (e) {}\n\n  return null;\n}\n\n$.style = function (el, style) {\n  if (el instanceof Array) {\n    for (var i = 0, o; o = el[i]; ++i) {\n      $.style(o, style);\n    }\n    return;\n  }\n\n  el = $.id(el);\n  var s = el.style;\n  for (var prop in style) {\n    switch (prop) {\n      case 'styleFloat':\n      case 'cssFloat':\n      case 'float':\n        s.styleFloat = s.cssFloat = style[prop];\n        break;\n      case 'opacity':\n        s.opacity = style[prop];\n        if (el.filters) {\n          try {\n            var alpha = ieGetAlpha();\n            var opacity = style[prop] == 1 ? 99.99 : style[prop] * 100;\n            if (!alpha) {\n              // TODO: this might destroy any existing filters?\n              s.filter = 'alpha(opacity=' + opacity + ')';\n            } else {\n              alpha.Opacity = opacity;\n            }\n          } catch (e) {}\n        }\n        break;\n      case 'borderRadius':\n        s.borderRadius = s.MozBorderRadius = style[prop];\n        break;\n      case 'boxSizing':\n        s.MsBoxSizing = s.MozBoxSizing = s.WebkitBoxSizing = style[prop];\n      default:\n        s[prop] = style[prop];\n        break;\n    }\n  }\n};\n\n$.onEvent = function (el, name, f) {\n  if (typeof f != 'function') {\n    f = _base.bind.apply(_base.GLOBAL, Array.prototype.slice.call(arguments, 2));\n  }\n\n  var handler = f;\n\n  el = $.id(el);\n  if (el.addEventListener) {\n    el.addEventListener(name, handler, false);\n  } else {\n    handler = function handler(e) {\n      var evt = e || window.event;\n      // TODO: normalize the event object\n      f(evt);\n    };\n\n    el.attachEvent('on' + name, handler);\n  }\n\n  return (0, _base.bind)($, 'removeEvent', el, name, handler);\n};\n\n$.removeEvent = function (el, name, f) {\n  el = $.id(el);\n  if (el.addEventListener) {\n    el.removeEventListener(name, f, false);\n  } else {\n    el.detachEvent('on' + name, f);\n  }\n};\n\n$.stopEvent = function (e) {\n  if (e) {\n    e.cancelBubble = true;\n    if (e.stopPropagation) {\n      e.stopPropagation();\n    }\n    if (e.preventDefault) {\n      e.preventDefault();\n    }\n  }\n};\n\n$.setText = function (el, text) {\n  el = $.id(el);\n  text = String(text);\n  if ('textContent' in el) {\n    el.textContent = text;\n  } else if ('innerText' in el) {\n    el.innerText = text.replace(/\\n/g, ' ');\n  } else {\n    el.innerHTML = '';\n    el.appendChild(document.createTextNode(text));\n  }\n};\n\n$.setValue = function (el, value) {\n  el = $.id(el);\n  if ('value' in el) {\n    el.value = value;\n  } else if ('value' in el.firstChild) {\n    el.firstChild.value = value;\n  }\n};\n\n$.remove = function (el) {\n  el = $.id(el);\n  if (el && el.parentNode) {\n    el.parentNode.removeChild(el);\n  }\n};\n\n$.cursorPos = function (ev, el) {\n  var offset = $.pos(el);\n  offset.top = ev.clientY - offset.top + (window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop);\n  offset.left = ev.clientX - offset.left + (window.pageXOffset || document.documentElement.scrollLeft || document.body.scrollLeft);\n  return offset;\n};\n\n$.pos = function (el) {\n  var parent = el;\n  var offset = {\n    top: 0,\n    left: 0\n  };\n  while (parent && parent != document.body) {\n    offset.left += parent.offsetLeft;\n    offset.top += parent.offsetTop;\n    while (parent.offsetParent != parent.parentNode) {\n      offset.top -= parent.scrollTop;\n      offset.left -= parent.scrollLeft;\n      parent = parent.parentNode;\n    }\n    parent = parent.offsetParent;\n  }\n  return offset;\n};\n\n$.size = function (el) {\n  if ($.isElement(el)) {\n    return {\n      width: el.offsetWidth,\n      height: el.offsetHeight\n    };\n  } else if (el.document) {\n    var doc = el.document.documentElement || el.document.body;\n    return new _Rect2.default(doc.offsetTop, doc.offsetLeft, el.innerWidth || doc.clientWidth || doc.clientWidth, el.innerHeight || doc.clientHeight || doc.clientHeight);\n  }\n};\n\n$.insertCSSFile = function (filename) {\n  document.getElementsByTagName('head')[0].appendChild($({\n    tag: 'link',\n    attrs: {\n      rel: 'stylesheet',\n      type: 'text/css',\n      href: filename\n    }\n  }));\n};\n\nexports.default = _exports;\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/~/jsio/packages/util/browser.js\n// module id = 72\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/~/jsio/packages/util/browser.js?");

/***/ },
/* 73 */
/*!************************************************************!*\
  !*** ./modules/devkit-core/~/jsio/packages/util/sizzle.js ***!
  \************************************************************/
/***/ function(module, exports) {

	eval("'use strict';\n\nexports.__esModule = true;\nvar _exports = {};\n\n/*!\n * Sizzle CSS Selector Engine - v1.0\n *  Copyright 2009, The Dojo Foundation\n *  Released under the MIT, BSD, and GPL Licenses.\n *  More information: http://sizzlejs.com/\n */\n_exports = function () {\n  var chunker = /((?:\\((?:\\([^()]+\\)|[^()]+)+\\)|\\[(?:\\[[^[\\]]*\\]|['\"][^'\"]*['\"]|[^[\\]'\"]+)+\\]|\\\\.|[^ >+~,(\\[\\\\]+)+|[>+~])(\\s*,\\s*)?/g,\n      done = 0,\n      toString = Object.prototype.toString,\n      hasDuplicate = false;\n\n  var _Sizzle = function Sizzle(selector, context, results, seed) {\n    results = results || [];\n    var origContext = context = context || document;\n\n    if (context.nodeType !== 1 && context.nodeType !== 9) {\n      return [];\n    }\n\n    if (!selector || typeof selector !== 'string') {\n      return results;\n    }\n\n    var parts = [],\n        m,\n        set,\n        checkSet,\n        check,\n        mode,\n        extra,\n        prune = true,\n        contextXML = isXML(context);\n\n    // Reset the position of the chunker regexp (start from head)\n    chunker.lastIndex = 0;\n\n    while ((m = chunker.exec(selector)) !== null) {\n      parts.push(m[1]);\n\n      if (m[2]) {\n        extra = RegExp.rightContext;\n        break;\n      }\n    }\n\n    if (parts.length > 1 && origPOS.exec(selector)) {\n      if (parts.length === 2 && Expr.relative[parts[0]]) {\n        set = posProcess(parts[0] + parts[1], context);\n      } else {\n        set = Expr.relative[parts[0]] ? [context] : _Sizzle(parts.shift(), context);\n\n        while (parts.length) {\n          selector = parts.shift();\n\n          if (Expr.relative[selector]) {\n            selector += parts.shift();\n          }\n\n          set = posProcess(selector, set);\n        }\n      }\n    } else {\n      // Take a shortcut and set the context if the root selector is an ID\n      // (but not if it'll be faster if the inner selector is an ID)\n      if (!seed && parts.length > 1 && context.nodeType === 9 && !contextXML && Expr.match.ID.test(parts[0]) && !Expr.match.ID.test(parts[parts.length - 1])) {\n        var ret = _Sizzle.find(parts.shift(), context, contextXML);\n        context = ret.expr ? _Sizzle.filter(ret.expr, ret.set)[0] : ret.set[0];\n      }\n\n      if (context) {\n        var ret = seed ? {\n          expr: parts.pop(),\n          set: makeArray(seed)\n        } : _Sizzle.find(parts.pop(), parts.length === 1 && (parts[0] === '~' || parts[0] === '+') && context.parentNode ? context.parentNode : context, contextXML);\n        set = ret.expr ? _Sizzle.filter(ret.expr, ret.set) : ret.set;\n\n        if (parts.length > 0) {\n          checkSet = makeArray(set);\n        } else {\n          prune = false;\n        }\n\n        while (parts.length) {\n          var cur = parts.pop(),\n              pop = cur;\n\n          if (!Expr.relative[cur]) {\n            cur = '';\n          } else {\n            pop = parts.pop();\n          }\n\n          if (pop == null) {\n            pop = context;\n          }\n\n          Expr.relative[cur](checkSet, pop, contextXML);\n        }\n      } else {\n        checkSet = parts = [];\n      }\n    }\n\n    if (!checkSet) {\n      checkSet = set;\n    }\n\n    if (!checkSet) {\n      throw 'Syntax error, unrecognized expression: ' + (cur || selector);\n    }\n\n    if (toString.call(checkSet) === '[object Array]') {\n      if (!prune) {\n        results.push.apply(results, checkSet);\n      } else if (context && context.nodeType === 1) {\n        for (var i = 0; checkSet[i] != null; i++) {\n          if (checkSet[i] && (checkSet[i] === true || checkSet[i].nodeType === 1 && contains(context, checkSet[i]))) {\n            results.push(set[i]);\n          }\n        }\n      } else {\n        for (var i = 0; checkSet[i] != null; i++) {\n          if (checkSet[i] && checkSet[i].nodeType === 1) {\n            results.push(set[i]);\n          }\n        }\n      }\n    } else {\n      makeArray(checkSet, results);\n    }\n\n    if (extra) {\n      _Sizzle(extra, origContext, results, seed);\n      _Sizzle.uniqueSort(results);\n    }\n\n    return results;\n  };\n\n  _Sizzle.uniqueSort = function (results) {\n    if (sortOrder) {\n      hasDuplicate = false;\n      results.sort(sortOrder);\n\n      if (hasDuplicate) {\n        for (var i = 1; i < results.length; i++) {\n          if (results[i] === results[i - 1]) {\n            results.splice(i--, 1);\n          }\n        }\n      }\n    }\n  };\n\n  _Sizzle.matches = function (expr, set) {\n    return _Sizzle(expr, null, null, set);\n  };\n\n  _Sizzle.find = function (expr, context, isXML) {\n    var set, match;\n\n    if (!expr) {\n      return [];\n    }\n\n    for (var i = 0, l = Expr.order.length; i < l; i++) {\n      var type = Expr.order[i],\n          match;\n\n      if (match = Expr.match[type].exec(expr)) {\n        var left = RegExp.leftContext;\n\n        if (left.substr(left.length - 1) !== '\\\\') {\n          match[1] = (match[1] || '').replace(/\\\\/g, '');\n          set = Expr.find[type](match, context, isXML);\n          if (set != null) {\n            expr = expr.replace(Expr.match[type], '');\n            break;\n          }\n        }\n      }\n    }\n\n    if (!set) {\n      set = context.getElementsByTagName('*');\n    }\n\n    return {\n      set: set,\n      expr: expr\n    };\n  };\n\n  _Sizzle.filter = function (expr, set, inplace, not) {\n    var old = expr,\n        result = [],\n        curLoop = set,\n        match,\n        anyFound,\n        isXMLFilter = set && set[0] && isXML(set[0]);\n\n    while (expr && set.length) {\n      for (var type in Expr.filter) {\n        if ((match = Expr.match[type].exec(expr)) != null) {\n          var filter = Expr.filter[type],\n              found,\n              item;\n          anyFound = false;\n\n          if (curLoop == result) {\n            result = [];\n          }\n\n          if (Expr.preFilter[type]) {\n            match = Expr.preFilter[type](match, curLoop, inplace, result, not, isXMLFilter);\n\n            if (!match) {\n              anyFound = found = true;\n            } else if (match === true) {\n              continue;\n            }\n          }\n\n          if (match) {\n            for (var i = 0; (item = curLoop[i]) != null; i++) {\n              if (item) {\n                found = filter(item, match, i, curLoop);\n                var pass = not ^ !!found;\n\n                if (inplace && found != null) {\n                  if (pass) {\n                    anyFound = true;\n                  } else {\n                    curLoop[i] = false;\n                  }\n                } else if (pass) {\n                  result.push(item);\n                  anyFound = true;\n                }\n              }\n            }\n          }\n\n          if (found !== undefined) {\n            if (!inplace) {\n              curLoop = result;\n            }\n\n            expr = expr.replace(Expr.match[type], '');\n\n            if (!anyFound) {\n              return [];\n            }\n\n            break;\n          }\n        }\n      }\n\n      // Improper expression\n      if (expr == old) {\n        if (anyFound == null) {\n          throw 'Syntax error, unrecognized expression: ' + expr;\n        } else {\n          break;\n        }\n      }\n\n      old = expr;\n    }\n\n    return curLoop;\n  };\n\n  var Expr = _Sizzle.selectors = {\n    order: ['ID', 'NAME', 'TAG'],\n    match: {\n      ID: /#((?:[\\w\\u00c0-\\uFFFF_-]|\\\\.)+)/,\n      CLASS: /\\.((?:[\\w\\u00c0-\\uFFFF_-]|\\\\.)+)/,\n      NAME: /\\[name=['\"]*((?:[\\w\\u00c0-\\uFFFF_-]|\\\\.)+)['\"]*\\]/,\n      ATTR: /\\[\\s*((?:[\\w\\u00c0-\\uFFFF_-]|\\\\.)+)\\s*(?:(\\S?=)\\s*(['\"]*)(.*?)\\3|)\\s*\\]/,\n      TAG: /^((?:[\\w\\u00c0-\\uFFFF\\*_-]|\\\\.)+)/,\n      CHILD: /:(only|nth|last|first)-child(?:\\((even|odd|[\\dn+-]*)\\))?/,\n      POS: /:(nth|eq|gt|lt|first|last|even|odd)(?:\\((\\d*)\\))?(?=[^-]|$)/,\n      PSEUDO: /:((?:[\\w\\u00c0-\\uFFFF_-]|\\\\.)+)(?:\\((['\"]*)((?:\\([^\\)]+\\)|[^\\2\\(\\)]*)+)\\2\\))?/\n    },\n    attrMap: {\n      'class': 'className',\n      'for': 'htmlFor'\n    },\n    attrHandle: {\n      href: function href(elem) {\n        return elem.getAttribute('href');\n      }\n    },\n    relative: {\n      '+': function _(checkSet, part, isXML) {\n        var isPartStr = typeof part === 'string',\n            isTag = isPartStr && !/\\W/.test(part),\n            isPartStrNotTag = isPartStr && !isTag;\n\n        if (isTag && !isXML) {\n          part = part.toUpperCase();\n        }\n\n        for (var i = 0, l = checkSet.length, elem; i < l; i++) {\n          if (elem = checkSet[i]) {\n            while ((elem = elem.previousSibling) && elem.nodeType !== 1) {}\n\n            checkSet[i] = isPartStrNotTag || elem && elem.nodeName === part ? elem || false : elem === part;\n          }\n        }\n\n        if (isPartStrNotTag) {\n          _Sizzle.filter(part, checkSet, true);\n        }\n      },\n      '>': function _(checkSet, part, isXML) {\n        var isPartStr = typeof part === 'string';\n\n        if (isPartStr && !/\\W/.test(part)) {\n          part = isXML ? part : part.toUpperCase();\n\n          for (var i = 0, l = checkSet.length; i < l; i++) {\n            var elem = checkSet[i];\n            if (elem) {\n              var parent = elem.parentNode;\n              checkSet[i] = parent.nodeName === part ? parent : false;\n            }\n          }\n        } else {\n          for (var i = 0, l = checkSet.length; i < l; i++) {\n            var elem = checkSet[i];\n            if (elem) {\n              checkSet[i] = isPartStr ? elem.parentNode : elem.parentNode === part;\n            }\n          }\n\n          if (isPartStr) {\n            _Sizzle.filter(part, checkSet, true);\n          }\n        }\n      },\n      '': function _(checkSet, part, isXML) {\n        var doneName = done++,\n            checkFn = dirCheck;\n\n        if (!/\\W/.test(part)) {\n          var nodeCheck = part = isXML ? part : part.toUpperCase();\n          checkFn = dirNodeCheck;\n        }\n\n        checkFn('parentNode', part, doneName, checkSet, nodeCheck, isXML);\n      },\n      '~': function _(checkSet, part, isXML) {\n        var doneName = done++,\n            checkFn = dirCheck;\n\n        if (typeof part === 'string' && !/\\W/.test(part)) {\n          var nodeCheck = part = isXML ? part : part.toUpperCase();\n          checkFn = dirNodeCheck;\n        }\n\n        checkFn('previousSibling', part, doneName, checkSet, nodeCheck, isXML);\n      }\n    },\n    find: {\n      ID: function ID(match, context, isXML) {\n        if (typeof context.getElementById !== 'undefined' && !isXML) {\n          var m = context.getElementById(match[1]);\n          return m ? [m] : [];\n        }\n      },\n      NAME: function NAME(match, context, isXML) {\n        if (typeof context.getElementsByName !== 'undefined') {\n          var ret = [],\n              results = context.getElementsByName(match[1]);\n\n          for (var i = 0, l = results.length; i < l; i++) {\n            if (results[i].getAttribute('name') === match[1]) {\n              ret.push(results[i]);\n            }\n          }\n\n          return ret.length === 0 ? null : ret;\n        }\n      },\n      TAG: function TAG(match, context) {\n        return context.getElementsByTagName(match[1]);\n      }\n    },\n    preFilter: {\n      CLASS: function CLASS(match, curLoop, inplace, result, not, isXML) {\n        match = ' ' + match[1].replace(/\\\\/g, '') + ' ';\n\n        if (isXML) {\n          return match;\n        }\n\n        for (var i = 0, elem; (elem = curLoop[i]) != null; i++) {\n          if (elem) {\n            if (not ^ (elem.className && (' ' + elem.className + ' ').indexOf(match) >= 0)) {\n              if (!inplace) {\n                result.push(elem);\n              }\n            } else if (inplace) {\n              curLoop[i] = false;\n            }\n          }\n        }\n\n        return false;\n      },\n      ID: function ID(match) {\n        return match[1].replace(/\\\\/g, '');\n      },\n      TAG: function TAG(match, curLoop) {\n        for (var i = 0; curLoop[i] === false; i++) {}\n        return curLoop[i] && isXML(curLoop[i]) ? match[1] : match[1].toUpperCase();\n      },\n      CHILD: function CHILD(match) {\n        if (match[1] == 'nth') {\n          // parse equations like 'even', 'odd', '5', '2n', '3n+2', '4n-1', '-n+6'\n          var test = /(-?)(\\d*)n((?:\\+|-)?\\d*)/.exec(match[2] == 'even' && '2n' || match[2] == 'odd' && '2n+1' || !/\\D/.test(match[2]) && '0n+' + match[2] || match[2]);\n\n          // calculate the numbers (first)n+(last) including if they are negative\n          match[2] = test[1] + (test[2] || 1) - 0;\n          match[3] = test[3] - 0;\n        }\n\n        // TODO: Move to normal caching system\n        match[0] = done++;\n\n        return match;\n      },\n      ATTR: function ATTR(match, curLoop, inplace, result, not, isXML) {\n        var name = match[1].replace(/\\\\/g, '');\n\n        if (!isXML && Expr.attrMap[name]) {\n          match[1] = Expr.attrMap[name];\n        }\n\n        if (match[2] === '~=') {\n          match[4] = ' ' + match[4] + ' ';\n        }\n\n        return match;\n      },\n      PSEUDO: function PSEUDO(match, curLoop, inplace, result, not) {\n        if (match[1] === 'not') {\n          // If we're dealing with a complex expression, or a simple one\n          if (chunker.exec(match[3]).length > 1 || /^\\w/.test(match[3])) {\n            match[3] = _Sizzle(match[3], null, null, curLoop);\n          } else {\n            var ret = _Sizzle.filter(match[3], curLoop, inplace, true ^ not);\n            if (!inplace) {\n              result.push.apply(result, ret);\n            }\n            return false;\n          }\n        } else if (Expr.match.POS.test(match[0]) || Expr.match.CHILD.test(match[0])) {\n          return true;\n        }\n\n        return match;\n      },\n      POS: function POS(match) {\n        match.unshift(true);\n        return match;\n      }\n    },\n    filters: {\n      enabled: function enabled(elem) {\n        return elem.disabled === false && elem.type !== 'hidden';\n      },\n      disabled: function disabled(elem) {\n        return elem.disabled === true;\n      },\n      checked: function checked(elem) {\n        return elem.checked === true;\n      },\n      selected: function selected(elem) {\n        // Accessing this property makes selected-by-default\n        // options in Safari work properly\n        elem.parentNode.selectedIndex;\n        return elem.selected === true;\n      },\n      parent: function parent(elem) {\n        return !!elem.firstChild;\n      },\n      empty: function empty(elem) {\n        return !elem.firstChild;\n      },\n      has: function has(elem, i, match) {\n        return !!_Sizzle(match[3], elem).length;\n      },\n      header: function header(elem) {\n        return (/h\\d/i.test(elem.nodeName)\n        );\n      },\n      text: function text(elem) {\n        return elem.type === 'text';\n      },\n      radio: function radio(elem) {\n        return elem.type === 'radio';\n      },\n      checkbox: function checkbox(elem) {\n        return elem.type === 'checkbox';\n      },\n      file: function file(elem) {\n        return elem.type === 'file';\n      },\n      password: function password(elem) {\n        return elem.type === 'password';\n      },\n      submit: function submit(elem) {\n        return elem.type === 'submit';\n      },\n      image: function image(elem) {\n        return elem.type === 'image';\n      },\n      reset: function reset(elem) {\n        return elem.type === 'reset';\n      },\n      button: function button(elem) {\n        return elem.type === 'button' || elem.nodeName.toUpperCase() === 'BUTTON';\n      },\n      input: function input(elem) {\n        return (/input|select|textarea|button/i.test(elem.nodeName)\n        );\n      }\n    },\n    setFilters: {\n      first: function first(elem, i) {\n        return i === 0;\n      },\n      last: function last(elem, i, match, array) {\n        return i === array.length - 1;\n      },\n      even: function even(elem, i) {\n        return i % 2 === 0;\n      },\n      odd: function odd(elem, i) {\n        return i % 2 === 1;\n      },\n      lt: function lt(elem, i, match) {\n        return i < match[3] - 0;\n      },\n      gt: function gt(elem, i, match) {\n        return i > match[3] - 0;\n      },\n      nth: function nth(elem, i, match) {\n        return match[3] - 0 == i;\n      },\n      eq: function eq(elem, i, match) {\n        return match[3] - 0 == i;\n      }\n    },\n    filter: {\n      PSEUDO: function PSEUDO(elem, match, i, array) {\n        var name = match[1],\n            filter = Expr.filters[name];\n\n        if (filter) {\n          return filter(elem, i, match, array);\n        } else if (name === 'contains') {\n          return (elem.textContent || elem.innerText || '').indexOf(match[3]) >= 0;\n        } else if (name === 'not') {\n          var not = match[3];\n\n          for (var i = 0, l = not.length; i < l; i++) {\n            if (not[i] === elem) {\n              return false;\n            }\n          }\n\n          return true;\n        }\n      },\n      CHILD: function CHILD(elem, match) {\n        var type = match[1],\n            node = elem;\n        switch (type) {\n          case 'only':\n          case 'first':\n            while (node = node.previousSibling) {\n              if (node.nodeType === 1) {\n                return false;\n              }\n            }\n            if (type == 'first') {\n              return true;\n            }\n            node = elem;\n          case 'last':\n            while (node = node.nextSibling) {\n              if (node.nodeType === 1) {\n                return false;\n              }\n            }\n            return true;\n          case 'nth':\n            var first = match[2],\n                last = match[3];\n\n            if (first == 1 && last == 0) {\n              return true;\n            }\n\n            var doneName = match[0],\n                parent = elem.parentNode;\n\n            if (parent && (parent.sizcache !== doneName || !elem.nodeIndex)) {\n              var count = 0;\n              for (node = parent.firstChild; node; node = node.nextSibling) {\n                if (node.nodeType === 1) {\n                  node.nodeIndex = ++count;\n                }\n              }\n              parent.sizcache = doneName;\n            }\n\n            var diff = elem.nodeIndex - last;\n            if (first == 0) {\n              return diff == 0;\n            } else {\n              return diff % first == 0 && diff / first >= 0;\n            }\n        }\n      },\n      ID: function ID(elem, match) {\n        return elem.nodeType === 1 && elem.getAttribute('id') === match;\n      },\n      TAG: function TAG(elem, match) {\n        return match === '*' && elem.nodeType === 1 || elem.nodeName === match;\n      },\n      CLASS: function CLASS(elem, match) {\n        return (' ' + (elem.className || elem.getAttribute('class')) + ' ').indexOf(match) > -1;\n      },\n      ATTR: function ATTR(elem, match) {\n        var name = match[1],\n            result = Expr.attrHandle[name] ? Expr.attrHandle[name](elem) : elem[name] != null ? elem[name] : elem.getAttribute(name),\n            value = result + '',\n            type = match[2],\n            check = match[4];\n\n        return result == null ? type === '!=' : type === '=' ? value === check : type === '*=' ? value.indexOf(check) >= 0 : type === '~=' ? (' ' + value + ' ').indexOf(check) >= 0 : !check ? value && result !== false : type === '!=' ? value != check : type === '^=' ? value.indexOf(check) === 0 : type === '$=' ? value.substr(value.length - check.length) === check : type === '|=' ? value === check || value.substr(0, check.length + 1) === check + '-' : false;\n      },\n      POS: function POS(elem, match, i, array) {\n        var name = match[2],\n            filter = Expr.setFilters[name];\n\n        if (filter) {\n          return filter(elem, i, match, array);\n        }\n      }\n    }\n  };\n\n  var origPOS = Expr.match.POS;\n\n  for (var type in Expr.match) {\n    Expr.match[type] = new RegExp(Expr.match[type].source + /(?![^\\[]*\\])(?![^\\(]*\\))/.source);\n  }\n\n  var makeArray = function makeArray(array, results) {\n    array = Array.prototype.slice.call(array, 0);\n\n    if (results) {\n      results.push.apply(results, array);\n      return results;\n    }\n\n    return array;\n  };\n\n  // Perform a simple check to determine if the browser is capable of\n  // converting a NodeList to an array using builtin methods.\n  try {\n    Array.prototype.slice.call(document.documentElement.childNodes, 0);\n  } // Provide a fallback method if it does not work\n  catch (e) {\n    makeArray = function makeArray(array, results) {\n      var ret = results || [];\n\n      if (toString.call(array) === '[object Array]') {\n        Array.prototype.push.apply(ret, array);\n      } else {\n        if (typeof array.length === 'number') {\n          for (var i = 0, l = array.length; i < l; i++) {\n            ret.push(array[i]);\n          }\n        } else {\n          for (var i = 0; array[i]; i++) {\n            ret.push(array[i]);\n          }\n        }\n      }\n\n      return ret;\n    };\n  }\n\n  var sortOrder;\n\n  if (document.documentElement.compareDocumentPosition) {\n    sortOrder = function sortOrder(a, b) {\n      var ret = a.compareDocumentPosition(b) & 4 ? -1 : a === b ? 0 : 1;\n      if (ret === 0) {\n        hasDuplicate = true;\n      }\n      return ret;\n    };\n  } else if ('sourceIndex' in document.documentElement) {\n    sortOrder = function sortOrder(a, b) {\n      var ret = a.sourceIndex - b.sourceIndex;\n      if (ret === 0) {\n        hasDuplicate = true;\n      }\n      return ret;\n    };\n  } else if (document.createRange) {\n    sortOrder = function sortOrder(a, b) {\n      var aRange = a.ownerDocument.createRange(),\n          bRange = b.ownerDocument.createRange();\n      aRange.selectNode(a);\n      aRange.collapse(true);\n      bRange.selectNode(b);\n      bRange.collapse(true);\n      var ret = aRange.compareBoundaryPoints(Range.START_TO_END, bRange);\n      if (ret === 0) {\n        hasDuplicate = true;\n      }\n      return ret;\n    };\n  }\n\n  // Check to see if the browser returns elements by name when\n  // querying by getElementById (and provide a workaround)\n  (function () {\n    // We're going to inject a fake input element with a specified name\n    var form = document.createElement('div'),\n        id = 'script' + new Date().getTime();\n    form.innerHTML = '<a name=\\'' + id + '\\'/>';\n\n    // Inject it into the root element, check its status, and remove it quickly\n    var root = document.documentElement;\n    root.insertBefore(form, root.firstChild);\n\n    // The workaround has to do additional checks after a getElementById\n    // Which slows things down for other browsers (hence the branching)\n    if (!!document.getElementById(id)) {\n      Expr.find.ID = function (match, context, isXML) {\n        if (typeof context.getElementById !== 'undefined' && !isXML) {\n          var m = context.getElementById(match[1]);\n          return m ? m.id === match[1] || typeof m.getAttributeNode !== 'undefined' && m.getAttributeNode('id').nodeValue === match[1] ? [m] : undefined : [];\n        }\n      };\n\n      Expr.filter.ID = function (elem, match) {\n        var node = typeof elem.getAttributeNode !== 'undefined' && elem.getAttributeNode('id');\n        return elem.nodeType === 1 && node && node.nodeValue === match;\n      };\n    }\n\n    root.removeChild(form);\n    root = form = null;\n  })();\n\n  // release memory in IE\n  (function () {\n    // Check to see if the browser returns only elements\n    // when doing getElementsByTagName(\"*\")\n    // Create a fake element\n    var div = document.createElement('div');\n    div.appendChild(document.createComment(''));\n\n    // Make sure no comments are found\n    if (div.getElementsByTagName('*').length > 0) {\n      Expr.find.TAG = function (match, context) {\n        var results = context.getElementsByTagName(match[1]);\n\n        // Filter out possible comments\n        if (match[1] === '*') {\n          var tmp = [];\n\n          for (var i = 0; results[i]; i++) {\n            if (results[i].nodeType === 1) {\n              tmp.push(results[i]);\n            }\n          }\n\n          results = tmp;\n        }\n\n        return results;\n      };\n    }\n\n    // Check to see if an attribute returns normalized href attributes\n    div.innerHTML = '<a href=\\'#\\'></a>';\n    if (div.firstChild && typeof div.firstChild.getAttribute !== 'undefined' && div.firstChild.getAttribute('href') !== '#') {\n      Expr.attrHandle.href = function (elem) {\n        return elem.getAttribute('href', 2);\n      };\n    }\n\n    div = null;\n  })();\n\n  // release memory in IE\n  if (document.querySelectorAll) {\n    (function () {\n      var oldSizzle = _Sizzle,\n          div = document.createElement('div');\n      div.innerHTML = '<p class=\\'TEST\\'></p>';\n\n      // Safari can't handle uppercase or unicode characters when\n      // in quirks mode.\n      if (div.querySelectorAll && div.querySelectorAll('.TEST').length === 0) {\n        return;\n      }\n\n      _Sizzle = function _Sizzle(query, context, extra, seed) {\n        context = context || document;\n\n        // Only use querySelectorAll on non-XML documents\n        // (ID selectors don't work in non-HTML documents)\n        if (!seed && context.nodeType === 9 && !isXML(context)) {\n          try {\n            return makeArray(context.querySelectorAll(query), extra);\n          } catch (e) {}\n        }\n\n        return oldSizzle(query, context, extra, seed);\n      };\n\n      for (var prop in oldSizzle) {\n        _Sizzle[prop] = oldSizzle[prop];\n      }\n\n      div = null;\n    })();\n  }\n\n  // release memory in IE\n  if (document.getElementsByClassName && document.documentElement.getElementsByClassName) {\n    (function () {\n      var div = document.createElement('div');\n      div.innerHTML = '<div class=\\'test e\\'></div><div class=\\'test\\'></div>';\n\n      // Opera can't find a second classname (in 9.6)\n      if (div.getElementsByClassName('e').length === 0) {\n        return;\n      }\n\n      // Safari caches class attributes, doesn't catch changes (in 3.2)\n      div.lastChild.className = 'e';\n\n      if (div.getElementsByClassName('e').length === 1) {\n        return;\n      }\n\n      Expr.order.splice(1, 0, 'CLASS');\n      Expr.find.CLASS = function (match, context, isXML) {\n        if (typeof context.getElementsByClassName !== 'undefined' && !isXML) {\n          return context.getElementsByClassName(match[1]);\n        }\n      };\n\n      div = null;\n    })();\n  }\n\n  // release memory in IE\n  function dirNodeCheck(dir, cur, doneName, checkSet, nodeCheck, isXML) {\n    var sibDir = dir == 'previousSibling' && !isXML;\n    for (var i = 0, l = checkSet.length; i < l; i++) {\n      var elem = checkSet[i];\n      if (elem) {\n        if (sibDir && elem.nodeType === 1) {\n          elem.sizcache = doneName;\n          elem.sizset = i;\n        }\n        elem = elem[dir];\n        var match = false;\n\n        while (elem) {\n          if (elem.sizcache === doneName) {\n            match = checkSet[elem.sizset];\n            break;\n          }\n\n          if (elem.nodeType === 1 && !isXML) {\n            elem.sizcache = doneName;\n            elem.sizset = i;\n          }\n\n          if (elem.nodeName === cur) {\n            match = elem;\n            break;\n          }\n\n          elem = elem[dir];\n        }\n\n        checkSet[i] = match;\n      }\n    }\n  }\n\n  function dirCheck(dir, cur, doneName, checkSet, nodeCheck, isXML) {\n    var sibDir = dir == 'previousSibling' && !isXML;\n    for (var i = 0, l = checkSet.length; i < l; i++) {\n      var elem = checkSet[i];\n      if (elem) {\n        if (sibDir && elem.nodeType === 1) {\n          elem.sizcache = doneName;\n          elem.sizset = i;\n        }\n        elem = elem[dir];\n        var match = false;\n\n        while (elem) {\n          if (elem.sizcache === doneName) {\n            match = checkSet[elem.sizset];\n            break;\n          }\n\n          if (elem.nodeType === 1) {\n            if (!isXML) {\n              elem.sizcache = doneName;\n              elem.sizset = i;\n            }\n            if (typeof cur !== 'string') {\n              if (elem === cur) {\n                match = true;\n                break;\n              }\n            } else if (_Sizzle.filter(cur, [elem]).length > 0) {\n              match = elem;\n              break;\n            }\n          }\n\n          elem = elem[dir];\n        }\n\n        checkSet[i] = match;\n      }\n    }\n  }\n\n  var contains = document.compareDocumentPosition ? function (a, b) {\n    return a.compareDocumentPosition(b) & 16;\n  } : function (a, b) {\n    return a !== b && (a.contains ? a.contains(b) : true);\n  };\n\n  var isXML = function isXML(elem) {\n    return elem.nodeType === 9 && elem.documentElement.nodeName !== 'HTML' || !!elem.ownerDocument && elem.ownerDocument.documentElement.nodeName !== 'HTML';\n  };\n\n  var posProcess = function posProcess(selector, context) {\n    var tmpSet = [],\n        later = '',\n        match,\n        root = context.nodeType ? [context] : context;\n\n    // Position selectors must be done after the filter\n    // And so must :not(positional) so we move all PSEUDOs to the end\n    while (match = Expr.match.PSEUDO.exec(selector)) {\n      later += match[0];\n      selector = selector.replace(Expr.match.PSEUDO, '');\n    }\n\n    selector = Expr.relative[selector] ? selector + '*' : selector;\n\n    for (var i = 0, l = root.length; i < l; i++) {\n      _Sizzle(selector, root[i], tmpSet);\n    }\n\n    return _Sizzle.filter(later, tmpSet);\n  };\n\n  return _Sizzle;\n}();\nvar Sizzle = _exports;\n\nexports.default = _exports;\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/~/jsio/packages/util/sizzle.js\n// module id = 73\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/~/jsio/packages/util/sizzle.js?");

/***/ },
/* 74 */
/*!****************************************************************************************!*\
  !*** ./modules/devkit-core/modules/timestep/src/platforms/browser/webgl/FontLoader.js ***!
  \****************************************************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n// https://github.com/smnh/FontLoader/blob/master/FontLoader.js\n/* globals define, exports, module */\n(function (root, definition) {\n  if (true) {\n    // AMD. Register as an anonymous module.\n    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_FACTORY__ = (definition), __WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ? (__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n  } else if ((typeof exports === 'undefined' ? 'undefined' : _typeof(exports)) === 'object') {\n    // Node. Does not work with strict CommonJS, but only CommonJS-like\n    // environments that support module.exports, like Node.\n    module.exports = definition();\n  } else {\n    // Browser globals (root is window)\n    root.FontLoader = definition();\n  }\n})(window, function () {\n  var isIE = /MSIE/i.test(navigator.userAgent),\n      ieVer = null;\n\n  // Get Internet Explorer version\n  if (isIE) {\n    var re, result;\n    re = new RegExp('MSIE ([0-9]{1,}[.0-9]{0,})');\n    result = re.exec(navigator.userAgent);\n    if (result !== null) {\n      ieVer = parseFloat(result[1]);\n    }\n  }\n\n  /**\n   * @typedef {Object} FontDescriptor\n   * @property {String} family\n   * @property {String} weight\n   * @property {String} style\n   */\n  /**\n   * FontLoader detects when web fonts specified in the \"fontFamiliesArray\" array were loaded and rendered. Then it\n   * notifies the specified delegate object via \"fontLoaded\" and \"complete\" methods when specific or all fonts were\n   * loaded respectively. The use of this functions implies that the insertion of specified web fonts into the\n   * document is done elsewhere.\n   *\n   * The fonts parameter may be an array of strings specifying the font-families with optionally specified font\n   * variations using FVD notation or font descriptor objects of the following type:\n   * {\n   *     family: \"fontFamily\",\n   *     weight: 400,\n   *     style: 'normal'\n   * }\n   * Where styles may ne one of the following: normal, bold, italic or oblique. If only string is specified, the\n   * default used weight and style are 400 and 'normal' respectively.\n   *\n   * If all the specified fonts were loaded before the timeout was reached, the \"complete\" delegate method will be\n   * invoked with \"null\" error parameter. Otherwise, if timeout was reached before all specified fonts were loaded,\n   * the \"complete\" method will be invoked with an error object with two fields: the \"message\" string and the\n   * \"notLoadedFonts\" array of FontDescriptor objects of all the fonts that weren't loaded.\n   *\n   * @param {Array.<String|FontDescriptor>} fonts   Array of font-family strings or font descriptor objects.\n   * @param {Object}        delegate                Delegate object whose callback methods will be invoked in its own context.\n   * @param {Function}      [delegate.complete]     Called when all fonts were loaded or the timeout was reached.\n   * @param {Function}      [delegate.fontLoaded]   Called for each loaded font with its font-family string as its single parameter.\n   * @param {Number}        [timeout=3000]          Timeout in milliseconds. Pass \"null\" to disable timeout.\n   * @param {HTMLDocument}  [contextDocument]       The DOM tree context to use, if none provided then it will be the document.\n   * @constructor\n   */\n  function FontLoader(fonts, delegate, timeout, contextDocument) {\n    // Public\n    this.delegate = delegate;\n    this.timeout = typeof timeout !== 'undefined' ? timeout : 3000;\n\n    // Private\n    this._fontsArray = this._parseFonts(fonts);\n    this._testDiv = null;\n    this._testContainer = null;\n    this._adobeBlankSizeWatcher = null;\n    this._sizeWatchers = [];\n    this._timeoutId = null;\n    this._intervalId = null;\n    this._intervalDelay = 50;\n    this._numberOfLoadedFonts = 0;\n    this._numberOfFonts = this._fontsArray.length;\n    this._fontsMap = {};\n    this._finished = false;\n    this._document = contextDocument || document;\n  }\n\n  // TODO: fully remove this support from the default font loader\n  // FontLoader.useAdobeBlank = !isIE || ieVer >= 11;\n  FontLoader.useAdobeBlank = false;\n\n  FontLoader.useResizeEvent = isIE && ieVer < 11 && typeof document.attachEvent !== 'undefined';\n  FontLoader.useIntervalChecking = window.opera || isIE && ieVer < 11 && !FontLoader.useResizeEvent;\n  FontLoader.referenceText = ' !\"\\\\#$%&\\'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[]^_`abcdefghijklmnopqrstuvwxyz{|}~';\n  FontLoader.referenceFontFamilies = FontLoader.useAdobeBlank ? ['AdobeBlank'] : ['serif', 'cursive'];\n  FontLoader.adobeBlankFontFaceStyleId = 'fontLoaderAdobeBlankFontFace';\n  FontLoader.adobeBlankReferenceSize = null;\n  FontLoader.referenceFontFamilyVariationSizes = {};\n  FontLoader.adobeBlankFontFaceRule = '@font-face{ font-family:AdobeBlank; }';\n  FontLoader.fontStyleAliasesMap = {\n    'n': 'normal',\n    'b': 'bold',\n    'i': 'italic',\n    'o': 'oblique'\n  };\n  FontLoader.fontStyleAliasesMap = {\n    'n': 'normal',\n    'b': 'bold',\n    'i': 'italic',\n    'o': 'oblique'\n  };\n\n  FontLoader.prototype = {\n    constructor: FontLoader,\n    loadFonts: function loadFonts() {\n      var self = this,\n          newFontVariations;\n\n      if (this._numberOfFonts === 0) {\n        this._finish();\n        return;\n      }\n\n      if (this.timeout !== null) {\n        this._timeoutId = window.setTimeout(function timeoutFire() {\n          self._finish();\n        }, this.timeout);\n      }\n\n      // Use constant line-height so there won't be changes in height because Adobe Blank uses zero width but not zero height.\n      this._testContainer = this._document.createElement('div');\n      this._testContainer.style.cssText = 'position:absolute; left:-10000px; top:-10000px; white-space:nowrap; font-size:20px; line-height:20px; visibility:hidden;';\n\n      // Create testDiv template that will be cloned for each font\n      this._testDiv = this._document.createElement('div');\n      this._testDiv.style.position = 'absolute';\n      this._testDiv.appendChild(this._document.createTextNode(FontLoader.referenceText));\n\n      if (!FontLoader.useAdobeBlank) {\n        // AdobeBlank is not used\n        // We need to extract dimensions of reference font-families for each requested font variation.\n        // The extracted dimensions are stored in a static property \"referenceFontFamilyVariationSizes\",\n        // so we might already have some or all of them all.\n        newFontVariations = this._getNewFontVariationsFromFonts(this._fontsArray);\n        if (newFontVariations.length) {\n          this._extractReferenceFontSizes(newFontVariations);\n        }\n        this._loadFonts();\n      } else if (FontLoader.adobeBlankReferenceSize) {\n        // AdobeBlank is used, and was loaded\n        this._loadFonts();\n      } else {\n        // AdobeBlank is used but was not loaded\n        this._loadAdobeBlankFont();\n      }\n    },\n    _extractReferenceFontSizes: function _extractReferenceFontSizes(newFontVariations) {\n      var clonedDiv, j, i, key, size, fontVariation;\n\n      clonedDiv = this._testDiv.cloneNode(true);\n      this._testContainer.appendChild(clonedDiv);\n      this._document.body.appendChild(this._testContainer);\n\n      for (i = 0; i < newFontVariations.length; i++) {\n        fontVariation = newFontVariations[i];\n        key = fontVariation.key;\n        FontLoader.referenceFontFamilyVariationSizes[key] = [];\n        for (j = 0; j < FontLoader.referenceFontFamilies.length; j++) {\n          clonedDiv.style.fontFamily = FontLoader.referenceFontFamilies[j];\n          clonedDiv.style.fontWeight = fontVariation.weight;\n          clonedDiv.style.fontStyle = fontVariation.style;\n          size = new Size(clonedDiv.offsetWidth, clonedDiv.offsetHeight);\n          FontLoader.referenceFontFamilyVariationSizes[key].push(size);\n        }\n      }\n\n      this._testContainer.parentNode.removeChild(this._testContainer);\n      clonedDiv.parentNode.removeChild(clonedDiv);\n    },\n    _loadAdobeBlankFont: function _loadAdobeBlankFont() {\n      var self = this,\n          adobeBlankDiv,\n          adobeBlankFallbackFont = 'serif';\n\n      this._addAdobeBlankFontFaceIfNeeded();\n\n      adobeBlankDiv = this._testDiv.cloneNode(true);\n      this._testContainer.appendChild(adobeBlankDiv);\n      this._document.body.appendChild(this._testContainer);\n\n      // When using AdobeBlank (all browsers except IE < 11) only interval checking and size watcher methods\n      // are available for watching element size.\n      if (FontLoader.useIntervalChecking) {\n        adobeBlankDiv.style.fontFamily = FontLoader.referenceFontFamilies[0] + ', ' + adobeBlankFallbackFont;\n        this._testContainer.appendChild(adobeBlankDiv);\n        // Start polling element sizes but also do first synchronous check in case all fonts where already loaded.\n        this._intervalId = window.setInterval(function intervalFire() {\n          self._checkAdobeBlankSize();\n        }, this._intervalDelay);\n        this._checkAdobeBlankSize();\n      } else {\n        adobeBlankDiv.style.fontFamily = adobeBlankFallbackFont;\n        this._adobeBlankSizeWatcher = new SizeWatcher( /** @type HTMLElement */\n        adobeBlankDiv, {\n          container: this._testContainer,\n          delegate: this,\n          continuous: true,\n          direction: SizeWatcher.directions.decrease,\n          dimension: SizeWatcher.dimensions.horizontal,\n          document: this._document\n        });\n        this._adobeBlankSizeWatcher.prepareForWatch();\n        this._adobeBlankSizeWatcher.beginWatching();\n        adobeBlankDiv.style.fontFamily = FontLoader.referenceFontFamilies[0] + ', ' + adobeBlankFallbackFont;\n      }\n    },\n    _getNewFontVariationsFromFonts: function _getNewFontVariationsFromFonts(fonts) {\n      var font,\n          key,\n          i,\n          variations = [],\n          variationsMap = {};\n\n      for (i = 0; i < fonts.length; i++) {\n        font = fonts[i];\n        key = this._fontVariationKeyForFont(font);\n        if (!(key in variationsMap) && !(key in FontLoader.referenceFontFamilyVariationSizes)) {\n          variationsMap[key] = true;\n          variations.push({\n            key: key,\n            weight: font.weight,\n            style: font.style\n          });\n        }\n      }\n      return variations;\n    },\n    _parseFonts: function _parseFonts(fonts) {\n      var processedFonts = [];\n\n      fonts.forEach(function (font) {\n        if (typeof font === 'string') {\n          if (font.indexOf(':') > -1) {\n            processedFonts = processedFonts.concat(this._convertShorthandToFontObjects(font));\n          } else {\n            processedFonts.push({\n              family: font,\n              weight: 400,\n              style: 'normal'\n            });\n          }\n        } else if (this._isValidFontObject(font)) {\n          processedFonts.push(font);\n        } else {\n          throw new Error('Invalid font format');\n        }\n      }, this);\n\n      return processedFonts;\n    },\n    /**\n     * @param {FontDescriptor} fontObject\n     * @returns {boolean}\n     * @private\n     */\n    _isValidFontObject: function _isValidFontObject(fontObject) {\n      if (!fontObject.family || !fontObject.weight || !fontObject.style) {\n        return false;\n      }\n      return ['normal', 'italic', 'bold', 'oblique'].indexOf(fontObject.style) !== -1;\n    },\n    /**\n     * @param {string} fontString\n     * @returns {Array.<FontDescriptor>}\n     * @private\n     */\n    _convertShorthandToFontObjects: function _convertShorthandToFontObjects(fontString) {\n      var fonts = [],\n          parts = fontString.split(':'),\n          variants,\n          fontFamily;\n\n      fontFamily = parts[0];\n      variants = parts[1].split(',');\n\n      variants.forEach(function (variant) {\n        var styleAlias, weightAlias, weight, style;\n\n        if (variant.length !== 2) {\n          throw new Error('Invalid Font Variation Description: \\'' + variant + '\\' for font string: \\'' + fontString + '\\'');\n        }\n\n        styleAlias = variant[0];\n        weightAlias = variant[1];\n\n        if (styleAlias in FontLoader.fontStyleAliasesMap) {\n          style = FontLoader.fontStyleAliasesMap[styleAlias];\n        } else {\n          return;\n        }\n\n        weight = parseInt(weightAlias, 10);\n        if (isNaN(weight)) {\n          return;\n        } else {\n          weight *= 100;\n        }\n\n        fonts.push({\n          family: fontFamily,\n          weight: weight,\n          style: style\n        });\n      });\n\n      return fonts;\n    },\n    _addAdobeBlankFontFaceIfNeeded: function _addAdobeBlankFontFaceIfNeeded() {\n      var adobeBlankFontFaceStyle;\n      if (!this._document.getElementById(FontLoader.adobeBlankFontFaceStyleId)) {\n        adobeBlankFontFaceStyle = this._document.createElement('style');\n        adobeBlankFontFaceStyle.setAttribute('type', 'text/css');\n        adobeBlankFontFaceStyle.setAttribute('id', FontLoader.adobeBlankFontFaceStyleId);\n        adobeBlankFontFaceStyle.appendChild(this._document.createTextNode(FontLoader.adobeBlankFontFaceRule));\n        this._document.getElementsByTagName('head')[0].appendChild(adobeBlankFontFaceStyle);\n      }\n    },\n    _checkAdobeBlankSize: function _checkAdobeBlankSize() {\n      var adobeBlankDiv = this._testContainer.firstChild;\n      this._adobeBlankLoaded(adobeBlankDiv);\n    },\n    _adobeBlankLoaded: function _adobeBlankLoaded(adobeBlankDiv) {\n      // Prevent false size change, for example if AdobeBlank height is higher than fallback font.\n      if (adobeBlankDiv.offsetWidth !== 0) {\n        return;\n      }\n\n      FontLoader.adobeBlankReferenceSize = new Size(adobeBlankDiv.offsetWidth, adobeBlankDiv.offsetHeight);\n\n      if (this._adobeBlankSizeWatcher !== null) {\n        // SizeWatcher method\n        this._adobeBlankSizeWatcher.endWatching();\n        this._adobeBlankSizeWatcher.removeScrollWatchers();\n        this._adobeBlankSizeWatcher = null;\n      } else {\n        // Polling method (IE)\n        window.clearInterval(this._intervalId);\n        adobeBlankDiv.parentNode.removeChild(adobeBlankDiv);\n      }\n\n      this._testContainer.parentNode.removeChild(this._testContainer);\n\n      this._loadFonts();\n    },\n    _cloneNodeSetStyleAndAttributes: function _cloneNodeSetStyleAndAttributes(font, fontKey, referenceFontFamilyIndex) {\n      var clonedDiv = this._testDiv.cloneNode(true);\n      clonedDiv.style.fontWeight = font.weight;\n      clonedDiv.style.fontStyle = font.style;\n      clonedDiv.setAttribute('data-font-map-key', fontKey);\n      clonedDiv.setAttribute('data-ref-font-family-index', String(referenceFontFamilyIndex));\n      return clonedDiv;\n    },\n    _getFontMapKeyFromElement: function _getFontMapKeyFromElement(element) {\n      return element.getAttribute('data-font-map-key');\n    },\n    _getFontFromElement: function _getFontFromElement(element) {\n      var fontKey = this._getFontMapKeyFromElement(element);\n      return this._fontsMap[fontKey];\n    },\n    _getFontFamilyFromElement: function _getFontFamilyFromElement(element) {\n      var font = this._getFontFromElement(element);\n      return font.family;\n    },\n    _getReferenceFontFamilyIndexFromElement: function _getReferenceFontFamilyIndexFromElement(element) {\n      return element.getAttribute('data-ref-font-family-index');\n    },\n    _getReferenceFontFamilyFromElement: function _getReferenceFontFamilyFromElement(element) {\n      var referenceFontFamilyIndex = this._getReferenceFontFamilyIndexFromElement(element);\n      return FontLoader.referenceFontFamilies[referenceFontFamilyIndex];\n    },\n    _fontVariationKeyForFont: function _fontVariationKeyForFont(font) {\n      return font.weight + font.style;\n    },\n    _fontsMapKeyForFont: function _fontsMapKeyForFont(font) {\n      return font.family + font.weight + font.style;\n    },\n    _loadFonts: function _loadFonts() {\n      var i,\n          j,\n          clonedDiv,\n          sizeWatcher,\n          font,\n          fontKey,\n          fontVariationKey,\n          referenceFontSize,\n          sizeWatcherDirection,\n          sizeWatcherDimension,\n          self = this;\n\n      // Add div for each font-family\n      for (i = 0; i < this._numberOfFonts; i++) {\n        font = this._fontsArray[i];\n        fontKey = this._fontsMapKeyForFont(font);\n        this._fontsMap[fontKey] = font;\n\n        for (j = 0; j < FontLoader.referenceFontFamilies.length; j++) {\n          clonedDiv = this._cloneNodeSetStyleAndAttributes(font, fontKey, j);\n          if (FontLoader.useResizeEvent) {\n            clonedDiv.style.fontFamily = FontLoader.referenceFontFamilies[j];\n            this._testContainer.appendChild(clonedDiv);\n          } else if (FontLoader.useIntervalChecking) {\n            clonedDiv.style.fontFamily = '\\'' + font.family + '\\', ' + FontLoader.referenceFontFamilies[j];\n            this._testContainer.appendChild(clonedDiv);\n          } else {\n            clonedDiv.style.fontFamily = FontLoader.referenceFontFamilies[j];\n            if (FontLoader.useAdobeBlank) {\n              referenceFontSize = FontLoader.adobeBlankReferenceSize;\n              sizeWatcherDirection = SizeWatcher.directions.increase;\n              sizeWatcherDimension = SizeWatcher.dimensions.horizontal;\n            } else {\n              fontVariationKey = this._fontVariationKeyForFont(font);\n              referenceFontSize = FontLoader.referenceFontFamilyVariationSizes[fontVariationKey][j];\n              sizeWatcherDirection = SizeWatcher.directions.both;\n              sizeWatcherDimension = SizeWatcher.dimensions.both;\n            }\n            sizeWatcher = new SizeWatcher( /** @type HTMLElement */\n            clonedDiv, {\n              container: this._testContainer,\n              delegate: this,\n              size: referenceFontSize,\n              direction: sizeWatcherDirection,\n              dimension: sizeWatcherDimension,\n              document: this._document\n            });\n            // The prepareForWatch() and beginWatching() methods will be invoked in separate iterations to\n            // reduce number of browser's CSS recalculations.\n            this._sizeWatchers.push(sizeWatcher);\n          }\n        }\n      }\n\n      // Append the testContainer after all test elements to minimize DOM insertions\n      this._document.body.appendChild(this._testContainer);\n\n      if (FontLoader.useResizeEvent) {\n        for (j = 0; j < this._testContainer.childNodes.length; j++) {\n          clonedDiv = this._testContainer.childNodes[j];\n          // \"resize\" event works only with attachEvent\n          clonedDiv.attachEvent('onresize', function (self, clonedDiv) {\n            return function () {\n              self._elementSizeChanged(clonedDiv);\n            };\n          }(this, clonedDiv));\n        }\n        window.setTimeout(function () {\n          for (j = 0; j < self._testContainer.childNodes.length; j++) {\n            clonedDiv = self._testContainer.childNodes[j];\n            clonedDiv.style.fontFamily = '\\'' + self._getFontFamilyFromElement(clonedDiv) + '\\', ' + self._getReferenceFontFamilyFromElement(clonedDiv);\n          }\n        }, 0);\n      } else if (FontLoader.useIntervalChecking) {\n        // Start polling element sizes but also do first synchronous check in case all fonts where already loaded.\n        this._intervalId = window.setInterval(function intervalFire() {\n          self._checkSizes();\n        }, this._intervalDelay);\n        this._checkSizes();\n      } else {\n        // We are dividing the prepareForWatch() and beginWatching() methods to optimize browser performance by\n        // removing CSS recalculation from each iteration to the end of iterations.\n        for (i = 0; i < this._sizeWatchers.length; i++) {\n          sizeWatcher = this._sizeWatchers[i];\n          sizeWatcher.prepareForWatch();\n        }\n        for (i = 0; i < this._sizeWatchers.length; i++) {\n          sizeWatcher = this._sizeWatchers[i];\n          sizeWatcher.beginWatching();\n          // Apply tested font-family\n          clonedDiv = sizeWatcher.getWatchedElement();\n          clonedDiv.style.fontFamily = '\\'' + this._getFontFamilyFromElement(clonedDiv) + '\\', ' + self._getReferenceFontFamilyFromElement(clonedDiv);\n        }\n      }\n    },\n    _checkSizes: function _checkSizes() {\n      var i, testDiv, font, fontVariationKey, currSize, refSize, refFontFamilyIndex;\n\n      for (i = this._testContainer.childNodes.length - 1; i >= 0; i--) {\n        testDiv = this._testContainer.childNodes[i];\n        currSize = new Size(testDiv.offsetWidth, testDiv.offsetHeight);\n        if (FontLoader.useAdobeBlank) {\n          refSize = FontLoader.adobeBlankReferenceSize;\n        } else {\n          font = this._getFontFromElement(testDiv);\n          fontVariationKey = this._fontVariationKeyForFont(font);\n          refFontFamilyIndex = this._getReferenceFontFamilyIndexFromElement(testDiv);\n          refSize = FontLoader.referenceFontFamilyVariationSizes[fontVariationKey][refFontFamilyIndex];\n        }\n        if (!refSize.isEqual(currSize)) {\n          // Element dimensions changed, this means its font loaded, remove it from testContainer div\n          testDiv.parentNode.removeChild(testDiv);\n          this._elementSizeChanged(testDiv);\n        }\n      }\n    },\n    _elementSizeChanged: function _elementSizeChanged(element) {\n      var font, fontKey;\n\n      if (this._finished) {\n        return;\n      }\n\n      fontKey = this._getFontMapKeyFromElement(element);\n\n      // Check that the font of this element wasn't already marked as loaded by an element with different reference font family.\n      if (typeof this._fontsMap[fontKey] === 'undefined') {\n        return;\n      }\n\n      font = this._fontsMap[fontKey];\n\n      this._numberOfLoadedFonts++;\n      delete this._fontsMap[fontKey];\n\n      if (this.delegate && typeof this.delegate.fontLoaded === 'function') {\n        this.delegate.fontLoaded(font);\n      }\n\n      if (this._numberOfLoadedFonts === this._numberOfFonts) {\n        this._finish();\n      }\n    },\n    _finish: function _finish() {\n      var error,\n          i,\n          sizeWatcher,\n          fontKey,\n          notLoadedFonts = [];\n\n      if (this._finished) {\n        return;\n      }\n\n      this._finished = true;\n\n      if (this._adobeBlankSizeWatcher !== null) {\n        if (this._adobeBlankSizeWatcher.getState() === SizeWatcher.states.watchingForSizeChange) {\n          this._adobeBlankSizeWatcher.endWatching();\n        }\n        this._adobeBlankSizeWatcher = null;\n      }\n\n      for (i = 0; i < this._sizeWatchers.length; i++) {\n        sizeWatcher = this._sizeWatchers[i];\n        if (sizeWatcher.getState() === SizeWatcher.states.watchingForSizeChange) {\n          sizeWatcher.endWatching();\n        }\n      }\n      this._sizeWatchers = [];\n\n      if (this._testContainer !== null) {\n        this._testContainer.parentNode.removeChild(this._testContainer);\n      }\n\n      if (this._timeoutId !== null) {\n        window.clearTimeout(this._timeoutId);\n      }\n\n      if (this._intervalId !== null) {\n        window.clearInterval(this._intervalId);\n      }\n\n      if (this.delegate) {\n        if (this._numberOfLoadedFonts < this._numberOfFonts) {\n          for (fontKey in this._fontsMap) {\n            if (this._fontsMap.hasOwnProperty(fontKey)) {\n              notLoadedFonts.push(this._fontsMap[fontKey]);\n            }\n          }\n          error = {\n            message: 'Not all fonts were loaded (' + this._numberOfLoadedFonts + '/' + this._numberOfFonts + ')',\n            notLoadedFonts: notLoadedFonts\n          };\n        } else {\n          error = null;\n        }\n        if (typeof this.delegate.complete === 'function') {\n          this.delegate.complete(error);\n        } else if (typeof this.delegate.fontsLoaded === 'function') {\n          this.delegate.fontsLoaded(error);\n        }\n      }\n    },\n    /**\n     * SizeWatcher delegate method\n     * @param {SizeWatcher} sizeWatcher\n     */\n    sizeWatcherChangedSize: function sizeWatcherChangedSize(sizeWatcher) {\n      var watchedElement = sizeWatcher.getWatchedElement();\n      if (sizeWatcher === this._adobeBlankSizeWatcher) {\n        this._adobeBlankLoaded(watchedElement);\n      } else {\n        this._elementSizeChanged(watchedElement);\n      }\n    }\n  };\n\n  /**\n   * Size object\n   *\n   * @param width\n   * @param height\n   * @constructor\n   */\n  function Size(width, height) {\n    this.width = width;\n    this.height = height;\n  }\n\n  Size.sizeFromString = function (sizeString) {\n    var arr = sizeString.split(',');\n    if (arr.length !== 2) {\n      return null;\n    }\n    return new Size(arr[0], arr[1]);\n  };\n\n  /**\n   * Compares receiver object to passed in size object.\n   *\n   * @param otherSize\n   * @returns {boolean}\n   */\n  Size.prototype.isEqual = function (otherSize) {\n    return this.width === otherSize.width && this.height === otherSize.height;\n  };\n\n  Size.prototype.toString = function () {\n    return this.width + ',' + this.height;\n  };\n\n  /**\n   * SizeWatcher observes size of an element and notifies when its size is changed. It doesn't use any timeouts\n   * to check the element size, when change in size occurs a callback method immediately invoked.\n   *\n   * To watch for element's size changes the element, and other required elements are appended to a container element\n   * you specify, and which must be added to the DOM tree before invoking prepareForWatch() method. Your container\n   * element should be positioned outside of client's visible area. Therefore you shouldn't use SizeWatcher to watch\n   * for size changes of elements used for UI.\n   * Such container element could be a simple <div> that is a child of the <body> element:\n   * <div style=\"position:absolute; left:-10000px; top:-10000px;\"></div>\n   *\n   * You must invoke SizeWatcher's methods in a specific order to establish size change listeners:\n   *\n   * 1. Create SizeWatcher instance by invoke SizeWatcher constructor passing the element (size of which you want to\n   *    observe), the container element, the delegate object and optional size parameter of type Size which should be\n   *    the pre-calculated initial size of your element.\n   * 4. Invoke prepareForWatch() method. This method will calculate element size if you didn't passed it to the constructor.\n   * 5. Invoke beginWatching() method. This method will set event listeners and invoke your delegate's method once\n   *    element size changes.\n   *\n   * Failing to invoke above methods in their predefined order will throw an exception.\n   *\n   * @param {HTMLElement}   element An element, size of which will be observed for changes.\n   * @param {Object}        options\n   * @param {HTMLElement}   options.container An element to which special observing elements will be added. Must be in DOM tree\n   *                        when prepareForWatch() method is called.\n   * @param {Object}        options.delegate A delegate object with a sizeWatcherChangedSize method which will be invoked, in\n   *                        context of the delegate object, when change in size occurs. This method is invoked with single\n   *                        parameter which is the current SizeWatcher instance.\n   * @param {Size}          [options.size] The pre-calculated initial size of your element. When passed, the element is not\n   *                        asked for offsetWidth and offsetHeight, which may be useful to reduce browser's CSS\n   *                        recalculations. If you will not pass the size parameter then its size calculation will be\n   *                        deferred to prepareForWatch() method.\n   * @param {Boolean}       [options.continuous=false] A boolean flag indicating if the SizeWatcher will watch only for\n   *                        the first size change (default) or will continuously watch for size changes.\n   * @param {Number}        [options.direction=SizeWatcher.directions.both] The direction of size change that should be\n   *                        watched: SizeWatcher.directions.increase, SizeWatcher.directions.decrease or\n   *                        SizeWatcher.directions.both\n   * @param {Number}        [options.dimension=SizeWatcher.dimensions.both] The dimension of size change that should be\n   *                        watched: SizeWatcher.dimensions.horizontal, SizeWatcher.dimensions.vertical or\n   *                        SizeWatcher.dimensions.both\n   * @param {HTMLDocument}  [options.document] The DOM tree context to use, if none provided then it will be the document.\n   * @constructor\n   */\n  function SizeWatcher(element, options) {\n    this._element = element;\n    this._delegate = options.delegate;\n    this._size = null;\n    this._continuous = !!options.continuous;\n    this._direction = options.direction ? options.direction : SizeWatcher.directions.both;\n    this._dimension = options.dimension ? options.dimension : SizeWatcher.dimensions.both;\n    this._sizeIncreaseWatcherContentElm = null;\n    this._sizeDecreaseWatcherElm = null;\n    this._sizeIncreaseWatcherElm = null;\n    this._state = SizeWatcher.states.initialized;\n    this._scrollAmount = 2;\n    this._document = options.document || document;\n\n    this._generateScrollWatchers(options.size);\n    this._appendScrollWatchersToElement(options.container);\n  }\n\n  SizeWatcher.states = {\n    initialized: 0,\n    generatedScrollWatchers: 1,\n    appendedScrollWatchers: 2,\n    preparedScrollWatchers: 3,\n    watchingForSizeChange: 4\n  };\n\n  SizeWatcher.directions = {\n    decrease: 1,\n    increase: 2,\n    both: 3\n  };\n\n  SizeWatcher.dimensions = {\n    horizontal: 1,\n    vertical: 2,\n    both: 3\n  };\n\n  // noinspection JSUnusedLocalSymbols\n  SizeWatcher.prototype = {\n    constructor: SizeWatcher,\n    getWatchedElement: function getWatchedElement() {\n      return this._element;\n    },\n    getState: function getState() {\n      return this._state;\n    },\n    setSize: function setSize(size) {\n      this._size = size;\n      // noinspection JSBitwiseOperatorUsage\n      if (this._direction & SizeWatcher.directions.increase) {\n        this._sizeIncreaseWatcherContentElm.style.cssText = 'width: ' + (size.width + this._scrollAmount) + 'px; height: ' + (size.height + this._scrollAmount) + 'px;';\n      }\n      // noinspection JSBitwiseOperatorUsage\n      if (this._direction & SizeWatcher.directions.decrease) {\n        this._sizeDecreaseWatcherElm.style.cssText = 'position:absolute; left: 0px; top: 0px; overflow: hidden; width: ' + (size.width - this._scrollAmount) + 'px; height: ' + (size.height - this._scrollAmount) + 'px;';\n      }\n    },\n    _generateScrollWatchers: function _generateScrollWatchers(size) {\n      this._element.style.position = 'absolute';\n\n      // noinspection JSBitwiseOperatorUsage\n      if (this._direction & SizeWatcher.directions.increase) {\n        this._sizeIncreaseWatcherContentElm = this._document.createElement('div');\n\n        this._sizeIncreaseWatcherElm = this._document.createElement('div');\n        this._sizeIncreaseWatcherElm.style.cssText = 'position: absolute; left: 0; top: 0; width: 100%; height: 100%; overflow: hidden;';\n        this._sizeIncreaseWatcherElm.appendChild(this._sizeIncreaseWatcherContentElm);\n\n        this._element.appendChild(this._sizeIncreaseWatcherElm);\n      }\n\n      // noinspection JSBitwiseOperatorUsage\n      if (this._direction & SizeWatcher.directions.decrease) {\n        this._sizeDecreaseWatcherElm = this._document.createElement('div');\n        this._sizeDecreaseWatcherElm.appendChild(this._element);\n      }\n\n      if (size) {\n        this.setSize(size);\n      }\n\n      this._state = SizeWatcher.states.generatedScrollWatchers;\n    },\n    _appendScrollWatchersToElement: function _appendScrollWatchersToElement(container) {\n      if (this._state !== SizeWatcher.states.generatedScrollWatchers) {\n        throw new Error('SizeWatcher._appendScrollWatchersToElement() was invoked before SizeWatcher._generateScrollWatchers()');\n      }\n\n      // noinspection JSBitwiseOperatorUsage\n      if (this._direction & SizeWatcher.directions.decrease) {\n        container.appendChild(this._sizeDecreaseWatcherElm);\n      } else {\n        container.appendChild(this._element);\n      }\n\n      this._state = SizeWatcher.states.appendedScrollWatchers;\n    },\n    removeScrollWatchers: function removeScrollWatchers() {\n      // noinspection JSBitwiseOperatorUsage\n      if (this._direction & SizeWatcher.directions.decrease) {\n        if (this._sizeDecreaseWatcherElm.parentNode) {\n          this._sizeDecreaseWatcherElm.parentNode.removeChild(this._sizeDecreaseWatcherElm);\n        }\n      } else if (this._element.parentNode) {\n        this._element.parentNode.removeChild(this._element);\n      }\n    },\n    prepareForWatch: function prepareForWatch() {\n      var parentNode,\n          sizeDecreaseWatcherElmScrolled = true,\n          sizeIncreaseWatcherElmScrolled = true;\n\n      if (this._state !== SizeWatcher.states.appendedScrollWatchers) {\n        throw new Error('SizeWatcher.prepareForWatch() invoked before SizeWatcher._appendScrollWatchersToElement()');\n      }\n\n      if (this._size === null) {\n        this.setSize(new Size(this._element.offsetWidth, this._element.offsetHeight));\n      }\n\n      // noinspection JSBitwiseOperatorUsage\n      if (this._direction & SizeWatcher.directions.decrease) {\n        sizeDecreaseWatcherElmScrolled = this._scrollElementToBottomRight(this._sizeDecreaseWatcherElm);\n      }\n      // noinspection JSBitwiseOperatorUsage\n      if (this._direction & SizeWatcher.directions.increase) {\n        sizeIncreaseWatcherElmScrolled = this._scrollElementToBottomRight(this._sizeIncreaseWatcherElm);\n      }\n\n      // Check if scroll positions updated.\n      if (!sizeDecreaseWatcherElmScrolled || !sizeIncreaseWatcherElmScrolled) {\n        // Traverse tree to the top node to see if element is in the DOM tree.\n        parentNode = this._element.parentNode;\n        while (parentNode !== this._document && parentNode !== null) {\n          parentNode = parentNode.parentNode;\n        }\n\n        if (parentNode === null) {\n          throw new Error('Can\\'t set scroll position of scroll watchers. SizeWatcher is not in the DOM tree.');\n        } else if (console && typeof console.warn === 'function') {\n          console.warn('SizeWatcher can\\'t set scroll position of scroll watchers.');\n        }\n      }\n\n      this._state = SizeWatcher.states.preparedScrollWatchers;\n    },\n    _scrollElementToBottomRight: function _scrollElementToBottomRight(element) {\n      var elementScrolled = true;\n      // noinspection JSBitwiseOperatorUsage\n      if (this._dimension & SizeWatcher.dimensions.vertical) {\n        element.scrollTop = this._scrollAmount;\n        elementScrolled = elementScrolled && element.scrollTop > 0;\n      }\n      // noinspection JSBitwiseOperatorUsage\n      if (this._dimension & SizeWatcher.dimensions.horizontal) {\n        element.scrollLeft = this._scrollAmount;\n        elementScrolled = elementScrolled && element.scrollLeft > 0;\n      }\n      return elementScrolled;\n    },\n    beginWatching: function beginWatching() {\n      if (this._state !== SizeWatcher.states.preparedScrollWatchers) {\n        throw new Error('SizeWatcher.beginWatching() invoked before SizeWatcher.prepareForWatch()');\n      }\n\n      // noinspection JSBitwiseOperatorUsage\n      if (this._direction & SizeWatcher.directions.decrease) {\n        // noinspection JSValidateTypes\n        this._sizeDecreaseWatcherElm.addEventListener('scroll', this, false);\n      }\n      // noinspection JSBitwiseOperatorUsage\n      if (this._direction & SizeWatcher.directions.increase) {\n        // noinspection JSValidateTypes\n        this._sizeIncreaseWatcherElm.addEventListener('scroll', this, false);\n      }\n\n      this._state = SizeWatcher.states.watchingForSizeChange;\n    },\n    endWatching: function endWatching() {\n      if (this._state !== SizeWatcher.states.watchingForSizeChange) {\n        throw new Error('SizeWatcher.endWatching() invoked before SizeWatcher.beginWatching()');\n      }\n\n      // noinspection JSBitwiseOperatorUsage\n      if (this._direction & SizeWatcher.directions.decrease) {\n        // noinspection JSValidateTypes\n        this._sizeDecreaseWatcherElm.removeEventListener('scroll', this, false);\n      }\n      // noinspection JSBitwiseOperatorUsage\n      if (this._direction & SizeWatcher.directions.increase) {\n        // noinspection JSValidateTypes\n        this._sizeIncreaseWatcherElm.removeEventListener('scroll', this, false);\n      }\n      this._state = SizeWatcher.states.appendedScrollWatchers;\n    },\n    /**\n     * @private\n     */\n    handleEvent: function handleEvent(event) {\n      var newSize, oldSize;\n\n      // This is not suppose to happen because when we run endWatching() we remove scroll listeners.\n      // But some browsers will fire second scroll event which was pushed into event stack before listener was\n      // removed so do this check anyway.\n      if (this._state !== SizeWatcher.states.watchingForSizeChange) {\n        return;\n      }\n\n      newSize = new Size(this._element.offsetWidth, this._element.offsetHeight);\n      oldSize = this._size;\n\n      // Check if element size is changed. How come that element size isn't changed but scroll event fired?\n      // This can happen in two cases: when double scroll occurs or immediately after calling prepareForWatch()\n      // (event if scroll event listeners attached after it).\n      // The double scroll event happens when one size dimension (e.g.:width) is increased and another\n      // (e.g.:height) is decreased.\n      if (oldSize.isEqual(newSize)) {\n        return;\n      }\n\n      if (this._delegate && typeof this._delegate.sizeWatcherChangedSize === 'function') {\n        this._delegate.sizeWatcherChangedSize(this);\n\n        // Check that endWatching() wasn't invoked from within the delegate.\n        if (this._state !== SizeWatcher.states.watchingForSizeChange) {\n          return;\n        }\n      }\n\n      if (!this._continuous) {\n        this.endWatching();\n      } else {\n        // Set the new size so in case of double scroll event we won't cause the delegate method to be executed twice\n        // and also to update to the new watched size.\n        this.setSize(newSize);\n        // change state so prepareFowWatch() won't throw exception about wrong order invocation.\n        this._state = SizeWatcher.states.appendedScrollWatchers;\n        // Run prepareForWatch to reset the scroll watchers, we have already set the size\n        this.prepareForWatch();\n        // Set state to listeningForSizeChange, there is no need to invoke beginWatching() method as scroll event\n        // listeners and callback are already set.\n        this._state = SizeWatcher.states.watchingForSizeChange;\n      }\n    }\n  };\n\n  return FontLoader;\n});\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/modules/timestep/src/platforms/browser/webgl/FontLoader.js\n// module id = 74\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/modules/timestep/src/platforms/browser/webgl/FontLoader.js?");

/***/ },
/* 75 */
/*!*************************************************************************************!*\
  !*** ./modules/devkit-core/modules/timestep/src/platforms/browser/webgl/Shaders.js ***!
  \*************************************************************************************/
/***/ function(module, exports) {

	eval("'use strict';\n\nexports.__esModule = true;\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _exports = {};\n\nvar STRIDE = 24;\n\nvar Shader = function () {\n  function Shader(opts) {\n    _classCallCheck(this, Shader);\n\n    var gl = this._gl = opts.gl;\n\n    this._vertexSrc = opts.vertexSrc || ['precision mediump float;', 'attribute vec2 aTextureCoord;', 'attribute vec2 aPosition;', 'attribute vec4 aColor;', 'attribute float aAlpha;', 'uniform vec2 uResolution;', 'varying vec2 vTextureCoord;', 'varying float vAlpha;', 'varying vec4 vColor;', 'void main() {', ' vTextureCoord = aTextureCoord;', ' vColor = aColor;', ' vAlpha = aAlpha;', ' vec2 clipSpace = (aPosition / uResolution) * 2.0 - 1.0;', ' gl_Position = vec4(clipSpace * vec2(1.0, -1.0), 0.0, 1.0);', '}'].join('\\n');\n\n    this._fragmentSrc = opts.fragmentSrc || ['precision mediump float;', 'varying vec2 vTextureCoord;', 'varying float vAlpha;', 'uniform sampler2D uSampler;', 'void main(void) {', ' gl_FragColor = texture2D(uSampler, vTextureCoord) * vAlpha;', '}'].join('\\n');\n\n    var useTexture = opts.useTexture !== undefined ? opts.useTexture : true;\n\n    this.attributes = {\n      aTextureCoord: 0,\n      aPosition: 0,\n      aAlpha: 0,\n      aColor: 0\n    };\n\n    this.uniforms = {\n      uSampler: useTexture ? 0 : -1,\n      uResolution: 0\n    };\n\n    this.initGL();\n  }\n\n  Shader.prototype.initGL = function initGL() {\n    this.createProgram();\n    this.updateLocations();\n  };\n\n  Shader.prototype.updateLocations = function updateLocations() {\n    var gl = this._gl;\n    for (var attrib in this.attributes) {\n      if (this.attributes[attrib] !== -1) {\n        this.attributes[attrib] = gl.getAttribLocation(this.program, attrib);\n      }\n    }\n    for (var uniform in this.uniforms) {\n      if (this.uniforms[uniform] !== -1) {\n        this.uniforms[uniform] = gl.getUniformLocation(this.program, uniform);\n      }\n    }\n  };\n\n  Shader.prototype.enableVertexAttribArrays = function enableVertexAttribArrays() {\n    var gl = this._gl;\n    for (var attrib in this.attributes) {\n      if (this.attributes[attrib] !== -1) {\n        var index = this.attributes[attrib];\n        gl.enableVertexAttribArray(index);\n        switch (attrib) {\n          case 'aPosition':\n            gl.vertexAttribPointer(index, 2, gl.FLOAT, false, STRIDE, 0);\n            break;\n          case 'aTextureCoord':\n            gl.vertexAttribPointer(index, 2, gl.FLOAT, false, STRIDE, 8);\n            break;\n          case 'aAlpha':\n            gl.vertexAttribPointer(index, 1, gl.FLOAT, false, STRIDE, 16);\n            break;\n          case 'aColor':\n            gl.vertexAttribPointer(index, 4, gl.UNSIGNED_BYTE, true, STRIDE, 20);\n            break;\n        }\n      }\n    }\n  };\n\n  Shader.prototype.disableVertexAttribArrays = function disableVertexAttribArrays() {\n    var gl = this._gl;\n    for (var attrib in this.attributes) {\n      if (this.attributes[attrib] !== -1) {\n        gl.disableVertexAttribArray(this.attributes[attrib]);\n      }\n    }\n  };\n\n  Shader.prototype.createProgram = function createProgram() {\n    var gl = this._gl;\n\n    var vertexShader = gl.createShader(gl.VERTEX_SHADER);\n    gl.shaderSource(vertexShader, this._vertexSrc);\n    gl.compileShader(vertexShader);\n\n    var fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);\n    gl.shaderSource(fragmentShader, this._fragmentSrc);\n    gl.compileShader(fragmentShader);\n\n    var program = gl.createProgram();\n    gl.attachShader(program, vertexShader);\n    gl.attachShader(program, fragmentShader);\n    gl.linkProgram(program);\n\n    if (!gl.getProgramParameter(program, gl.LINK_STATUS)) {\n      console.log('Could not initialize shaders');\n    }\n\n    this.program = program;\n  };\n\n  return Shader;\n}();\n\nvar LinearAddShader = function (_Shader) {\n  _inherits(LinearAddShader, _Shader);\n\n  function LinearAddShader(opts) {\n    _classCallCheck(this, LinearAddShader);\n\n    opts.fragmentSrc = ['precision mediump float;', 'varying vec2 vTextureCoord;', 'varying float vAlpha;', 'varying vec4 vColor;', 'uniform sampler2D uSampler;', 'void main(void) {', ' vec4 vSample = texture2D(uSampler, vTextureCoord);', ' gl_FragColor = vec4(vSample.rgb + (vColor.rgb * vColor.a * vSample.a), vSample.a) * vAlpha;', '}'].join('\\n');\n    return _possibleConstructorReturn(this, _Shader.call(this, opts));\n  }\n\n  return LinearAddShader;\n}(Shader);\n\nvar TintShader = function (_Shader2) {\n  _inherits(TintShader, _Shader2);\n\n  function TintShader(opts) {\n    _classCallCheck(this, TintShader);\n\n    opts.fragmentSrc = ['precision mediump float;', 'varying vec2 vTextureCoord;', 'varying float vAlpha;', 'varying vec4 vColor;', 'uniform sampler2D uSampler;', 'void main(void) {', ' vec4 vSample = texture2D(uSampler, vTextureCoord);', ' gl_FragColor = vec4((vSample.rgb * (1.0 - vColor.a) + (vColor.rgb * vColor.a)) * vSample.a * vAlpha, vSample.a * vAlpha);', '}'].join('\\n');\n    return _possibleConstructorReturn(this, _Shader2.call(this, opts));\n  }\n\n  return TintShader;\n}(Shader);\n\nvar MultiplyShader = function (_Shader3) {\n  _inherits(MultiplyShader, _Shader3);\n\n  function MultiplyShader(opts) {\n    _classCallCheck(this, MultiplyShader);\n\n    opts.fragmentSrc = ['precision mediump float;', 'varying vec2 vTextureCoord;', 'varying float vAlpha;', 'varying vec4 vColor;', 'uniform sampler2D uSampler;', 'void main(void) {', ' vec4 vSample = texture2D(uSampler, vTextureCoord);', ' gl_FragColor = vec4(vSample.rgb * (vColor.rgb * vColor.a), vSample.a) * vAlpha;', '}'].join('\\n');\n    return _possibleConstructorReturn(this, _Shader3.call(this, opts));\n  }\n\n  return MultiplyShader;\n}(Shader);\n\nvar RectShader = function (_Shader4) {\n  _inherits(RectShader, _Shader4);\n\n  function RectShader(opts) {\n    _classCallCheck(this, RectShader);\n\n    opts.fragmentSrc = ['precision mediump float;', 'varying float vAlpha;', 'varying vec4 vColor;', 'void main(void) {', ' gl_FragColor = vColor * vColor.a * vAlpha;', '}'].join('\\n');\n    opts.useTexture = false;\n    return _possibleConstructorReturn(this, _Shader4.call(this, opts));\n  }\n\n  return RectShader;\n}(Shader);\n\n_exports = {\n  DefaultShader: Shader,\n  LinearAddShader: LinearAddShader,\n  TintShader: TintShader,\n  MultiplyShader: MultiplyShader,\n  RectShader: RectShader\n};\n\nexports.default = _exports;\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/modules/timestep/src/platforms/browser/webgl/Shaders.js\n// module id = 75\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/modules/timestep/src/platforms/browser/webgl/Shaders.js?");

/***/ },
/* 76 */
/*!*************************************************************************************************!*\
  !*** ./modules/devkit-core/modules/timestep/src/platforms/browser/webgl/WebGLTextureManager.js ***!
  \*************************************************************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nexports.__esModule = true;\n\nvar _base = __webpack_require__(/*! base */ 2);\n\nvar _LRUCache = __webpack_require__(/*! cache/LRUCache */ 51);\n\nvar _LRUCache2 = _interopRequireDefault(_LRUCache);\n\nvar _PubSub2 = __webpack_require__(/*! lib/PubSub */ 10);\n\nvar _PubSub3 = _interopRequireDefault(_PubSub2);\n\nvar _userAgent = __webpack_require__(/*! userAgent */ 7);\n\nvar _userAgent2 = _interopRequireDefault(_userAgent);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar CACHE_SIZE = 65535;\nvar CACHE_UID = 1;\nvar BYTES_PER_PIXEL = 4;\nvar MAX_TEXTURE_DUMP_ITERATIONS = 5;\n\n// default to general limit, allow platform specific overrides\nvar MAX_TEXTURE_BYTES = _base.CONFIG.maxTextureMegabytes * 1024 * 1024;\nif (_userAgent2.default.OS_TYPE === 'Android') {\n  var mb = _base.CONFIG.android.maxTextureMegabytes;\n  MAX_TEXTURE_BYTES = mb * 1024 * 1024 || MAX_TEXTURE_BYTES;\n} else if (_userAgent2.default.OS_TYPE === 'iPhone OS') {\n  var mb = _base.CONFIG.ios.maxTextureMegabytes;\n  MAX_TEXTURE_BYTES = mb * 1024 * 1024 || MAX_TEXTURE_BYTES;\n}\n\nvar pow = Math.pow;\nvar ceil = Math.ceil;\nvar log = Math.log;\nvar LOG_2 = log(2);\n\nvar WebGLTextureManager = function (_PubSub) {\n  _inherits(WebGLTextureManager, _PubSub);\n\n  function WebGLTextureManager() {\n    _classCallCheck(this, WebGLTextureManager);\n\n    var _this = _possibleConstructorReturn(this, _PubSub.call(this));\n\n    _this.gl = null;\n    _this.textureDataCache = new _LRUCache2.default(CACHE_SIZE);\n    _this.textureByteCount = 0;\n    _this.memoryLimit = MAX_TEXTURE_BYTES;\n    return _this;\n  }\n\n  WebGLTextureManager.prototype.initGL = function initGL(ctx) {\n    this.gl = ctx;\n    this.reloadTextures();\n  };\n\n  WebGLTextureManager.prototype.getTexture = function getTexture(id) {\n    var textureData = this.textureDataCache.get(id);\n    return textureData ? textureData.texture : null;\n  };\n\n  WebGLTextureManager.prototype.getTextureData = function getTextureData(id) {\n    var textureData = this.textureDataCache.get(id);\n    return textureData || null;\n  };\n\n  WebGLTextureManager.prototype.deleteTextureForImage = function deleteTextureForImage(image) {\n    if (image.__GL_ID !== undefined) {\n      this.deleteTexture(image.__GL_ID);\n    }\n  };\n\n  WebGLTextureManager.prototype.deleteTexture = function deleteTexture(id) {\n    this.emit(WebGLTextureManager.TEXTURE_REMOVED);\n    var textureData = this.textureDataCache.remove(id);\n    if (textureData) {\n      this.gl.deleteTexture(textureData.texture);\n      this.removeFromByteCount(textureData.width, textureData.height);\n      textureData.image.__GL_ID = undefined;\n    }\n  };\n\n  WebGLTextureManager.prototype.createOrUpdateTexture = function createOrUpdateTexture(image, id) {\n    var gl = this.gl;\n    if (!gl) {\n      return -1;\n    }\n\n    var width = image.width;\n    var height = image.height;\n\n    if (!image.dispose) {\n      image.dispose = (0, _base.bind)(this, function () {\n        this.deleteTextureForImage(image);\n      });\n    }\n\n    if (width === 0 || height === 0) {\n      throw new Error('Image cannot have a width or height of 0.');\n    }\n\n    if (id === undefined) {\n      id = image.__GL_ID !== undefined ? image.__GL_ID : CACHE_UID++;\n    }\n\n    image.__GL_ID = id;\n\n    var textureDataEntry = this.textureDataCache.find(id);\n    var textureData = textureDataEntry ? textureDataEntry.value : null;\n    var needsAddByteCount = false;\n\n    // No data exists for id, create new entry\n    if (!textureData) {\n      textureData = {\n        image: image,\n        isImg: image instanceof Image,\n        isCanvas: image instanceof HTMLCanvasElement,\n        width: width,\n        height: height,\n        texture: gl.createTexture()\n      };\n\n      gl.bindTexture(gl.TEXTURE_2D, textureData.texture);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n      this.textureDataCache.put(id, textureData);\n      needsAddByteCount = true;\n    } else {\n      gl.bindTexture(gl.TEXTURE_2D, textureData.texture);\n    }\n\n    if (textureData.width !== width || textureData.height !== height) {\n      this.removeFromByteCount(textureData.width, textureData.height);\n      textureData.width = width;\n      textureData.height = height;\n      needsAddByteCount = true;\n    }\n\n    if (textureData.image !== image) {\n      textureData.image.__GL_ID = undefined;\n      textureData.image = image;\n      textureData.isImg = image instanceof Image;\n      textureData.isCanvas = image instanceof HTMLCanvasElement;\n    }\n\n    if (textureData.isImg || textureData.isCanvas) {\n      gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, image);\n    } else {\n      gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, width, height, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n    }\n\n    if (needsAddByteCount) {\n      this.addToByteCount(width, height);\n    }\n\n    return id;\n  };\n\n  WebGLTextureManager.prototype.reloadTextures = function reloadTextures() {\n    var imagesToLoad = [];\n    this.textureDataCache.forEach(function (key, value) {\n      if (value.isImg || value.isCanvas) {\n        imagesToLoad.push(value.image);\n      }\n    }, this);\n    this.textureDataCache.removeAll();\n    this.textureByteCount = 0;\n    for (var i = 0, len = imagesToLoad.length; i < len; i++) {\n      this.createOrUpdateTexture(imagesToLoad[i]);\n    }\n  };\n\n  WebGLTextureManager.prototype.addToByteCount = function addToByteCount(width, height) {\n    width = this.nextPowerOfTwo(width);\n    height = this.nextPowerOfTwo(height);\n    this.textureByteCount += width * height * BYTES_PER_PIXEL;\n\n    var textureDumps = 0;\n    while (this.textureByteCount > this.memoryLimit && textureDumps++ < MAX_TEXTURE_DUMP_ITERATIONS) {\n      var oldestTextureEntry = this.textureDataCache.head;\n      if (oldestTextureEntry) {\n        if (!oldestTextureEntry.value.isImg) {\n          this.textureDataCache.get(oldestTextureEntry.key);\n          continue;\n        }\n        this.deleteTexture(oldestTextureEntry.key);\n      }\n    }\n  };\n\n  WebGLTextureManager.prototype.removeFromByteCount = function removeFromByteCount(width, height) {\n    width = this.nextPowerOfTwo(width);\n    height = this.nextPowerOfTwo(height);\n    this.textureByteCount -= width * height * BYTES_PER_PIXEL;\n  };\n\n  WebGLTextureManager.prototype.nextPowerOfTwo = function nextPowerOfTwo(value) {\n    return pow(2, ceil(log(value) / LOG_2));\n  };\n\n  return WebGLTextureManager;\n}(_PubSub3.default);\n\nexports.default = WebGLTextureManager;\n\n\nWebGLTextureManager.TEXTURE_REMOVED = 'TextureRemoved';\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/modules/timestep/src/platforms/browser/webgl/WebGLTextureManager.js\n// module id = 76\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/modules/timestep/src/platforms/browser/webgl/WebGLTextureManager.js?");

/***/ },
/* 77 */
/*!********************************************************************************!*\
  !*** ./modules/devkit-core/modules/timestep/src/platforms/browser/EditText.js ***!
  \********************************************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nexports.__esModule = true;\n\nvar _base = __webpack_require__(/*! base */ 2);\n\nvar _browser = __webpack_require__(/*! util/browser */ 72);\n\nvar _browser2 = _interopRequireDefault(_browser);\n\nvar _device = __webpack_require__(/*! device */ 1);\n\nvar _device2 = _interopRequireDefault(_device);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _exports = {};\n\n/**\n * @license\n * This file is part of the Game Closure SDK.\n *\n * The Game Closure SDK is free software: you can redistribute it and/or modify\n * it under the terms of the Mozilla Public License v. 2.0 as published by Mozilla.\n\n * The Game Closure SDK is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * Mozilla Public License v. 2.0 for more details.\n\n * You should have received a copy of the Mozilla Public License v. 2.0\n * along with the Game Closure SDK.  If not, see <http://mozilla.org/MPL/2.0/>.\n */\n\nvar $ = _browser2.default.$;\n// import squill.Widget;\nthrow new Error('TODO: ES6 SQUILL');\n\n\nvar __keyboardIsOpen = false;\n\nvar InputField = function (_squill$Widget) {\n  _inherits(InputField, _squill$Widget);\n\n  function InputField() {\n    _classCallCheck(this, InputField);\n\n    return _possibleConstructorReturn(this, _squill$Widget.apply(this, arguments));\n  }\n\n  InputField.prototype.buildWidget = function buildWidget() {\n    this.initKeyEvents();\n    this.initFocusEvents();\n  };\n\n  InputField.prototype.setValue = function setValue(value) {\n    this._el.value = value;\n    this._prevValue = value;\n  };\n\n  InputField.prototype.setCursor = function setCursor(cursorPos) {\n    this._el.selectionStart = this._el.selectionEnd = cursorPos;\n  };\n\n  InputField.prototype.setPlaceholder = function setPlaceholder(placeholder) {\n    this._el.placeholder = placeholder;\n  };\n\n  InputField.prototype.setMaxLength = function setMaxLength(maxLength) {\n    this._el.maxlength = maxLength;\n  };\n\n  InputField.prototype.show = function show() {\n    var _squill$Widget$protot;\n\n    (_squill$Widget$protot = _squill$Widget.prototype.show).call.apply(_squill$Widget$protot, [this].concat(Array.prototype.slice.call(arguments)));\n\n    this._el.focus();\n  };\n\n  InputField.prototype.onKeyUp = function onKeyUp(evt) {\n    var el = this._el;\n    _focused && _focused.onChange(el.value, this._prevValue, el.selectionStart, el.selectionEnd);\n    this._prevValue = el.value;\n    if (evt.keyCode == 13) {\n      _focused && _focused.closeEditField();\n    }\n  };\n\n  InputField.prototype.getValue = function getValue() {\n    return this._el.value;\n  };\n\n  InputField.prototype.onBlur = function onBlur(evt) {\n    this.hide();\n    if (__keyboardIsOpen) {\n      __keyboardIsOpen = false;\n      var ev = new Event('keyboardClosed');\n      ev.height = _device2.default.screen.height;\n      window.dispatchEvent(ev);\n    }\n    _focused && _focused.closeEditField();\n    _focused = null;\n  };\n\n  InputField.prototype.setFontColor = function setFontColor(color) {\n    this._el.style.color = color;\n  };\n\n  InputField.prototype.setHorizontalPadding = function setHorizontalPadding(left, right) {\n    this._el.style.paddingLeft = left + 'px';\n    this._el.style.paddingRight = right + 'px';\n  };\n\n  InputField.prototype.setFontSize = function setFontSize(fontSize) {\n    this._el.style.fontSize = fontSize + 'px';\n  };\n\n  InputField.prototype.setFontFamily = function setFontFamily(fontFamily) {\n    this._el.style.fontFamily = fontFamily;\n  };\n\n  InputField.prototype.setPosition = function setPosition(x, y, width, height) {\n    var style = this._el.style;\n    style.top = y - 1 + 'px';\n    style.left = x + 'px';\n    style.width = width + 'px';\n    style.height = height + 'px';\n  };\n\n  return InputField;\n}(squill.Widget);\n\nInputField.prototype._def = {\n  tag: 'input',\n  parent: document.body,\n  style: {\n    position: 'absolute',\n    background: 'transparent',\n    border: 'none',\n    outline: 'none',\n    zIndex: '990000',\n    left: '0px',\n    top: '0px'\n  }\n};\nvar _input = new InputField();\n_input.hide();\n\nvar _focused = null;\n\nvar defaults = {\n  hint: '',\n  inputType: 'default',\n  // default | number | phone | password | capital\n  maxLength: -1\n};\n\n_exports = function () {\n  function exports(opts) {\n    _classCallCheck(this, exports);\n\n    this._opts = (0, _base.merge)(opts, defaults);\n\n    this._textEditView = opts.textEditView;\n    this.onFocusChange = opts.onFocusChange || function () {};\n    this.onSubmit = opts.onSubmit || function () {};\n  }\n\n  exports.prototype.onChange = function onChange(value, prevValue, cursorPos, selectionEnd) {\n    this._value = value;\n    if (this._opts.onChange) {\n      this._opts.onChange(value, prevValue, cursorPos);\n    }\n  };\n\n  exports.prototype.getValue = function getValue() {\n    return this._value;\n  };\n\n  exports.prototype.setValue = function setValue(value) {\n    this._value = value;\n    this.onChange(value);\n  };\n\n  exports.prototype.requestFocus = function requestFocus(noSubmit) {\n    if (_focused !== this) {\n      if (_focused != null) {\n        _focused.removeFocus(noSubmit);\n      }\n\n      this.onFocusChange(true);\n    }\n\n    _focused = this;\n  };\n\n  exports.prototype.closeEditField = function closeEditField(noSubmit) {\n    console.log('TextEditView editText removeFocus');\n    if (_focused != null) {\n      _focused.removeFocus(noSubmit);\n    }\n\n    this._showTextBox();\n    _input.hide();\n\n    // NATIVE.inputPrompt.hideSoftKeyboard();\n    if (__keyboardIsOpen) {\n      __keyboardIsOpen = false;\n      var ev = new Event('keyboardClosed');\n      ev.height = _device2.default.screen.height;\n      window.dispatchEvent(ev);\n    }\n  };\n\n  exports.prototype._hideTextBox = function _hideTextBox() {\n    var textBox = this._textEditView._textBox;\n    textBox.style.visible = false;\n  };\n\n  exports.prototype._showTextBox = function _showTextBox() {\n    var textBox = this._textEditView._textBox;\n    textBox.style.visible = true;\n  };\n\n  exports.prototype.refresh = function refresh(value, hasBack, hasForward, cursorPos) {\n    this._hideTextBox();\n\n    var textBox = this._textEditView._textBox;\n    var pos = this._textEditView.getPosition();\n    var scale = pos.width / this._textEditView.style.width;\n\n    _input.setCursor(cursorPos);\n    _input.setValue(value);\n    _input.setPlaceholder(this._opts.hint);\n    _input.setMaxLength(this._opts.maxLength);\n    _input.setFontColor(this._opts.color);\n    _input.setHorizontalPadding(this._opts.paddingLeft * scale, this._opts.paddingRight * scale);\n    _input.setFontSize(textBox.getOpts().size * scale);\n    _input.setFontFamily(textBox.getOpts().fontFamily);\n    _input.setPosition(pos.x, pos.y, pos.width, pos.height);\n    _input.show();\n\n    if (!__keyboardIsOpen) {\n      __keyboardIsOpen = true;\n      var ev = new Event('keyboardOpened');\n      ev.height = _device2.default.screen.height * 0.6;\n      window.dispatchEvent(ev);\n    }\n  };\n\n  exports.prototype.hasFocus = function hasFocus() {\n    return this == _focused;\n  };\n\n  exports.prototype.removeFocus = function removeFocus(noSubmit) {\n    this.onFocusChange(false);\n    if (!noSubmit) {\n      this.onSubmit(_input.getValue());\n    }\n    if (_focused == this) {\n      _focused = null;\n    }\n  };\n\n  exports.prototype.setHint = function setHint(hint) {\n    this._opts.hint = hint;\n  };\n\n  return exports;\n}();\n\nexports.default = _exports;\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/modules/timestep/src/platforms/browser/EditText.js\n// module id = 77\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/modules/timestep/src/platforms/browser/EditText.js?");

/***/ },
/* 78 */
/*!********************************************************************************!*\
  !*** ./modules/devkit-core/modules/timestep/src/platforms/browser/FlashAPI.js ***!
  \********************************************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nexports.__esModule = true;\n\nvar _base = __webpack_require__(/*! base */ 2);\n\nvar _PubSub2 = __webpack_require__(/*! lib/PubSub */ 10);\n\nvar _PubSub3 = _interopRequireDefault(_PubSub2);\n\nvar _SoundManager = __webpack_require__(/*! ./SoundManager */ 79);\n\nvar _SoundManager2 = _interopRequireDefault(_SoundManager);\n\nvar _underscore = __webpack_require__(/*! util/underscore */ 80);\n\nvar _underscore2 = _interopRequireDefault(_underscore);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _exports = {};\n\n/**\n * @license\n * This file is part of the Game Closure SDK.\n *\n * The Game Closure SDK is free software: you can redistribute it and/or modify\n * it under the terms of the Mozilla Public License v. 2.0 as published by Mozilla.\n\n * The Game Closure SDK is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * Mozilla Public License v. 2.0 for more details.\n\n * You should have received a copy of the Mozilla Public License v. 2.0\n * along with the Game Closure SDK.  If not, see <http://mozilla.org/MPL/2.0/>.\n */\n\nvar _ = _underscore2.default._;\n\nvar soundManager = new _SoundManager2.default();\nsoundManager.url = 'media/swf';\nsoundManager.flashVersion = 9;\nsoundManager.useMovieStar = true;\nsoundManager.debugMode = false;\nsoundManager.consoleOnly = true;\nsoundManager.useHighPerformance = true;\nsoundManager.useFastPolling = true;\n\n/**\n * @extends lib.PubSub\n */\n_exports = function (_PubSub) {\n  _inherits(exports, _PubSub);\n\n  function exports(opts) {\n    _classCallCheck(this, exports);\n\n    opts = (0, _base.merge)(opts, {\n      map: {},\n      background: []\n    });\n\n    var _this = _possibleConstructorReturn(this, _PubSub.call(this, opts));\n\n    var path = opts.path;\n    _this._map = {};\n\n    _.each(opts.background, function (name) {\n      opts.map[name] = { 'name': name };\n    }, _this);\n\n    soundManager.onready((0, _base.bind)(_this, function () {\n      _base.logger.log('SoundManager onReady');\n      for (key in opts.map) {\n        _base.logger.log('SoundManager key: ', key);\n        var url = 'media/audio/' + key + '.mp3';\n        var k = this._map[key] = soundManager.createSound({\n          id: key,\n          bufferTime: 3,\n          url: url\n        });\n        k.load();\n      }\n\n      this.publish('Ready');\n    }));\n    return _this;\n  }\n\n  exports.prototype.canPlay = function canPlay(name) {\n    return name in this._map;\n  };\n\n  exports.prototype.setVolume = function setVolume(volume) {\n    this._soundPlaying && soundManager.setVolume(this._soundPlaying, volume);\n    this._backgroundSoundPlaying && soundManager.setVolume(this._backgroundSoundPlaying, volume);\n  };\n\n  exports.prototype.setMuted = function setMuted(muted) {\n    this.muted = muted;\n    if (muted) {\n      this.setVolume(0);\n    }\n  };\n\n  exports.prototype.play = function play(name, volume, channel) {\n    if (!this.canPlay(name)) {\n      return;\n    }\n    if (this.muted) {\n      return;\n    }\n    if (volume === undefined) {\n      volume = 1;\n    }\n    this._soundPlaying = name;\n    this._map[name].setVolume(volume * 100 | 0);\n    this._map[name].play();\n  };\n\n  exports.prototype.pause = function pause() {\n    this._map[this._soundPlaying].pause();\n    this._soundPlaying = null;\n  };\n\n  exports.prototype.playBackgroundMusic = function playBackgroundMusic(name, volume) {\n    if (!this.canPlay(name)) {\n      return;\n    }\n    if (this.muted) {\n      return;\n    }\n    if (volume === undefined) {\n      volume = 1;\n    }\n    this._backgroundSoundPlaying = name;\n    this._map[name].setVolume(volume * 100 | 0);\n    this._map[name].play();\n  };\n\n  exports.prototype.pauseBackgroundMusic = function pauseBackgroundMusic() {\n    if (!this._backgroundSoundPlaying) {\n      return;\n    }\n    this._map[this._backgroundSoundPlaying].pause();\n    this._backgroundSoundPlaying = null;\n  };\n\n  return exports;\n}(_PubSub3.default);\nvar AudioAPI = _exports;\n\nexports.default = _exports;\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/modules/timestep/src/platforms/browser/FlashAPI.js\n// module id = 78\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/modules/timestep/src/platforms/browser/FlashAPI.js?");

/***/ },
/* 79 */
/*!************************************************************************************!*\
  !*** ./modules/devkit-core/modules/timestep/src/platforms/browser/SoundManager.js ***!
  \************************************************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nexports.__esModule = true;\nvar _exports = {};\n\n/*\n * @license\n * SoundManager 2: JavaScript Sound for the Web\n * ----------------------------------------------\n * http://schillmania.com/projects/soundmanager2/\n *\n * Copyright (c) 2007, Scott Schiller. All rights reserved.\n * Code provided under the BSD License:\n * http://schillmania.com/projects/soundmanager2/license.txt\n *\n * V2.97a.20110801\n */\n/*global window, SM2_DEFER, sm2Debugger, console, document, navigator, setTimeout, setInterval, clearInterval, Audio */\n/* jslint regexp: true, sloppy: true, white: true, nomen: true, plusplus: true */\n_exports = function SoundManager(smURL, smID) {\n  this.flashVersion = 8;\n  // version of flash to require, either 8 or 9. Some API features require Flash 9.\n  this.debugMode = true;\n  // enable debugging output (div#soundmanager-debug, OR console if available+configured)\n  this.debugFlash = false;\n  // enable debugging output inside SWF, troubleshoot Flash/browser issues\n  this.useConsole = true;\n  // use firebug/safari console.log()-type debug console if available\n  this.consoleOnly = false;\n  // if console is being used, do not create/write to #soundmanager-debug\n  this.waitForWindowLoad = false;\n  // force SM2 to wait for window.onload() before trying to call soundManager.onload()\n  this.nullURL = 'about:blank';\n  // path to \"null\" (empty) MP3 file, used to unload sounds (Flash 8 only)\n  this.allowPolling = true;\n  // allow flash to poll for status update (required for whileplaying() events, peak, sound spectrum functions to work.)\n  this.useFastPolling = false;\n  // uses lower flash timer interval for higher callback frequency, best combined with useHighPerformance\n  this.useMovieStar = true;\n  // enable support for Flash 9.0r115+ (codename \"MovieStar\") MPEG4 audio formats (AAC, M4V, FLV, MOV etc.)\n  this.bgColor = '#ffffff';\n  // movie (.swf) background color, eg. '#000000'\n  this.useHighPerformance = false;\n  // position:fixed flash movie can help increase js/flash speed, minimize lag\n  this.flashPollingInterval = null;\n  // msec for polling interval. Defaults to 50 unless useFastPolling = true.\n  this.flashLoadTimeout = 1000;\n  // msec to wait for flash movie to load before failing (0 = infinity)\n  this.wmode = null;\n  // string: flash rendering mode - null, transparent, opaque (last two allow layering of HTML on top)\n  this.allowScriptAccess = 'always';\n  // for scripting the SWF (object/embed property), either 'always' or 'sameDomain'\n  this.useFlashBlock = false;\n  // *requires flashblock.css, see demos* - allow recovery from flash blockers. Wait indefinitely and apply timeout CSS to SWF, if applicable.\n  this.useHTML5Audio = true;\n  // Beta feature: Use HTML5 Audio() where API is supported (most Safari, Chrome versions), Firefox (no MP3/MP4.) Ideally, transparent vs. Flash API where possible.\n  this.html5Test = /^(probably|maybe)$/i;\n  // HTML5 Audio() format support test. Use /^probably$/i; if you want to be more conservative.\n  this.preferFlash = true;\n\n  // (experimental) if true and flash support present, will try to use flash for MP3/MP4 as needed since HTML5 audio support is still quirky in browsers.\n  this.audioFormats = {\n    /*\n     * determines HTML5 support + flash requirements.\n     * if no support for a \"required\" format, SM2 will fail to start.\n     * flash fallback is used for MP3 or MP4 if HTML5 can't play it (or if preferFlash = true)\n     * multiple MIME types may be tested while trying to get a positive canPlayType() response.\n     */\n    'mp3': {\n      'type': ['audio/mpeg; codecs=\"mp3\"', 'audio/mpeg', 'audio/mp3', 'audio/MPA', 'audio/mpa-robust'],\n      'required': true\n    },\n    'mp4': {\n      'related': ['aac', 'm4a'],\n      // additional formats under the MP4 container\n      'type': ['audio/mp4; codecs=\"mp4a.40.2\"', 'audio/aac', 'audio/x-m4a', 'audio/MP4A-LATM', 'audio/mpeg4-generic'],\n      'required': false\n    },\n    'ogg': {\n      'type': ['audio/ogg; codecs=vorbis'],\n      'required': false\n    },\n    'wav': {\n      'type': ['audio/wav; codecs=\"1\"', 'audio/wav', 'audio/wave', 'audio/x-wav'],\n      'required': false\n    }\n  };\n\n  this.defaultOptions = {\n    'autoLoad': false,\n    // enable automatic loading (otherwise .load() will be called on demand with .play(), the latter being nicer on bandwidth - if you want to .load yourself, you also can)\n    'stream': true,\n    // allows playing before entire file has loaded (recommended)\n    'autoPlay': false,\n    // enable playing of file as soon as possible (much faster if \"stream\" is true)\n    'loops': 1,\n    // how many times to repeat the sound (position will wrap around to 0, setPosition() will break out of loop when >0)\n    'onid3': null,\n    // callback function for \"ID3 data is added/available\"\n    'onload': null,\n    // callback function for \"load finished\"\n    'whileloading': null,\n    // callback function for \"download progress update\" (X of Y bytes received)\n    'onplay': null,\n    // callback for \"play\" start\n    'onpause': null,\n    // callback for \"pause\"\n    'onresume': null,\n    // callback for \"resume\" (pause toggle)\n    'whileplaying': null,\n    // callback during play (position update)\n    'onstop': null,\n    // callback for \"user stop\"\n    'onfailure': null,\n    // callback function for when playing fails\n    'onfinish': null,\n    // callback function for \"sound finished playing\"\n    'onbeforefinish': null,\n    // callback for \"before sound finished playing (at [time])\"\n    'onbeforefinishtime': 5000,\n    // offset (milliseconds) before end of sound to trigger beforefinish (eg. 1000 msec = 1 second)\n    'onbeforefinishcomplete': null,\n    // function to call when said sound finishes playing\n    'onjustbeforefinish': null,\n    // callback for [n] msec before end of current sound\n    'onjustbeforefinishtime': 200,\n    // [n] - if not using, set to 0 (or null handler) and event will not fire.\n    'multiShot': true,\n    // let sounds \"restart\" or layer on top of each other when played multiple times, rather than one-shot/one at a time\n    'multiShotEvents': false,\n    // fire multiple sound events (currently onfinish() only) when multiShot is enabled\n    'position': null,\n    // offset (milliseconds) to seek to within loaded sound data.\n    'pan': 0,\n    // \"pan\" settings, left-to-right, -100 to 100\n    'type': null,\n    // MIME-like hint for file pattern / canPlay() tests, eg. audio/mp3\n    'usePolicyFile': false,\n    // enable crossdomain.xml request for audio on remote domains (for ID3/waveform access)\n    'volume': 100\n  };\n\n  // self-explanatory. 0-100, the latter being the max.\n  this.flash9Options = {\n    // flash 9-only options, merged into defaultOptions if flash 9 is being used\n    'isMovieStar': null,\n    // \"MovieStar\" MPEG4 audio mode. Null (default) = auto detect MP4, AAC etc. based on URL. true = force on, ignore URL\n    'usePeakData': false,\n    // enable left/right channel peak (level) data\n    'useWaveformData': false,\n    // enable sound spectrum (raw waveform data) - WARNING: CPU-INTENSIVE: may set CPUs on fire.\n    'useEQData': false,\n    // enable sound EQ (frequency spectrum data) - WARNING: Also CPU-intensive.\n    'onbufferchange': null,\n    // callback for \"isBuffering\" property change\n    'ondataerror': null\n  };\n\n  // callback for waveform/eq data access error (flash playing audio in other tabs/domains)\n  this.movieStarOptions = {\n    // flash 9.0r115+ MPEG4 audio options, merged into defaultOptions if flash 9+movieStar mode is enabled\n    'bufferTime': 3,\n    // seconds of data to buffer before playback begins (null = flash default of 0.1 seconds - if AAC playback is gappy, try increasing.)\n    'serverURL': null,\n    // rtmp: FMS or FMIS server to connect to, required when requesting media via RTMP or one of its variants\n    'onconnect': null,\n    // rtmp: callback for connection to flash media server\n    'duration': null\n  };\n\n  // rtmp: song duration (msec)\n  this.version = null;\n  this.versionNumber = 'V2.97a.20110801';\n  this.movieURL = null;\n  this.url = smURL || null;\n  this.altURL = null;\n  this.swfLoaded = false;\n  this.enabled = false;\n  this.o = null;\n  this.movieID = 'sm2-container';\n  this.id = smID || 'sm2movie';\n  this.swfCSS = {\n    'swfBox': 'sm2-object-box',\n    'swfDefault': 'movieContainer',\n    'swfError': 'swf_error',\n    // SWF loaded, but SM2 couldn't start (other error)\n    'swfTimedout': 'swf_timedout',\n    'swfLoaded': 'swf_loaded',\n    'swfUnblocked': 'swf_unblocked',\n    // or loaded OK\n    'sm2Debug': 'sm2_debug',\n    'highPerf': 'high_performance',\n    'flashDebug': 'flash_debug'\n  };\n  this.oMC = null;\n  this.sounds = {};\n  this.soundIDs = [];\n  this.muted = false;\n  this.debugID = 'soundmanager-debug';\n  this.debugURLParam = /([#?&])debug=1/i;\n  this.specialWmodeCase = false;\n  this.didFlashBlock = false;\n\n  this.filePattern = null;\n  this.filePatterns = {\n    'flash8': /\\.mp3(\\?.*)?$/i,\n    'flash9': /\\.mp3(\\?.*)?$/i\n  };\n\n  this.baseMimeTypes = /^\\s*audio\\/(?:x-)?(?:mp(?:eg|3))\\s*(?:$|;)/i;\n  // mp3\n  this.netStreamMimeTypes = /^\\s*audio\\/(?:x-)?(?:mp(?:eg|3))\\s*(?:$|;)/i;\n  // mp3, mp4, aac etc.\n  this.netStreamTypes = ['aac', 'flv', 'mov', 'mp4', 'm4v', 'f4v', 'm4a', 'mp4v', '3gp', '3g2'];\n  // Flash v9.0r115+ \"moviestar\" formats\n  this.netStreamPattern = new RegExp('\\\\.(' + this.netStreamTypes.join('|') + ')(\\\\?.*)?$', 'i');\n  this.mimePattern = this.baseMimeTypes;\n\n  this.features = {\n    'buffering': false,\n    'peakData': false,\n    'waveformData': false,\n    'eqData': false,\n    'movieStar': false\n  };\n\n  this.sandbox = {\n    // <d>\n    'type': null,\n    'types': {\n      'remote': 'remote (domain-based) rules',\n      'localWithFile': 'local with file access (no internet access)',\n      'localWithNetwork': 'local with network (internet access only, no local access)',\n      'localTrusted': 'local, trusted (local+internet access)'\n    },\n    'description': null,\n    'noRemote': null,\n    'noLocal': null\n  };\n\n  // </d>\n  this.hasHTML5 = typeof Audio !== 'undefined' && typeof new Audio().canPlayType !== 'undefined';\n\n  // switch for handling logic\n  // stores canPlayType() results, etc. treat as read-only.\n  this.html5 = {\n    // mp3: boolean\n    // mp4: boolean\n    'usingFlash': null\n  };\n\n  // set if/when flash fallback is needed\n  // format support\n  this.flash = {};\n\n  // mp3: boolean\n  // mp4: boolean\n  this.html5Only = false;\n  // determined at init time\n  this.ignoreFlash = false;\n\n  // used for special cases (eg. iPad/iPhone/palm OS?)\n  /*\n   * a few private internals\n   */\n  var SMSound,\n      _s = this,\n      _sm = 'soundManager',\n      _smc = _sm + '::',\n      _h5 = 'HTML5::',\n      _id,\n      _ua = navigator.userAgent,\n      _win = window,\n      _wl = _win.location.href.toString(),\n      _fV = this.flashVersion,\n      _doc = document,\n      _doNothing,\n      _init,\n      _on_queue = [],\n      _debugOpen = true,\n      _debugTS,\n      _didAppend = false,\n      _appendSuccess = false,\n      _didInit = false,\n      _disabled = false,\n      _windowLoaded = false,\n      _wDS,\n      _wdCount = 0,\n      _initComplete,\n      _mixin,\n      _addOnEvent,\n      _processOnEvents,\n      _initUserOnload2,\n      _delayWaitForEI,\n      _waitForEI,\n      _setVersionInfo,\n      _handleFocus2,\n      _strings,\n      _initMovie,\n      _dcLoaded2,\n      _didDCLoaded,\n      _getDocument,\n      _createMovie,\n      _catchError,\n      _setPolling,\n      _initDebug,\n      _debugLevels = ['log', 'info', 'warn', 'error'],\n      _defaultFlashVersion = 8,\n      _disableObject,\n      _failSafely,\n      _normalizeMovieURL,\n      _oRemoved = null,\n      _oRemovedHTML = null,\n      _str,\n      _flashBlockHandler,\n      _getSWFCSS,\n      _toggleDebug,\n      _loopFix,\n      _policyFix,\n      _complain,\n      _idCheck,\n      _waitingForEI = false,\n      _initPending = false,\n      _smTimer,\n      _onTimer,\n      _startTimer,\n      _stopTimer,\n      _needsFlash = null,\n      _featureCheck,\n      _html5OK,\n      _html5CanPlay,\n      _html5Ext,\n      _dcIE2,\n      _testHTML5,\n      _event,\n      _slice = Array.prototype.slice,\n      _useGlobalHTML5Audio = false,\n      _hasFlash,\n      _detectFlash,\n      _badSafariFix,\n      _html5_events,\n      _showSupport,\n      _is_iDevice = _ua.match(/(ipad|iphone|ipod)/i),\n      _likesHTML5 = _ua.match(/(mobile|pre\\/|xoom)/i) || _is_iDevice,\n      _isIE = _ua.match(/msie/i),\n      _isWebkit = _ua.match(/webkit/i),\n      _isSafari = _ua.match(/safari/i) && !_ua.match(/chrome/i),\n      _isOpera = _ua.match(/opera/i),\n      _isBadSafari = !_wl.match(/usehtml5audio/i) && !_wl.match(/sm2\\-ignorebadua/i) && _isSafari && _ua.match(/OS X 10_6_([3-7])/i),\n\n  // Safari 4 and 5 occasionally fail to load/play HTML5 audio on Snow Leopard 10.6.3 through 10.6.7 due to bug(s) in QuickTime X and/or other underlying frameworks. :/ Confirmed bug. https://bugs.webkit.org/show_bug.cgi?id=32159\n  _hasConsole = typeof console !== 'undefined' && typeof console.log !== 'undefined',\n      _isFocused = typeof _doc.hasFocus !== 'undefined' ? _doc.hasFocus() : null,\n      _tryInitOnFocus = _isSafari && typeof _doc.hasFocus === 'undefined',\n      _okToDisable = !_tryInitOnFocus,\n      _flashMIME = /(mp3|mp4|mpa)/i,\n      _overHTTP = _doc.location ? _doc.location.protocol.match(/http/i) : null,\n      _http = !_overHTTP ? 'http:' : '';\n\n  this.useAltURL = !_overHTTP;\n  // use altURL if not \"online\"\n  this._global_a = null;\n\n  if (_likesHTML5) {\n    // prefer HTML5 for mobile + tablet-like devices, probably more reliable vs. flash at this point.\n    _s.useHTML5Audio = true;\n    _s.preferFlash = false;\n    if (_is_iDevice) {\n      // by default, use global feature. iOS onfinish() -> next may fail otherwise.\n      _s.ignoreFlash = true;\n      _useGlobalHTML5Audio = true;\n    }\n  }\n\n  /*\n   * public soundManager API\n   */\n  this.ok = function () {\n    return _needsFlash ? _didInit && !_disabled : _s.useHTML5Audio && _s.hasHTML5;\n  };\n\n  this.supported = this.ok;\n\n  // legacy\n  this.getMovie = function (smID) {\n    return _isIE ? _win[smID] : _isSafari ? _id(smID) || _doc[smID] : _id(smID);\n  };\n\n  this.createSound = function (oOptions) {\n    var _cs = _sm + '.createSound(): ',\n        thisOptions = null,\n        oSound = null,\n        _tO = null;\n    if (!_didInit || !_s.ok()) {\n      _complain(_cs + _str(!_didInit ? 'notReady' : 'notOK'));\n      return false;\n    }\n    if (arguments.length === 2) {\n      // function overloading in JS! :) ..assume simple createSound(id,url) use case\n      oOptions = {\n        'id': arguments[0],\n        'url': arguments[1]\n      };\n    }\n    thisOptions = _mixin(oOptions);\n    // inherit from defaultOptions\n    _tO = thisOptions;\n    // alias\n    // <d>\n    if (_tO.id.toString().charAt(0).match(/^[0-9]$/)) {\n      _s._wD(_cs + _str('badID', _tO.id), 2);\n    }\n    _s._wD(_cs + _tO.id + ' (' + _tO.url + ')', 1);\n    // </d>\n    if (_idCheck(_tO.id, true)) {\n      _s._wD(_cs + _tO.id + ' exists', 1);\n      return _s.sounds[_tO.id];\n    }\n\n    function make() {\n      thisOptions = _loopFix(thisOptions);\n      _s.sounds[_tO.id] = new SMSound(_tO);\n      _s.soundIDs.push(_tO.id);\n      return _s.sounds[_tO.id];\n    }\n\n    if (_html5OK(_tO)) {\n      oSound = make();\n      _s._wD('Loading sound ' + _tO.id + ' via HTML5');\n      oSound._setup_html5(_tO);\n    } else {\n      if (_fV > 8 && _s.useMovieStar) {\n        if (_tO.isMovieStar === null) {\n          _tO.isMovieStar = _tO.serverURL || (_tO.type ? _tO.type.match(_s.netStreamPattern) : false) || _tO.url.match(_s.netStreamPattern) ? true : false;\n        }\n        if (_tO.isMovieStar) {\n          _s._wD(_cs + 'using MovieStar handling');\n        }\n        if (_tO.isMovieStar) {\n          if (_tO.usePeakData) {\n            _wDS('noPeak');\n            _tO.usePeakData = false;\n          }\n          if (_tO.loops > 1) {\n            _wDS('noNSLoop');\n          }\n        }\n      }\n      _tO = _policyFix(_tO, _cs);\n      oSound = make();\n      if (_fV === 8) {\n        _s.o._createSound(_tO.id, _tO.onjustbeforefinishtime, _tO.loops || 1, _tO.usePolicyFile);\n      } else {\n        _s.o._createSound(_tO.id, _tO.url, _tO.onjustbeforefinishtime, _tO.usePeakData, _tO.useWaveformData, _tO.useEQData, _tO.isMovieStar, _tO.isMovieStar ? _tO.bufferTime : false, _tO.loops || 1, _tO.serverURL, _tO.duration || null, _tO.autoPlay, true, _tO.autoLoad, _tO.usePolicyFile);\n        if (!_tO.serverURL) {\n          // We are connected immediately\n          oSound.connected = true;\n          if (_tO.onconnect) {\n            _tO.onconnect.apply(oSound);\n          }\n        }\n      }\n\n      if (!_tO.serverURL && (_tO.autoLoad || _tO.autoPlay)) {\n        oSound.load(_tO);\n      }\n    }\n    // call load for non-rtmp streams\n    if (!_tO.serverURL && _tO.autoPlay) {\n      // rtmp will play in onconnect\n      oSound.play();\n    }\n    return oSound;\n  };\n\n  this.destroySound = function (sID, _bFromSound) {\n    // explicitly destroy a sound before normal page unload, etc.\n    if (!_idCheck(sID)) {\n      return false;\n    }\n    var oS = _s.sounds[sID],\n        i;\n    oS._iO = {};\n    // Disable all callbacks while the sound is being destroyed\n    oS.stop();\n    oS.unload();\n    for (i = 0; i < _s.soundIDs.length; i++) {\n      if (_s.soundIDs[i] === sID) {\n        _s.soundIDs.splice(i, 1);\n        break;\n      }\n    }\n    if (!_bFromSound) {\n      // ignore if being called from SMSound instance\n      oS.destruct(true);\n    }\n    oS = null;\n    delete _s.sounds[sID];\n    return true;\n  };\n\n  this.load = function (sID, oOptions) {\n    if (!_idCheck(sID)) {\n      return false;\n    }\n    return _s.sounds[sID].load(oOptions);\n  };\n\n  this.unload = function (sID) {\n    if (!_idCheck(sID)) {\n      return false;\n    }\n    return _s.sounds[sID].unload();\n  };\n\n  this.play = function (sID, oOptions) {\n    var fN = _sm + '.play(): ';\n    if (!_didInit || !_s.ok()) {\n      _complain(fN + _str(!_didInit ? 'notReady' : 'notOK'));\n      return false;\n    }\n    if (!_idCheck(sID)) {\n      if (!(oOptions instanceof Object)) {\n        oOptions = { url: oOptions };\n      }\n      // overloading use case: play('mySound','/path/to/some.mp3');\n      if (oOptions && oOptions.url) {\n        // overloading use case, create+play: .play('someID',{url:'/path/to.mp3'});\n        _s._wD(fN + 'attempting to create \"' + sID + '\"', 1);\n        oOptions.id = sID;\n        return _s.createSound(oOptions).play();\n      } else {\n        return false;\n      }\n    }\n    return _s.sounds[sID].play(oOptions);\n  };\n\n  this.start = this.play;\n\n  // just for convenience\n  this.setPosition = function (sID, nMsecOffset) {\n    if (!_idCheck(sID)) {\n      return false;\n    }\n    return _s.sounds[sID].setPosition(nMsecOffset);\n  };\n\n  this.stop = function (sID) {\n    if (!_idCheck(sID)) {\n      return false;\n    }\n    _s._wD(_sm + '.stop(' + sID + ')', 1);\n    return _s.sounds[sID].stop();\n  };\n\n  this.stopAll = function () {\n    var oSound;\n    _s._wD(_sm + '.stopAll()', 1);\n    for (oSound in _s.sounds) {\n      if (_s.sounds.hasOwnProperty(oSound)) {\n        _s.sounds[oSound].stop();\n      }\n    }\n  };\n\n  // apply only to sound objects\n  this.pause = function (sID) {\n    if (!_idCheck(sID)) {\n      return false;\n    }\n    return _s.sounds[sID].pause();\n  };\n\n  this.pauseAll = function () {\n    var i;\n    for (i = _s.soundIDs.length; i--;) {\n      _s.sounds[_s.soundIDs[i]].pause();\n    }\n  };\n\n  this.resume = function (sID) {\n    if (!_idCheck(sID)) {\n      return false;\n    }\n    return _s.sounds[sID].resume();\n  };\n\n  this.resumeAll = function () {\n    var i;\n    for (i = _s.soundIDs.length; i--;) {\n      _s.sounds[_s.soundIDs[i]].resume();\n    }\n  };\n\n  this.togglePause = function (sID) {\n    if (!_idCheck(sID)) {\n      return false;\n    }\n    return _s.sounds[sID].togglePause();\n  };\n\n  this.setPan = function (sID, nPan) {\n    if (!_idCheck(sID)) {\n      return false;\n    }\n    return _s.sounds[sID].setPan(nPan);\n  };\n\n  this.setVolume = function (sID, nVol) {\n    if (!_idCheck(sID)) {\n      return false;\n    }\n    return _s.sounds[sID].setVolume(nVol);\n  };\n\n  this.mute = function (sID) {\n    var fN = _sm + '.mute(): ',\n        i = 0;\n    if (typeof sID !== 'string') {\n      sID = null;\n    }\n    if (!sID) {\n      _s._wD(fN + 'Muting all sounds');\n      for (i = _s.soundIDs.length; i--;) {\n        _s.sounds[_s.soundIDs[i]].mute();\n      }\n      _s.muted = true;\n    } else {\n      if (!_idCheck(sID)) {\n        return false;\n      }\n      _s._wD(fN + 'Muting \"' + sID + '\"');\n      return _s.sounds[sID].mute();\n    }\n    return true;\n  };\n\n  this.muteAll = function () {\n    _s.mute();\n  };\n\n  this.unmute = function (sID) {\n    var fN = _sm + '.unmute(): ',\n        i;\n    if (typeof sID !== 'string') {\n      sID = null;\n    }\n    if (!sID) {\n      _s._wD(fN + 'Unmuting all sounds');\n      for (i = _s.soundIDs.length; i--;) {\n        _s.sounds[_s.soundIDs[i]].unmute();\n      }\n      _s.muted = false;\n    } else {\n      if (!_idCheck(sID)) {\n        return false;\n      }\n      _s._wD(fN + 'Unmuting \"' + sID + '\"');\n      return _s.sounds[sID].unmute();\n    }\n    return true;\n  };\n\n  this.unmuteAll = function () {\n    _s.unmute();\n  };\n\n  this.toggleMute = function (sID) {\n    if (!_idCheck(sID)) {\n      return false;\n    }\n    return _s.sounds[sID].toggleMute();\n  };\n\n  this.getMemoryUse = function () {\n    // flash-only\n    var ram = 0;\n    if (_s.o && _fV !== 8) {\n      ram = parseInt(_s.o._getMemoryUse(), 10);\n    }\n    return ram;\n  };\n\n  this.disable = function (bNoDisable) {\n    // destroy all functions\n    var i;\n    if (typeof bNoDisable === 'undefined') {\n      bNoDisable = false;\n    }\n    if (_disabled) {\n      return false;\n    }\n    _disabled = true;\n    _wDS('shutdown', 1);\n    for (i = _s.soundIDs.length; i--;) {\n      _disableObject(_s.sounds[_s.soundIDs[i]]);\n    }\n    _initComplete(bNoDisable);\n    // fire \"complete\", despite fail\n    _event.remove(_win, 'load', _initUserOnload2);\n    return true;\n  };\n\n  this.canPlayMIME = function (sMIME) {\n    var result;\n    if (_s.hasHTML5) {\n      result = _html5CanPlay({ type: sMIME });\n    }\n    if (!_needsFlash || result) {\n      // no flash, or OK\n      return result;\n    } else {\n      return sMIME ? sMIME.match(_s.mimePattern) ? true : false : null;\n    }\n  };\n\n  this.canPlayURL = function (sURL) {\n    var result;\n    if (_s.hasHTML5) {\n      result = _html5CanPlay({ url: sURL });\n    }\n    if (!_needsFlash || result) {\n      // no flash, or OK\n      return result;\n    } else {\n      return sURL ? sURL.match(_s.filePattern) ? true : false : null;\n    }\n  };\n\n  this.canPlayLink = function (oLink) {\n    if (typeof oLink.type !== 'undefined' && oLink.type) {\n      if (_s.canPlayMIME(oLink.type)) {\n        return true;\n      }\n    }\n    return _s.canPlayURL(oLink.href);\n  };\n\n  this.getSoundById = function (sID, suppressDebug) {\n    if (!sID) {\n      throw new Error(_sm + '.getSoundById(): sID is null/undefined');\n    }\n    var result = _s.sounds[sID];\n    if (!result && !suppressDebug) {\n      _s._wD('\"' + sID + '\" is an invalid sound ID.', 2);\n    }\n    return result;\n  };\n\n  this.onready = function (oMethod, oScope) {\n    var sType = 'onready';\n    if (oMethod && oMethod instanceof Function) {\n      if (_didInit) {\n        _s._wD(_str('queue', sType));\n      }\n      if (!oScope) {\n        oScope = _win;\n      }\n      _addOnEvent(sType, oMethod, oScope);\n      _processOnEvents();\n      return true;\n    } else {\n      throw _str('needFunction', sType);\n    }\n  };\n\n  this.ontimeout = function (oMethod, oScope) {\n    var sType = 'ontimeout';\n    if (oMethod && oMethod instanceof Function) {\n      if (_didInit) {\n        _s._wD(_str('queue', sType));\n      }\n      if (!oScope) {\n        oScope = _win;\n      }\n      _addOnEvent(sType, oMethod, oScope);\n      _processOnEvents({ type: sType });\n      return true;\n    } else {\n      throw _str('needFunction', sType);\n    }\n  };\n\n  this._writeDebug = function (sText, sType, bTimestamp) {\n    // pseudo-private console.log()-style output\n    // <d>\n    var sDID = 'soundmanager-debug',\n        o,\n        oItem,\n        sMethod;\n    if (!_s.debugMode) {\n      return false;\n    }\n    if (typeof bTimestamp !== 'undefined' && bTimestamp) {\n      sText = sText + ' | ' + new Date().getTime();\n    }\n    if (_hasConsole && _s.useConsole) {\n      sMethod = _debugLevels[sType];\n      if (typeof console[sMethod] !== 'undefined') {\n        console[sMethod](sText);\n      } else {\n        console.log(sText);\n      }\n      if (_s.useConsoleOnly) {\n        return true;\n      }\n    }\n    try {\n      o = _id(sDID);\n      if (!o) {\n        return false;\n      }\n      oItem = _doc.createElement('div');\n      if (++_wdCount % 2 === 0) {\n        oItem.className = 'sm2-alt';\n      }\n      if (typeof sType === 'undefined') {\n        sType = 0;\n      } else {\n        sType = parseInt(sType, 10);\n      }\n      oItem.appendChild(_doc.createTextNode(sText));\n      if (sType) {\n        if (sType >= 2) {\n          oItem.style.fontWeight = 'bold';\n        }\n        if (sType === 3) {\n          oItem.style.color = '#ff3333';\n        }\n      }\n      // o.appendChild(oItem); // top-to-bottom\n      o.insertBefore(oItem, o.firstChild);\n    } // bottom-to-top\n    catch (e) {}\n    o = null;\n    // </d>\n    return true;\n  };\n  this._wD = this._writeDebug;\n\n  // alias\n  this._debug = function () {\n    // <d>\n    var i, j;\n    _wDS('currentObj', 1);\n    for (i = 0, j = _s.soundIDs.length; i < j; i++) {\n      _s.sounds[_s.soundIDs[i]]._debug();\n    }\n  };\n\n  // </d>\n  this.reboot = function () {\n    // attempt to reset and init SM2\n    _s._wD(_sm + '.reboot()');\n    if (_s.soundIDs.length) {\n      _s._wD('Destroying ' + _s.soundIDs.length + ' SMSound objects...');\n    }\n    var i, j;\n    for (i = _s.soundIDs.length; i--;) {\n      _s.sounds[_s.soundIDs[i]].destruct();\n    }\n    // trash ze flash\n    try {\n      if (_isIE) {\n        _oRemovedHTML = _s.o.innerHTML;\n      }\n      _oRemoved = _s.o.parentNode.removeChild(_s.o);\n      _s._wD('Flash movie removed.');\n    } catch (e) {\n      // uh-oh.\n      _wDS('badRemove', 2);\n    }\n    // actually, force recreate of movie.\n    _oRemovedHTML = _oRemoved = _needsFlash = null;\n    _s.enabled = _didDCLoaded = _didInit = _waitingForEI = _initPending = _didAppend = _appendSuccess = _disabled = _s.swfLoaded = false;\n    _s.soundIDs = _s.sounds = [];\n    _s.o = null;\n    for (i in _on_queue) {\n      if (_on_queue.hasOwnProperty(i)) {\n        for (j = _on_queue[i].length; j--;) {\n          _on_queue[i][j].fired = false;\n        }\n      }\n    }\n    _s._wD(_sm + ': Rebooting...');\n    _win.setTimeout(_s.beginDelayedInit, 20);\n  };\n\n  this.getMoviePercent = function () {\n    return _s.o && typeof _s.o.PercentLoaded !== 'undefined' ? _s.o.PercentLoaded() : null;\n  };\n\n  this.beginDelayedInit = function () {\n    _windowLoaded = true;\n    _dcLoaded2();\n    setTimeout(function () {\n      if (_initPending) {\n        return false;\n      }\n      _createMovie();\n      _initMovie();\n      _initPending = true;\n      return true;\n    }, 20);\n    _delayWaitForEI();\n  };\n\n  this.destruct = function () {\n    _s._wD(_sm + '.destruct()');\n    _s.disable(true);\n  };\n\n  /*\n   * internal HTML5 event handling\n   */\n  function _html5_event(oFn) {\n    // wrap html5 event handlers so we don't call them on destroyed sounds\n    return function (e) {\n      if (!this._t || !this._t._a) {\n        if (this._t && this._t.sID) {\n          _s._wD(_h5 + 'ignoring ' + e.type + ': ' + this._t.sID);\n        } else {\n          _s._wD(_h5 + 'ignoring ' + e.type);\n        }\n        return null;\n      } else {\n        return oFn.call(this, e);\n      }\n    };\n  }\n\n  _html5_events = {\n    // HTML5 event-name-to-handler map\n    abort: _html5_event(function (e) {\n      _s._wD(_h5 + 'abort: ' + this._t.sID);\n    }),\n    // enough has loaded to play\n    canplay: _html5_event(function (e) {\n      if (this._t._html5_canplay) {\n        // this event has already fired. ignore.\n        return true;\n      }\n      this._t._html5_canplay = true;\n      _s._wD(_h5 + 'canplay: ' + this._t.sID + ', ' + this._t.url);\n      this._t._onbufferchange(0);\n      var position1K = !isNaN(this._t.position) ? this._t.position / 1000 : null;\n      // set the position if position was set before the sound loaded\n      if (this._t.position && this.currentTime !== position1K) {\n        _s._wD(_h5 + 'canplay: setting position to ' + position1K);\n        try {\n          this.currentTime = position1K;\n        } catch (ee) {\n          _s._wD(_h5 + 'setting position failed: ' + ee.message, 2);\n        }\n      }\n    }),\n    load: _html5_event(function (e) {\n      if (!this._t.loaded) {\n        this._t._onbufferchange(0);\n        // should be 1, and the same\n        this._t._whileloading(this._t.bytesTotal, this._t.bytesTotal, this._t._get_html5_duration());\n        this._t._onload(true);\n      }\n    }),\n    emptied: _html5_event(function (e) {\n      _s._wD(_h5 + 'emptied: ' + this._t.sID);\n    }),\n    ended: _html5_event(function (e) {\n      _s._wD(_h5 + 'ended: ' + this._t.sID);\n      this._t._onfinish();\n    }),\n    error: _html5_event(function (e) {\n      _s._wD(_h5 + 'error: ' + this.error.code);\n      // call load with error state?\n      this._t._onload(false);\n    }),\n    loadeddata: _html5_event(function (e) {\n      var t = this._t,\n          bytesTotal = t.bytesTotal || 1;\n      // at least 1 byte, so math works\n      _s._wD(_h5 + 'loadeddata: ' + this._t.sID);\n      if (!t._loaded && !_isSafari) {\n        // safari seems to nicely report progress events, eventually totalling 100%\n        t.duration = t._get_html5_duration();\n        // fire whileloading() with 100% values\n        t._whileloading(bytesTotal, bytesTotal, t._get_html5_duration());\n        t._onload(true);\n      }\n    }),\n    loadedmetadata: _html5_event(function (e) {\n      _s._wD(_h5 + 'loadedmetadata: ' + this._t.sID);\n    }),\n    loadstart: _html5_event(function (e) {\n      _s._wD(_h5 + 'loadstart: ' + this._t.sID);\n      // assume buffering at first\n      this._t._onbufferchange(1);\n    }),\n    play: _html5_event(function (e) {\n      _s._wD(_h5 + 'play: ' + this._t.sID + ', ' + this._t.url);\n      // once play starts, no buffering\n      this._t._onbufferchange(0);\n    }),\n    // TODO: verify if this is actually implemented anywhere yet.\n    playing: _html5_event(function (e) {\n      _s._wD(_h5 + 'playing: ' + this._t.sID + ', ' + this._t.url);\n      // once play starts, no buffering\n      this._t._onbufferchange(0);\n    }),\n    progress: _html5_event(function (e) {\n      if (this._t.loaded) {\n        return false;\n      }\n\n      var i,\n          j,\n          str,\n          buffered = 0,\n          isProgress = e.type === 'progress',\n          ranges = e.target.buffered,\n          loaded = e.loaded || 0,\n\n      // firefox 3.6 implements e.loaded/total (bytes)\n      total = e.total || 1;\n\n      if (ranges && ranges.length) {\n        // if loaded is 0, try TimeRanges implementation as % of load\n        // https://developer.mozilla.org/en/DOM/TimeRanges\n        for (i = ranges.length; i--;) {\n          buffered = ranges.end(i) - ranges.start(i);\n        }\n\n        // linear case, buffer sum; does not account for seeking and HTTP partials / byte ranges\n        loaded = buffered / e.target.duration;\n\n        // <d>\n        if (isProgress && ranges.length > 1) {\n          str = [];\n          j = ranges.length;\n          for (i = 0; i < j; i++) {\n            str.push(e.target.buffered.start(i) + '-' + e.target.buffered.end(i));\n          }\n          _s._wD(_h5 + 'progress: timeRanges: ' + str.join(', '));\n        }\n\n        // </d>\n        if (isProgress && !isNaN(loaded)) {\n          _s._wD(_h5 + 'progress: ' + this._t.sID + ': ' + Math.floor(loaded * 100) + '% loaded');\n        }\n      }\n\n      if (!isNaN(loaded)) {\n        this._t._onbufferchange(0);\n        // if progress, likely not buffering\n        this._t._whileloading(loaded, total, this._t._get_html5_duration());\n\n        if (loaded && total && loaded === total) {\n          // in case \"onload\" doesn't fire (eg. gecko 1.9.2)\n          _html5_events.load.call(this, e);\n        }\n      }\n    }),\n    ratechange: _html5_event(function (e) {\n      _s._wD(_h5 + 'ratechange: ' + this._t.sID);\n    }),\n    suspend: _html5_event(function (e) {\n      // download paused/stopped, may have finished (eg. onload)\n      _s._wD(_h5 + 'suspend: ' + this._t.sID);\n      _html5_events.progress.call(this, e);\n    }),\n    stalled: _html5_event(function (e) {\n      _s._wD(_h5 + 'stalled: ' + this._t.sID);\n    }),\n    timeupdate: _html5_event(function (e) {\n      this._t._onTimer();\n    }),\n    waiting: _html5_event(function (e) {\n      // see also: seeking\n      _s._wD(_h5 + 'waiting: ' + this._t.sID);\n      // playback faster than download rate, etc.\n      this._t._onbufferchange(1);\n    })\n  };\n\n  /*\n   * SMSound() (sound object) instance\n   */\n  SMSound = function SMSound(oOptions) {\n    var _t = this,\n        _resetProperties,\n        _stop_html5_timer,\n        _start_html5_timer;\n    this.sID = oOptions.id;\n    this.url = oOptions.url;\n    this.options = _mixin(oOptions);\n    this.instanceOptions = this.options;\n    // per-play-instance-specific options\n    this._iO = this.instanceOptions;\n    // short alias\n    // assign property defaults\n    this.pan = this.options.pan;\n    this.volume = this.options.volume;\n    this._lastURL = null;\n    this.isHTML5 = false;\n    this._a = null;\n\n    // --- public methods ---\n    this.id3 = {};\n\n    this._debug = function () {\n      // <d>\n      // pseudo-private console.log()-style output\n      if (_s.debugMode) {\n        var stuff = null,\n            msg = [],\n            sF,\n            sfBracket,\n            maxLength = 64;\n        for (stuff in _t.options) {\n          if (_t.options[stuff] !== null) {\n            if (_t.options[stuff] instanceof Function) {\n              // handle functions specially\n              sF = _t.options[stuff].toString();\n              sF = sF.replace(/\\s\\s+/g, ' ');\n              // normalize spaces\n              sfBracket = sF.indexOf('{');\n              msg.push(' ' + stuff + ': {' + sF.substr(sfBracket + 1, Math.min(Math.max(sF.indexOf('\\n') - 1, maxLength), maxLength)).replace(/\\n/g, '') + '... }');\n            } else {\n              msg.push(' ' + stuff + ': ' + _t.options[stuff]);\n            }\n          }\n        }\n        _s._wD('SMSound() merged options: {\\n' + msg.join(', \\n') + '\\n}');\n      }\n    };\n\n    // </d>\n    // <d>\n    this._debug();\n\n    // </d>\n    this.load = function (oOptions) {\n      var oS = null;\n      if (typeof oOptions !== 'undefined') {\n        _t._iO = _mixin(oOptions, _t.options);\n        _t.instanceOptions = _t._iO;\n      } else {\n        oOptions = _t.options;\n        _t._iO = oOptions;\n        _t.instanceOptions = _t._iO;\n        if (_t._lastURL && _t._lastURL !== _t.url) {\n          _wDS('manURL');\n          _t._iO.url = _t.url;\n          _t.url = null;\n        }\n      }\n      if (!_t._iO.url) {\n        _t._iO.url = _t.url;\n      }\n      _s._wD('SMSound.load(): ' + _t._iO.url, 1);\n      if (_t._iO.url === _t.url && _t.readyState !== 0 && _t.readyState !== 2) {\n        _wDS('onURL', 1);\n        return _t;\n      }\n      _t._lastURL = _t.url;\n      _t.loaded = false;\n      _t.readyState = 1;\n      _t.playState = 0;\n      if (_html5OK(_t._iO)) {\n        oS = _t._setup_html5(_t._iO);\n        if (!oS._called_load) {\n          _s._wD(_h5 + 'load: ' + _t.sID);\n          _t._html5_canplay = false;\n          oS.load();\n          oS._called_load = true;\n          if (_t._iO.autoPlay) {\n            _t.play();\n          }\n        } else {\n          _s._wD(_h5 + 'ignoring request to load again: ' + _t.sID);\n        }\n      } else {\n        try {\n          _t.isHTML5 = false;\n          _t._iO = _policyFix(_loopFix(_t._iO));\n          if (_fV === 8) {\n            _s.o._load(_t.sID, _t._iO.url, _t._iO.stream, _t._iO.autoPlay, _t._iO.whileloading ? 1 : 0, _t._iO.loops || 1, _t._iO.usePolicyFile);\n          } else {\n            _s.o._load(_t.sID, _t._iO.url, _t._iO.stream ? true : false, _t._iO.autoPlay ? true : false, _t._iO.loops || 1, _t._iO.autoLoad ? true : false, _t._iO.usePolicyFile);\n          }\n        } catch (e) {\n          _wDS('smError', 2);\n          _debugTS('onload', false);\n          _catchError({\n            type: 'SMSOUND_LOAD_JS_EXCEPTION',\n            fatal: true\n          });\n        }\n      }\n      return _t;\n    };\n\n    this.unload = function () {\n      // Flash 8/AS2 can't \"close\" a stream - fake it by loading an empty MP3\n      // Flash 9/AS3: Close stream, preventing further load\n      if (_t.readyState !== 0) {\n        _s._wD('SMSound.unload(): \"' + _t.sID + '\"');\n        if (!_t.isHTML5) {\n          if (_fV === 8) {\n            _s.o._unload(_t.sID, _s.nullURL);\n          } else {\n            _s.o._unload(_t.sID);\n          }\n        } else {\n          _stop_html5_timer();\n          if (_t._a) {\n            // abort()-style method here, stop loading? (doesn't exist?)\n            _t._a.pause();\n            _t._a.src = '';\n          }\n        }\n        // https://developer.mozilla.org/En/Using_audio_and_video_in_Firefox#Stopping_the_download_of_media\n        // reset load/status flags\n        _resetProperties();\n      }\n      return _t;\n    };\n\n    this.destruct = function (_bFromSM) {\n      _s._wD('SMSound.destruct(): \"' + _t.sID + '\"');\n      if (!_t.isHTML5) {\n        // kill sound within Flash\n        // Disable the onfailure handler\n        _t._iO.onfailure = null;\n        _s.o._destroySound(_t.sID);\n      } else {\n        _stop_html5_timer();\n        if (_t._a) {\n          // abort()-style method here, stop loading? (doesn't exist?)\n          _t._a.pause();\n          _t._a.src = '';\n          // https://developer.mozilla.org/En/Using_audio_and_video_in_Firefox#Stopping_the_download_of_media\n          if (!_useGlobalHTML5Audio) {\n            _t._remove_html5_events();\n          }\n          _t._a._t = null;\n          // break potential circular reference\n          _t._a = null;\n        }\n      }\n      if (!_bFromSM) {\n        _s.destroySound(_t.sID, true);\n      }\n    };\n\n    // ensure deletion from controller\n    this.play = function (oOptions, _updatePlayState) {\n      var fN = 'SMSound.play(): ',\n          allowMulti,\n          a;\n      _updatePlayState = _updatePlayState === undefined ? true : _updatePlayState;\n      // default to true\n      if (!oOptions) {\n        oOptions = {};\n      }\n      _t._iO = _mixin(oOptions, _t._iO);\n      _t._iO = _mixin(_t._iO, _t.options);\n      _t.instanceOptions = _t._iO;\n      if (_t._iO.serverURL && !_t.connected) {\n        if (!_t.getAutoPlay()) {\n          _s._wD(fN + ' Netstream not connected yet - setting autoPlay');\n          _t.setAutoPlay(true);\n        }\n        return _t;\n      }\n      // play will be called in _onconnect()\n      if (_html5OK(_t._iO)) {\n        _t._setup_html5(_t._iO);\n        _start_html5_timer();\n      }\n      if (_t.playState === 1 && !_t.paused) {\n        allowMulti = _t._iO.multiShot;\n        if (!allowMulti) {\n          _s._wD(fN + '\"' + _t.sID + '\" already playing (one-shot)', 1);\n          return _t;\n        } else {\n          _s._wD(fN + '\"' + _t.sID + '\" already playing (multi-shot)', 1);\n        }\n      }\n      if (!_t.loaded) {\n        if (_t.readyState === 0) {\n          _s._wD(fN + 'Attempting to load \"' + _t.sID + '\"', 1);\n          // try to get this sound playing ASAP\n          if (!_t.isHTML5) {\n            _t._iO.autoPlay = true;\n          }\n          // assign directly because setAutoPlay() increments the instanceCount\n          _t.load(_t._iO);\n        } else if (_t.readyState === 2) {\n          _s._wD(fN + 'Could not load \"' + _t.sID + '\" - exiting', 2);\n          return _t;\n        } else {\n          _s._wD(fN + '\"' + _t.sID + '\" is loading - attempting to play..', 1);\n        }\n      } else {\n        _s._wD(fN + '\"' + _t.sID + '\"');\n      }\n      if (!_t.isHTML5 && _fV === 9 && _t.position > 0 && _t.position === _t.duration) {\n        // flash 9 needs a position reset if play() is called while at the end of a sound.\n        _s._wD(fN + '\"' + _t.sID + '\": Sound at end, resetting to position:0');\n        _t._iO.position = 0;\n      }\n      /*\n       * Streams will pause when their buffer is full if they are being loaded.\n       * In this case paused is true, but the song hasn't started playing yet.\n       * If we just call resume() the onplay() callback will never be called.\n       * So only call resume() if the position is > 0.\n       * Another reason is because options like volume won't have been applied yet.\n       */\n      if (_t.paused && _t.position && _t.position > 0) {\n        // https://gist.github.com/37b17df75cc4d7a90bf6\n        _s._wD(fN + '\"' + _t.sID + '\" is resuming from paused state', 1);\n        _t.resume();\n      } else {\n        _s._wD(fN + '\"' + _t.sID + '\" is starting to play');\n        _t.playState = 1;\n        _t.paused = false;\n        if (!_t.instanceCount || _t._iO.multiShotEvents || !_t.isHTML5 && _fV > 8 && !_t.getAutoPlay()) {\n          _t.instanceCount++;\n        }\n        _t.position = typeof _t._iO.position !== 'undefined' && !isNaN(_t._iO.position) ? _t._iO.position : 0;\n        if (!_t.isHTML5) {\n          _t._iO = _policyFix(_loopFix(_t._iO));\n        }\n        if (_t._iO.onplay && _updatePlayState) {\n          _t._iO.onplay.apply(_t);\n          _t._onplay_called = true;\n        }\n        _t.setVolume(_t._iO.volume, true);\n        _t.setPan(_t._iO.pan, true);\n        if (!_t.isHTML5) {\n          _s.o._start(_t.sID, _t._iO.loops || 1, _fV === 9 ? _t._iO.position : _t._iO.position / 1000);\n        } else {\n          _start_html5_timer();\n          a = _t._setup_html5();\n          _t.setPosition(_t._iO.position);\n          a.play();\n        }\n      }\n      return _t;\n    };\n\n    this.start = this.play;\n\n    // just for convenience\n    this.stop = function (bAll) {\n      if (_t.playState === 1) {\n        _t._onbufferchange(0);\n        _t.resetOnPosition(0);\n        if (!_t.isHTML5) {\n          _t.playState = 0;\n        }\n        _t.paused = false;\n        if (_t._iO.onstop) {\n          _t._iO.onstop.apply(_t);\n        }\n        if (!_t.isHTML5) {\n          _s.o._stop(_t.sID, bAll);\n          // hack for netStream: just unload\n          if (_t._iO.serverURL) {\n            _t.unload();\n          }\n        } else {\n          if (_t._a) {\n            _t.setPosition(0);\n            // act like Flash, though\n            _t._a.pause();\n            // html5 has no stop()\n            _t.playState = 0;\n            _t._onTimer();\n            // and update UI\n            _stop_html5_timer();\n            _t.unload();\n          }\n        }\n        _t.instanceCount = 0;\n        _t._iO = {};\n      }\n      return _t;\n    };\n\n    this.setAutoPlay = function (autoPlay) {\n      _s._wD('sound ' + _t.sID + ' turned autoplay ' + (autoPlay ? 'on' : 'off'));\n      _t._iO.autoPlay = autoPlay;\n      if (!_t.isHTML5) {\n        _s.o._setAutoPlay(_t.sID, autoPlay);\n        if (autoPlay) {\n          // only increment the instanceCount if the sound isn't loaded (TODO: verify RTMP)\n          if (!_t.instanceCount && _t.readyState === 1) {\n            _t.instanceCount++;\n            _s._wD('sound ' + _t.sID + ' incremented instance count to ' + _t.instanceCount);\n          }\n        }\n      }\n    };\n\n    this.getAutoPlay = function () {\n      return _t._iO.autoPlay;\n    };\n\n    this.setPosition = function (nMsecOffset) {\n      if (nMsecOffset === undefined) {\n        nMsecOffset = 0;\n      }\n      // Use the duration from the instance options, if we don't have a track duration yet.\n      var original_pos,\n          position,\n          position1K,\n          offset = _t.isHTML5 ? Math.max(nMsecOffset, 0) : Math.min(_t.duration || _t._iO.duration, Math.max(nMsecOffset, 0));\n      // position >= 0 and <= current available (loaded) duration\n      original_pos = _t.position;\n      _t.position = offset;\n      position1K = _t.position / 1000;\n      _t.resetOnPosition(_t.position);\n      _t._iO.position = offset;\n      if (!_t.isHTML5) {\n        position = _fV === 9 ? _t.position : position1K;\n        if (_t.readyState && _t.readyState !== 2) {\n          _s.o._setPosition(_t.sID, position, _t.paused || !_t.playState);\n        }\n      } else // if paused or not playing, will not resume (by playing)\n        if (_t._a) {\n          // Set the position in the canplay handler if the sound is not ready yet\n          if (_t._html5_canplay) {\n            if (_t._a.currentTime !== position1K) {\n              /*\n               * DOM/JS errors/exceptions to watch out for:\n               * if seek is beyond (loaded?) position, \"DOM exception 11\"\n               * \"INDEX_SIZE_ERR\": DOM exception 1\n               */\n              _s._wD('setPosition(' + position1K + '): setting position');\n              try {\n                _t._a.currentTime = position1K;\n                if (_t.playState === 0 || _t.paused) {\n                  // allow seek without auto-play/resume\n                  _t._a.pause();\n                }\n              } catch (e) {\n                _s._wD('setPosition(' + position1K + '): setting position failed: ' + e.message, 2);\n              }\n            }\n          } else {\n            _s._wD('setPosition(' + position1K + '): delaying, sound not ready');\n          }\n        }\n      if (_t.isHTML5) {\n        if (_t.paused) {\n          // if paused, refresh UI right away\n          _t._onTimer(true);\n        }\n      }\n      // force update\n      return _t;\n    };\n\n    this.pause = function (bCallFlash) {\n      if (_t.paused || _t.playState === 0 && _t.readyState !== 1) {\n        return _t;\n      }\n      _s._wD('SMSound.pause()');\n      _t.paused = true;\n      if (!_t.isHTML5) {\n        if (bCallFlash || bCallFlash === undefined) {\n          _s.o._pause(_t.sID);\n        }\n      } else {\n        _t._setup_html5().pause();\n        _stop_html5_timer();\n      }\n      if (_t._iO.onpause) {\n        _t._iO.onpause.apply(_t);\n      }\n      return _t;\n    };\n\n    /*\n     * When auto-loaded streams pause on buffer full they have a playState of 0.\n     * We need to make sure that the playState is set to 1 when these streams \"resume\".\n     * When a paused stream is resumed, we need to trigger the onplay() callback if it\n     * hasn't been called already. In this case since the sound is being played for the\n     * first time, I think it's more appropriate to call onplay() rather than onresume().\n     */\n    this.resume = function () {\n      if (!_t.paused) {\n        return _t;\n      }\n      _s._wD('SMSound.resume()');\n      _t.paused = false;\n      _t.playState = 1;\n      if (!_t.isHTML5) {\n        if (_t._iO.isMovieStar) {\n          // Bizarre Webkit bug (Chrome reported via 8tracks.com dudes): AAC content paused for 30+ seconds(?) will not resume without a reposition.\n          _t.setPosition(_t.position);\n        }\n        _s.o._pause(_t.sID);\n      } else\n        // flash method is toggle-based (pause/resume)\n        {\n          _t._setup_html5().play();\n          _start_html5_timer();\n        }\n      if (!_t._onplay_called && _t._iO.onplay) {\n        _t._iO.onplay.apply(_t);\n        _t._onplay_called = true;\n      } else if (_t._iO.onresume) {\n        _t._iO.onresume.apply(_t);\n      }\n      return _t;\n    };\n\n    this.togglePause = function () {\n      _s._wD('SMSound.togglePause()');\n      if (_t.playState === 0) {\n        _t.play({ position: _fV === 9 && !_t.isHTML5 ? _t.position : _t.position / 1000 });\n        return _t;\n      }\n      if (_t.paused) {\n        _t.resume();\n      } else {\n        _t.pause();\n      }\n      return _t;\n    };\n\n    this.setPan = function (nPan, bInstanceOnly) {\n      if (typeof nPan === 'undefined') {\n        nPan = 0;\n      }\n      if (typeof bInstanceOnly === 'undefined') {\n        bInstanceOnly = false;\n      }\n      if (!_t.isHTML5) {\n        _s.o._setPan(_t.sID, nPan);\n      }\n      // else { no HTML5 pan? }\n      _t._iO.pan = nPan;\n      if (!bInstanceOnly) {\n        _t.pan = nPan;\n        _t.options.pan = nPan;\n      }\n      return _t;\n    };\n\n    this.setVolume = function (nVol, bInstanceOnly) {\n      if (typeof nVol === 'undefined') {\n        nVol = 100;\n      }\n      if (typeof bInstanceOnly === 'undefined') {\n        bInstanceOnly = false;\n      }\n      if (!_t.isHTML5) {\n        _s.o._setVolume(_t.sID, _s.muted && !_t.muted || _t.muted ? 0 : nVol);\n      } else if (_t._a) {\n        _t._a.volume = Math.max(0, Math.min(1, nVol / 100));\n      }\n      // valid range: 0-1\n      _t._iO.volume = nVol;\n      if (!bInstanceOnly) {\n        _t.volume = nVol;\n        _t.options.volume = nVol;\n      }\n      return _t;\n    };\n\n    this.mute = function () {\n      _t.muted = true;\n      if (!_t.isHTML5) {\n        _s.o._setVolume(_t.sID, 0);\n      } else if (_t._a) {\n        _t._a.muted = true;\n      }\n      return _t;\n    };\n\n    this.unmute = function () {\n      _t.muted = false;\n      var hasIO = typeof _t._iO.volume !== 'undefined';\n      if (!_t.isHTML5) {\n        _s.o._setVolume(_t.sID, hasIO ? _t._iO.volume : _t.options.volume);\n      } else if (_t._a) {\n        _t._a.muted = false;\n      }\n      return _t;\n    };\n\n    this.toggleMute = function () {\n      return _t.muted ? _t.unmute() : _t.mute();\n    };\n\n    this.onposition = function (nPosition, oMethod, oScope) {\n      // TODO: allow for ranges, too? eg. (nPosition instanceof Array)\n      _t._onPositionItems.push({\n        position: nPosition,\n        method: oMethod,\n        scope: typeof oScope !== 'undefined' ? oScope : _t,\n        fired: false\n      });\n      return _t;\n    };\n\n    this.processOnPosition = function () {\n      var i,\n          item,\n          j = _t._onPositionItems.length;\n      if (!j || !_t.playState || _t._onPositionFired >= j) {\n        return false;\n      }\n      for (i = j; i--;) {\n        item = _t._onPositionItems[i];\n        if (!item.fired && _t.position >= item.position) {\n          item.method.apply(item.scope, [item.position]);\n          item.fired = true;\n          _s._onPositionFired++;\n        }\n      }\n      return true;\n    };\n\n    this.resetOnPosition = function (nPosition) {\n      // reset \"fired\" for items interested in this position\n      var i,\n          item,\n          j = _t._onPositionItems.length;\n      if (!j) {\n        return false;\n      }\n      for (i = j; i--;) {\n        item = _t._onPositionItems[i];\n        if (item.fired && nPosition <= item.position) {\n          item.fired = false;\n          _s._onPositionFired--;\n        }\n      }\n      return true;\n    };\n\n    /*\n     * private internals\n     */\n    _start_html5_timer = function _start_html5_timer() {\n      if (_t.isHTML5) {\n        _startTimer(_t);\n      }\n    };\n\n    _stop_html5_timer = function _stop_html5_timer() {\n      if (_t.isHTML5) {\n        _stopTimer(_t);\n      }\n    };\n\n    _resetProperties = function _resetProperties() {\n      _t._onPositionItems = [];\n      _t._onPositionFired = 0;\n      _t._hasTimer = null;\n      _t._onplay_called = false;\n      _t._a = null;\n      _t._html5_canplay = false;\n      _t.bytesLoaded = null;\n      _t.bytesTotal = null;\n      _t.position = null;\n      _t.duration = _t._iO && _t._iO.duration ? _t._iO.duration : null;\n      _t.durationEstimate = null;\n      _t.failures = 0;\n      _t.loaded = false;\n      _t.playState = 0;\n      _t.paused = false;\n      _t.readyState = 0;\n      // 0 = uninitialised, 1 = loading, 2 = failed/error, 3 = loaded/success\n      _t.muted = false;\n      _t.didBeforeFinish = false;\n      _t.didJustBeforeFinish = false;\n      _t.isBuffering = false;\n      _t.instanceOptions = {};\n      _t.instanceCount = 0;\n      _t.peakData = {\n        left: 0,\n        right: 0\n      };\n      _t.waveformData = {\n        left: [],\n        right: []\n      };\n      _t.eqData = [];\n      // legacy: 1D array\n      _t.eqData.left = [];\n      _t.eqData.right = [];\n    };\n\n    _resetProperties();\n\n    /*\n     * pseudo-private SMSound internals\n     */\n    this._onTimer = function (bForce) {\n      // HTML5-only _whileplaying() etc.\n      var time,\n          x = {};\n      if (_t._hasTimer || bForce) {\n        if (_t._a && (bForce || (_t.playState > 0 || _t.readyState === 1) && !_t.paused)) {\n          // TODO: May not need to track readyState (1 = loading)\n          _t.duration = _t._get_html5_duration();\n          _t.durationEstimate = _t.duration;\n          time = _t._a.currentTime ? _t._a.currentTime * 1000 : 0;\n          _t._whileplaying(time, x, x, x, x);\n          return true;\n        } else {\n          _s._wD('_onTimer: Warn for \"' + _t.sID + '\": ' + (!_t._a ? 'Could not find element. ' : '') + (_t.playState === 0 ? 'playState bad, 0?' : 'playState = ' + _t.playState + ', OK'));\n          return false;\n        }\n      }\n    };\n\n    this._get_html5_duration = function () {\n      var d = _t._a ? _t._a.duration * 1000 : _t._iO ? _t._iO.duration : undefined,\n          result = d && !isNaN(d) && d !== Infinity ? d : _t._iO ? _t._iO.duration : null;\n      return result;\n    };\n\n    this._setup_html5 = function (oOptions) {\n      var _iO = _mixin(_t._iO, oOptions),\n          d = decodeURI,\n          _a = _useGlobalHTML5Audio ? _s._global_a : _t._a,\n          _dURL = d(_iO.url),\n          _oldIO = _a && _a._t ? _a._t.instanceOptions : null;\n      if (_a) {\n        if (_a._t && _oldIO.url === _iO.url && (!_t._lastURL || _t._lastURL === _oldIO.url)) {\n          return _a;\n        }\n        // same url, ignore request\n        _s._wD('setting new URL on existing object: ' + _dURL + (_t._lastURL ? ', old URL: ' + _t._lastURL : ''));\n        /*\n         * \"First things first, I, Poppa..\" (reset the previous state of the old sound, if playing)\n         * Fixes case with devices that can only play one sound at a time\n         * Otherwise, other sounds in mid-play will be terminated without warning and in a stuck state\n         */\n        if (_useGlobalHTML5Audio && _a._t && _a._t.playState && _iO.url !== _oldIO.url) {\n          _a._t.stop();\n        }\n        _resetProperties();\n        // new URL, so reset load/playstate and so on\n        _a.src = _iO.url;\n        _t.url = _iO.url;\n        _t._lastURL = _iO.url;\n        _a._called_load = false;\n      } else {\n        _s._wD('creating HTML5 Audio() element with URL: ' + _dURL);\n        _a = new Audio(_iO.url);\n        _a._called_load = false;\n        if (_useGlobalHTML5Audio) {\n          _s._global_a = _a;\n        }\n      }\n      _t.isHTML5 = true;\n      _t._a = _a;\n      // store a ref on the track\n      _a._t = _t;\n      // store a ref on the audio\n      _t._add_html5_events();\n      _a.loop = _iO.loops > 1 ? 'loop' : '';\n      if (_iO.autoLoad || _iO.autoPlay) {\n        _a.autobuffer = 'auto';\n        // early HTML5 implementation (non-standard)\n        _a.preload = 'auto';\n        // standard\n        _t.load();\n        _a._called_load = true;\n      } else {\n        _a.autobuffer = false;\n        // early HTML5 implementation (non-standard)\n        _a.preload = 'none';\n      }\n      // standard\n      _a.loop = _iO.loops > 1 ? 'loop' : '';\n      // boolean instead of \"loop\", for webkit? - spec says string. http://www.w3.org/TR/html-markup/audio.html#audio.attrs.loop\n      return _a;\n    };\n\n    this._add_html5_events = function () {\n      if (_t._a._added_events) {\n        return false;\n      }\n\n      var f;\n\n      function add(oEvt, oFn, bCapture) {\n        return _t._a ? _t._a.addEventListener(oEvt, oFn, bCapture || false) : null;\n      }\n\n      _s._wD(_h5 + 'adding event listeners: ' + _t.sID);\n      _t._a._added_events = true;\n\n      for (f in _html5_events) {\n        if (_html5_events.hasOwnProperty(f)) {\n          add(f, _html5_events[f]);\n        }\n      }\n\n      return true;\n    };\n\n    this._remove_html5_events = function () {\n      // Remove event listeners\n      var f;\n\n      function remove(oEvt, oFn, bCapture) {\n        return _t._a ? _t._a.removeEventListener(oEvt, oFn, bCapture || false) : null;\n      }\n\n      _s._wD(_h5 + 'removing event listeners: ' + _t.sID);\n      _t._a._added_events = false;\n\n      for (f in _html5_events) {\n        if (_html5_events.hasOwnProperty(f)) {\n          remove(f, _html5_events[f]);\n        }\n      }\n    };\n\n    /*\n     * pseudo-private event internals\n     */\n    this._onload = function (nSuccess) {\n      var fN = 'SMSound._onload(): ',\n          loadOK = nSuccess ? true : false;\n      _s._wD(fN + '\"' + _t.sID + '\"' + (loadOK ? ' loaded.' : ' failed to load? - ' + _t.url), loadOK ? 1 : 2);\n      // <d>\n      if (!loadOK && !_t.isHTML5) {\n        if (_s.sandbox.noRemote === true) {\n          _s._wD(fN + _str('noNet'), 1);\n        }\n        if (_s.sandbox.noLocal === true) {\n          _s._wD(fN + _str('noLocal'), 1);\n        }\n      }\n      // </d>\n      _t.loaded = loadOK;\n      _t.readyState = loadOK ? 3 : 2;\n      _t._onbufferchange(0);\n      if (_t._iO.onload) {\n        _t._iO.onload.apply(_t, [loadOK]);\n      }\n      return true;\n    };\n\n    this._onbufferchange = function (nIsBuffering) {\n      var fN = 'SMSound._onbufferchange()';\n      if (_t.playState === 0) {\n        // ignore if not playing\n        return false;\n      }\n      if (nIsBuffering && _t.isBuffering || !nIsBuffering && !_t.isBuffering) {\n        return false;\n      }\n      _t.isBuffering = nIsBuffering === 1;\n      if (_t._iO.onbufferchange) {\n        _s._wD(fN + ': ' + nIsBuffering);\n        _t._iO.onbufferchange.apply(_t);\n      }\n      return true;\n    };\n\n    /*\n     * flash-only method, should fire only once at most\n     * at this point we just recreate failed sounds rather than trying to reconnect\n     */\n    this._onfailure = function (msg, level, code) {\n      _t.failures++;\n      _s._wD('SMSound._onfailure(): \"' + _t.sID + '\" count ' + _t.failures);\n      if (_t._iO.onfailure && _t.failures === 1) {\n        _t._iO.onfailure(_t, msg, level, code);\n      } else {\n        _s._wD('SMSound._onfailure(): ignoring');\n      }\n    };\n\n    this._onbeforefinish = function () {\n      if (!_t.didBeforeFinish) {\n        _t.didBeforeFinish = true;\n        if (_t._iO.onbeforefinish) {\n          _s._wD('SMSound._onbeforefinish(): \"' + _t.sID + '\"');\n          _t._iO.onbeforefinish.apply(_t);\n        }\n      }\n    };\n\n    this._onjustbeforefinish = function (msOffset) {\n      if (!_t.didJustBeforeFinish) {\n        _t.didJustBeforeFinish = true;\n        if (_t._iO.onjustbeforefinish) {\n          _s._wD('SMSound._onjustbeforefinish(): \"' + _t.sID + '\"');\n          _t._iO.onjustbeforefinish.apply(_t);\n        }\n      }\n    };\n\n    this._onfinish = function () {\n      var _io_onfinish = _t._iO.onfinish;\n      // store local copy before it gets trashed..\n      _t._onbufferchange(0);\n      _t.resetOnPosition(0);\n      if (_t._iO.onbeforefinishcomplete) {\n        _t._iO.onbeforefinishcomplete.apply(_t);\n      }\n      // reset some state items\n      _t.didBeforeFinish = false;\n      _t.didJustBeforeFinish = false;\n      if (_t.instanceCount) {\n        _t.instanceCount--;\n        if (!_t.instanceCount) {\n          // reset instance options\n          _t.playState = 0;\n          _t.paused = false;\n          _t.instanceCount = 0;\n          _t.instanceOptions = {};\n          _t._iO = {};\n          _stop_html5_timer();\n        }\n        if (!_t.instanceCount || _t._iO.multiShotEvents) {\n          // fire onfinish for last, or every instance\n          if (_io_onfinish) {\n            _s._wD('SMSound._onfinish(): \"' + _t.sID + '\"');\n            _io_onfinish.apply(_t);\n          }\n        }\n      }\n    };\n\n    this._whileloading = function (nBytesLoaded, nBytesTotal, nDuration, nBufferLength) {\n      _t.bytesLoaded = nBytesLoaded;\n      _t.bytesTotal = nBytesTotal;\n      _t.duration = Math.floor(nDuration);\n      _t.bufferLength = nBufferLength;\n      if (!_t._iO.isMovieStar) {\n        if (_t._iO.duration) {\n          // use options, if specified and larger\n          _t.durationEstimate = _t.duration > _t._iO.duration ? _t.duration : _t._iO.duration;\n        } else {\n          _t.durationEstimate = parseInt(_t.bytesTotal / _t.bytesLoaded * _t.duration, 10);\n        }\n        if (_t.durationEstimate === undefined) {\n          _t.durationEstimate = _t.duration;\n        }\n        if (_t.readyState !== 3 && _t._iO.whileloading) {\n          _t._iO.whileloading.apply(_t);\n        }\n      } else {\n        _t.durationEstimate = _t.duration;\n        if (_t.readyState !== 3 && _t._iO.whileloading) {\n          _t._iO.whileloading.apply(_t);\n        }\n      }\n    };\n\n    this._whileplaying = function (nPosition, oPeakData, oWaveformDataLeft, oWaveformDataRight, oEQData) {\n      if (isNaN(nPosition) || nPosition === null) {\n        return false;\n      }\n      // flash safety net\n      _t.position = nPosition;\n      _t.processOnPosition();\n      if (!_t.isHTML5 && _fV > 8) {\n        if (_t._iO.usePeakData && typeof oPeakData !== 'undefined' && oPeakData) {\n          _t.peakData = {\n            left: oPeakData.leftPeak,\n            right: oPeakData.rightPeak\n          };\n        }\n        if (_t._iO.useWaveformData && typeof oWaveformDataLeft !== 'undefined' && oWaveformDataLeft) {\n          _t.waveformData = {\n            left: oWaveformDataLeft.split(','),\n            right: oWaveformDataRight.split(',')\n          };\n        }\n        if (_t._iO.useEQData) {\n          if (typeof oEQData !== 'undefined' && oEQData && oEQData.leftEQ) {\n            var eqLeft = oEQData.leftEQ.split(',');\n            _t.eqData = eqLeft;\n            _t.eqData.left = eqLeft;\n            if (typeof oEQData.rightEQ !== 'undefined' && oEQData.rightEQ) {\n              _t.eqData.right = oEQData.rightEQ.split(',');\n            }\n          }\n        }\n      }\n      if (_t.playState === 1) {\n        // special case/hack: ensure buffering is false if loading from cache (and not yet started)\n        if (!_t.isHTML5 && _s.flashVersion === 8 && !_t.position && _t.isBuffering) {\n          _t._onbufferchange(0);\n        }\n        if (_t._iO.whileplaying) {\n          _t._iO.whileplaying.apply(_t);\n        }\n        // flash may call after actual finish\n        if ((_t.loaded || !_t.loaded && _t._iO.isMovieStar) && _t._iO.onbeforefinish && _t._iO.onbeforefinishtime && !_t.didBeforeFinish && _t.duration - _t.position <= _t._iO.onbeforefinishtime) {\n          _t._onbeforefinish();\n        }\n      }\n      return true;\n    };\n\n    this._onid3 = function (oID3PropNames, oID3Data) {\n      // oID3PropNames: string array (names)\n      // ID3Data: string array (data)\n      _s._wD('SMSound._onid3(): \"' + this.sID + '\" ID3 data received.');\n      var oData = [],\n          i,\n          j;\n      for (i = 0, j = oID3PropNames.length; i < j; i++) {\n        oData[oID3PropNames[i]] = oID3Data[i];\n      }\n      _t.id3 = _mixin(_t.id3, oData);\n      if (_t._iO.onid3) {\n        _t._iO.onid3.apply(_t);\n      }\n    };\n\n    // flash + RTMP\n    this._onconnect = function (bSuccess) {\n      var fN = 'SMSound._onconnect(): ';\n      bSuccess = bSuccess === 1;\n      _s._wD(fN + '\"' + _t.sID + '\"' + (bSuccess ? ' connected.' : ' failed to connect? - ' + _t.url), bSuccess ? 1 : 2);\n      _t.connected = bSuccess;\n      if (bSuccess) {\n        _t.failures = 0;\n        if (_idCheck(_t.sID)) {\n          if (_t.getAutoPlay()) {\n            _t.play(undefined, _t.getAutoPlay());\n          } else // only update the play state if auto playing\n            if (_t._iO.autoLoad) {\n              _t.load();\n            }\n        }\n        if (_t._iO.onconnect) {\n          _t._iO.onconnect.apply(_t, [bSuccess]);\n        }\n      }\n    };\n\n    this._ondataerror = function (sError) {\n      // flash 9 wave/eq data handler\n      if (_t.playState > 0) {\n        // hack: called at start, and end from flash at/after onfinish()\n        _s._wD('SMSound._ondataerror(): ' + sError);\n        if (_t._iO.ondataerror) {\n          _t._iO.ondataerror.apply(_t);\n        }\n      }\n    };\n  };\n\n  // SMSound()\n  /*\n   * private soundManager internals\n   */\n  _getDocument = function _getDocument() {\n    return _doc.body || _doc._docElement || _doc.getElementsByTagName('div')[0];\n  };\n\n  _id = function _id(sID) {\n    return _doc.getElementById(sID);\n  };\n\n  _mixin = function _mixin(oMain, oAdd) {\n    // non-destructive merge\n    var o1 = {},\n        i,\n        o2,\n        o;\n    for (i in oMain) {\n      // clone c1\n      if (oMain.hasOwnProperty(i)) {\n        o1[i] = oMain[i];\n      }\n    }\n    o2 = typeof oAdd === 'undefined' ? _s.defaultOptions : oAdd;\n    for (o in o2) {\n      if (o2.hasOwnProperty(o) && typeof o1[o] === 'undefined') {\n        o1[o] = o2[o];\n      }\n    }\n    return o1;\n  };\n\n  _event = function () {\n    var old = _win.attachEvent,\n        evt = {\n      add: old ? 'attachEvent' : 'addEventListener',\n      remove: old ? 'detachEvent' : 'removeEventListener'\n    };\n\n    function getArgs(oArgs) {\n      var args = _slice.call(oArgs),\n          len = args.length;\n      if (old) {\n        args[1] = 'on' + args[1];\n        // prefix\n        if (len > 3) {\n          args.pop();\n        }\n      } else // no capture\n        if (len === 3) {\n          args.push(false);\n        }\n      return args;\n    }\n\n    function apply(args, sType) {\n      var element = args.shift(),\n          method = [evt[sType]];\n      if (old) {\n        element[method](args[0], args[1]);\n      } else {\n        element[method].apply(element, args);\n      }\n    }\n\n    function add() {\n      apply(getArgs(arguments), 'add');\n    }\n\n    function remove() {\n      apply(getArgs(arguments), 'remove');\n    }\n\n    return {\n      'add': add,\n      'remove': remove\n    };\n  }();\n\n  _html5OK = function _html5OK(iO) {\n    return !iO.serverURL && (iO.type ? _html5CanPlay({ type: iO.type }) : _html5CanPlay({ url: iO.url }) || _s.html5Only);\n  };\n\n  // Use type, if specified. If HTML5-only mode, no other options, so just give 'er\n  _html5CanPlay = function _html5CanPlay(o) {\n    /*\n     * try to find MIME, test and return truthiness\n     * o = {\n     *  url: '/path/to/an.mp3',\n     *  type: 'audio/mp3'\n     * }\n     */\n    if (!_s.useHTML5Audio || !_s.hasHTML5) {\n      return false;\n    }\n\n    var url = o.url || null,\n        mime = o.type || null,\n        aF = _s.audioFormats,\n        result,\n        offset,\n        fileExt,\n        item;\n\n    function preferFlashCheck(kind) {\n      // whether flash should play a given type\n      return _s.preferFlash && _hasFlash && !_s.ignoreFlash && typeof _s.flash[kind] !== 'undefined' && _s.flash[kind];\n    }\n\n    // account for known cases like audio/mp3\n    if (mime && _s.html5[mime] !== 'undefined') {\n      return _s.html5[mime] && !preferFlashCheck(mime);\n    }\n\n    if (!_html5Ext) {\n      _html5Ext = [];\n      for (item in aF) {\n        if (aF.hasOwnProperty(item)) {\n          _html5Ext.push(item);\n          if (aF[item].related) {\n            _html5Ext = _html5Ext.concat(aF[item].related);\n          }\n        }\n      }\n      _html5Ext = new RegExp('\\\\.(' + _html5Ext.join('|') + ')(\\\\?.*)?$', 'i');\n    }\n\n    fileExt = url ? url.toLowerCase().match(_html5Ext) : null;\n\n    // TODO: Strip URL queries, etc.\n    if (!fileExt || !fileExt.length) {\n      if (!mime) {\n        return false;\n      } else {\n        // audio/mp3 -> mp3, result should be known\n        offset = mime.indexOf(';');\n        fileExt = (offset !== -1 ? mime.substr(0, offset) : mime).substr(6);\n      }\n    } else\n      // strip \"audio/X; codecs..\"\n      {\n        fileExt = fileExt[1];\n      }\n\n    // match the raw extension name - \"mp3\", for example\n    if (fileExt && typeof _s.html5[fileExt] !== 'undefined') {\n      // result known\n      return _s.html5[fileExt] && !preferFlashCheck(fileExt);\n    } else {\n      mime = 'audio/' + fileExt;\n      result = _s.html5.canPlayType({ type: mime });\n      _s.html5[fileExt] = result;\n      // _s._wD('canPlayType, found result: '+result);\n      return result && _s.html5[mime] && !preferFlashCheck(mime);\n    }\n  };\n\n  _testHTML5 = function _testHTML5() {\n    if (!_s.useHTML5Audio || typeof Audio === 'undefined') {\n      return false;\n    }\n\n    // double-whammy: Opera 9.64 throws WRONG_ARGUMENTS_ERR if no parameter passed to Audio(), and Webkit + iOS happily tries to load \"null\" as a URL. :/\n    var a = typeof Audio !== 'undefined' ? _isOpera ? new Audio(null) : new Audio() : null,\n        item,\n        support = {},\n        aF,\n        i;\n\n    function _cp(m) {\n      var canPlay,\n          i,\n          j,\n          isOK = false;\n      if (!a || typeof a.canPlayType !== 'function') {\n        return false;\n      }\n      if (m instanceof Array) {\n        // iterate through all mime types, return any successes\n        for (i = 0, j = m.length; i < j && !isOK; i++) {\n          if (_s.html5[m[i]] || a.canPlayType(m[i]).match(_s.html5Test)) {\n            isOK = true;\n            _s.html5[m[i]] = true;\n            // if flash can play and preferred, also mark it for use.\n            _s.flash[m[i]] = !!(_s.preferFlash && _hasFlash && m[i].match(_flashMIME));\n          }\n        }\n        return isOK;\n      } else {\n        canPlay = a && typeof a.canPlayType === 'function' ? a.canPlayType(m) : false;\n        return !!(canPlay && canPlay.match(_s.html5Test));\n      }\n    }\n\n    // test all registered formats + codecs\n    aF = _s.audioFormats;\n    for (item in aF) {\n      if (aF.hasOwnProperty(item)) {\n        support[item] = _cp(aF[item].type);\n        support['audio/' + item] = support[item];\n        // write back generic type too, eg. audio/mp3\n        // assign flash\n        if (_s.preferFlash && !_s.ignoreFlash && item.match(_flashMIME)) {\n          _s.flash[item] = true;\n        } else {\n          _s.flash[item] = false;\n        }\n        // assign result to related formats, too\n        if (aF[item] && aF[item].related) {\n          for (i = aF[item].related.length; i--;) {\n            support['audio/' + aF[item].related[i]] = support[item];\n            // eg. audio/m4a\n            _s.html5[aF[item].related[i]] = support[item];\n            _s.flash[aF[item].related[i]] = support[item];\n          }\n        }\n      }\n    }\n\n    support.canPlayType = a ? _cp : null;\n    _s.html5 = _mixin(_s.html5, support);\n    return true;\n  };\n\n  _strings = {\n    // <d>\n    notReady: 'Not loaded yet - wait for soundManager.onload()/onready()',\n    notOK: 'Audio support is not available.',\n    domError: _smc + 'createMovie(): appendChild/innerHTML call failed. DOM not ready or other error.',\n    spcWmode: _smc + 'createMovie(): Removing wmode, preventing known SWF loading issue(s)',\n    swf404: _sm + ': Verify that %s is a valid path.',\n    tryDebug: 'Try ' + _sm + '.debugFlash = true for more security details (output goes to SWF.)',\n    checkSWF: 'See SWF output for more debug info.',\n    localFail: _sm + ': Non-HTTP page (' + _doc.location.protocol + ' URL?) Review Flash player security settings for this special case:\\nhttp://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html\\nMay need to add/allow path, eg. c:/sm2/ or /users/me/sm2/',\n    waitFocus: _sm + ': Special case: Waiting for focus-related event..',\n    waitImpatient: _sm + ': Getting impatient, still waiting for Flash%s...',\n    waitForever: _sm + ': Waiting indefinitely for Flash (will recover if unblocked)...',\n    needFunction: _sm + ': Function object expected for %s',\n    badID: 'Warning: Sound ID \"%s\" should be a string, starting with a non-numeric character',\n    noMS: 'MovieStar mode not enabled. Exiting.',\n    currentObj: '--- ' + _sm + '._debug(): Current sound objects ---',\n    waitEI: _smc + 'initMovie(): Waiting for ExternalInterface call from Flash..',\n    waitOnload: _sm + ': Waiting for window.onload()',\n    docLoaded: _sm + ': Document already loaded',\n    onload: _smc + 'initComplete(): calling soundManager.onload()',\n    onloadOK: _sm + '.onload() complete',\n    init: _smc + 'init()',\n    didInit: _smc + 'init(): Already called?',\n    flashJS: _sm + ': Attempting to call Flash from JS..',\n    noPolling: _sm + ': Polling (whileloading()/whileplaying() support) is disabled.',\n    secNote: 'Flash security note: Network/internet URLs will not load due to security restrictions. Access can be configured via Flash Player Global Security Settings Page: http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html',\n    badRemove: 'Warning: Failed to remove flash movie.',\n    noPeak: 'Warning: peakData features unsupported for movieStar formats',\n    shutdown: _sm + '.disable(): Shutting down',\n    queue: _sm + ': Queueing %s handler',\n    smFail: _sm + ': Failed to initialise.',\n    smError: 'SMSound.load(): Exception: JS-Flash communication failed, or JS error.',\n    fbTimeout: 'No flash response, applying .' + _s.swfCSS.swfTimedout + ' CSS..',\n    fbLoaded: 'Flash loaded',\n    fbHandler: _smc + 'flashBlockHandler()',\n    manURL: 'SMSound.load(): Using manually-assigned URL',\n    onURL: _sm + '.load(): current URL already assigned.',\n    badFV: _sm + '.flashVersion must be 8 or 9. \"%s\" is invalid. Reverting to %s.',\n    as2loop: 'Note: Setting stream:false so looping can work (flash 8 limitation)',\n    noNSLoop: 'Note: Looping not implemented for MovieStar formats',\n    needfl9: 'Note: Switching to flash 9, required for MP4 formats.',\n    mfTimeout: 'Setting flashLoadTimeout = 0 (infinite) for off-screen, mobile flash case',\n    mfOn: 'mobileFlash::enabling on-screen flash repositioning',\n    policy: 'Enabling usePolicyFile for data access'\n  };\n\n  // </d>\n  _str = function _str() {\n    // o [,items to replace]\n    // <d>\n    var args = _slice.call(arguments),\n\n    // real array, please\n    o = args.shift(),\n\n    // first arg\n    str = _strings && _strings[o] ? _strings[o] : '',\n        i,\n        j;\n    if (str && args && args.length) {\n      for (i = 0, j = args.length; i < j; i++) {\n        str = str.replace('%s', args[i]);\n      }\n    }\n    return str;\n  };\n\n  // </d>\n  _loopFix = function _loopFix(sOpt) {\n    // flash 8 requires stream = false for looping to work\n    if (_fV === 8 && sOpt.loops > 1 && sOpt.stream) {\n      _wDS('as2loop');\n      sOpt.stream = false;\n    }\n    return sOpt;\n  };\n\n  _policyFix = function _policyFix(sOpt, sPre) {\n    if (sOpt && !sOpt.usePolicyFile && (sOpt.onid3 || sOpt.usePeakData || sOpt.useWaveformData || sOpt.useEQData)) {\n      _s._wD((sPre || '') + _str('policy'));\n      sOpt.usePolicyFile = true;\n    }\n    return sOpt;\n  };\n\n  _complain = function _complain(sMsg) {\n    if (typeof console !== 'undefined' && typeof console.warn !== 'undefined') {\n      console.warn(sMsg);\n    } else {\n      _s._wD(sMsg);\n    }\n  };\n\n  _doNothing = function _doNothing() {\n    return false;\n  };\n\n  _disableObject = function _disableObject(o) {\n    var oProp;\n    for (oProp in o) {\n      if (o.hasOwnProperty(oProp) && typeof o[oProp] === 'function') {\n        o[oProp] = _doNothing;\n      }\n    }\n    oProp = null;\n  };\n\n  _failSafely = function _failSafely(bNoDisable) {\n    // general failure exception handler\n    if (typeof bNoDisable === 'undefined') {\n      bNoDisable = false;\n    }\n    if (_disabled || bNoDisable) {\n      _wDS('smFail', 2);\n      _s.disable(bNoDisable);\n    }\n  };\n\n  _normalizeMovieURL = function _normalizeMovieURL(smURL) {\n    var urlParams = null;\n    if (smURL) {\n      if (smURL.match(/\\.swf(\\?.*)?$/i)) {\n        urlParams = smURL.substr(smURL.toLowerCase().lastIndexOf('.swf?') + 4);\n        if (urlParams) {\n          return smURL;\n        }\n      } else // assume user knows what they're doing\n        if (smURL.lastIndexOf('/') !== smURL.length - 1) {\n          smURL = smURL + '/';\n        }\n    }\n    return (smURL && smURL.lastIndexOf('/') !== -1 ? smURL.substr(0, smURL.lastIndexOf('/') + 1) : './') + _s.movieURL;\n  };\n\n  _setVersionInfo = function _setVersionInfo() {\n    if (_fV !== 8 && _fV !== 9) {\n      _s._wD(_str('badFV', _fV, _defaultFlashVersion));\n      _s.flashVersion = _defaultFlashVersion;\n    }\n    var isDebug = _s.debugMode || _s.debugFlash ? '_debug.swf' : '.swf';\n    // debug flash movie, if applicable\n    if (_s.useHTML5Audio && !_s.html5Only && _s.audioFormats.mp4.required && _s.flashVersion < 9) {\n      _s._wD(_str('needfl9'));\n      _s.flashVersion = 9;\n    }\n    _fV = _s.flashVersion;\n    // short-hand for internal use\n    _s.version = _s.versionNumber + (_s.html5Only ? ' (HTML5-only mode)' : _fV === 9 ? ' (AS3/Flash 9)' : ' (AS2/Flash 8)');\n    // set up default options\n    if (_fV > 8) {\n      _s.defaultOptions = _mixin(_s.defaultOptions, _s.flash9Options);\n      _s.features.buffering = true;\n    }\n    if (_fV > 8 && _s.useMovieStar) {\n      // flash 9+ support for movieStar formats as well as MP3\n      _s.defaultOptions = _mixin(_s.defaultOptions, _s.movieStarOptions);\n      _s.filePatterns.flash9 = new RegExp('\\\\.(mp3|' + _s.netStreamTypes.join('|') + ')(\\\\?.*)?$', 'i');\n      _s.mimePattern = _s.netStreamMimeTypes;\n      _s.features.movieStar = true;\n    } else {\n      _s.useMovieStar = false;\n      _s.features.movieStar = false;\n    }\n    _s.filePattern = _s.filePatterns[_fV !== 8 ? 'flash9' : 'flash8'];\n    _s.movieURL = (_fV === 8 ? 'soundmanager2.swf' : 'soundmanager2_flash9.swf').replace('.swf', isDebug);\n    _s.features.peakData = _s.features.waveformData = _s.features.eqData = _fV > 8;\n  };\n\n  _setPolling = function _setPolling(bPolling, bHighPerformance) {\n    if (!_s.o || !_s.allowPolling) {\n      return false;\n    }\n    _s.o._setPolling(bPolling, bHighPerformance);\n  };\n\n  _initDebug = function _initDebug() {\n    if (_s.debugURLParam.test(_wl)) {\n      _s.debugMode = true;\n    }\n    // allow force of debug mode via URL\n    // <d>\n    if (_id(_s.debugID)) {\n      return false;\n    }\n    var oD, oDebug, oTarget, oToggle, tmp;\n    if (_s.debugMode && !_id(_s.debugID) && (!_hasConsole || !_s.useConsole || _s.useConsole && _hasConsole && !_s.consoleOnly)) {\n      oD = _doc.createElement('div');\n      oD.id = _s.debugID + '-toggle';\n      oToggle = {\n        'position': 'fixed',\n        'bottom': '0px',\n        'right': '0px',\n        'width': '1.2em',\n        'height': '1.2em',\n        'lineHeight': '1.2em',\n        'margin': '2px',\n        'textAlign': 'center',\n        'border': '1px solid #999',\n        'cursor': 'pointer',\n        'background': '#fff',\n        'color': '#333',\n        'zIndex': 10001\n      };\n      oD.appendChild(_doc.createTextNode('-'));\n      oD.onclick = _toggleDebug;\n      oD.title = 'Toggle SM2 debug console';\n      if (_ua.match(/msie 6/i)) {\n        oD.style.position = 'absolute';\n        oD.style.cursor = 'hand';\n      }\n      for (tmp in oToggle) {\n        if (oToggle.hasOwnProperty(tmp)) {\n          oD.style[tmp] = oToggle[tmp];\n        }\n      }\n      oDebug = _doc.createElement('div');\n      oDebug.id = _s.debugID;\n      oDebug.style.display = _s.debugMode ? 'block' : 'none';\n      if (_s.debugMode && !_id(oD.id)) {\n        try {\n          oTarget = _getDocument();\n          oTarget.appendChild(oD);\n        } catch (e2) {\n          throw new Error(_str('domError') + ' \\n' + e2.toString());\n        }\n        oTarget.appendChild(oDebug);\n      }\n    }\n    oTarget = null;\n  };\n\n  // </d>\n  _idCheck = this.getSoundById;\n\n  // <d>\n  _wDS = function _wDS(o, errorLevel) {\n    if (!o) {\n      return '';\n    } else {\n      return _s._wD(_str(o), errorLevel);\n    }\n  };\n\n  // last-resort debugging option\n  if (_wl.indexOf('sm2-debug=alert') + 1 && _s.debugMode) {\n    _s._wD = function (sText) {\n      window.alert(sText);\n    };\n  }\n\n  _toggleDebug = function _toggleDebug() {\n    var o = _id(_s.debugID),\n        oT = _id(_s.debugID + '-toggle');\n    if (!o) {\n      return false;\n    }\n    if (_debugOpen) {\n      // minimize\n      oT.innerHTML = '+';\n      o.style.display = 'none';\n    } else {\n      oT.innerHTML = '-';\n      o.style.display = 'block';\n    }\n    _debugOpen = !_debugOpen;\n  };\n\n  _debugTS = function _debugTS(sEventType, bSuccess, sMessage) {\n    // troubleshooter debug hooks\n    if (typeof sm2Debugger !== 'undefined') {\n      try {\n        sm2Debugger.handleEvent(sEventType, bSuccess, sMessage);\n      } catch (e) {}\n    }\n    return true;\n  };\n\n  // </d>\n  _getSWFCSS = function _getSWFCSS() {\n    var css = [];\n    if (_s.debugMode) {\n      css.push(_s.swfCSS.sm2Debug);\n    }\n    if (_s.debugFlash) {\n      css.push(_s.swfCSS.flashDebug);\n    }\n    if (_s.useHighPerformance) {\n      css.push(_s.swfCSS.highPerf);\n    }\n    return css.join(' ');\n  };\n\n  _flashBlockHandler = function _flashBlockHandler() {\n    // *possible* flash block situation.\n    var name = _str('fbHandler'),\n        p = _s.getMoviePercent(),\n        css = _s.swfCSS,\n        error = { type: 'FLASHBLOCK' };\n    if (_s.html5Only) {\n      return false;\n    }\n    if (!_s.ok()) {\n      if (_needsFlash) {\n        // make the movie more visible, so user can fix\n        _s.oMC.className = _getSWFCSS() + ' ' + css.swfDefault + ' ' + (p === null ? css.swfTimedout : css.swfError);\n        _s._wD(name + ': ' + _str('fbTimeout') + (p ? ' (' + _str('fbLoaded') + ')' : ''));\n      }\n      _s.didFlashBlock = true;\n      _processOnEvents({\n        type: 'ontimeout',\n        ignoreInit: true,\n        error: error\n      });\n      // fire onready(), complain lightly\n      _catchError(error);\n    } else {\n      // SM2 loaded OK (or recovered)\n      if (_s.didFlashBlock) {\n        _s._wD(name + ': Unblocked');\n      }\n      if (_s.oMC) {\n        _s.oMC.className = [_getSWFCSS(), css.swfDefault, css.swfLoaded + (_s.didFlashBlock ? ' ' + css.swfUnblocked : '')].join(' ');\n      }\n    }\n  };\n\n  _addOnEvent = function _addOnEvent(sType, oMethod, oScope) {\n    if (typeof _on_queue[sType] === 'undefined') {\n      _on_queue[sType] = [];\n    }\n    _on_queue[sType].push({\n      'method': oMethod,\n      'scope': oScope || null,\n      'fired': false\n    });\n  };\n\n  _processOnEvents = function _processOnEvents(oOptions) {\n    if (!oOptions) {\n      // assume onready, if unspecified\n      oOptions = { type: 'onready' };\n    }\n    if (!_didInit && oOptions && !oOptions.ignoreInit) {\n      // not ready yet.\n      return false;\n    }\n    if (oOptions.type === 'ontimeout' && _s.ok()) {\n      // invalid case\n      return false;\n    }\n    var status = { success: oOptions && oOptions.ignoreInit ? _s.ok() : !_disabled },\n        srcQueue = oOptions && oOptions.type ? _on_queue[oOptions.type] || [] : [],\n\n    // queue specified by type, or none\n    queue = [],\n        i,\n        j,\n        args = [status],\n        canRetry = _needsFlash && _s.useFlashBlock && !_s.ok();\n    if (oOptions.error) {\n      args[0].error = oOptions.error;\n    }\n    for (i = 0, j = srcQueue.length; i < j; i++) {\n      if (srcQueue[i].fired !== true) {\n        queue.push(srcQueue[i]);\n      }\n    }\n    if (queue.length) {\n      _s._wD(_sm + ': Firing ' + queue.length + ' ' + oOptions.type + '() item' + (queue.length === 1 ? '' : 's'));\n      for (i = 0, j = queue.length; i < j; i++) {\n        if (queue[i].scope) {\n          queue[i].method.apply(queue[i].scope, args);\n        } else {\n          queue[i].method.apply(this, args);\n        }\n        if (!canRetry) {\n          // flashblock case doesn't count here\n          queue[i].fired = true;\n        }\n      }\n    }\n    return true;\n  };\n\n  _initUserOnload2 = function _initUserOnload() {\n    _win.setTimeout(function () {\n      if (_s.useFlashBlock) {\n        _flashBlockHandler();\n      }\n      _processOnEvents();\n      // call user-defined \"onload\", scoped to window\n      if (_s.onload instanceof Function) {\n        _wDS('onload', 1);\n        _s.onload.apply(_win);\n        _wDS('onloadOK', 1);\n      }\n      if (_s.waitForWindowLoad) {\n        _event.add(_win, 'load', _initUserOnload2);\n      }\n    }, 1);\n  };\n\n  _detectFlash = function _detectFlash() {\n    // hat tip: Flash Detect library (BSD, (C) 2007) by Carl \"DocYes\" S. Yestrau - http://featureblend.com/javascript-flash-detection-library.html / http://featureblend.com/license.txt\n    if (_hasFlash !== undefined) {\n      // this work has already been done.\n      return _hasFlash;\n    }\n\n    var hasPlugin = false,\n        n = navigator,\n        nP = n.plugins,\n        obj,\n        type,\n        types,\n        AX = _win.ActiveXObject;\n\n    if (nP && nP.length) {\n      type = 'application/x-shockwave-flash';\n      types = n.mimeTypes;\n      if (types && types[type] && types[type].enabledPlugin && types[type].enabledPlugin.description) {\n        hasPlugin = true;\n      }\n    } else if (typeof AX !== 'undefined') {\n      try {\n        obj = new AX('ShockwaveFlash.ShockwaveFlash');\n      } catch (e) {}\n      hasPlugin = !!obj;\n    }\n\n    _hasFlash = hasPlugin;\n\n    return hasPlugin;\n  };\n\n  _featureCheck = function _featureCheck() {\n    var needsFlash,\n        item,\n        isSpecial = _ua.match(/iphone os (1|2|3_0|3_1)/i) ? true : false;\n\n    // iPhone <= 3.1 has broken HTML5 audio(), but firmware 3.2 (iPad) + iOS4 works.\n    if (isSpecial) {\n      _s.hasHTML5 = false;\n      // has Audio(), but is broken; let it load links directly.\n      _s.html5Only = true;\n      // ignore flash case, however\n      if (_s.oMC) {\n        _s.oMC.style.display = 'none';\n      }\n      return false;\n    }\n\n    if (_s.useHTML5Audio) {\n      if (!_s.html5 || !_s.html5.canPlayType) {\n        _s._wD('SoundManager: No HTML5 Audio() support detected.');\n        _s.hasHTML5 = false;\n        return true;\n      } else {\n        _s.hasHTML5 = true;\n      }\n      if (_isBadSafari) {\n        _s._wD(_smc + 'Note: Buggy HTML5 Audio in Safari on this OS X release, see https://bugs.webkit.org/show_bug.cgi?id=32159 - ' + (!_hasFlash ? ' would use flash fallback for MP3/MP4, but none detected.' : 'will use flash fallback for MP3/MP4, if available'), 1);\n        if (_detectFlash()) {\n          return true;\n        }\n      }\n    } else {\n      // flash needed (or, HTML5 needs enabling.)\n      return true;\n    }\n\n    for (item in _s.audioFormats) {\n      if (_s.audioFormats.hasOwnProperty(item)) {\n        if (_s.audioFormats[item].required && !_s.html5.canPlayType(_s.audioFormats[item].type) || _s.flash[item] || _s.flash[_s.audioFormats[item].type]) {\n          // flash may be required, or preferred for this format\n          needsFlash = true;\n        }\n      }\n    }\n\n    // sanity check..\n    if (_s.ignoreFlash) {\n      needsFlash = false;\n    }\n\n    _s.html5Only = _s.hasHTML5 && _s.useHTML5Audio && !needsFlash;\n\n    return !_s.html5Only;\n  };\n\n  _startTimer = function _startTimer(oSound) {\n    if (!oSound._hasTimer) {\n      oSound._hasTimer = true;\n    }\n  };\n\n  _stopTimer = function _stopTimer(oSound) {\n    if (oSound._hasTimer) {\n      oSound._hasTimer = false;\n    }\n  };\n\n  _catchError = function _catchError(options) {\n    options = typeof options !== 'undefined' ? options : {};\n    if (_s.onerror instanceof Function) {\n      _s.onerror.apply(_win, [{ type: typeof options.type !== 'undefined' ? options.type : null }]);\n    }\n    if (typeof options.fatal !== 'undefined' && options.fatal) {\n      _s.disable();\n    }\n  };\n\n  _badSafariFix = function _badSafariFix() {\n    // special case: \"bad\" Safari (OS X 10.3 - 10.7) must fall back to flash for MP3/MP4\n    if (!_isBadSafari || !_detectFlash()) {\n      return false;\n    }\n    // doesn't apply\n    var aF = _s.audioFormats,\n        i,\n        item;\n    for (item in aF) {\n      if (aF.hasOwnProperty(item)) {\n        if (item === 'mp3' || item === 'mp4') {\n          _s._wD(_sm + ': Using flash fallback for ' + item + ' format');\n          _s.html5[item] = false;\n          // assign result to related formats, too\n          if (aF[item] && aF[item].related) {\n            for (i = aF[item].related.length; i--;) {\n              _s.html5[aF[item].related[i]] = false;\n            }\n          }\n        }\n      }\n    }\n  };\n\n  /*\n   * pseudo-private flash/ExternalInterface methods\n   */\n  this._setSandboxType = function (sandboxType) {\n    // <d>\n    var sb = _s.sandbox;\n    sb.type = sandboxType;\n    sb.description = sb.types[typeof sb.types[sandboxType] !== 'undefined' ? sandboxType : 'unknown'];\n    _s._wD('Flash security sandbox type: ' + sb.type);\n    if (sb.type === 'localWithFile') {\n      sb.noRemote = true;\n      sb.noLocal = false;\n      _wDS('secNote', 2);\n    } else if (sb.type === 'localWithNetwork') {\n      sb.noRemote = false;\n      sb.noLocal = true;\n    } else if (sb.type === 'localTrusted') {\n      sb.noRemote = false;\n      sb.noLocal = false;\n    }\n  };\n\n  // </d>\n  this._externalInterfaceOK = function (flashDate) {\n    // flash callback confirming flash loaded, EI working etc.\n    // flashDate = approx. timing/delay info for JS/flash bridge\n    if (_s.swfLoaded) {\n      return false;\n    }\n    var eiTime = new Date().getTime();\n    _s._wD(_smc + 'externalInterfaceOK()' + (flashDate ? ' (~' + (eiTime - flashDate) + ' ms)' : ''));\n    _debugTS('swf', true);\n    _debugTS('flashtojs', true);\n    _s.swfLoaded = true;\n    _tryInitOnFocus = false;\n    if (_isBadSafari) {\n      _badSafariFix();\n    }\n    if (_isIE) {\n      // IE needs a timeout OR delay until window.onload - may need TODO: investigating\n      setTimeout(_init, 100);\n    } else {\n      _init();\n    }\n  };\n\n  /*\n   * private initialization helpers\n   */\n  _createMovie = function _createMovie(smID, smURL) {\n    if (_didAppend && _appendSuccess) {\n      return false;\n    }\n\n    // ignore if already succeeded\n    function _initMsg() {\n      _s._wD('-- SoundManager 2 ' + _s.version + (!_s.html5Only && _s.useHTML5Audio ? _s.hasHTML5 ? ' + HTML5 audio' : ', no HTML5 audio support' : '') + (!_s.html5Only ? (_s.useMovieStar ? ', MovieStar mode' : '') + (_s.useHighPerformance ? ', high performance mode, ' : ', ') + ((_s.flashPollingInterval ? 'custom (' + _s.flashPollingInterval + 'ms)' : _s.useFastPolling ? 'fast' : 'normal') + ' polling') + (_s.wmode ? ', wmode: ' + _s.wmode : '') + (_s.debugFlash ? ', flash debug mode' : '') + (_s.useFlashBlock ? ', flashBlock mode' : '') : '') + ' --', 1);\n    }\n\n    if (_s.html5Only) {\n      // 100% HTML5 mode\n      _setVersionInfo();\n      _initMsg();\n      _s.oMC = _id(_s.movieID);\n      _init();\n      // prevent multiple init attempts\n      _didAppend = true;\n      _appendSuccess = true;\n      return false;\n    }\n\n    // flash path\n    var remoteURL = smURL || _s.url,\n        localURL = _s.altURL || remoteURL,\n        swfTitle = 'JS/Flash audio component (SoundManager 2)',\n        oEmbed,\n        oMovie,\n        oTarget = _getDocument(),\n        tmp,\n        movieHTML,\n        oEl,\n        extraClass = _getSWFCSS(),\n        s,\n        x,\n        sClass,\n        side = 'auto',\n        isRTL = null,\n        html = _doc.getElementsByTagName('html')[0];\n\n    isRTL = html && html.dir && html.dir.match(/rtl/i);\n    smID = typeof smID === 'undefined' ? _s.id : smID;\n\n    function param(name, value) {\n      return '<param name=\"' + name + '\" value=\"' + value + '\" />';\n    }\n\n    // safety check for legacy (change to Flash 9 URL)\n    _setVersionInfo();\n    _s.url = _normalizeMovieURL(_overHTTP ? remoteURL : localURL);\n    smURL = _s.url;\n\n    _s.wmode = !_s.wmode && _s.useHighPerformance && !_s.useMovieStar ? 'transparent' : _s.wmode;\n\n    if (_s.wmode !== null && (_ua.match(/msie 8/i) || !_isIE && !_s.useHighPerformance) && navigator.platform.match(/win32|win64/i)) {\n      /*\n       * extra-special case: movie doesn't load until scrolled into view when using wmode = anything but 'window' here\n       * does not apply when using high performance (position:fixed means on-screen), OR infinite flash load timeout\n       * wmode breaks IE 8 on Vista + Win7 too in some cases, as of January 2011 (?)\n       */\n      _s.specialWmodeCase = true;\n      _wDS('spcWmode');\n      _s.wmode = null;\n    }\n\n    oEmbed = {\n      'name': smID,\n      'id': smID,\n      'src': smURL,\n      'width': side,\n      'height': side,\n      'quality': 'high',\n      'allowScriptAccess': _s.allowScriptAccess,\n      'bgcolor': _s.bgColor,\n      'pluginspage': _http + '//www.macromedia.com/go/getflashplayer',\n      'title': swfTitle,\n      'type': 'application/x-shockwave-flash',\n      'wmode': _s.wmode,\n      'hasPriority': 'true'\n    };\n\n    // http://help.adobe.com/en_US/as3/mobile/WS4bebcd66a74275c36cfb8137124318eebc6-7ffd.html\n    if (_s.debugFlash) {\n      oEmbed.FlashVars = 'debug=1';\n    }\n\n    if (!_s.wmode) {\n      delete oEmbed.wmode;\n    }\n\n    // don't write empty attribute\n    if (_isIE) {\n      // IE is \"special\".\n      oMovie = _doc.createElement('div');\n      movieHTML = ['<object id=\"' + smID + '\" data=\"' + smURL + '\" type=\"' + oEmbed.type + '\" title=\"' + oEmbed.title + '\" classid=\"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000\" codebase=\"' + _http + '//download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0\" width=\"' + oEmbed.width + '\" height=\"' + oEmbed.height + '\">', param('movie', smURL), param('AllowScriptAccess', _s.allowScriptAccess), param('quality', oEmbed.quality), _s.wmode ? param('wmode', _s.wmode) : '', param('bgcolor', _s.bgColor), param('hasPriority', 'true'), _s.debugFlash ? param('FlashVars', oEmbed.FlashVars) : '', '</object>'].join('');\n    } else {\n      oMovie = _doc.createElement('embed');\n      for (tmp in oEmbed) {\n        if (oEmbed.hasOwnProperty(tmp)) {\n          oMovie.setAttribute(tmp, oEmbed[tmp]);\n        }\n      }\n    }\n\n    _initDebug();\n    extraClass = _getSWFCSS();\n    oTarget = _getDocument();\n\n    if (oTarget) {\n      _s.oMC = _id(_s.movieID) || _doc.createElement('div');\n\n      if (!_s.oMC.id) {\n        _s.oMC.id = _s.movieID;\n        _s.oMC.className = _s.swfCSS.swfDefault + ' ' + extraClass;\n        s = null;\n        oEl = null;\n\n        if (!_s.useFlashBlock) {\n          if (_s.useHighPerformance) {\n            // on-screen at all times\n            s = {\n              'position': 'fixed',\n              'width': '8px',\n              'height': '8px',\n              // >= 6px for flash to run fast, >= 8px to start up under Firefox/win32 in some cases. odd? yes.\n              'bottom': '0px',\n              'left': '0px',\n              'overflow': 'hidden'\n            };\n          } else {\n            // hide off-screen, lower priority\n            s = {\n              'position': 'absolute',\n              'width': '6px',\n              'height': '6px',\n              'top': '-9999px',\n              'left': '-9999px'\n            };\n            if (isRTL) {\n              s.left = Math.abs(parseInt(s.left, 10)) + 'px';\n            }\n          }\n        }\n\n        if (_isWebkit) {\n          _s.oMC.style.zIndex = 10000;\n        }\n\n        // soundcloud-reported render/crash fix, safari 5\n        if (!_s.debugFlash) {\n          for (x in s) {\n            if (s.hasOwnProperty(x)) {\n              _s.oMC.style[x] = s[x];\n            }\n          }\n        }\n\n        try {\n          if (!_isIE) {\n            _s.oMC.appendChild(oMovie);\n          }\n          oTarget.appendChild(_s.oMC);\n          if (_isIE) {\n            oEl = _s.oMC.appendChild(_doc.createElement('div'));\n            oEl.className = _s.swfCSS.swfBox;\n            oEl.innerHTML = movieHTML;\n          }\n          _appendSuccess = true;\n        } catch (e) {\n          throw new Error(_str('domError') + ' \\n' + e.toString());\n        }\n      } else {\n        // SM2 container is already in the document (eg. flashblock use case)\n        sClass = _s.oMC.className;\n        _s.oMC.className = (sClass ? sClass + ' ' : _s.swfCSS.swfDefault) + (extraClass ? ' ' + extraClass : '');\n        _s.oMC.appendChild(oMovie);\n        if (_isIE) {\n          oEl = _s.oMC.appendChild(_doc.createElement('div'));\n          oEl.className = _s.swfCSS.swfBox;\n          oEl.innerHTML = movieHTML;\n        }\n        _appendSuccess = true;\n      }\n    }\n\n    _didAppend = true;\n    _initMsg();\n    _s._wD(_smc + 'createMovie(): Trying to load ' + smURL + (!_overHTTP && _s.altURL ? ' (alternate URL)' : ''), 1);\n\n    return true;\n  };\n\n  _initMovie = function _initMovie() {\n    if (_s.html5Only) {\n      _createMovie();\n      return false;\n    }\n\n    // attempt to get, or create, movie\n    if (_s.o) {\n      return false;\n    }\n\n    // may already exist\n    _s.o = _s.getMovie(_s.id);\n\n    // inline markup\n    if (!_s.o) {\n      if (!_oRemoved) {\n        // try to create\n        _createMovie(_s.id, _s.url);\n      } else {\n        // try to re-append removed movie after reboot()\n        if (!_isIE) {\n          _s.oMC.appendChild(_oRemoved);\n        } else {\n          _s.oMC.innerHTML = _oRemovedHTML;\n        }\n        _oRemoved = null;\n        _didAppend = true;\n      }\n      _s.o = _s.getMovie(_s.id);\n    }\n\n    if (_s.o) {\n      _wDS('waitEI');\n    }\n\n    if (_s.oninitmovie instanceof Function) {\n      setTimeout(_s.oninitmovie, 1);\n    }\n\n    return true;\n  };\n\n  _delayWaitForEI = function _delayWaitForEI() {\n    setTimeout(_waitForEI, 1000);\n  };\n\n  _waitForEI = function _waitForEI() {\n    if (_waitingForEI) {\n      return false;\n    }\n\n    _waitingForEI = true;\n    _event.remove(_win, 'load', _delayWaitForEI);\n\n    if (_tryInitOnFocus && !_isFocused) {\n      // giant Safari 3.1 hack - assume mousemove = focus given lack of focus event\n      _wDS('waitFocus');\n      return false;\n    }\n\n    var p;\n    if (!_didInit) {\n      p = _s.getMoviePercent();\n      _s._wD(_str('waitImpatient', p === 100 ? ' (SWF loaded)' : p > 0 ? ' (SWF ' + p + '% loaded)' : ''));\n    }\n\n    setTimeout(function () {\n      p = _s.getMoviePercent();\n\n      if (!_didInit) {\n        _s._wD(_sm + ': No Flash response within expected time.\\nLikely causes: ' + (p === 0 ? 'Loading ' + _s.movieURL + ' may have failed (and/or Flash ' + _fV + '+ not present?), ' : '') + 'Flash blocked or JS-Flash security error.' + (_s.debugFlash ? ' ' + _str('checkSWF') : ''), 2);\n        if (!_overHTTP && p) {\n          _wDS('localFail', 2);\n          if (!_s.debugFlash) {\n            _wDS('tryDebug', 2);\n          }\n        }\n        if (p === 0) {\n          // if 0 (not null), probably a 404.\n          _s._wD(_str('swf404', _s.url));\n        }\n        _debugTS('flashtojs', false,  true ? ' (Check flash security or flash blockers)' : ' (No plugin/missing SWF?)');\n      }\n\n      // give up / time-out, depending\n      if (!_didInit && _okToDisable) {\n        if (p === null) {\n          // SWF failed. Maybe blocked.\n          if (_s.useFlashBlock || _s.flashLoadTimeout === 0) {\n            if (_s.useFlashBlock) {\n              _flashBlockHandler();\n            }\n            _wDS('waitForever');\n          } else {\n            // old SM2 behaviour, simply fail\n            _failSafely(true);\n          }\n        } else {\n          // flash loaded? Shouldn't be a blocking issue, then.\n          if (_s.flashLoadTimeout === 0) {\n            _wDS('waitForever');\n          } else {\n            _failSafely(true);\n          }\n        }\n      }\n    }, _s.flashLoadTimeout);\n  };\n\n  _handleFocus2 = function _handleFocus() {\n    function cleanup() {\n      _event.remove(_win, 'focus', _handleFocus2);\n      _event.remove(_win, 'load', _handleFocus2);\n    }\n    if (_isFocused || !_tryInitOnFocus) {\n      cleanup();\n      return true;\n    }\n    _okToDisable = true;\n    _isFocused = true;\n    _s._wD(_smc + 'handleFocus()');\n    if (_isSafari && _tryInitOnFocus) {\n      _event.remove(_win, 'mousemove', _handleFocus2);\n    }\n    // allow init to restart\n    _waitingForEI = false;\n    cleanup();\n    return true;\n  };\n\n  _initComplete = function _initComplete(bNoDisable) {\n    if (_didInit) {\n      return false;\n    }\n    if (_s.html5Only) {\n      // all good.\n      _s._wD('-- SoundManager 2: loaded --');\n      _didInit = true;\n      _initUserOnload2();\n      _debugTS('onload', true);\n      return true;\n    }\n    var wasTimeout = _s.useFlashBlock && _s.flashLoadTimeout && !_s.getMoviePercent(),\n        error;\n    if (!wasTimeout) {\n      _didInit = true;\n      if (_disabled) {\n        error = { type: !_hasFlash && _needsFlash ? 'NO_FLASH' : 'INIT_TIMEOUT' };\n      }\n    }\n    _s._wD('-- SoundManager 2 ' + (_disabled ? 'failed to load' : 'loaded') + ' (' + (_disabled ? 'security/load error' : 'OK') + ') --', 1);\n    if (_disabled || bNoDisable) {\n      if (_s.useFlashBlock && _s.oMC) {\n        _s.oMC.className = _getSWFCSS() + ' ' + (_s.getMoviePercent() === null ? _s.swfCSS.swfTimedout : _s.swfCSS.swfError);\n      }\n      _processOnEvents({\n        type: 'ontimeout',\n        error: error\n      });\n      _debugTS('onload', false);\n      _catchError(error);\n      return false;\n    } else {\n      _debugTS('onload', true);\n    }\n    _event.add(_win, 'unload', _doNothing);\n    // prevent browser from showing cached state via back button, because flash will be dead\n    if (_s.waitForWindowLoad && !_windowLoaded) {\n      _wDS('waitOnload');\n      _event.add(_win, 'load', _initUserOnload2);\n      return false;\n    } else {\n      if (_s.waitForWindowLoad && _windowLoaded) {\n        _wDS('docLoaded');\n      }\n      _initUserOnload2();\n    }\n    return true;\n  };\n\n  _showSupport = function _showSupport() {\n    var item,\n        tests = [];\n    if (_s.useHTML5Audio && _s.hasHTML5) {\n      for (item in _s.audioFormats) {\n        if (_s.audioFormats.hasOwnProperty(item)) {\n          tests.push(item + ': ' + _s.html5[item] + (!_s.html5[item] && _hasFlash && _s.flash[item] ? ' (using flash)' : _s.preferFlash && _s.flash[item] && _hasFlash ? ' (preferring flash)' : !_s.html5[item] ? ' (' + (_s.audioFormats[item].required ? 'required, ' : '') + 'and no flash support)' : ''));\n        }\n      }\n      _s._wD('-- SoundManager 2: HTML5 support tests (' + _s.html5Test + '): ' + tests.join(', ') + ' --', 1);\n    }\n  };\n\n  _init = function _init() {\n    _wDS('init');\n\n    // called after onload()\n    if (_didInit) {\n      _wDS('didInit');\n      return false;\n    }\n\n    function _cleanup() {\n      _event.remove(_win, 'load', _s.beginDelayedInit);\n    }\n\n    if (_s.html5Only) {\n      if (!_didInit) {\n        // we don't need no steenking flash!\n        _cleanup();\n        _s.enabled = true;\n        _initComplete();\n      }\n      return true;\n    }\n\n    // flash path\n    _initMovie();\n\n    try {\n      _wDS('flashJS');\n      _s.o._externalInterfaceTest(false);\n      // attempt to talk to Flash\n      if (!_s.allowPolling) {\n        _wDS('noPolling', 1);\n      } else {\n        _setPolling(true, _s.flashPollingInterval || (_s.useFastPolling ? 10 : 50));\n      }\n      if (!_s.debugMode) {\n        _s.o._disableDebug();\n      }\n      _s.enabled = true;\n      _debugTS('jstoflash', true);\n    } catch (e) {\n      _s._wD('js/flash exception: ' + e.toString());\n      _debugTS('jstoflash', false);\n      _catchError({\n        type: 'JS_TO_FLASH_EXCEPTION',\n        fatal: true\n      });\n      _failSafely(true);\n      // don't disable, for reboot()\n      _initComplete();\n      return false;\n    }\n\n    _initComplete();\n    // event cleanup\n    _cleanup();\n    return true;\n  };\n\n  _dcLoaded2 = function _dcLoaded() {\n    if (_didDCLoaded) {\n      return false;\n    }\n    _didDCLoaded = true;\n    _initDebug();\n\n    /*\n     * Temporary feature: allow force of HTML5 via URL params: sm2-usehtml5audio=0 or 1\n     * Ditto for sm2-preferFlash, too.\n     */\n    // <d>\n    (function () {\n      var a = 'sm2-usehtml5audio=',\n          l = _wl.toLowerCase(),\n          b = null,\n          a2 = 'sm2-preferflash=',\n          b2 = null,\n          hasCon = typeof console !== 'undefined' && typeof console.log !== 'undefined';\n      if (l.indexOf(a) !== -1) {\n        b = l.charAt(l.indexOf(a) + a.length) === '1';\n        if (hasCon) {\n          console.log((b ? 'Enabling ' : 'Disabling ') + 'useHTML5Audio via URL parameter');\n        }\n        _s.useHTML5Audio = b;\n      }\n      if (l.indexOf(a2) !== -1) {\n        b2 = l.charAt(l.indexOf(a2) + a2.length) === '1';\n        if (hasCon) {\n          console.log((b2 ? 'Enabling ' : 'Disabling ') + 'preferFlash via URL parameter');\n        }\n        _s.preferFlash = b2;\n      }\n    })();\n\n    // </d>\n    if (!_hasFlash && _s.hasHTML5) {\n      _s._wD('SoundManager: No Flash detected' + (!_s.useHTML5Audio ? ', enabling HTML5.' : '. Trying HTML5-only mode.'));\n      _s.useHTML5Audio = true;\n      // make sure we aren't preferring flash, either\n      // TODO: preferFlash should not matter if flash is not installed. Currently, stuff breaks without the below tweak.\n      _s.preferFlash = false;\n    }\n\n    _testHTML5();\n    _s.html5.usingFlash = _featureCheck();\n    _needsFlash = _s.html5.usingFlash;\n\n    _showSupport();\n\n    if (!_hasFlash && _needsFlash) {\n      _s._wD('SoundManager: Fatal error: Flash is needed to play some required formats, but is not available.');\n      // TODO: Fatal here vs. timeout approach, etc.\n      _s.flashLoadTimeout = 1;\n    }\n\n    // hack: fail sooner.\n    if (_doc.removeEventListener) {\n      _doc.removeEventListener('DOMContentLoaded', _dcLoaded2, false);\n    }\n    _initMovie();\n    return true;\n  };\n\n  _dcIE2 = function _dcIE() {\n    if (_doc.readyState === 'complete') {\n      _dcLoaded2();\n      _doc.detachEvent('onreadystatechange', _dcIE2);\n    }\n    return true;\n  };\n\n  // sniff up-front\n  _detectFlash();\n\n  // focus and window load, init (primarily flash-driven)\n  _event.add(_win, 'focus', _handleFocus2);\n  _event.add(_win, 'load', _handleFocus2);\n  _event.add(_win, 'load', _delayWaitForEI);\n  if (_isSafari && _tryInitOnFocus) {\n    _event.add(_win, 'mousemove', _handleFocus2);\n  }\n\n  // massive Safari 3.1 focus hack\n  if (_doc.addEventListener) {\n    _doc.addEventListener('DOMContentLoaded', _dcLoaded2, false);\n  } else if (_doc.attachEvent) {\n    _doc.attachEvent('onreadystatechange', _dcIE2);\n  } else {\n    // no add/attachevent support - safe to assume no JS -> Flash either\n    _debugTS('onload', false);\n    _catchError({\n      type: 'NO_DOM2_EVENTS',\n      fatal: true\n    });\n  }\n\n  if (_doc.readyState === 'complete') {\n    setTimeout(_dcLoaded2, 100);\n  }\n};\nvar SoundManager = _exports;\n\n// SoundManager()\nexports.default = _exports;\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/modules/timestep/src/platforms/browser/SoundManager.js\n// module id = 79\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/modules/timestep/src/platforms/browser/SoundManager.js?");

/***/ },
/* 80 */
/*!****************************************************************!*\
  !*** ./modules/devkit-core/~/jsio/packages/util/underscore.js ***!
  \****************************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;'use strict';\n\nexports.__esModule = true;\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _exports = {};\n\n//     Underscore.js 1.6.0\n//     http://underscorejs.org\n//     (c) 2009-2014 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n//     Underscore may be freely distributed under the MIT license.\n(function () {\n  // Baseline setup\n  // --------------\n  // Establish the root object, `window` in the browser, or `exports` on the server.\n  var root = this;\n\n  // Save the previous value of the `_` variable.\n  var previousUnderscore = root._;\n\n  // Establish the object that gets returned to break out of a loop iteration.\n  var breaker = {};\n\n  // Save bytes in the minified (but not gzipped) version:\n  var ArrayProto = Array.prototype,\n      ObjProto = Object.prototype,\n      FuncProto = Function.prototype;\n\n  // Create quick reference variables for speed access to core prototypes.\n  var push = ArrayProto.push,\n      slice = ArrayProto.slice,\n      concat = ArrayProto.concat,\n      toString = ObjProto.toString,\n      hasOwnProperty = ObjProto.hasOwnProperty;\n\n  // All **ECMAScript 5** native function implementations that we hope to use\n  // are declared here.\n  var nativeForEach = ArrayProto.forEach,\n      nativeMap = ArrayProto.map,\n      nativeReduce = ArrayProto.reduce,\n      nativeReduceRight = ArrayProto.reduceRight,\n      nativeFilter = ArrayProto.filter,\n      nativeEvery = ArrayProto.every,\n      nativeSome = ArrayProto.some,\n      nativeIndexOf = ArrayProto.indexOf,\n      nativeLastIndexOf = ArrayProto.lastIndexOf,\n      nativeIsArray = Array.isArray,\n      nativeKeys = Object.keys,\n      nativeBind = FuncProto.bind;\n\n  // Create a safe reference to the Underscore object for use below.\n  var _ = function _(obj) {\n    if (obj instanceof _) {\n      return obj;\n    }\n    if (!(this instanceof _)) {\n      return new _(obj);\n    }\n    this._wrapped = obj;\n  };\n\n  // Export the Underscore object for **Node.js**, with\n  // backwards-compatibility for the old `require()` API. If we're in\n  // the browser, add `_` as a global object via a string identifier,\n  // for Closure Compiler \"advanced\" mode.\n  if (typeof _exports !== 'undefined') {\n    if (typeof module !== 'undefined' && module.exports) {\n      module.exports = _;\n      _exports = module.exports;\n    }\n    _exports._ = _;\n  } else {\n    root._ = _;\n  }\n\n  // Current version.\n  _.VERSION = '1.6.0';\n\n  // Collection Functions\n  // --------------------\n  // The cornerstone, an `each` implementation, aka `forEach`.\n  // Handles objects with the built-in `forEach`, arrays, and raw objects.\n  // Delegates to **ECMAScript 5**'s native `forEach` if available.\n  var each = _.each = _.forEach = function (obj, iterator, context) {\n    if (obj == null) {\n      return obj;\n    }\n    if (nativeForEach && obj.forEach === nativeForEach) {\n      obj.forEach(iterator, context);\n    } else if (obj.length === +obj.length) {\n      for (var i = 0, length = obj.length; i < length; i++) {\n        if (iterator.call(context, obj[i], i, obj) === breaker) {\n          return;\n        }\n      }\n    } else {\n      var keys = _.keys(obj);\n      for (var i = 0, length = keys.length; i < length; i++) {\n        if (iterator.call(context, obj[keys[i]], keys[i], obj) === breaker) {\n          return;\n        }\n      }\n    }\n    return obj;\n  };\n\n  // Return the results of applying the iterator to each element.\n  // Delegates to **ECMAScript 5**'s native `map` if available.\n  _.map = _.collect = function (obj, iterator, context) {\n    var results = [];\n    if (obj == null) {\n      return results;\n    }\n    if (nativeMap && obj.map === nativeMap) {\n      return obj.map(iterator, context);\n    }\n    each(obj, function (value, index, list) {\n      results.push(iterator.call(context, value, index, list));\n    });\n    return results;\n  };\n\n  var reduceError = 'Reduce of empty array with no initial value';\n\n  // **Reduce** builds up a single result from a list of values, aka `inject`,\n  // or `foldl`. Delegates to **ECMAScript 5**'s native `reduce` if available.\n  _.reduce = _.foldl = _.inject = function (obj, iterator, memo, context) {\n    var initial = arguments.length > 2;\n    if (obj == null) {\n      obj = [];\n    }\n    if (nativeReduce && obj.reduce === nativeReduce) {\n      if (context) {\n        iterator = _.bind(iterator, context);\n      }\n      return initial ? obj.reduce(iterator, memo) : obj.reduce(iterator);\n    }\n    each(obj, function (value, index, list) {\n      if (!initial) {\n        memo = value;\n        initial = true;\n      } else {\n        memo = iterator.call(context, memo, value, index, list);\n      }\n    });\n    if (!initial) {\n      throw new TypeError(reduceError);\n    }\n    return memo;\n  };\n\n  // The right-associative version of reduce, also known as `foldr`.\n  // Delegates to **ECMAScript 5**'s native `reduceRight` if available.\n  _.reduceRight = _.foldr = function (obj, iterator, memo, context) {\n    var initial = arguments.length > 2;\n    if (obj == null) {\n      obj = [];\n    }\n    if (nativeReduceRight && obj.reduceRight === nativeReduceRight) {\n      if (context) {\n        iterator = _.bind(iterator, context);\n      }\n      return initial ? obj.reduceRight(iterator, memo) : obj.reduceRight(iterator);\n    }\n    var length = obj.length;\n    if (length !== +length) {\n      var keys = _.keys(obj);\n      length = keys.length;\n    }\n    each(obj, function (value, index, list) {\n      index = keys ? keys[--length] : --length;\n      if (!initial) {\n        memo = obj[index];\n        initial = true;\n      } else {\n        memo = iterator.call(context, memo, obj[index], index, list);\n      }\n    });\n    if (!initial) {\n      throw new TypeError(reduceError);\n    }\n    return memo;\n  };\n\n  // Return the first value which passes a truth test. Aliased as `detect`.\n  _.find = _.detect = function (obj, predicate, context) {\n    var result;\n    any(obj, function (value, index, list) {\n      if (predicate.call(context, value, index, list)) {\n        result = value;\n        return true;\n      }\n    });\n    return result;\n  };\n\n  // Return all the elements that pass a truth test.\n  // Delegates to **ECMAScript 5**'s native `filter` if available.\n  // Aliased as `select`.\n  _.filter = _.select = function (obj, predicate, context) {\n    var results = [];\n    if (obj == null) {\n      return results;\n    }\n    if (nativeFilter && obj.filter === nativeFilter) {\n      return obj.filter(predicate, context);\n    }\n    each(obj, function (value, index, list) {\n      if (predicate.call(context, value, index, list)) {\n        results.push(value);\n      }\n    });\n    return results;\n  };\n\n  // Return all the elements for which a truth test fails.\n  _.reject = function (obj, predicate, context) {\n    return _.filter(obj, function (value, index, list) {\n      return !predicate.call(context, value, index, list);\n    }, context);\n  };\n\n  // Determine whether all of the elements match a truth test.\n  // Delegates to **ECMAScript 5**'s native `every` if available.\n  // Aliased as `all`.\n  _.every = _.all = function (obj, predicate, context) {\n    predicate || (predicate = _.identity);\n    var result = true;\n    if (obj == null) {\n      return result;\n    }\n    if (nativeEvery && obj.every === nativeEvery) {\n      return obj.every(predicate, context);\n    }\n    each(obj, function (value, index, list) {\n      if (!(result = result && predicate.call(context, value, index, list))) {\n        return breaker;\n      }\n    });\n    return !!result;\n  };\n\n  // Determine if at least one element in the object matches a truth test.\n  // Delegates to **ECMAScript 5**'s native `some` if available.\n  // Aliased as `any`.\n  var any = _.some = _.any = function (obj, predicate, context) {\n    predicate || (predicate = _.identity);\n    var result = false;\n    if (obj == null) {\n      return result;\n    }\n    if (nativeSome && obj.some === nativeSome) {\n      return obj.some(predicate, context);\n    }\n    each(obj, function (value, index, list) {\n      if (result || (result = predicate.call(context, value, index, list))) {\n        return breaker;\n      }\n    });\n    return !!result;\n  };\n\n  // Determine if the array or object contains a given value (using `===`).\n  // Aliased as `include`.\n  _.contains = _.include = function (obj, target) {\n    if (obj == null) {\n      return false;\n    }\n    if (nativeIndexOf && obj.indexOf === nativeIndexOf) {\n      return obj.indexOf(target) != -1;\n    }\n    return any(obj, function (value) {\n      return value === target;\n    });\n  };\n\n  // Invoke a method (with arguments) on every item in a collection.\n  _.invoke = function (obj, method) {\n    var args = slice.call(arguments, 2);\n    var isFunc = _.isFunction(method);\n    return _.map(obj, function (value) {\n      return (isFunc ? method : value[method]).apply(value, args);\n    });\n  };\n\n  // Convenience version of a common use case of `map`: fetching a property.\n  _.pluck = function (obj, key) {\n    return _.map(obj, _.property(key));\n  };\n\n  // Convenience version of a common use case of `filter`: selecting only objects\n  // containing specific `key:value` pairs.\n  _.where = function (obj, attrs) {\n    return _.filter(obj, _.matches(attrs));\n  };\n\n  // Convenience version of a common use case of `find`: getting the first object\n  // containing specific `key:value` pairs.\n  _.findWhere = function (obj, attrs) {\n    return _.find(obj, _.matches(attrs));\n  };\n\n  // Return the maximum element or (element-based computation).\n  // Can't optimize arrays of integers longer than 65,535 elements.\n  // See [WebKit Bug 80797](https://bugs.webkit.org/show_bug.cgi?id=80797)\n  _.max = function (obj, iterator, context) {\n    if (!iterator && _.isArray(obj) && obj[0] === +obj[0] && obj.length < 65535) {\n      return Math.max.apply(Math, obj);\n    }\n    var result = -Infinity,\n        lastComputed = -Infinity;\n    each(obj, function (value, index, list) {\n      var computed = iterator ? iterator.call(context, value, index, list) : value;\n      if (computed > lastComputed) {\n        result = value;\n        lastComputed = computed;\n      }\n    });\n    return result;\n  };\n\n  // Return the minimum element (or element-based computation).\n  _.min = function (obj, iterator, context) {\n    if (!iterator && _.isArray(obj) && obj[0] === +obj[0] && obj.length < 65535) {\n      return Math.min.apply(Math, obj);\n    }\n    var result = Infinity,\n        lastComputed = Infinity;\n    each(obj, function (value, index, list) {\n      var computed = iterator ? iterator.call(context, value, index, list) : value;\n      if (computed < lastComputed) {\n        result = value;\n        lastComputed = computed;\n      }\n    });\n    return result;\n  };\n\n  // Shuffle an array, using the modern version of the\n  // [Fisher-Yates shuffle](http://en.wikipedia.org/wiki/Fisher–Yates_shuffle).\n  _.shuffle = function (obj) {\n    var rand;\n    var index = 0;\n    var shuffled = [];\n    each(obj, function (value) {\n      rand = _.random(index++);\n      shuffled[index - 1] = shuffled[rand];\n      shuffled[rand] = value;\n    });\n    return shuffled;\n  };\n\n  // Sample **n** random values from a collection.\n  // If **n** is not specified, returns a single random element.\n  // The internal `guard` argument allows it to work with `map`.\n  _.sample = function (obj, n, guard) {\n    if (n == null || guard) {\n      if (obj.length !== +obj.length) {\n        obj = _.values(obj);\n      }\n      return obj[_.random(obj.length - 1)];\n    }\n    return _.shuffle(obj).slice(0, Math.max(0, n));\n  };\n\n  // An internal function to generate lookup iterators.\n  var lookupIterator = function lookupIterator(value) {\n    if (value == null) {\n      return _.identity;\n    }\n    if (_.isFunction(value)) {\n      return value;\n    }\n    return _.property(value);\n  };\n\n  // Sort the object's values by a criterion produced by an iterator.\n  _.sortBy = function (obj, iterator, context) {\n    iterator = lookupIterator(iterator);\n    return _.pluck(_.map(obj, function (value, index, list) {\n      return {\n        value: value,\n        index: index,\n        criteria: iterator.call(context, value, index, list)\n      };\n    }).sort(function (left, right) {\n      var a = left.criteria;\n      var b = right.criteria;\n      if (a !== b) {\n        if (a > b || a === void 0) {\n          return 1;\n        }\n        if (a < b || b === void 0) {\n          return -1;\n        }\n      }\n      return left.index - right.index;\n    }), 'value');\n  };\n\n  // An internal function used for aggregate \"group by\" operations.\n  var group = function group(behavior) {\n    return function (obj, iterator, context) {\n      var result = {};\n      iterator = lookupIterator(iterator);\n      each(obj, function (value, index) {\n        var key = iterator.call(context, value, index, obj);\n        behavior(result, key, value);\n      });\n      return result;\n    };\n  };\n\n  // Groups the object's values by a criterion. Pass either a string attribute\n  // to group by, or a function that returns the criterion.\n  _.groupBy = group(function (result, key, value) {\n    _.has(result, key) ? result[key].push(value) : result[key] = [value];\n  });\n\n  // Indexes the object's values by a criterion, similar to `groupBy`, but for\n  // when you know that your index values will be unique.\n  _.indexBy = group(function (result, key, value) {\n    result[key] = value;\n  });\n\n  // Counts instances of an object that group by a certain criterion. Pass\n  // either a string attribute to count by, or a function that returns the\n  // criterion.\n  _.countBy = group(function (result, key) {\n    _.has(result, key) ? result[key]++ : result[key] = 1;\n  });\n\n  // Use a comparator function to figure out the smallest index at which\n  // an object should be inserted so as to maintain order. Uses binary search.\n  _.sortedIndex = function (array, obj, iterator, context) {\n    iterator = lookupIterator(iterator);\n    var value = iterator.call(context, obj);\n    var low = 0,\n        high = array.length;\n    while (low < high) {\n      var mid = low + high >>> 1;\n      iterator.call(context, array[mid]) < value ? low = mid + 1 : high = mid;\n    }\n    return low;\n  };\n\n  // Safely create a real, live array from anything iterable.\n  _.toArray = function (obj) {\n    if (!obj) {\n      return [];\n    }\n    if (_.isArray(obj)) {\n      return slice.call(obj);\n    }\n    if (obj.length === +obj.length) {\n      return _.map(obj, _.identity);\n    }\n    return _.values(obj);\n  };\n\n  // Return the number of elements in an object.\n  _.size = function (obj) {\n    if (obj == null) {\n      return 0;\n    }\n    return obj.length === +obj.length ? obj.length : _.keys(obj).length;\n  };\n\n  // Array Functions\n  // ---------------\n  // Get the first element of an array. Passing **n** will return the first N\n  // values in the array. Aliased as `head` and `take`. The **guard** check\n  // allows it to work with `_.map`.\n  _.first = _.head = _.take = function (array, n, guard) {\n    if (array == null) {\n      return void 0;\n    }\n    if (n == null || guard) {\n      return array[0];\n    }\n    if (n < 0) {\n      return [];\n    }\n    return slice.call(array, 0, n);\n  };\n\n  // Returns everything but the last entry of the array. Especially useful on\n  // the arguments object. Passing **n** will return all the values in\n  // the array, excluding the last N. The **guard** check allows it to work with\n  // `_.map`.\n  _.initial = function (array, n, guard) {\n    return slice.call(array, 0, array.length - (n == null || guard ? 1 : n));\n  };\n\n  // Get the last element of an array. Passing **n** will return the last N\n  // values in the array. The **guard** check allows it to work with `_.map`.\n  _.last = function (array, n, guard) {\n    if (array == null) {\n      return void 0;\n    }\n    if (n == null || guard) {\n      return array[array.length - 1];\n    }\n    return slice.call(array, Math.max(array.length - n, 0));\n  };\n\n  // Returns everything but the first entry of the array. Aliased as `tail` and `drop`.\n  // Especially useful on the arguments object. Passing an **n** will return\n  // the rest N values in the array. The **guard**\n  // check allows it to work with `_.map`.\n  _.rest = _.tail = _.drop = function (array, n, guard) {\n    return slice.call(array, n == null || guard ? 1 : n);\n  };\n\n  // Trim out all falsy values from an array.\n  _.compact = function (array) {\n    return _.filter(array, _.identity);\n  };\n\n  // Internal implementation of a recursive `flatten` function.\n  var flatten = function flatten(input, shallow, output) {\n    if (shallow && _.every(input, _.isArray)) {\n      return concat.apply(output, input);\n    }\n    each(input, function (value) {\n      if (_.isArray(value) || _.isArguments(value)) {\n        shallow ? push.apply(output, value) : flatten(value, shallow, output);\n      } else {\n        output.push(value);\n      }\n    });\n    return output;\n  };\n\n  // Flatten out an array, either recursively (by default), or just one level.\n  _.flatten = function (array, shallow) {\n    return flatten(array, shallow, []);\n  };\n\n  // Return a version of the array that does not contain the specified value(s).\n  _.without = function (array) {\n    return _.difference(array, slice.call(arguments, 1));\n  };\n\n  // Split an array into two arrays: one whose elements all satisfy the given\n  // predicate, and one whose elements all do not satisfy the predicate.\n  _.partition = function (array, predicate) {\n    var pass = [],\n        fail = [];\n    each(array, function (elem) {\n      (predicate(elem) ? pass : fail).push(elem);\n    });\n    return [pass, fail];\n  };\n\n  // Produce a duplicate-free version of the array. If the array has already\n  // been sorted, you have the option of using a faster algorithm.\n  // Aliased as `unique`.\n  _.uniq = _.unique = function (array, isSorted, iterator, context) {\n    if (_.isFunction(isSorted)) {\n      context = iterator;\n      iterator = isSorted;\n      isSorted = false;\n    }\n    var initial = iterator ? _.map(array, iterator, context) : array;\n    var results = [];\n    var seen = [];\n    each(initial, function (value, index) {\n      if (isSorted ? !index || seen[seen.length - 1] !== value : !_.contains(seen, value)) {\n        seen.push(value);\n        results.push(array[index]);\n      }\n    });\n    return results;\n  };\n\n  // Produce an array that contains the union: each distinct element from all of\n  // the passed-in arrays.\n  _.union = function () {\n    return _.uniq(_.flatten(arguments, true));\n  };\n\n  // Produce an array that contains every item shared between all the\n  // passed-in arrays.\n  _.intersection = function (array) {\n    var rest = slice.call(arguments, 1);\n    return _.filter(_.uniq(array), function (item) {\n      return _.every(rest, function (other) {\n        return _.contains(other, item);\n      });\n    });\n  };\n\n  // Take the difference between one array and a number of other arrays.\n  // Only the elements present in just the first array will remain.\n  _.difference = function (array) {\n    var rest = concat.apply(ArrayProto, slice.call(arguments, 1));\n    return _.filter(array, function (value) {\n      return !_.contains(rest, value);\n    });\n  };\n\n  // Zip together multiple lists into a single array -- elements that share\n  // an index go together.\n  _.zip = function () {\n    var length = _.max(_.pluck(arguments, 'length').concat(0));\n    var results = new Array(length);\n    for (var i = 0; i < length; i++) {\n      results[i] = _.pluck(arguments, '' + i);\n    }\n    return results;\n  };\n\n  // Converts lists into objects. Pass either a single array of `[key, value]`\n  // pairs, or two parallel arrays of the same length -- one of keys, and one of\n  // the corresponding values.\n  _.object = function (list, values) {\n    if (list == null) {\n      return {};\n    }\n    var result = {};\n    for (var i = 0, length = list.length; i < length; i++) {\n      if (values) {\n        result[list[i]] = values[i];\n      } else {\n        result[list[i][0]] = list[i][1];\n      }\n    }\n    return result;\n  };\n\n  // If the browser doesn't supply us with indexOf (I'm looking at you, **MSIE**),\n  // we need this function. Return the position of the first occurrence of an\n  // item in an array, or -1 if the item is not included in the array.\n  // Delegates to **ECMAScript 5**'s native `indexOf` if available.\n  // If the array is large and already in sort order, pass `true`\n  // for **isSorted** to use binary search.\n  _.indexOf = function (array, item, isSorted) {\n    if (array == null) {\n      return -1;\n    }\n    var i = 0,\n        length = array.length;\n    if (isSorted) {\n      if (typeof isSorted == 'number') {\n        i = isSorted < 0 ? Math.max(0, length + isSorted) : isSorted;\n      } else {\n        i = _.sortedIndex(array, item);\n        return array[i] === item ? i : -1;\n      }\n    }\n    if (nativeIndexOf && array.indexOf === nativeIndexOf) {\n      return array.indexOf(item, isSorted);\n    }\n    for (; i < length; i++) {\n      if (array[i] === item) {\n        return i;\n      }\n    }\n    return -1;\n  };\n\n  // Delegates to **ECMAScript 5**'s native `lastIndexOf` if available.\n  _.lastIndexOf = function (array, item, from) {\n    if (array == null) {\n      return -1;\n    }\n    var hasIndex = from != null;\n    if (nativeLastIndexOf && array.lastIndexOf === nativeLastIndexOf) {\n      return hasIndex ? array.lastIndexOf(item, from) : array.lastIndexOf(item);\n    }\n    var i = hasIndex ? from : array.length;\n    while (i--) {\n      if (array[i] === item) {\n        return i;\n      }\n    }\n    return -1;\n  };\n\n  // Generate an integer Array containing an arithmetic progression. A port of\n  // the native Python `range()` function. See\n  // [the Python documentation](http://docs.python.org/library/functions.html#range).\n  _.range = function (start, stop, step) {\n    if (arguments.length <= 1) {\n      stop = start || 0;\n      start = 0;\n    }\n    step = arguments[2] || 1;\n\n    var length = Math.max(Math.ceil((stop - start) / step), 0);\n    var idx = 0;\n    var range = new Array(length);\n\n    while (idx < length) {\n      range[idx++] = start;\n      start += step;\n    }\n\n    return range;\n  };\n\n  // Function (ahem) Functions\n  // ------------------\n  // Reusable constructor function for prototype setting.\n  var ctor = function ctor() {};\n\n  // Create a function bound to a given object (assigning `this`, and arguments,\n  // optionally). Delegates to **ECMAScript 5**'s native `Function.bind` if\n  // available.\n  _.bind = function (func, context) {\n    var args, _bound;\n    if (nativeBind && func.bind === nativeBind) {\n      return nativeBind.apply(func, slice.call(arguments, 1));\n    }\n    if (!_.isFunction(func)) {\n      throw new TypeError();\n    }\n    args = slice.call(arguments, 2);\n    return _bound = function bound() {\n      if (!(this instanceof _bound)) {\n        return func.apply(context, args.concat(slice.call(arguments)));\n      }\n      ctor.prototype = func.prototype;\n      var self = new ctor();\n      ctor.prototype = null;\n      var result = func.apply(self, args.concat(slice.call(arguments)));\n      if (Object(result) === result) {\n        return result;\n      }\n      return self;\n    };\n  };\n\n  // Partially apply a function by creating a version that has had some of its\n  // arguments pre-filled, without changing its dynamic `this` context. _ acts\n  // as a placeholder, allowing any combination of arguments to be pre-filled.\n  _.partial = function (func) {\n    var boundArgs = slice.call(arguments, 1);\n    return function () {\n      var position = 0;\n      var args = boundArgs.slice();\n      for (var i = 0, length = args.length; i < length; i++) {\n        if (args[i] === _) {\n          args[i] = arguments[position++];\n        }\n      }\n      while (position < arguments.length) {\n        args.push(arguments[position++]);\n      }\n      return func.apply(this, args);\n    };\n  };\n\n  // Bind a number of an object's methods to that object. Remaining arguments\n  // are the method names to be bound. Useful for ensuring that all callbacks\n  // defined on an object belong to it.\n  _.bindAll = function (obj) {\n    var funcs = slice.call(arguments, 1);\n    if (funcs.length === 0) {\n      throw new Error('bindAll must be passed function names');\n    }\n    each(funcs, function (f) {\n      obj[f] = _.bind(obj[f], obj);\n    });\n    return obj;\n  };\n\n  // Memoize an expensive function by storing its results.\n  _.memoize = function (func, hasher) {\n    var memo = {};\n    hasher || (hasher = _.identity);\n    return function () {\n      var key = hasher.apply(this, arguments);\n      return _.has(memo, key) ? memo[key] : memo[key] = func.apply(this, arguments);\n    };\n  };\n\n  // Delays a function for the given number of milliseconds, and then calls\n  // it with the arguments supplied.\n  _.delay = function (func, wait) {\n    var args = slice.call(arguments, 2);\n    return setTimeout(function () {\n      return func.apply(null, args);\n    }, wait);\n  };\n\n  // Defers a function, scheduling it to run after the current call stack has\n  // cleared.\n  _.defer = function (func) {\n    return _.delay.apply(_, [func, 1].concat(slice.call(arguments, 1)));\n  };\n\n  // Returns a function, that, when invoked, will only be triggered at most once\n  // during a given window of time. Normally, the throttled function will run\n  // as much as it can, without ever going more than once per `wait` duration;\n  // but if you'd like to disable the execution on the leading edge, pass\n  // `{leading: false}`. To disable execution on the trailing edge, ditto.\n  _.throttle = function (func, wait, options) {\n    var context, args, result;\n    var timeout = null;\n    var previous = 0;\n    options || (options = {});\n    var later = function later() {\n      previous = options.leading === false ? 0 : _.now();\n      timeout = null;\n      result = func.apply(context, args);\n      context = args = null;\n    };\n    return function () {\n      var now = _.now();\n      if (!previous && options.leading === false) {\n        previous = now;\n      }\n      var remaining = wait - (now - previous);\n      context = this;\n      args = arguments;\n      if (remaining <= 0) {\n        clearTimeout(timeout);\n        timeout = null;\n        previous = now;\n        result = func.apply(context, args);\n        context = args = null;\n      } else if (!timeout && options.trailing !== false) {\n        timeout = setTimeout(later, remaining);\n      }\n      return result;\n    };\n  };\n\n  // Returns a function, that, as long as it continues to be invoked, will not\n  // be triggered. The function will be called after it stops being called for\n  // N milliseconds. If `immediate` is passed, trigger the function on the\n  // leading edge, instead of the trailing.\n  _.debounce = function (func, wait, immediate) {\n    var timeout, args, context, timestamp, result;\n\n    var later = function later() {\n      var last = _.now() - timestamp;\n      if (last < wait) {\n        timeout = setTimeout(later, wait - last);\n      } else {\n        timeout = null;\n        if (!immediate) {\n          result = func.apply(context, args);\n          context = args = null;\n        }\n      }\n    };\n\n    return function () {\n      context = this;\n      args = arguments;\n      timestamp = _.now();\n      var callNow = immediate && !timeout;\n      if (!timeout) {\n        timeout = setTimeout(later, wait);\n      }\n      if (callNow) {\n        result = func.apply(context, args);\n        context = args = null;\n      }\n\n      return result;\n    };\n  };\n\n  // Returns a function that will be executed at most one time, no matter how\n  // often you call it. Useful for lazy initialization.\n  _.once = function (func) {\n    var ran = false,\n        memo;\n    return function () {\n      if (ran) {\n        return memo;\n      }\n      ran = true;\n      memo = func.apply(this, arguments);\n      func = null;\n      return memo;\n    };\n  };\n\n  // Returns the first function passed as an argument to the second,\n  // allowing you to adjust arguments, run code before and after, and\n  // conditionally execute the original function.\n  _.wrap = function (func, wrapper) {\n    return _.partial(wrapper, func);\n  };\n\n  // Returns a function that is the composition of a list of functions, each\n  // consuming the return value of the function that follows.\n  _.compose = function () {\n    var funcs = arguments;\n    return function () {\n      var args = arguments;\n      for (var i = funcs.length - 1; i >= 0; i--) {\n        args = [funcs[i].apply(this, args)];\n      }\n      return args[0];\n    };\n  };\n\n  // Returns a function that will only be executed after being called N times.\n  _.after = function (times, func) {\n    return function () {\n      if (--times < 1) {\n        return func.apply(this, arguments);\n      }\n    };\n  };\n\n  // Object Functions\n  // ----------------\n  // Retrieve the names of an object's properties.\n  // Delegates to **ECMAScript 5**'s native `Object.keys`\n  _.keys = function (obj) {\n    if (!_.isObject(obj)) {\n      return [];\n    }\n    if (nativeKeys) {\n      return nativeKeys(obj);\n    }\n    var keys = [];\n    for (var key in obj) {\n      if (_.has(obj, key)) {\n        keys.push(key);\n      }\n    }\n    return keys;\n  };\n\n  // Retrieve the values of an object's properties.\n  _.values = function (obj) {\n    var keys = _.keys(obj);\n    var length = keys.length;\n    var values = new Array(length);\n    for (var i = 0; i < length; i++) {\n      values[i] = obj[keys[i]];\n    }\n    return values;\n  };\n\n  // Convert an object into a list of `[key, value]` pairs.\n  _.pairs = function (obj) {\n    var keys = _.keys(obj);\n    var length = keys.length;\n    var pairs = new Array(length);\n    for (var i = 0; i < length; i++) {\n      pairs[i] = [keys[i], obj[keys[i]]];\n    }\n    return pairs;\n  };\n\n  // Invert the keys and values of an object. The values must be serializable.\n  _.invert = function (obj) {\n    var result = {};\n    var keys = _.keys(obj);\n    for (var i = 0, length = keys.length; i < length; i++) {\n      result[obj[keys[i]]] = keys[i];\n    }\n    return result;\n  };\n\n  // Return a sorted list of the function names available on the object.\n  // Aliased as `methods`\n  _.functions = _.methods = function (obj) {\n    var names = [];\n    for (var key in obj) {\n      if (_.isFunction(obj[key])) {\n        names.push(key);\n      }\n    }\n    return names.sort();\n  };\n\n  // Extend a given object with all the properties in passed-in object(s).\n  _.extend = function (obj) {\n    each(slice.call(arguments, 1), function (source) {\n      if (source) {\n        for (var prop in source) {\n          obj[prop] = source[prop];\n        }\n      }\n    });\n    return obj;\n  };\n\n  // Return a copy of the object only containing the whitelisted properties.\n  _.pick = function (obj) {\n    var copy = {};\n    var keys = concat.apply(ArrayProto, slice.call(arguments, 1));\n    each(keys, function (key) {\n      if (key in obj) {\n        copy[key] = obj[key];\n      }\n    });\n    return copy;\n  };\n\n  // Return a copy of the object without the blacklisted properties.\n  _.omit = function (obj) {\n    var copy = {};\n    var keys = concat.apply(ArrayProto, slice.call(arguments, 1));\n    for (var key in obj) {\n      if (!_.contains(keys, key)) {\n        copy[key] = obj[key];\n      }\n    }\n    return copy;\n  };\n\n  // Fill in a given object with default properties.\n  _.defaults = function (obj) {\n    each(slice.call(arguments, 1), function (source) {\n      if (source) {\n        for (var prop in source) {\n          if (obj[prop] === void 0) {\n            obj[prop] = source[prop];\n          }\n        }\n      }\n    });\n    return obj;\n  };\n\n  // Create a (shallow-cloned) duplicate of an object.\n  _.clone = function (obj) {\n    if (!_.isObject(obj)) {\n      return obj;\n    }\n    return _.isArray(obj) ? obj.slice() : _.extend({}, obj);\n  };\n\n  // Invokes interceptor with the obj, and then returns obj.\n  // The primary purpose of this method is to \"tap into\" a method chain, in\n  // order to perform operations on intermediate results within the chain.\n  _.tap = function (obj, interceptor) {\n    interceptor(obj);\n    return obj;\n  };\n\n  // Internal recursive comparison function for `isEqual`.\n  var eq = function eq(a, b, aStack, bStack) {\n    // Identical objects are equal. `0 === -0`, but they aren't identical.\n    // See the [Harmony `egal` proposal](http://wiki.ecmascript.org/doku.php?id=harmony:egal).\n    if (a === b) {\n      return a !== 0 || 1 / a == 1 / b;\n    }\n    // A strict comparison is necessary because `null == undefined`.\n    if (a == null || b == null) {\n      return a === b;\n    }\n    // Unwrap any wrapped objects.\n    if (a instanceof _) {\n      a = a._wrapped;\n    }\n    if (b instanceof _) {\n      b = b._wrapped;\n    }\n    // Compare `[[Class]]` names.\n    var className = toString.call(a);\n    if (className != toString.call(b)) {\n      return false;\n    }\n    switch (className) {\n      // Strings, numbers, dates, and booleans are compared by value.\n      case '[object String]':\n        // Primitives and their corresponding object wrappers are equivalent; thus, `\"5\"` is\n        // equivalent to `new String(\"5\")`.\n        return a == String(b);\n      case '[object Number]':\n        // `NaN`s are equivalent, but non-reflexive. An `egal` comparison is performed for\n        // other numeric values.\n        return a != +a ? b != +b : a == 0 ? 1 / a == 1 / b : a == +b;\n      case '[object Date]':\n      case '[object Boolean]':\n        // Coerce dates and booleans to numeric primitive values. Dates are compared by their\n        // millisecond representations. Note that invalid dates with millisecond representations\n        // of `NaN` are not equivalent.\n        return +a == +b;\n      // RegExps are compared by their source patterns and flags.\n      case '[object RegExp]':\n        return a.source == b.source && a.global == b.global && a.multiline == b.multiline && a.ignoreCase == b.ignoreCase;\n    }\n    if ((typeof a === 'undefined' ? 'undefined' : _typeof(a)) != 'object' || (typeof b === 'undefined' ? 'undefined' : _typeof(b)) != 'object') {\n      return false;\n    }\n    // Assume equality for cyclic structures. The algorithm for detecting cyclic\n    // structures is adapted from ES 5.1 section 15.12.3, abstract operation `JO`.\n    var length = aStack.length;\n    while (length--) {\n      // Linear search. Performance is inversely proportional to the number of\n      // unique nested structures.\n      if (aStack[length] == a) {\n        return bStack[length] == b;\n      }\n    }\n    // Objects with different constructors are not equivalent, but `Object`s\n    // from different frames are.\n    var aCtor = a.constructor,\n        bCtor = b.constructor;\n    if (aCtor !== bCtor && !(_.isFunction(aCtor) && aCtor instanceof aCtor && _.isFunction(bCtor) && bCtor instanceof bCtor) && 'constructor' in a && 'constructor' in b) {\n      return false;\n    }\n    // Add the first object to the stack of traversed objects.\n    aStack.push(a);\n    bStack.push(b);\n    var size = 0,\n        result = true;\n    // Recursively compare objects and arrays.\n    if (className == '[object Array]') {\n      // Compare array lengths to determine if a deep comparison is necessary.\n      size = a.length;\n      result = size == b.length;\n      if (result) {\n        // Deep compare the contents, ignoring non-numeric properties.\n        while (size--) {\n          if (!(result = eq(a[size], b[size], aStack, bStack))) {\n            break;\n          }\n        }\n      }\n    } else {\n      // Deep compare objects.\n      for (var key in a) {\n        if (_.has(a, key)) {\n          // Count the expected number of properties.\n          size++;\n          // Deep compare each member.\n          if (!(result = _.has(b, key) && eq(a[key], b[key], aStack, bStack))) {\n            break;\n          }\n        }\n      }\n      // Ensure that both objects contain the same number of properties.\n      if (result) {\n        for (key in b) {\n          if (_.has(b, key) && !size--) {\n            break;\n          }\n        }\n        result = !size;\n      }\n    }\n    // Remove the first object from the stack of traversed objects.\n    aStack.pop();\n    bStack.pop();\n    return result;\n  };\n\n  // Perform a deep comparison to check if two objects are equal.\n  _.isEqual = function (a, b) {\n    return eq(a, b, [], []);\n  };\n\n  // Is a given array, string, or object empty?\n  // An \"empty\" object has no enumerable own-properties.\n  _.isEmpty = function (obj) {\n    if (obj == null) {\n      return true;\n    }\n    if (_.isArray(obj) || _.isString(obj)) {\n      return obj.length === 0;\n    }\n    for (var key in obj) {\n      if (_.has(obj, key)) {\n        return false;\n      }\n    }\n    return true;\n  };\n\n  // Is a given value a DOM element?\n  _.isElement = function (obj) {\n    return !!(obj && obj.nodeType === 1);\n  };\n\n  // Is a given value an array?\n  // Delegates to ECMA5's native Array.isArray\n  _.isArray = nativeIsArray || function (obj) {\n    return toString.call(obj) == '[object Array]';\n  };\n\n  // Is a given variable an object?\n  _.isObject = function (obj) {\n    return obj === Object(obj);\n  };\n\n  // Add some isType methods: isArguments, isFunction, isString, isNumber, isDate, isRegExp.\n  each(['Arguments', 'Function', 'String', 'Number', 'Date', 'RegExp'], function (name) {\n    _['is' + name] = function (obj) {\n      return toString.call(obj) == '[object ' + name + ']';\n    };\n  });\n\n  // Define a fallback version of the method in browsers (ahem, IE), where\n  // there isn't any inspectable \"Arguments\" type.\n  if (!_.isArguments(arguments)) {\n    _.isArguments = function (obj) {\n      return !!(obj && _.has(obj, 'callee'));\n    };\n  }\n\n  // Optimize `isFunction` if appropriate.\n  if (true) {\n    _.isFunction = function (obj) {\n      return typeof obj === 'function';\n    };\n  }\n\n  // Is a given object a finite number?\n  _.isFinite = function (obj) {\n    return isFinite(obj) && !isNaN(parseFloat(obj));\n  };\n\n  // Is the given value `NaN`? (NaN is the only number which does not equal itself).\n  _.isNaN = function (obj) {\n    return _.isNumber(obj) && obj != +obj;\n  };\n\n  // Is a given value a boolean?\n  _.isBoolean = function (obj) {\n    return obj === true || obj === false || toString.call(obj) == '[object Boolean]';\n  };\n\n  // Is a given value equal to null?\n  _.isNull = function (obj) {\n    return obj === null;\n  };\n\n  // Is a given variable undefined?\n  _.isUndefined = function (obj) {\n    return obj === void 0;\n  };\n\n  // Shortcut function for checking if an object has a given property directly\n  // on itself (in other words, not on a prototype).\n  _.has = function (obj, key) {\n    return hasOwnProperty.call(obj, key);\n  };\n\n  // Utility Functions\n  // -----------------\n  // Run Underscore.js in *noConflict* mode, returning the `_` variable to its\n  // previous owner. Returns a reference to the Underscore object.\n  _.noConflict = function () {\n    root._ = previousUnderscore;\n    return this;\n  };\n\n  // Keep the identity function around for default iterators.\n  _.identity = function (value) {\n    return value;\n  };\n\n  _.constant = function (value) {\n    return function () {\n      return value;\n    };\n  };\n\n  _.property = function (key) {\n    return function (obj) {\n      return obj[key];\n    };\n  };\n\n  // Returns a predicate for checking whether an object has a given set of `key:value` pairs.\n  _.matches = function (attrs) {\n    return function (obj) {\n      if (obj === attrs) {\n        return true;\n      }\n      // avoid comparing an object to itself.\n      for (var key in attrs) {\n        if (attrs[key] !== obj[key]) {\n          return false;\n        }\n      }\n      return true;\n    };\n  };\n\n  // Run a function **n** times.\n  _.times = function (n, iterator, context) {\n    var accum = Array(Math.max(0, n));\n    for (var i = 0; i < n; i++) {\n      accum[i] = iterator.call(context, i);\n    }\n    return accum;\n  };\n\n  // Return a random integer between min and max (inclusive).\n  _.random = function (min, max) {\n    if (max == null) {\n      max = min;\n      min = 0;\n    }\n    return min + Math.floor(Math.random() * (max - min + 1));\n  };\n\n  // A (possibly faster) way to get the current timestamp as an integer.\n  _.now = Date.now || function () {\n    return new Date().getTime();\n  };\n\n  // List of HTML entities for escaping.\n  var entityMap = {\n    escape: {\n      '&': '&amp;',\n      '<': '&lt;',\n      '>': '&gt;',\n      '\"': '&quot;',\n      '\\'': '&#x27;'\n    }\n  };\n  entityMap.unescape = _.invert(entityMap.escape);\n\n  // Regexes containing the keys and values listed immediately above.\n  var entityRegexes = {\n    escape: new RegExp('[' + _.keys(entityMap.escape).join('') + ']', 'g'),\n    unescape: new RegExp('(' + _.keys(entityMap.unescape).join('|') + ')', 'g')\n  };\n\n  // Functions for escaping and unescaping strings to/from HTML interpolation.\n  _.each(['escape', 'unescape'], function (method) {\n    _[method] = function (string) {\n      if (string == null) {\n        return '';\n      }\n      return ('' + string).replace(entityRegexes[method], function (match) {\n        return entityMap[method][match];\n      });\n    };\n  });\n\n  // If the value of the named `property` is a function then invoke it with the\n  // `object` as context; otherwise, return it.\n  _.result = function (object, property) {\n    if (object == null) {\n      return void 0;\n    }\n    var value = object[property];\n    return _.isFunction(value) ? value.call(object) : value;\n  };\n\n  // Add your own custom functions to the Underscore object.\n  _.mixin = function (obj) {\n    each(_.functions(obj), function (name) {\n      var func = _[name] = obj[name];\n      _.prototype[name] = function () {\n        var args = [this._wrapped];\n        push.apply(args, arguments);\n        return result.call(this, func.apply(_, args));\n      };\n    });\n  };\n\n  // Generate a unique integer id (unique within the entire client session).\n  // Useful for temporary DOM ids.\n  var idCounter = 0;\n  _.uniqueId = function (prefix) {\n    var id = ++idCounter + '';\n    return prefix ? prefix + id : id;\n  };\n\n  // By default, Underscore uses ERB-style template delimiters, change the\n  // following template settings to use alternative delimiters.\n  _.templateSettings = {\n    evaluate: /<%([\\s\\S]+?)%>/g,\n    interpolate: /<%=([\\s\\S]+?)%>/g,\n    escape: /<%-([\\s\\S]+?)%>/g\n  };\n\n  // When customizing `templateSettings`, if you don't want to define an\n  // interpolation, evaluation or escaping regex, we need one that is\n  // guaranteed not to match.\n  var noMatch = /(.)^/;\n\n  // Certain characters need to be escaped so that they can be put into a\n  // string literal.\n  var escapes = {\n    '\\'': '\\'',\n    '\\\\': '\\\\',\n    '\\r': 'r',\n    '\\n': 'n',\n    '\\t': 't',\n    '\\u2028': 'u2028',\n    '\\u2029': 'u2029'\n  };\n\n  var escaper = /\\\\|'|\\r|\\n|\\t|\\u2028|\\u2029/g;\n\n  // JavaScript micro-templating, similar to John Resig's implementation.\n  // Underscore templating handles arbitrary delimiters, preserves whitespace,\n  // and correctly escapes quotes within interpolated code.\n  _.template = function (text, data, settings) {\n    var render;\n    settings = _.defaults({}, settings, _.templateSettings);\n\n    // Combine delimiters into one regular expression via alternation.\n    var matcher = new RegExp([(settings.escape || noMatch).source, (settings.interpolate || noMatch).source, (settings.evaluate || noMatch).source].join('|') + '|$', 'g');\n\n    // Compile the template source, escaping string literals appropriately.\n    var index = 0;\n    var source = '__p+=\\'';\n    text.replace(matcher, function (match, escape, interpolate, evaluate, offset) {\n      source += text.slice(index, offset).replace(escaper, function (match) {\n        return '\\\\' + escapes[match];\n      });\n\n      if (escape) {\n        source += '\\'+\\n((__t=(' + escape + '))==null?\\'\\':_.escape(__t))+\\n\\'';\n      }\n      if (interpolate) {\n        source += '\\'+\\n((__t=(' + interpolate + '))==null?\\'\\':__t)+\\n\\'';\n      }\n      if (evaluate) {\n        source += '\\';\\n' + evaluate + '\\n__p+=\\'';\n      }\n      index = offset + match.length;\n      return match;\n    });\n    source += '\\';\\n';\n\n    // If a variable is not specified, place data values in local scope.\n    if (!settings.variable) {\n      source = 'with(obj||{}){\\n' + source + '}\\n';\n    }\n\n    source = 'var __t,__p=\\'\\',__j=Array.prototype.join,' + 'print=function(){__p+=__j.call(arguments,\\'\\');};\\n' + source + 'return __p;\\n';\n\n    try {\n      render = new Function(settings.variable || 'obj', '_', source);\n    } catch (e) {\n      e.source = source;\n      throw e;\n    }\n\n    if (data) {\n      return render(data, _);\n    }\n    var template = function template(data) {\n      return render.call(this, data, _);\n    };\n\n    // Provide the compiled function source as a convenience for precompilation.\n    template.source = 'function(' + (settings.variable || 'obj') + '){\\n' + source + '}';\n\n    return template;\n  };\n\n  // Add a \"chain\" function, which will delegate to the wrapper.\n  _.chain = function (obj) {\n    return _(obj).chain();\n  };\n\n  // OOP\n  // ---------------\n  // If Underscore is called as a function, it returns a wrapped object that\n  // can be used OO-style. This wrapper holds altered versions of all the\n  // underscore functions. Wrapped objects may be chained.\n  // Helper function to continue chaining intermediate results.\n  var result = function result(obj) {\n    return this._chain ? _(obj).chain() : obj;\n  };\n\n  // Add all of the Underscore functions to the wrapper object.\n  _.mixin(_);\n\n  // Add all mutator Array functions to the wrapper.\n  each(['pop', 'push', 'reverse', 'shift', 'sort', 'splice', 'unshift'], function (name) {\n    var method = ArrayProto[name];\n    _.prototype[name] = function () {\n      var obj = this._wrapped;\n      method.apply(obj, arguments);\n      if ((name == 'shift' || name == 'splice') && obj.length === 0) {\n        delete obj[0];\n      }\n      return result.call(this, obj);\n    };\n  });\n\n  // Add all accessor Array functions to the wrapper.\n  each(['concat', 'join', 'slice'], function (name) {\n    var method = ArrayProto[name];\n    _.prototype[name] = function () {\n      return result.call(this, method.apply(this._wrapped, arguments));\n    };\n  });\n\n  _.extend(_.prototype, {\n    // Start chaining a wrapped Underscore object.\n    chain: function chain() {\n      this._chain = true;\n      return this;\n    },\n    // Extracts the result from a wrapped and chained object.\n    value: function value() {\n      return this._wrapped;\n    }\n\n  });\n\n  // AMD registration happens at the end for compatibility with AMD loaders\n  // that may not enforce next-turn semantics on modules. Even though general\n  // practice for AMD registration is to be anonymous, underscore registers\n  // as a named module because, like jQuery, it is a base library that is\n  // popular enough to be bundled in a third party lib, but not be part of\n  // an AMD load request. Those cases could generate an error when an\n  // anonymous define() is called outside of a loader request.\n  if (true) {\n    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_RESULT__ = function () {\n      return _;\n    }.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n  }\n}).call(undefined);\n\nexports.default = _exports;\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/~/jsio/packages/util/underscore.js\n// module id = 80\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/~/jsio/packages/util/underscore.js?");

/***/ },
/* 81 */
/*!**********************************************************************************!*\
  !*** ./modules/devkit-core/modules/timestep/src/platforms/browser/FontBuffer.js ***!
  \**********************************************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nexports.__esModule = true;\n\nvar _device = __webpack_require__(/*! device */ 1);\n\nvar _device2 = _interopRequireDefault(_device);\n\nvar _engineInstance = __webpack_require__(/*! ui/engineInstance */ 41);\n\nvar _engineInstance2 = _interopRequireDefault(_engineInstance);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _exports = {};\n\n/**\n * @license\n * This file is part of the Game Closure SDK.\n *\n * The Game Closure SDK is free software: you can redistribute it and/or modify\n * it under the terms of the Mozilla Public License v. 2.0 as published by Mozilla.\n\n * The Game Closure SDK is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * Mozilla Public License v. 2.0 for more details.\n\n * You should have received a copy of the Mozilla Public License v. 2.0\n * along with the Game Closure SDK.  If not, see <http://mozilla.org/MPL/2.0/>.\n */\n/**\n * @package env.browser.FontBuffer;\n *\n * ??? What the hell is this\n */\n\n\nvar randomColorElement = function randomColorElement() {\n  var e = Math.floor(Math.random() * 255).toString(16);\n  return (e.length === 1 ? '0' : '') + e;\n};\n\nvar randomColor = function randomColor() {\n  return '#' + randomColorElement() + randomColorElement() + randomColorElement();\n};\n\n_exports = function () {\n  function exports(opts) {\n    _classCallCheck(this, exports);\n\n    // 8 * 24\n    // 10 * 32\n    // 8 * 64\n    var lineSizes = [{\n      size: 24,\n      count: 8\n    }, {\n      size: 32,\n      count: 10\n    }, {\n      size: 64,\n      count: 8\n    }],\n        lineSize,\n        lines,\n        item,\n        y = 0,\n        i,\n        j;\n\n    this._canvas = document.createElement('canvas');\n    this._canvas.width = 1024;\n    this._canvas.height = 1024;\n    this._ctx = this._canvas.getContext('2d');\n\n    this._list = [];\n    for (i = 0; i < lineSizes.length; i++) {\n      lines = [];\n      lineSize = lineSizes[i];\n\n      for (j = 0; j < lineSize.count; j++) {\n        item = {\n          previous: null,\n          next: null,\n          x: 0,\n          y: y,\n          width: 1024,\n          height: 0,\n          hash: null,\n          frame: 0,\n          refresh: true,\n          ctx: this._ctx\n        };\n        lines.push(item);\n        y += lineSize.size;\n      }\n\n      this._list.push({\n        size: lineSize.size,\n        lines: lines\n      });\n    }\n\n    this._hashMap = {};\n\n    this._currentFrame = 0;\n    this._frameTimeout = 3;\n\n    _engineInstance2.default.get().subscribe('Tick', this, this._onTick);\n  }\n\n  exports.prototype._onTick = function _onTick(dt) {\n    this._currentFrame++;\n\n    var remove,\n        currentFrame = this._currentFrame,\n        frameTimeout = this._frameTimeout,\n        list = this._list,\n        lines,\n        item,\n        i,\n        j,\n        k,\n        l;\n\n    for (i = 0, j = list.length; i < j; i++) {\n      lines = list[i].lines;\n      for (k = 0, l = lines.length; k < l; k++) {\n        item = lines[k];\n        while (item) {\n          if (item.hash === null) {\n            if (item.next && item.next.hash === null) {\n              item.width += item.next.width;\n              item.next = item.next.next;\n            }\n          } else if (currentFrame > item.frame + frameTimeout) {\n            this._ctx.fillStyle = randomColor();\n            this._ctx.fillRect(item.x, item.y, item.width, item.height);\n            // Remove old item...\n            delete this._hashMap[item.hash];\n            item.hash = null;\n          }\n          item = item.next;\n        }\n      }\n    }\n  };\n\n  exports.prototype.alloc = function alloc(opts) {\n    var requestHeight = opts.height,\n        requestWidth = opts.width + 3,\n\n    // Add some extra pixels to allow color bleeding...\n    strokeStyle = opts.strokeStyle || '',\n        fillStyle = opts.fillStyle || '',\n        font = opts.font || '',\n        hash = strokeStyle + '_' + fillStyle + '_' + font + '_' + opts.text,\n        list = this._list,\n        lines,\n        item = this._hashMap[hash],\n        i,\n        j,\n        k,\n        l;\n\n    if (item) {\n      item.frame = this._currentFrame;\n      item.refresh = false;\n      return item;\n    }\n\n    for (i = 0, j = list.length; i < j; i++) {\n      if (requestHeight <= list[i].size) {\n        lines = list[i].lines;\n        for (k = 0, l = lines.length; k < l; k++) {\n          item = lines[k];\n          while (item) {\n            if (requestWidth <= item.width && item.hash === null) {\n              if (requestWidth !== item.width) {\n                // console.log('request:', requestWidth, 'width:', item.width, 'rest:', item.width - requestWidth);\n                item.next = {\n                  previous: item,\n                  next: item.next,\n                  x: item.x + requestWidth,\n                  y: item.y,\n                  width: item.width - requestWidth,\n                  hash: null,\n                  frame: 0,\n                  ctx: this._ctx\n                };\n              }\n\n              item.frame = this._currentFrame;\n              item.hash = hash;\n              item.width = requestWidth;\n              item.height = requestHeight;\n              item.refresh = true;\n\n              this._ctx.clearRect(item.x, item.y, requestWidth, requestHeight);\n\n              this._hashMap[hash] = item;\n              return item;\n            }\n            item = item.next;\n          }\n        }\n\n        break;\n      }\n    }\n\n    return false;\n  };\n\n  exports.prototype.getCanvas = function getCanvas() {\n    return this._canvas;\n  };\n\n  return exports;\n}();\nvar FontBuffer = _exports;\n\nexports.default = _exports;\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/modules/timestep/src/platforms/browser/FontBuffer.js\n// module id = 81\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/modules/timestep/src/platforms/browser/FontBuffer.js?");

/***/ },
/* 82 */
/*!*****************************************************************************!*\
  !*** ./modules/devkit-core/modules/timestep/src/platforms/browser/Input.js ***!
  \*****************************************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nexports.__esModule = true;\n\nvar _base = __webpack_require__(/*! base */ 2);\n\nvar _device = __webpack_require__(/*! device */ 1);\n\nvar _device2 = _interopRequireDefault(_device);\n\nvar _browser = __webpack_require__(/*! util/browser */ 72);\n\nvar _browser2 = _interopRequireDefault(_browser);\n\nvar _dispatch = __webpack_require__(/*! event/input/dispatch */ 33);\n\nvar _dispatch2 = _interopRequireDefault(_dispatch);\n\nvar _InputEvent = __webpack_require__(/*! event/input/InputEvent */ 35);\n\nvar _InputEvent2 = _interopRequireDefault(_InputEvent);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } } /**\n                                                                                                                                                           * @license\n                                                                                                                                                           * This file is part of the Game Closure SDK.\n                                                                                                                                                           *\n                                                                                                                                                           * The Game Closure SDK is free software: you can redistribute it and/or modify\n                                                                                                                                                           * it under the terms of the Mozilla Public License v. 2.0 as published by Mozilla.\n                                                                                                                                                          \n                                                                                                                                                           * The Game Closure SDK is distributed in the hope that it will be useful,\n                                                                                                                                                           * but WITHOUT ANY WARRANTY; without even the implied warranty of\n                                                                                                                                                           * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n                                                                                                                                                           * Mozilla Public License v. 2.0 for more details.\n                                                                                                                                                          \n                                                                                                                                                           * You should have received a copy of the Mozilla Public License v. 2.0\n                                                                                                                                                           * along with the Game Closure SDK.  If not, see <http://mozilla.org/MPL/2.0/>.\n                                                                                                                                                           */\n/**\n * package timestep.env.browser.Input;\n *\n * This is imported as timestep.input.InputListener. This binds touch or mouse\n * events on the document (depending on what's specified in device).\n * Additionally, if a canvas option is passed in or setElement(el) is called,\n * mouse over/out and start events are attached to the element. Used on the\n * canvas as well as DOM bindings.\n */\n\n\nvar $ = _browser2.default.$;\n\nvar eventTypes = _dispatch2.default.eventTypes;\n\nvar UID = -1;\nvar isIOS7 = _device2.default.iosVersion === 7;\nvar isIOSSafari = _device2.default.iosVersion >= 7 && !_device2.default.isIpad && !_device2.default.isStandalone && !_device2.default.isUIWebView;\nvar enableLandscapeScroll = isIOSSafari;\n\nvar Input = function () {\n  function Input(opts) {\n    _classCallCheck(this, Input);\n\n    if (_device2.default.simulatingMobileNative || _device2.default.simulatingMobileBrowser) {\n      this._simulateMobile = true;\n    }\n\n    this._evtQueue = [];\n    this._rootView = opts.rootView;\n\n    if (opts.el) {\n      if (_device2.default.isMobileBrowser) {\n        this._toggleNode = $({ parent: document.body });\n      }\n      this.setElement(opts.el);\n    }\n\n    // Mouseover/out events do not fire for mobile browsers\n    // that are driven solely by touch events, so in mobile\n    // browsers, assume the canvas should always handle events.\n    // Otherwise, only handle events if the mouse is over the\n    // canvas.\n    this._isOver = false;\n\n    // disable the key listener on focus of input elements\n    this._keyListener = opts.keyListener;\n\n    if (opts.engine) {\n      if (opts.engine.getOpt('minIOSLandscapeScroll') > _device2.default.iosVersion || opts.engine.getOpt('disableIOSLandscapeScroll')) {\n        enableLandscapeScroll = false;\n      }\n    }\n\n    if (this._isEnabled) {\n      return;\n    }\n    this._isEnabled = true;\n\n    $.onEvent(document, 'touchmove', this, 'handleMouse', eventTypes.MOVE);\n    $.onEvent(document, 'mousemove', this, 'handleMouse', eventTypes.MOVE);\n    $.onEvent(document, 'mouseup', this, 'handleMouse', eventTypes.SELECT);\n    $.onEvent(document, 'touchend', this, 'handleMouse', eventTypes.SELECT);\n    $.onEvent(window, 'DOMMouseScroll', this, 'handleMouse', eventTypes.SCROLL);\n\n    // FF\n    this._handleWheel = $.onEvent(window, 'mousewheel', this, 'handleMouse', eventTypes.SCROLL);\n\n    // webkit\n    this._addElEvents();\n\n    // this._evtFps = new FPSCounter({name: \"mouse events\"});\n    this._hasFocus = false;\n    if (document.addEventListener) {\n      document.addEventListener('focus', (0, _base.bind)(this, 'onFocusCapture'), true);\n      document.addEventListener('blur', (0, _base.bind)(this, 'onBlurCapture'), true);\n    }\n  }\n\n  Input.prototype.enable = function enable() {\n    this._isEnabled = true;\n  };\n\n  Input.prototype.disable = function disable() {\n    this._isEnabled = false;\n  };\n\n  Input.prototype.onInputStart = function onInputStart(e) {\n    this.handleMouse(eventTypes.START, e);\n  };\n\n  Input.prototype.onInputMove = function onInputMove(e) {\n    this.handleMouse(eventTypes.MOVE, e);\n  };\n\n  Input.prototype.onInputEnd = function onInputEnd(e) {\n    this.handleMouse(eventTypes.SELECT, e);\n  };\n\n  Input.prototype.onFocusCapture = function onFocusCapture(e) {\n    var tag = e.target.tagName;\n    if (tag == 'TEXTAREA' || tag == 'INPUT') {\n      this._hasFocus = e.target;\n      this._keyListener && this._keyListener.setEnabled(false);\n    }\n  };\n\n  Input.prototype.onBlurCapture = function onBlurCapture(e) {\n    if (this._hasFocus) {\n      this._hasFocus = null;\n      this._keyListener && this._keyListener.setEnabled(true);\n    }\n  };\n\n  Input.prototype._removeElEvents = function _removeElEvents() {\n    if (this._elEvents) {\n      for (var i = 0, detach; detach = this._elEvents[i]; ++i) {\n        detach();\n      }\n    }\n  };\n\n  Input.prototype._addElEvents = function _addElEvents() {\n    this._removeElEvents();\n\n    var el = this._el;\n    el.ondragstart = function () {\n      return false;\n    };\n    el.onselectstart = function () {\n      return false;\n    };\n\n    this._elEvents = [];\n    this._elEvents.push($.onEvent(el, 'mousedown', this, 'handleMouse', eventTypes.START));\n    this._elEvents.push($.onEvent(el, 'touchstart', this, 'handleMouse', eventTypes.START));\n\n    if (!_device2.default.isMobileBrowser && !_device2.default.isNative) {\n      this._elEvents.push($.onEvent(el, 'mouseover', this, 'onMouseOver'));\n      this._elEvents.push($.onEvent(el, 'mouseout', this, 'onMouseOut'));\n    }\n  };\n\n  Input.prototype.setElement = function setElement(el) {\n    this._removeElEvents();\n    this._el = el;\n    this._addElEvents();\n  };\n\n  Input.prototype.onMouseOver = function onMouseOver() {\n    this._isOver = true;\n  };\n\n  Input.prototype.onMouseOut = function onMouseOut() {\n    this._isOver = false;\n  };\n\n  Input.prototype.onMouseDown = function onMouseDown() {\n    this._isMouseDown = true;\n  };\n\n  Input.prototype.onMouseUp = function onMouseUp() {\n    this._isMouseUp = true;\n  };\n\n  Input.prototype.getEvents = function getEvents() {\n    return this._evtQueue;\n  };\n\n  Input.prototype.allowScrollEvents = function allowScrollEvents(_allowScrollEvents) {\n    this._allowScrollEvents = _allowScrollEvents;\n  };\n\n  Input.prototype.handleMouse = function handleMouse(type, evt) {\n    if (!this._isEnabled) {\n      return;\n    }\n\n    var target = evt.target;\n    if (!this._isDown && this._el && evt.target != this._el) {\n      return;\n    }\n\n    var isMobileBrowser = _device2.default.isMobileBrowser;\n\n    // Cancel all events that occur on the canvas.  Optionally, pass scroll events\n    // through to the page (apps that don't care about handling scroll events may\n    // want to pass them through for easier browser debugging).\n    if (isMobileBrowser) {\n      var isLandscape = _device2.default.screen.orientation === 'landscape';\n      var innerHeight = window.innerHeight;\n      var docHeight = document.documentElement.offsetHeight;\n      var matches = docHeight === innerHeight;\n      var allowIOSScroll = enableLandscapeScroll && isLandscape && (isIOS7 ? innerHeight !== 320 : !matches);\n\n      if (isIOS7) {\n        if (allowIOSScroll) {\n          document.documentElement.style.height = '640px';\n        } else if (!allowIOSScroll && !matches) {\n          document.documentElement.style.height = '320px';\n        }\n      }\n\n      if (allowIOSScroll && type === eventTypes.SCROLL) {\n        return;\n      }\n\n      if (!allowIOSScroll) {\n        $.stopEvent(evt);\n        evt.returnValue = false;\n      }\n\n      if (type === eventTypes.SELECT && enableLandscapeScroll && isLandscape && window.scrollY) {\n        window.scrollTo(0, 0);\n      }\n    } else if (this._isOver && (!this._allowScrollEvents || type != eventTypes.SCROLL)) {\n      if (evt.stopPropagation) {\n        evt.stopPropagation();\n      }\n      if (type != eventTypes.START) {\n        $.stopEvent(evt);\n        evt.returnValue = false;\n      }\n    }\n\n    // On ios devices, this event could correspond to multiple touches.  We recall\n    // ourselves with each changed touch independently.\n    if (evt.touches) {\n      for (var i = 0, t; t = evt.changedTouches[i]; ++i) {\n        this.handleMouse(type, t);\n      }\n      return;\n    }\n\n    var x, y;\n    // Figure out where in the canvas the event fired.\n    // if (isMobileBrowser) {\n    //  pt = {\n    //    x: evt.pageX,\n    //    y: evt.pageY\n    //  };\n    // } else\n    if ('offsetX' in evt) {\n      // Chrome makes life easy.  offsetX/offsetY is w.r.t. the target, which\n      // for us should be the canvas.\n      x = evt.offsetX;\n      y = evt.offsetY;\n    } else if (this._el.getBoundingClientRect) {\n      // It's not too hard in other browsers that support getBoundingClientRect.\n      // Get the absolute position of the canvas and do the math.\n      var rect = this._el.getBoundingClientRect();\n      x = evt.pageX - rect.left;\n      y = evt.pageY - rect.top;\n    } else {\n      // Without boundingClientRect, life is hard.  This is the general\n      // idea, but we need to loop for offsetParent/scrollLeft/scrollTop\n      // to be at least partially complete.  Other libraries handle this\n      // better, but the code complexity for that is huge.\n      //\n      // TODO: older browsers will fail cause this code is buggy and untested?\n      var offsetX,\n          offsetY,\n          parent = this._el;\n      while (parent) {\n        offsetX += parent.offsetTop;\n        offsetY += parent.offsetLeft;\n        parent = parent.parentNode;\n      }\n\n      x = evt.pageX - offsetX;\n      y = evt.pageY - offsetY;\n    }\n\n    var id = evt.identifier || UID;\n\n    if (this._simulateMobile) {\n      switch (type) {\n        case eventTypes.START:\n          this._moveOK = true;\n          break;\n        case eventTypes.MOVE:\n          if (!this._moveOK) {\n            return;\n          }\n          break;\n        case eventTypes.SELECT:\n          this._moveOK = false;\n          break;\n      }\n    }\n\n    if (type == eventTypes.START) {\n      this._isDown = true;\n    } else if (type == eventTypes.SELECT) {\n      this._isDown = false;\n\n      if (this._toggleNode) {\n        document.body.removeChild(this._toggleNode);\n        document.body.appendChild(this._toggleNode);\n      }\n    }\n\n    var dpr = _device2.default.screen.devicePixelRatio;\n    var inputEvent = new _InputEvent2.default(id, type, x * dpr, y * dpr);\n\n    if (type == eventTypes.SCROLL) {\n      // try to normalize scroll events! :-(\n      // some browsers send both horizontal and vertical offsets in one event! nice!\n      // other browsers don't. This is awful, since this is the least common denominator!\n      // so we have to send two events even if the browser only sends one.\n      if ('wheelDeltaX' in evt) {\n        // default to Y\n        inputEvent.scrollDelta = evt.wheelDeltaY / 120;\n        inputEvent.scrollAxis = _dispatch2.default.VERTICAL_AXIS;\n\n        // if we also have X, then send it as a separate event\n        if (evt.wheelDeltaX && evt.wheelDeltaY) {\n          var e = inputEvent.clone();\n          e.scrollDelta = evt.wheelDeltaX / 120;\n          e.scrollAxis = _dispatch2.default.HORIZONTAL_AXIS;\n\n          _dispatch2.default.dispatchEvent(this._rootView, e);\n        } else if (evt.wheelDeltaX) {\n          // we only have one of (X, Y) and it's X, so use X\n          inputEvent.scrollDelta = evt.wheelDeltaX / 120;\n          inputEvent.scrollAxis = _dispatch2.default.HORIZONTAL_AXIS;\n        }\n      } else if (evt.detail) {\n        inputEvent.scrollDelta = -evt.detail;\n        inputEvent.scrollAxis = 'axis' in evt ? evt.axis == evt.VERTICAL_AXIS ? _dispatch2.default.VERTICAL_AXIS : _dispatch2.default.HORIZONTAL_AXIS : _dispatch2.default.VERTICAL_AXIS;\n      } else if (evt.wheelDelta) {\n        // IE/Opera\n        inputEvent.scrollDelta = (window.opera ? 1 : -1) * evt.wheelDelta / 120;\n        inputEvent.scrollAxis = _dispatch2.default.VERTICAL_AXIS;\n      }\n    }\n\n    _dispatch2.default.dispatchEvent(this._rootView, inputEvent);\n  };\n\n  return Input;\n}();\n\nexports.default = Input;\n;\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/modules/timestep/src/platforms/browser/Input.js\n// module id = 82\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/modules/timestep/src/platforms/browser/Input.js?");

/***/ },
/* 83 */
/*!***********************************************************************************!*\
  !*** ./modules/devkit-core/modules/timestep/src/platforms/browser/InputPrompt.js ***!
  \***********************************************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nexports.__esModule = true;\n\nvar _browser = __webpack_require__(/*! util/browser */ 72);\n\nvar _browser2 = _interopRequireDefault(_browser);\n\nvar _keyboardTypes = __webpack_require__(/*! ui/keyboardTypes */ 84);\n\nvar _keyboardTypes2 = _interopRequireDefault(_keyboardTypes);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar _exports = {};\n\n/**\n * @license\n * This file is part of the Game Closure SDK.\n *\n * The Game Closure SDK is free software: you can redistribute it and/or modify\n * it under the terms of the Mozilla Public License v. 2.0 as published by Mozilla.\n\n * The Game Closure SDK is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * Mozilla Public License v. 2.0 for more details.\n\n * You should have received a copy of the Mozilla Public License v. 2.0\n * along with the Game Closure SDK.  If not, see <http://mozilla.org/MPL/2.0/>.\n */\n/**\n * package timestep.env.browser.InputPrompt;\n *\n * Prompt the user manually for input.\n */\n\nvar $ = _browser2.default.$;\n\n\nvar BASE_CLASS = 'timestep-native-dialog';\nvar TITLE_CLASS = 'title';\nvar MESSAGE_CLASS = 'message';\nvar BUTTONS_CLASS = 'buttons';\nvar DEFAULT_STYLES = ['.' + BASE_CLASS + ' { position: absolute; z-index: 9999999; font: 12px Helvetica; color: #444; background: rgba(255, 255, 255, 0.9); border-radius: 5px; text-align: left; }', '.' + BASE_CLASS + ' .' + TITLE_CLASS + '{ padding: 10px; font-weight: bold; }', '.' + BASE_CLASS + ' .' + MESSAGE_CLASS + '{ padding: 10px; color: #888; }', '.' + BASE_CLASS + ' .' + BUTTONS_CLASS + '{ padding: 10px; text-align: right; }'].join('');\n\nvar addedStyles = false;\n_exports.show = function (controller, opts) {\n  var addClasses = opts.defaultBrowserStyles;\n\n  // initialize default styles\n  if (addClasses && !addedStyles) {\n    $({\n      parent: document.getElementsByTagName('head')[0],\n      tag: 'style',\n      text: DEFAULT_STYLES\n    });\n  }\n\n  // create buttons\n  var buttons = [];\n  var okButton;\n  var cancelButton;\n  if (opts.okText) {\n    okButton = $({\n      type: 'button',\n      text: opts.okText,\n      attrs: { noCapture: true }\n    });\n    buttons.push(okButton);\n    if (opts.onSubmit) {\n      $.onEvent(okButton, 'click', opts.onSubmit);\n    }\n  }\n\n  if (opts.cancelText) {\n    cancelButton = $({\n      type: 'button',\n      text: opts.cancelText,\n      attrs: { noCapture: true }\n    });\n    buttons.push(cancelButton);\n    if (opts.onCancel) {\n      $.onEvent(okButton, 'click', opts.onCancel);\n    }\n  }\n\n  // create input element\n  var input = $({\n    tag: 'input',\n    attrs: {\n      noCapture: true,\n      type: opts.isPassword ? 'password' : _keyboardTypes2.default.getHTMLType('text')\n    }\n  });\n\n  if (opts.onChange) {\n    $.onEvent(input, 'change', opts.onChange);\n  }\n\n  // create dialog\n  var dialog = $({\n    parent: document.body,\n    className: addClasses && BASE_CLASS,\n    children: [{\n      className: addClasses && TITLE_CLASS,\n      text: opts.title\n    }, {\n      className: addClasses && MESSAGE_CLASS,\n      text: opts.message\n    }, input, {\n      className: addClasses && BUTTONS_CLASS,\n      children: buttons\n    }]\n  });\n\n  if (addClasses) {\n    var windowSize = $.size(window);\n    $.style(dialog, {\n      left: (windowSize.width - dialog.offsetWidth) / 2,\n      top: (windowSize.height - dialog.offsetHeight) / 2\n    });\n  }\n\n  if (opts.onShow) {\n    opts.onShow(dialog);\n  }\n};\n\nexports.default = _exports;\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/modules/timestep/src/platforms/browser/InputPrompt.js\n// module id = 83\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/modules/timestep/src/platforms/browser/InputPrompt.js?");

/***/ },
/* 84 */
/*!**********************************************************************!*\
  !*** ./modules/devkit-core/modules/timestep/src/ui/keyboardTypes.js ***!
  \**********************************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nexports.__esModule = true;\n\nvar _device = __webpack_require__(/*! device */ 1);\n\nvar _device2 = _interopRequireDefault(_device);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar _exports = {};\n\n// map input types to native constants\n_exports.nativeTypes = {\n  // legacy native names\n  Default: 0,\n  // Default type for the current input method.\n  NumbersAndPunctuation: 2,\n  // Numbers and assorted punctuation.\n  URL: 3,\n  // A type optimized for URL entry (shows . / .com prominently).\n  NumberPad: 4,\n  // A number pad (0-9). Suitable for PIN entry.\n  PhonePad: 5,\n  // A phone pad (1-9, *, 0, #, with letters under the numbers).\n  EmailAddress: 7,\n  // A type optimized for multiple email address entry (shows space @ . prominently).\n  DecimalPad: 8,\n  // html5 names\n  url: 3,\n  number: _device2.default.isIOS ? 2 : 4,\n  // ios/android mobile are different\n  tel: 5,\n  email: 7\n};\n\n// map input types to html5 type names\n_exports.htmlTypes = {\n  // legacy native mapping\n  Default: 'text',\n  NumbersAndPunctuation: 'number',\n  // note: android won't show punctuation\n  URL: 'url',\n  NumberPad: 'number',\n  PhonePad: 'tel',\n  EmailAddress: 'email',\n  DecimalPad: 'number',\n  // html5 types supported on both native/browser\n  number: 'number',\n  url: 'url',\n  tel: 'tel',\n  email: 'email',\n  // html5 types only supported in the browser\n  // TODO: add to native\n  date: 'date',\n  time: 'time',\n  datetime: 'datetime',\n  month: 'month'\n};\n\n_exports.types = {};\n\nfor (var type in _exports.nativeTypes) {\n  _exports.types[type.toLowerCase()] = _exports.nativeTypes[type];\n}\n\nfor (var type in _exports.htmlTypes) {\n  _exports.htmlTypes[type.toLowerCase()] = _exports.htmlTypes[type];\n}\n\n_exports.has = function (type) {\n  return type.toLowerCase() in _exports.types;\n};\n\n_exports.getNativeType = function (type) {\n  return _exports.types[type.toLowerCase()] || 0;\n};\n\n_exports.getHTMLType = function (type) {\n  return _exports.htmlTypes[type.toLowerCase()] || type;\n};\n\nexports.default = _exports;\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/modules/timestep/src/ui/keyboardTypes.js\n// module id = 84\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/modules/timestep/src/ui/keyboardTypes.js?");

/***/ },
/* 85 */
/*!***********************************************************************************!*\
  !*** ./modules/devkit-core/modules/timestep/src/platforms/browser/KeyListener.js ***!
  \***********************************************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nexports.__esModule = true;\n\nvar _base = __webpack_require__(/*! base */ 2);\n\nvar _PubSub2 = __webpack_require__(/*! lib/PubSub */ 10);\n\nvar _PubSub3 = _interopRequireDefault(_PubSub2);\n\nvar _Enum = __webpack_require__(/*! lib/Enum */ 21);\n\nvar _Enum2 = _interopRequireDefault(_Enum);\n\nvar _keys = __webpack_require__(/*! event/input/keys */ 86);\n\nvar _keys2 = _interopRequireDefault(_keys);\n\nvar _device = __webpack_require__(/*! device */ 1);\n\nvar _device2 = _interopRequireDefault(_device);\n\nvar _timer = __webpack_require__(/*! timer */ 36);\n\nvar _timer2 = _interopRequireDefault(_timer);\n\nvar _browser = __webpack_require__(/*! util/browser */ 72);\n\nvar _browser2 = _interopRequireDefault(_browser);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _exports = {};\n\n/**\n * @license\n * This file is part of the Game Closure SDK.\n *\n * The Game Closure SDK is free software: you can redistribute it and/or modify\n * it under the terms of the Mozilla Public License v. 2.0 as published by Mozilla.\n\n * The Game Closure SDK is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * Mozilla Public License v. 2.0 for more details.\n\n * You should have received a copy of the Mozilla Public License v. 2.0\n * along with the Game Closure SDK.  If not, see <http://mozilla.org/MPL/2.0/>.\n */\n/**\n * package timestep.env.browser.KeyListener;\n *\n * Listen to pressed keys and expose them using a altogether too public API.\n * An independent KeyListener is exposed for the Application Engine and any\n * Views with a Focus Manager.\n */\n\nvar $ = _browser2.default.$;\n\nvar gListenerSingleton = null;\nvar gCancelKeys = (0, _Enum2.default)(_keys2.default.SPACE, _keys2.default.LEFT, _keys2.default.RIGHT, _keys2.default.UP, _keys2.default.DOWN);\n\n_exports = function () {\n  function exports(el, events) {\n    _classCallCheck(this, exports);\n\n    if (gListenerSingleton) {\n      return gListenerSingleton;\n    }\n    gListenerSingleton = this;\n\n    this._el = el = el || document;\n    this._events = [];\n    this._shortcuts = [];\n    this._isEnabled = true;\n    this._keyMap = {};\n\n    $.onEvent(el, 'keydown', this, 'onKeyDown');\n    $.onEvent(el, 'keypress', this, 'onKeyPress');\n    $.onEvent(el, 'keyup', this, 'onKeyUp');\n    $.onEvent(window, 'blur', this, 'liftAll');\n  }\n\n  exports.prototype.setEnabled = function setEnabled(isEnabled) {\n    this._isEnabled = isEnabled;\n  };\n\n  exports.prototype.captureShortcut = function captureShortcut(shortcut) {\n    this._shortcuts.push(shortcut);\n  };\n\n  exports.prototype.getPressed = function getPressed() {\n    return this._keyMap;\n  };\n\n  exports.prototype.onKeyDown = function onKeyDown(e) {\n    if (!this._isEnabled) {\n      return;\n    }\n\n    var evt = {\n      code: e.keyCode,\n      ctrl: e.ctrlKey,\n      shift: e.shiftKey,\n      alt: e.altKey,\n      meta: e.metaKey,\n      // for mac keyboards\n      lifted: false,\n      dt: _timer2.default.getTickProgress()\n    };\n\n    if (evt.ctrl || evt.shift || evt.alt || evt.meta) {\n      var captured = false;\n      for (var i = 0, s; s = this._shortcuts[i]; ++i) {\n        if (s.compare(evt)) {\n          s.publish('Down', evt);\n          captured = true;\n        }\n      }\n\n      if (captured) {\n        $.stopEvent(e);\n      }\n      return;\n    } else {\n      // MUST cancel event if we're enabled to prevent browser\n      // default behaviors (e.g. scrolling)\n      $.stopEvent(e);\n    }\n\n    // We already know that key is down; ignore repeat events.\n    if (e.keyCode in this._keyMap) {\n      return;\n    }\n\n    this._events.push(evt);\n    this._keyMap[e.keyCode] = +new Date();\n  };\n\n  exports.prototype.liftAll = function liftAll() {\n    var progressDt = _timer2.default.getTickProgress();\n    for (var code in this._keyMap) {\n      this._events.push({\n        code: code,\n        lifted: true,\n        dt: progressDt\n      });\n    }\n    this._keyMap = {};\n  };\n\n  exports.prototype.onKeyUp = function onKeyUp(e) {\n    var progressDt = _timer2.default.getTickProgress();\n    delete this._keyMap[e.keyCode];\n    this._events.push({\n      code: e.keyCode,\n      lifted: true,\n      dt: progressDt\n    });\n    $.stopEvent(e);\n  };\n\n  exports.prototype.onKeyPress = function onKeyPress(e) {\n    if (!this._isEnabled) {\n      return;\n    }\n    if (e.keyCode in gCancelKeys) {\n      $.stopEvent(e);\n    }\n  };\n\n  exports.prototype.peekEvents = function peekEvents() {\n    return this._events;\n  };\n\n  exports.prototype.popEvents = function popEvents() {\n    return this._events.splice(0, this._events.length);\n  };\n\n  return exports;\n}();\n\n// TODO: for maximum compatibility, especially with foreign keyboards, this needs to be inferred from the browser.  I think we can rely on a single DOM key event to get the constants in most browsers.\n(0, _base.merge)(_exports.prototype, _keys2.default);\n\n_exports.Shortcut = function (_PubSub) {\n  _inherits(_class, _PubSub);\n\n  function _class(keyCode, ctrl, shift, alt, meta) {\n    _classCallCheck(this, _class);\n\n    var _this = _possibleConstructorReturn(this, _PubSub.call(this));\n\n    _this.ctrl = !!ctrl;\n    _this.shift = !!shift;\n    _this.alt = !!alt;\n    _this.meta = !!meta;\n    _this.code = !!keyCode;\n    return _this;\n  }\n\n  _class.prototype.compare = function compare(shortcut) {\n    return this.ctrl == shortcut.ctrl && this.alt == shortcut.alt && this.meta == shortcut.meta && this.shift == shortcut.shift && this.code == shortcut.code;\n  };\n\n  return _class;\n}(_PubSub3.default);\n\nexports.default = _exports;\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/modules/timestep/src/platforms/browser/KeyListener.js\n// module id = 85\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/modules/timestep/src/platforms/browser/KeyListener.js?");

/***/ },
/* 86 */
/*!**********************************************************************!*\
  !*** ./modules/devkit-core/modules/timestep/src/event/input/keys.js ***!
  \**********************************************************************/
/***/ function(module, exports) {

	eval("\"use strict\";\n\nexports.__esModule = true;\nvar _exports = {};\n\n/**\n * @license\n * This file is part of the Game Closure SDK.\n *\n * The Game Closure SDK is free software: you can redistribute it and/or modify\n * it under the terms of the Mozilla Public License v. 2.0 as published by Mozilla.\n\n * The Game Closure SDK is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * Mozilla Public License v. 2.0 for more details.\n\n * You should have received a copy of the Mozilla Public License v. 2.0\n * along with the Game Closure SDK.  If not, see <http://mozilla.org/MPL/2.0/>.\n */\n/**\n * @module event.input.keys\n * Map browser keycodes to corresponding keys.\n */\n_exports = {\n  BACKSPACE: 8,\n  TAB: 9,\n  ENTER: 13,\n  SHIFT: 16,\n  CTRL: 17,\n  ALT: 18,\n  PAUSE: 19,\n  BREAK: 19,\n  CAPS: 20,\n  CAPS_LOCK: 20,\n  ESCAPE: 27,\n  SPACE: 32,\n  PAGE_UP: 33,\n  PAGE_DOWN: 34,\n  END: 35,\n  HOME: 36,\n  LEFT: 37,\n  UP: 38,\n  RIGHT: 39,\n  DOWN: 40,\n  PRINT_SCREEN: 44,\n  INSERT: 45,\n  DELETE: 46,\n  META_LEFT: 91,\n  WIN_LEFT: 91,\n  META_RIGHT: 92,\n  WIN_RIGHT: 92,\n  SELECT: 93,\n  EQUAL: 187,\n  MINUS: 189,\n  F1: 112,\n  F2: 113,\n  F3: 114,\n  F4: 115,\n  F5: 116,\n  F6: 117,\n  F7: 118,\n  F8: 119,\n  F9: 120,\n  F10: 121,\n  F11: 122,\n  F12: 123,\n  MUTE: 173,\n  VOL_DOWN: 174,\n  VOL_UP: 175,\n  FORWARD: 176,\n  BACK: 177,\n  STOP: 178,\n  PLAY_PAUSE: 179\n};\n\nexports.default = _exports;\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/modules/timestep/src/event/input/keys.js\n// module id = 86\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/modules/timestep/src/event/input/keys.js?");

/***/ },
/* 87 */
/*!****************************************************************************************!*\
  !*** ./modules/devkit-core/modules/timestep/src/platforms/browser/MobileBrowserAPI.js ***!
  \****************************************************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nexports.__esModule = true;\n\nvar _base = __webpack_require__(/*! base */ 2);\n\nvar _PubSub2 = __webpack_require__(/*! lib/PubSub */ 10);\n\nvar _PubSub3 = _interopRequireDefault(_PubSub2);\n\nvar _device = __webpack_require__(/*! device */ 1);\n\nvar _device2 = _interopRequireDefault(_device);\n\nvar _underscore = __webpack_require__(/*! util/underscore */ 80);\n\nvar _underscore2 = _interopRequireDefault(_underscore);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _exports = {};\n\n/**\n * @license\n * This file is part of the Game Closure SDK.\n *\n * The Game Closure SDK is free software: you can redistribute it and/or modify\n * it under the terms of the Mozilla Public License v. 2.0 as published by Mozilla.\n\n * The Game Closure SDK is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * Mozilla Public License v. 2.0 for more details.\n\n * You should have received a copy of the Mozilla Public License v. 2.0\n * along with the Game Closure SDK.  If not, see <http://mozilla.org/MPL/2.0/>.\n */\n\nvar _ = _underscore2.default._;\n\nvar defaults = {\n  oneChannelOnly: _device2.default.isMobileBrowser,\n  compiledFilename: 'compiled'\n};\n\n/**\n * @extends lib.PubSub\n */\n_exports = function (_PubSub) {\n  _inherits(exports, _PubSub);\n\n  function exports(opts) {\n    _classCallCheck(this, exports);\n\n    opts = (0, _base.merge)(opts, defaults);\n\n    var _this = _possibleConstructorReturn(this, _PubSub.call(this, opts));\n\n    _this._opts = opts;\n    _this._map = opts.map;\n    _this._audios = {};\n    _this.oneChannelOnly = opts.oneChannelOnly;\n\n    setInterval((0, _base.bind)(_this, '_ontimeupdate'), 200);\n\n    if (!_this.oneChannelOnly) {\n      _.each(opts.background, function (name) {\n        opts.map[name] = { 'name': name };\n      }, _this);\n    }\n\n    // Install the event listener right away. Set usecapture=true so that\n    // nothing else will affect us from intercepting this event.\n    _this._load();\n    if (_this.oneChannelOnly) {\n      _this._boundLoadHandler = (0, _base.bind)(_this, '_playFirst');\n      document.body.addEventListener('mouseDown', _this._boundLoadHandler, true);\n      document.body.addEventListener('touchStart', _this._boundLoadHandler, true);\n    }\n    window.addEventListener('pagehide', (0, _base.bind)(_this, 'pause'), false);\n    return _this;\n  }\n\n  exports.prototype._createChannel = function _createChannel(name, src) {\n    var audio = new Audio(src);\n    this._audios[name] = audio;\n\n    audio.addEventListener('error', (0, _base.bind)(this, '_onerror'));\n    audio.addEventListener('timeupdate', (0, _base.bind)(this, '_ontimeupdate'));\n\n    audio.load();\n  };\n\n  exports.prototype.setMuted = function setMuted(muted) {\n    this.muted = muted;\n    if (muted) {\n      this.setVolume(0);\n    }\n  };\n\n  exports.prototype.setVolume = function setVolume(volume) {\n    _.each(this._audios, function (audio, key) {\n      audio.volume = volume;\n    });\n  };\n\n  exports.prototype.unload = function unload() {\n    this.pause();\n    _.each(this._audios, function (audio, key) {\n      audio.src = '';\n    }, this);\n  };\n\n  exports.prototype._load = function _load() {\n    this._audios = {};\n    var path = this._opts.path.replace(/\\/$/, '');\n    if (this.oneChannelOnly) {\n      this._createChannel('AUDIO', path + '/' + this._opts.compiledFilename + '.m4a');\n    } else {\n      for (var key in this._map) {\n        if (this._map.hasOwnProperty(key)) {\n          if (key == 'SILENCE') {\n            continue;\n          }\n          this._createChannel(key, path + '/' + key + '.mp3');\n        }\n      }\n    }\n\n    _base.logger.info('now loading', this._opts.src);\n\n    if (!this._publishedReady) {\n      this.publish('Ready');\n      // this is as close as we'll get with multiple sounds\n      this._publishedReady = true;\n    }\n  };\n\n  exports.prototype._playFirst = function _playFirst() {\n    document.body.removeEventListener('mouseDown', this._boundLoadHandler, true);\n    document.body.removeEventListener('touchStart', this._boundLoadHandler, true);\n\n    this._audios['AUDIO'].play();\n  };\n\n  exports.prototype._ontimeupdate = function _ontimeupdate(evt) {\n    _.each(this._audios, function (audio, key) {\n      if (audio.paused && !audio._pausedOnce) {\n        audio.pause();\n        audio._pausedOnce = true;\n        audio._ready = true;\n      }\n\n      if (this.oneChannelOnly) {\n        if (!this._nowPlaying || audio.currentTime >= this._nowPlaying.end) {\n          this.play('SILENCE');\n        }\n      }\n    }, this);\n  };\n\n  exports.prototype._onerror = function _onerror(event) {\n    var s = '';\n    for (var key in event) {\n      s += event[key] + ' ';\n    }\n    _base.logger.info('ERROR', s);\n  };\n\n  exports.prototype.canPlay = function canPlay(name) {\n    if (!this._map[name]) {\n      return false;\n    }\n\n    var requiredEnd = null;\n    if (this.oneChannelOnly) {\n      requiredEnd = this._map[name].end;\n      name = 'AUDIO';\n    }\n    var audio = this._audios[name];\n    if (!audio) {\n      return false;\n    }\n\n    // if (!audio._ready) {\n    //  return; // try downloading the whole file...\n    // }\n    if (audio._ready || !requiredEnd) {\n      return true;\n    } else {\n      try {\n        var end = audio.seekable.end();\n        return requiredEnd <= end;\n      } catch (e) {\n        _base.logger.log(e);\n        return false;\n      }\n    }\n  };\n\n  exports.prototype.play = function play(name, volume, loop) {\n    if (this.muted) {\n      return;\n    }\n\n    if (volume === undefined) {\n      volume = 1;\n    }\n    if (!this.canPlay(name)) {\n      _base.logger.info('Not ready yet');\n      return;\n    }\n\n    var audio = this._audios[this.oneChannelOnly ? 'AUDIO' : name];\n    try {\n      if (!audio.paused) {\n        audio.pause();\n      }\n      // it glitches if you move currentTime while playing?\n      var startTime = 0;\n      if (this.oneChannelOnly && this._map[name].start != null) {\n        startTime = this._map[name].start;\n      }\n      if (audio.currentTime != startTime) {\n        // logger.log('SEEK to play',name, startTime, 'from',audio.currentTime); //\n        audio.currentTime = startTime;\n      }\n      audio.volume = volume;\n      audio.play();\n      this._nowPlaying = this._map[name];\n    } catch (e) {}\n  };\n\n  exports.prototype.pause = function pause() {\n    _.each(this._audios, function (audio, key) {\n      audio.pause();\n    }, this);\n  };\n\n  exports.prototype.playBackgroundMusic = function playBackgroundMusic(name, volume) {\n    if (this.muted) {\n      return;\n    }\n\n    if (this.oneChannelOnly) {\n      return false;\n    }\n\n    // cannot play bg music here.\n    this._backgroundSoundPlaying = name;\n    this.play(name, volume);\n  };\n\n  exports.prototype.pauseBackgroundMusic = function pauseBackgroundMusic() {\n    if (!this._backgroundSoundPlaying) {\n      return;\n    }\n    this._audios[this._backgroundSoundPlaying].pause();\n  };\n\n  return exports;\n}(_PubSub3.default);\nvar AudioAPI = _exports;\n\nexports.default = _exports;\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/modules/timestep/src/platforms/browser/MobileBrowserAPI.js\n// module id = 87\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/modules/timestep/src/platforms/browser/MobileBrowserAPI.js?");

/***/ },
/* 88 */
/*!*********************************************************************************!*\
  !*** ./modules/devkit-core/modules/timestep/src/platforms/browser/StatusBar.js ***!
  \*********************************************************************************/
/***/ function(module, exports) {

	eval("\"use strict\";\n\nexports.__esModule = true;\nvar _exports = {};\n\n_exports.show = function () {};\n\n_exports.hide = function () {};\n\n_exports.getHeight = function () {\n  return 0;\n};\n\nexports.default = _exports;\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/modules/timestep/src/platforms/browser/StatusBar.js\n// module id = 88\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/modules/timestep/src/platforms/browser/StatusBar.js?");

/***/ },
/* 89 */
/*!*******************************************************************************!*\
  !*** ./modules/devkit-core/modules/timestep/src/platforms/browser/TextBox.js ***!
  \*******************************************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nexports.__esModule = true;\n\nvar _base = __webpack_require__(/*! base */ 2);\n\nvar _browser = __webpack_require__(/*! util/browser */ 72);\n\nvar _browser2 = _interopRequireDefault(_browser);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _exports = {};\n\n/**\n * @license\n * This file is part of the Game Closure SDK.\n *\n * The Game Closure SDK is free software: you can redistribute it and/or modify\n * it under the terms of the Mozilla Public License v. 2.0 as published by Mozilla.\n\n * The Game Closure SDK is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * Mozilla Public License v. 2.0 for more details.\n\n * You should have received a copy of the Mozilla Public License v. 2.0\n * along with the Game Closure SDK.  If not, see <http://mozilla.org/MPL/2.0/>.\n */\n/**\n * package timestep.env.browser.TextBox;\n *\n * A textbox for inputting user data.\n */\n\nvar $ = _browser2.default.$;\n\nvar defaultStyle = {\n  padding: 0,\n  lineHeight: 1.4,\n  border: 'none',\n  display: 'none',\n  textAlign: 'center',\n  verticalAlign: 'middle',\n  fontSize: 16,\n  fontFamily: null,\n  fontWeight: '',\n  opacity: 1,\n  position: 'absolute',\n  backgroundColor: 'transparent',\n  top: 0,\n  left: 0\n};\n\n_exports = function () {\n  function exports(opts) {\n    _classCallCheck(this, exports);\n\n    opts = (0, _base.merge)(opts, {\n      color: 'black',\n      height: 20\n    });\n\n    var style = (0, _base.merge)({}, defaultStyle);\n    if (opts.color) {\n      style.color = opts.color;\n    }\n\n    this._el = $({\n      tag: opts.multiLine ? 'textarea' : 'input',\n      attrs: { type: 'text' },\n      style: style\n    });\n\n    $.onEvent(this._el, 'blur', this, 'onBlur');\n    $.onEvent(this._el, 'focus', this, 'onFocus');\n    $.onEvent(this._el, 'change', this, 'onChange');\n    $.onEvent(this._el, 'click', this, 'onClick');\n  }\n\n  exports.prototype.onClick = function onClick() {};\n\n  exports.prototype.destroy = function destroy() {\n    $.remove(this._el);\n    this._el = null;\n  };\n\n  exports.prototype.setApp = function setApp(app) {\n    if (app != this._app || !this._el.parentNode) {\n      this._app = app;\n      var canvas = app._ctx.canvas;\n      _base.logger.log('setting parent', this._el);\n      canvas.parentNode.appendChild(this._el);\n    }\n  };\n\n  exports.prototype.change = function change() {};\n\n  exports.prototype.click = function click() {};\n\n  exports.prototype.selectAll = function selectAll() {\n    this._el.focus();\n    this._el.select();\n  };\n\n  exports.prototype.show = function show() {\n    $.show(this._el);\n  };\n\n  exports.prototype.hide = function hide() {\n    $.hide(this._el);\n  };\n\n  exports.prototype.setValue = function setValue(value) {\n    this._el.value = value;\n    return this;\n  };\n\n  exports.prototype.setOpacity = function setOpacity(o) {\n    this._el.style.opacity = o;\n    return this;\n  };\n\n  exports.prototype.setType = function setType(type) {\n    this._el.type = type;\n    return this;\n  };\n\n  exports.prototype.setVisible = function setVisible(isVisible) {\n    return this[isVisible ? 'show' : ' hide']();\n  };\n\n  exports.prototype.getX = function getX() {\n    return parseInt(this._el.style.left);\n  };\n\n  exports.prototype.getY = function getY() {\n    return parseInt(this._el.style.top);\n  };\n\n  exports.prototype.getWidth = function getWidth() {\n    return this._el.offsetWidth;\n  };\n\n  exports.prototype.getHeight = function getHeight() {\n    return this._el.offsetHeight;\n  };\n\n  exports.prototype.getValue = function getValue() {\n    return this._el.value;\n  };\n\n  exports.prototype.getOpacity = function getOpacity() {\n    return this._el.style.opacity;\n  };\n\n  exports.prototype.getType = function getType() {\n    return this._el.type;\n  };\n\n  exports.prototype.getVisible = function getVisible() {\n    return this._el.parentNode && this._el.style.display == 'block';\n  };\n\n  exports.prototype.setPosition = function setPosition(p) {\n    this._el.style.top = p.y + 'px';\n    this._el.style.left = p.x + 'px';\n  };\n\n  exports.prototype.getPosition = function getPosition() {\n    return {\n      x: this.getX(),\n      y: this.getY()\n    };\n  };\n\n  exports.prototype.setDimensions = function setDimensions(d) {\n    this._el.style.width = d.width + 'px';\n    this._el.style.height = d.height + 'px';\n    return this;\n  };\n\n  exports.prototype.getDimensions = function getDimensions() {\n    return {\n      width: this.getWidth(),\n      height: this.getHeight()\n    };\n  };\n\n  return exports;\n}();\n\n_exports.prototype.onBlur = _exports.prototype.onClick;\n_exports.prototype.onFocus = _exports.prototype.onClick;\n_exports.prototype.onChange = _exports.prototype.onClick;\n\nexports.default = _exports;\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/modules/timestep/src/platforms/browser/TextBox.js\n// module id = 89\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/modules/timestep/src/platforms/browser/TextBox.js?");

/***/ },
/* 90 */
/*!*********************************************************************************!*\
  !*** ./modules/devkit-core/modules/timestep/src/platforms/browser/TextInput.js ***!
  \*********************************************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nexports.__esModule = true;\n\nvar _base = __webpack_require__(/*! base */ 2);\n\nvar _PubSub2 = __webpack_require__(/*! lib/PubSub */ 10);\n\nvar _PubSub3 = _interopRequireDefault(_PubSub2);\n\nvar _browser = __webpack_require__(/*! util/browser */ 72);\n\nvar _browser2 = _interopRequireDefault(_browser);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _exports = {};\n\n/**\n * @license\n * This file is part of the Game Closure SDK.\n *\n * The Game Closure SDK is free software: you can redistribute it and/or modify\n * it under the terms of the Mozilla Public License v. 2.0 as published by Mozilla.\n\n * The Game Closure SDK is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * Mozilla Public License v. 2.0 for more details.\n\n * You should have received a copy of the Mozilla Public License v. 2.0\n * along with the Game Closure SDK.  If not, see <http://mozilla.org/MPL/2.0/>.\n */\n/**\n * package timestep.env.browser.TextInput;\n *\n * A textbox for inputting user data.\n */\n\nvar $ = _browser2.default.$;\n\n/**\n * @extends lib.PubSub\n */\n_exports = function (_PubSub) {\n  _inherits(exports, _PubSub);\n\n  function exports(opts) {\n    _classCallCheck(this, exports);\n\n    var _this = _possibleConstructorReturn(this, _PubSub.call(this));\n\n    _this._el = $({\n      tag: 'input',\n      parent: document.body,\n      style: {\n        position: 'absolute',\n        left: '-100px',\n        top: '-100px'\n      },\n      attrs: {\n        type: 'text',\n        value: opts && opts.value || ''\n      }\n    });\n    _this._value = _this._el.value;\n    _this._selectionStart = 0;\n    _this._selectionEnd = 0;\n\n    $.onEvent(_this._el, 'keydown', _this, 'checkValue');\n    $.onEvent(_this._el, 'keyup', _this, 'checkValue');\n    $.onEvent(_this._el, 'keypress', _this, 'checkValue');\n    $.onEvent(_this._el, 'focus', _this, 'onFocus');\n    $.onEvent(_this._el, 'blur', _this, 'onBlur');\n    return _this;\n  }\n\n  exports.prototype.onFocus = function onFocus() {\n    this.publish('Focus');\n  };\n\n  exports.prototype.onBlur = function onBlur() {\n    this.publish('Blur');\n  };\n\n  exports.prototype.checkValue = function checkValue(evt) {\n    var target = evt.target,\n        start = target.selectionStart,\n        end = target.selectionEnd;\n\n    var value = this._el.value;\n\n    if (value != this._value) {\n      this.publish('ChangeValue', value);\n      this._value = value;\n    }\n\n    if (start != this._selectionStart) {\n      this._selectionStart = start;\n      this.publish('ChangeSelectionStart', start);\n    }\n\n    if (end != this._selectionEnd) {\n      this._selectionEnd = end;\n      this.publish('ChangeSelectionEnd', end);\n    }\n  };\n\n  exports.prototype.focus = function focus() {\n    _base.logger.log('focus');\n    this._el.focus();\n  };\n\n  exports.prototype.blur = function blur() {\n    this._el.blur();\n  };\n\n  return exports;\n}(_PubSub3.default);\n\n// Set desired tab- defaults to four space softtab\nvar tab = '    ',\n    tabLength = 4;\n\nArray.prototype.map.call(document.getElementsByTagName('textarea'), function (el) {\n  el.addEventListener('keydown', checkTab, false);\n});\n\nfunction checkTab(evt) {\n  var t = evt.target;\n  var ss = t.selectionStart;\n  var se = t.selectionEnd;\n\n  // Tab key - insert tab expansion\n  if (evt.keyCode == 9) {\n    evt.preventDefault();\n\n    if (evt.shiftKey) {\n      // Special case of multi line selection\n      if (ss != se && t.value.slice(ss, se).indexOf('\\n') != -1) {\n        // In case selection was not of entire lines (e.g. selection begins in the middle of a line)\n        // we ought to tab at the beginning as well as at the start of every following line.\n        var i = ss;\n        while (i && t.value.charAt(i - 1) != '\\n') {\n          --i;\n        }\n        var pre = t.value.slice(0, i);\n        var post = t.value.slice(se, t.value.length);\n        var sel = t.value.slice(i, se).replace(new RegExp('(^|\\n)' + tab, 'g'), function (match) {\n          se -= tab.length;\n          if (match.charAt(0) == '\\n') {\n            return '\\n';\n          } else {\n            ss -= tab.length;\n            return '';\n          }\n        });\n        t.value = pre.concat(sel).concat(post);\n\n        t.selectionStart = ss;\n        t.selectionEnd = se;\n      } else {\n        // \"Normal\" case (no selection or selection on one line only)\n        var i = ss;\n        while (i && t.value.charAt(i - 1) != '\\n') {\n          --i;\n        }\n        if (t.value.substring(i, i + tab.length) == tab) {\n          t.value = t.value.slice(0, i).concat(t.value.slice(i + tab.length, t.value.length));\n          if (ss == se) {\n            t.selectionStart = t.selectionEnd = ss - (ss == i ? 0 : tab.length);\n          } else {\n            t.selectionStart = ss - (ss == i ? 0 : tab.length);\n            t.selectionEnd = se - tab.length;\n          }\n        }\n      }\n    } else {\n      // Special case of multi line selection\n      if (ss != se && t.value.slice(ss, se).indexOf('\\n') != -1) {\n        // In case selection was not of entire lines (e.g. selection begins in the middle of a line)\n        // we ought to tab at the beginning as well as at the start of every following line.\n        var i = ss;\n        while (i && t.value.charAt(i - 1) != '\\n') {\n          --i;\n        }\n        var pre = t.value.slice(0, i);\n        var post = t.value.slice(se, t.value.length);\n        var sel = t.value.slice(i, se).replace(/\\n/g, function () {\n          se += tab.length;\n          return '\\n' + tab;\n        });\n        t.value = pre.concat(tab).concat(sel).concat(post);\n\n        t.selectionStart = ss + tab.length;\n        t.selectionEnd = se + tab.length;\n      } else {\n        // \"Normal\" case (no selection or selection on one line only)\n        var i = ss;\n        while (i && t.value.charAt(i - 1) != '\\n') {\n          --i;\n        }\n\n        t.value = t.value.slice(0, i).concat(tab).concat(t.value.slice(i, t.value.length));\n\n        if (ss == se) {\n          t.selectionStart = t.selectionEnd = ss + tab.length;\n        } else {\n          t.selectionStart = ss + tab.length;\n          t.selectionEnd = se + tab.length;\n        }\n      }\n    }\n  } else if (evt.shiftKey || evt.metaKey || evt.ctrlKey) {\n    return;\n  } else if (evt.keyCode == 8 && t.value.slice(ss - tabLength, ss) == tab) {\n    // Backspace key - delete preceding tab expansion, if exists\n    evt.preventDefault();\n\n    t.value = t.value.slice(0, ss - tabLength).concat(t.value.slice(ss, t.value.length));\n    t.selectionStart = t.selectionEnd = ss - tab.length;\n  } else if (evt.keyCode == 46 && t.value.slice(se, se + tabLength) == tab) {\n    // Delete key - delete following tab expansion, if exists\n    evt.preventDefault();\n\n    t.value = t.value.slice(0, ss).concat(t.value.slice(ss + tabLength, t.value.length));\n    t.selectionStart = t.selectionEnd = ss;\n  } else if (evt.keyCode == 37 && t.value.slice(ss - tabLength, ss) == tab) {\n    // Left/right arrow keys - move across the tab in one go\n    evt.preventDefault();\n    t.selectionStart = t.selectionEnd = ss - tabLength;\n  } else if (evt.keyCode == 39 && t.value.slice(ss, ss + tabLength) == tab) {\n    evt.preventDefault();\n    t.selectionStart = t.selectionEnd = ss + tabLength;\n  }\n}\n\nexports.default = _exports;\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/modules/timestep/src/platforms/browser/TextInput.js\n// module id = 90\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/modules/timestep/src/platforms/browser/TextInput.js?");

/***/ },
/* 91 */
/*!*****************************************************************************!*\
  !*** ./modules/devkit-core/modules/timestep/src/platforms/browser/Timer.js ***!
  \*****************************************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nexports.__esModule = true;\n\nvar _WebGLContext2D = __webpack_require__(/*! ./webgl/WebGLContext2D */ 70);\n\nvar _WebGLContext2D2 = _interopRequireDefault(_WebGLContext2D);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar _exports = {};\n\n/**\n * @license\n * This file is part of the Game Closure SDK.\n *\n * The Game Closure SDK is free software: you can redistribute it and/or modify\n * it under the terms of the Mozilla Public License v. 2.0 as published by Mozilla.\n\n * The Game Closure SDK is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * Mozilla Public License v. 2.0 for more details.\n\n * You should have received a copy of the Mozilla Public License v. 2.0\n * along with the Game Closure SDK.  If not, see <http://mozilla.org/MPL/2.0/>.\n */\n/**\n * package timestep.env.browser.Timer;\n *\n * System timer exposed to the device.\n */\n\nvar _onTick = null;\nvar disableRequestAnimFrame = !_WebGLContext2D2.default.isSupported;\nvar disablePostMessage = false;\nvar asFastAsPossible = !_WebGLContext2D2.default.isSupported;\nvar MIN_DT = 16;\n\nif (window.postMessage) {\n  var postMessageCb = function postMessageCb(evt) {\n    if (evt.data == 'timestep.TICK') {\n      onFrame();\n    }\n  };\n\n  if (window.addEventListener) {\n    window.addEventListener('message', postMessageCb, false);\n  } else {\n    window.attachEvent('onmessage', postMessageCb);\n  }\n} else {\n  disablePostMessage = true;\n  tickNow = sendTimeoutNow;\n}\n\nfunction sendPostMessage() {\n  window.postMessage('timestep.TICK', '*');\n}\n\nfunction sendTimeout() {\n  setTimeout(onFrame, MIN_DT);\n}\n\nfunction sendTimeoutNow() {\n  setTimeout(onFrame, 0);\n}\n\nvar fastDriver = sendTimeoutNow,\n    mainDriver = sendTimeout,\n    cancelDriver,\n    driverId;\n\nif (asFastAsPossible) {\n  if (!disablePostMessage) {\n    fastDriver = mainDriver = sendPostMessage;\n  } else {\n    mainDriver = sendTimeoutNow;\n  }\n} else {\n  var reqAnim = window.requestAnimationFrame;\n  var cancelAnim = window.cancelAnimationFrame;\n  var prefixes = ['', 'webkit', 'moz', 'o', 'ms'];\n\n  if (!disableRequestAnimFrame) {\n    for (var i = 0; i < prefixes.length && !reqAnim; ++i) {\n      reqAnim = window[prefixes[i] + 'RequestAnimationFrame'];\n      cancelAnim = window[prefixes[i] + 'CancelAnimationFrame'] || window[prefixes[i] + 'CancelRequestAnimationFrame'];\n    }\n  }\n\n  if (reqAnim) {\n    fastDriver = mainDriver = reqAnim;\n    cancelDriver = cancelAnim;\n  } else if (!disablePostMessage) {\n    fastDriver = sendPostMessage;\n  }\n}\n\n/*\nvar frameDts = [];\nvar print = false, frames = 0, lastPrint = 0;\nsetInterval(function () { print = true; }, 1000)\n\nvar slow = 0, fast = 0;\n*/\nfunction onFrame() {\n  if (_onTick) {\n    var now = Date.now();\n    var dt = now - (_exports.last || now);\n\n    _exports.last = now;\n\n    if (dt > MIN_DT) {\n      //  ++fast;\n      driverId = fastDriver.call(window, onFrame);\n    } else {\n      //  ++slow;\n      driverId = mainDriver.call(window, onFrame);\n    }\n\n    _onTick(dt);\n  }\n}\n\n_exports.last = null;\n\n_exports.start = function (onTick) {\n  _onTick = onTick;\n  driverId = mainDriver.call(window, onFrame);\n};\n\n_exports.stop = function () {\n  _onTick = null;\n  if (driverId) {\n    cancelDriver.call(window, driverId);\n    driverId = null;\n  }\n};\n\nexports.default = _exports;\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/modules/timestep/src/platforms/browser/Timer.js\n// module id = 91\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/modules/timestep/src/platforms/browser/Timer.js?");

/***/ },
/* 92 */
/*!***********************************************************************************!*\
  !*** ./modules/devkit-core/modules/timestep/src/platforms/browser/__imports__.js ***!
  \***********************************************************************************/
/***/ function(module, exports) {

	eval("'use strict';\n\nexports.__esModule = true;\nvar _exports = {};\n\n/**\n * @license\n * This file is part of the Game Closure SDK.\n *\n * The Game Closure SDK is free software: you can redistribute it and/or modify\n * it under the terms of the Mozilla Public License v. 2.0 as published by Mozilla.\n\n * The Game Closure SDK is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * Mozilla Public License v. 2.0 for more details.\n\n * You should have received a copy of the Mozilla Public License v. 2.0\n * along with the Game Closure SDK.  If not, see <http://mozilla.org/MPL/2.0/>.\n */\n_exports.resolve = function (env, opts) {\n  return ['.doc', '.Audio', '.Canvas', '.Context2D', '.dev_error', '.FlashAPI', '.FontBuffer', '.FontRenderer', '.initialize', '.Input', '.inputDialog', '.KeyListener', '.MobileBrowserAPI', '.SoundManager', '.StatusBar', '.TextBox', '.TextInput', '.Timer', '.EditText'];\n};\n\nexports.default = _exports;\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/modules/timestep/src/platforms/browser/__imports__.js\n// module id = 92\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/modules/timestep/src/platforms/browser/__imports__.js?");

/***/ },
/* 93 */
/*!*********************************************************************************!*\
  !*** ./modules/devkit-core/modules/timestep/src/platforms/browser/dev_error.js ***!
  \*********************************************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nexports.__esModule = true;\n\nvar _base = __webpack_require__(/*! base */ 2);\n\nvar _exports = {};\n\n/**\n * @license\n * This file is part of the Game Closure SDK.\n *\n * The Game Closure SDK is free software: you can redistribute it and/or modify\n * it under the terms of the Mozilla Public License v. 2.0 as published by Mozilla.\n\n * The Game Closure SDK is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * Mozilla Public License v. 2.0 for more details.\n\n * You should have received a copy of the Mozilla Public License v. 2.0\n * along with the Game Closure SDK.  If not, see <http://mozilla.org/MPL/2.0/>.\n */\n/**\n * @package timestep.env.browser.dev_error;\n *\n * Displays a developer error.\n *\n * ??? TODO move to a debug package.\n */\n_exports.render = function (e) {\n  _base.logger.error('unhandled tick exception');\n  _base.logger.error(e.stack);\n\n  var c = document.getElementsByTagName('canvas');\n  for (var i = 0, el; el = c[i]; ++i) {\n    render(el.getContext('2d'), e);\n  }\n};\n\nfunction render(ctx, e) {\n  ctx.fillStyle = 'rgb(0, 0, 255)';\n  ctx.fillRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n\n  var x = 30,\n      y = 40;\n\n  ctx.fillStyle = '#FFF';\n  ctx.font = 'bold 12px Monaco,\"Bitstream Vera Sans Mono\",\"Lucida Console\",Terminal,monospace';\n\n  function drawLine(msg) {\n    ctx.fillText(msg, x, y);\n    y += 20;\n  }\n\n  drawLine(e.message);\n  y += 40;\n  e.stack.split('\\n').map(drawLine);\n}\n\nexports.default = _exports;\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/modules/timestep/src/platforms/browser/dev_error.js\n// module id = 93\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/modules/timestep/src/platforms/browser/dev_error.js?");

/***/ },
/* 94 */
/*!***************************************************************************!*\
  !*** ./modules/devkit-core/modules/timestep/src/platforms/browser/doc.js ***!
  \***************************************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nexports.__esModule = true;\n\nvar _base = __webpack_require__(/*! base */ 2);\n\nvar _PubSub2 = __webpack_require__(/*! lib/PubSub */ 10);\n\nvar _PubSub3 = _interopRequireDefault(_PubSub2);\n\nvar _Enum = __webpack_require__(/*! lib/Enum */ 21);\n\nvar _Enum2 = _interopRequireDefault(_Enum);\n\nvar _browser = __webpack_require__(/*! util/browser */ 72);\n\nvar _browser2 = _interopRequireDefault(_browser);\n\nvar _device = __webpack_require__(/*! device */ 1);\n\nvar _device2 = _interopRequireDefault(_device);\n\nvar _userAgent = __webpack_require__(/*! userAgent */ 7);\n\nvar _userAgent2 = _interopRequireDefault(_userAgent);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _exports = {};\n\n/**\n * @license\n * This file is part of the Game Closure SDK.\n *\n * The Game Closure SDK is free software: you can redistribute it and/or modify\n * it under the terms of the Mozilla Public License v. 2.0 as published by Mozilla.\n\n * The Game Closure SDK is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * Mozilla Public License v. 2.0 for more details.\n\n * You should have received a copy of the Mozilla Public License v. 2.0\n * along with the Game Closure SDK.  If not, see <http://mozilla.org/MPL/2.0/>.\n */\n\nvar $ = _browser2.default.$;\n\nvar isIOS7 = _device2.default.iosVersion === 7;\nvar isIOSSafari = _device2.default.iosVersion >= 7 && !_device2.default.isIpad && !_device2.default.isStandalone && !_device2.default.isUIWebView;\nvar enableLandscapeScroll = isIOSSafari && window.parent === window;\n\nvar SCALING = (0, _Enum2.default)('FIXED', 'RESIZE', 'MANUAL');\nvar defaultScalingMode = !_device2.default.isMobileNative || _device2.default.simulating ? SCALING.RESIZE : SCALING.FIXED;\n\n/**\n * @extends lib.PubSub\n */\n\nvar Document = function (_PubSub) {\n  _inherits(Document, _PubSub);\n\n  function Document() {\n    _classCallCheck(this, Document);\n\n    var _this = _possibleConstructorReturn(this, _PubSub.call(this));\n\n    if (!$) {\n      return _possibleConstructorReturn(_this);\n    }\n\n    var doc = _base.GLOBAL.document;\n    var body = doc && doc.body;\n\n    _this._el = $({\n      parent: body,\n      style: {\n        position: 'absolute',\n        overflow: 'hidden',\n        width: '100%',\n        height: '100%'\n      }\n    });\n\n    _device2.default.screen.subscribe('Resize', _this, 'onResize');\n    if (_exports.postCreateHook) {\n      _exports.postCreateHook(_this);\n    }\n    _this.setScalingMode(defaultScalingMode);\n    return _this;\n  }\n\n  Document.prototype.unsubscribeResize = function unsubscribeResize() {\n    _device2.default.screen.unsubscribe('Resize', this, 'onResize');\n  };\n\n  Document.prototype.setEngine = function setEngine(engine) {\n    if (engine == this._engine) {\n      return;\n    }\n\n    if (engine.getOpt('minIOSLandscapeScroll') > _device2.default.iosVersion || engine.getOpt('disableIOSLandscapeScroll')) {\n      enableLandscapeScroll = false;\n    }\n\n    this._engine = engine;\n    this._canvas = this._engine.getCanvas();\n\n    if (enableLandscapeScroll) {\n      this._canvas.style.position = 'fixed';\n    }\n\n    this.appendChild(this._canvas);\n\n    if (this._canvas.getContext) {\n      var ctx = this._canvas.getContext(window.WebGLRenderingContext ? 'webgl' : '2d');\n      if (ctx.setParentNode) {\n        ctx.setParentNode(this._el);\n      }\n    }\n  };\n\n  Document.prototype.getElement = function getElement() {\n    return this._el;\n  };\n\n  Document.prototype.setScalingMode = function setScalingMode(scalingMode, opts) {\n    this._scalingMode = scalingMode;\n\n    var el = this._el,\n        s = el.style;\n\n    switch (scalingMode) {\n      case SCALING.FIXED:\n        opts = (0, _base.merge)(opts, {\n          width: _device2.default.width,\n          height: _device2.default.height\n        });\n        s.width = opts.width + 'px';\n        s.height = opts.height + 'px';\n        break;\n      case SCALING.RESIZE:\n        opts = (0, _base.merge)(opts, { resizeCanvas: true });\n      // fall through:\n      case SCALING.MANUAL:\n        s.margin = '0px';\n        s.width = '100%';\n        s.height = '100%';\n        break;\n    }\n\n    this._scalingOpts = opts;\n    this.onResize();\n    setTimeout((0, _base.bind)(this, 'onResize'), 1000);\n  };\n\n  Document.prototype.onResize = function onResize() {\n    var isIOS = _userAgent2.default.OS_TYPE === 'iPhone OS';\n    var el = this._el;\n    var s = this._el.style;\n    var orientation = _device2.default.screen.orientation;\n    el.className = orientation;\n\n    if (enableLandscapeScroll) {\n      // on phones, ios7 will only ever be 320px high max (does not change until the 6+)\n      var isLandscape = orientation === 'landscape';\n      document.documentElement.style.height = isLandscape && isIOS7 ? window.innerHeight == 320 ? '320px' : '640px' : '100%';\n      document.body.style.height = isIOS7 ? '100%' : '150%';\n    } else {\n      document.body.style.height = '100%';\n    }\n\n    _base.logger.log('resize', _device2.default.width, _device2.default.height);\n\n    var width = _device2.default.width;\n    var height = _device2.default.height;\n    var mode = this._scalingMode;\n    var opts = this._scalingOpts;\n\n    if (mode == SCALING.FIXED) {\n      width = opts.width;\n      height = opts.height;\n    }\n\n    // enforce maxWidth/maxHeight\n    // if maxWidth/maxHeight is met, switch a RESIZE scaling mode to FIXED (center the document on the screen)\n    if (opts.maxWidth && width > opts.maxWidth) {\n      width = opts.maxWidth;\n      if (mode == SCALING.RESIZE) {\n        mode = SCALING.FIXED;\n      }\n    }\n\n    if (opts.maxHeight && height > opts.maxHeight) {\n      height = opts.maxHeight;\n      if (mode == SCALING.RESIZE) {\n        mode = SCALING.FIXED;\n      }\n    }\n\n    // We may need to pause the engine when resizing on iOS\n    var needsPause = isIOS && this._engine && this._engine.isRunning;\n\n    switch (mode) {\n      case SCALING.MANUAL:\n        break;\n\n      // do nothing\n      case SCALING.FIXED:\n        // try to center the container\n        el.style.top = Math.round(Math.max(0, (window.innerHeight - height) / 2)) + 'px';\n        el.style.left = Math.round(Math.max(0, (window.innerWidth - width) / 2)) + 'px';\n\n        s.width = width + 'px';\n        s.height = height + 'px';\n        break;\n\n      case SCALING.RESIZE:\n        var cs = this._canvas && this._canvas.style;\n        var dpr = _device2.default.screen.devicePixelRatio;\n        var scaledWidth = width / dpr;\n        var scaledHeight = height / dpr;\n        // if we have a canvas element, scale it\n        if (opts.resizeCanvas && this._canvas && (cs.width != scaledWidth || cs.height != scaledHeight)) {\n          this._canvas.width = width;\n          this._canvas.height = height;\n          var ctx = this._canvas.getContext();\n          if (ctx.resize) {\n            ctx.resize(width, height);\n          }\n\n          var needsPause = isIOS && this._engine && this._engine.isRunning;\n          if (isIOS) {\n            // There is a mobile browser bug that causes the canvas to not properly\n            // resize. This forces a reflow, with the side effect of a brief screen flash.\n            var engine = this._engine;\n            if (needsPause) {\n              engine.pause();\n            }\n            cs.display = 'none';\n            setTimeout(function () {\n              cs.display = 'block';\n              if (needsPause) {\n                engine.resume();\n              }\n            }, 250);\n          }\n\n          cs.width = scaledWidth + 'px';\n          cs.height = scaledHeight + 'px';\n        }\n\n        s.width = scaledWidth + 'px';\n        s.height = scaledHeight + 'px';\n        break;\n    }\n\n    // make sure to force a render immediately (should we use needsRepaint instead?)\n    this._setDim(width, height);\n    if (this._engine && !needsPause) {\n      this._engine.render();\n    }\n  };\n\n  Document.prototype._setDim = function _setDim(width, height) {\n    if (this.width != width || this.height != height) {\n      this.width = width;\n      this.height = height;\n      this.publish('Resize', width, height);\n    }\n  };\n\n  Document.prototype.setColors = function setColors(bgColor, engineColor) {\n    if (this._el) {\n      this._el.style.background = engineColor;\n      document.documentElement.style.background = document.body.style.background = bgColor;\n    }\n  };\n\n  Document.prototype.appendChild = function appendChild(el) {\n    this._el.appendChild(el);\n  };\n\n  Document.prototype.getOffset = function getOffset() {\n    return {\n      x: this._el.offsetLeft,\n      y: this._el.offsetTop\n    };\n  };\n\n  return Document;\n}(_PubSub3.default);\n\n_exports = new Document();\n_exports.SCALING = SCALING;\n\n_exports.setDocStyle = function () {\n  var doc = _base.GLOBAL.document,\n      body = doc && doc.body;\n\n  if (body) {\n    var docStyle = {\n      height: '100%',\n      margin: '0px',\n      padding: '0px'\n    };\n\n    $.style(document.documentElement, docStyle);\n    $.style(document.body, docStyle);\n  }\n};\n\n_exports.defaultParent = null;\n_exports.postCreateHook = null;\n\nexports.default = _exports;\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/modules/timestep/src/platforms/browser/doc.js\n// module id = 94\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/modules/timestep/src/platforms/browser/doc.js?");

/***/ },
/* 95 */
/*!***************************************************************************!*\
  !*** ./modules/devkit-core/modules/timestep/src/platforms/browser/dom.js ***!
  \***************************************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nexports.__esModule = true;\n\nvar _browser = __webpack_require__(/*! util/browser */ 72);\n\nvar _browser2 = _interopRequireDefault(_browser);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _exports = {};\n\nvar $ = _browser2.default.$;\n\nvar _cssPrefix;\n_exports.getCSSPrefix = function () {\n  if (_cssPrefix === undefined) {\n    var styles = window.getComputedStyle(document.documentElement, '');\n    if (styles.OLink === '') {\n      _cssPrefix = '-o-';\n    } else {\n      var match = Array.prototype.join.call(styles, '').match(/-(moz|webkit|ms)-/);\n\n      if (match) {\n        _cssPrefix = '-' + match[1] + '-';\n      } else {\n        _cssPrefix = '';\n      }\n    }\n  }\n\n  return _cssPrefix;\n};\n\n_exports.Stylesheet = function () {\n  function _class(base) {\n    _classCallCheck(this, _class);\n\n    this._base = base ? base + ' ' : '';\n    this._rules = [];\n  }\n\n  _class.prototype.add = function add(selector, value) {\n    this._rules.push({\n      selector: selector,\n      value: value\n    });\n    return this;\n  };\n\n  _class.prototype.scale = function scale(_scale) {\n    this._rules.forEach(function (rule) {\n      rule.value = rule.value.replace(/([^;:]+:)(.*?)(;|$)/g, function (match, property, value, postfix) {\n        // skip border, but not border*radius\n        if (/border(?!.*?radius)/.test(property)) {\n          return match;\n        }\n        return property + value.replace(/\\d\\S*px/g, function (match) {\n          var value = parseFloat(match);\n          if (isNaN(value)) {\n            return match;\n          }\n          return parseFloat(value) * _scale + 'px';\n        }) + postfix;\n      });\n    });\n\n    if (this._el) {\n      this.insert();\n    }\n\n    return this;\n  };\n\n  _class.prototype.getValue = function getValue() {\n    return this._rules.map(function (rule) {\n      return this._base + rule.selector + '{' + rule.value + '}';\n    }, this).join('');\n  };\n\n  _class.prototype.insert = function insert() {\n    if (!this._el) {\n      this._el = $({\n        parent: document.getElementsByTagName('head')[0],\n        tag: 'style'\n      });\n    }\n\n    $.setText(this._el, this.getValue());\n  };\n\n  return _class;\n}();\n\nexports.default = _exports;\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/modules/timestep/src/platforms/browser/dom.js\n// module id = 95\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/modules/timestep/src/platforms/browser/dom.js?");

/***/ },
/* 96 */
/*!**********************************************************************************!*\
  !*** ./modules/devkit-core/modules/timestep/src/platforms/browser/initialize.js ***!
  \**********************************************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nexports.__esModule = true;\n\nvar _device = __webpack_require__(/*! device */ 1);\n\nvar _device2 = _interopRequireDefault(_device);\n\nvar _browser = __webpack_require__(/*! util/browser */ 72);\n\nvar _browser2 = _interopRequireDefault(_browser);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar _exports = {};\n\n/**\n * @license\n * This file is part of the Game Closure SDK.\n *\n * The Game Closure SDK is free software: you can redistribute it and/or modify\n * it under the terms of the Mozilla Public License v. 2.0 as published by Mozilla.\n\n * The Game Closure SDK is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * Mozilla Public License v. 2.0 for more details.\n\n * You should have received a copy of the Mozilla Public License v. 2.0\n * along with the Game Closure SDK.  If not, see <http://mozilla.org/MPL/2.0/>.\n */\n\nvar $ = _browser2.default.$;\n\n_device2.default.registerDevice('browser', 'platforms.browser');\n\n_exports.init = function () {\n  var onResize = function onResize() {\n    var dpr = _device2.default.screen.devicePixelRatio;\n    var doc = window.document;\n    var width = (window.innerWidth || doc.clientWidth || doc.clientWidth) * dpr;\n    var height = (window.innerHeight || doc.clientHeight || doc.clientHeight) * dpr;\n\n    if (width != _device2.default.width || height != _device2.default.height || !_device2.default.screen.orientation) {\n      _device2.default.width = width;\n      _device2.default.height = height;\n      _device2.default.screen.width = width;\n      _device2.default.screen.height = height;\n\n      if (width > height) {\n        _device2.default.screen.isPortrait = false;\n        _device2.default.screen.isLandscape = true;\n        _device2.default.screen.orientation = 'landscape';\n      } else {\n        _device2.default.screen.isPortrait = true;\n        _device2.default.screen.isLandscape = false;\n        _device2.default.screen.orientation = 'portrait';\n      }\n\n      _device2.default.screen.publish('Resize', width, height);\n    }\n  };\n\n  $.onEvent(window, 'resize', onResize, false);\n\n  onResize();\n};\n\nexports.default = _exports;\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/modules/timestep/src/platforms/browser/initialize.js\n// module id = 96\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/modules/timestep/src/platforms/browser/initialize.js?");

/***/ },
/* 97 */
/*!***********************************************************************************!*\
  !*** ./modules/devkit-core/modules/timestep/src/platforms/browser/inputDialog.js ***!
  \***********************************************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nexports.__esModule = true;\n\nvar _device = __webpack_require__(/*! device */ 1);\n\nvar _device2 = _interopRequireDefault(_device);\n\nvar _browser = __webpack_require__(/*! util/browser */ 72);\n\nvar _browser2 = _interopRequireDefault(_browser);\n\nvar _keyboardTypes = __webpack_require__(/*! ui/keyboardTypes */ 84);\n\nvar _keyboardTypes2 = _interopRequireDefault(_keyboardTypes);\n\nvar _dom = __webpack_require__(/*! ./dom */ 95);\n\nvar _dom2 = _interopRequireDefault(_dom);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _exports = {};\n\n/**\n * @license\n * This file is part of the Game Closure SDK.\n *\n * The Game Closure SDK is free software: you can redistribute it and/or modify\n * it under the terms of the Mozilla Public License v. 2.0 as published by Mozilla.\n\n * The Game Closure SDK is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * Mozilla Public License v. 2.0 for more details.\n\n * You should have received a copy of the Mozilla Public License v. 2.0\n * along with the Game Closure SDK.  If not, see <http://mozilla.org/MPL/2.0/>.\n */\n/**\n * package timestep.env.browser.InputPrompt;\n *\n * Prompt the user manually for input.\n */\n\nvar $ = _browser2.default.$;\n\n\n_exports.show = function (controller, opts) {\n  new InputDialog(controller, opts);\n};\n\nvar css = {\n  classes: {\n    base: 'timestep-native-dialog',\n    dialog: 'dialog',\n    title: 'title',\n    hasMessage: 'has-message',\n    message: 'message',\n    buttons: 'buttons',\n    input: 'input'\n  },\n  getStylesheet: function getStylesheet() {\n    var prefix = _dom2.default.getCSSPrefix();\n    return new _dom2.default.Stylesheet('.' + this.classes.base).add('', 'position: absolute; width: 100%; height: 100%; top: 0px; left: 0px; z-index: 9999999; background: rgba(0, 0, 0, 0.5);').add('*', prefix + 'box-sizing: border-box; font: 12px Helvetica').add('.' + this.classes.dialog, 'position: absolute; color: #444; background: rgba(255, 255, 255, 0.93); border-radius: 5px; text-align: left; ' + prefix + 'box-shadow: 0px 3px 40px rgba(0, 0, 0, 0.2)').add('.' + this.classes.hasMessage, 'margin-bottom: 16px').add('.' + this.classes.title, 'padding: 16px; font-weight: bold; overflow: hidden; text-overflow: ellipsis; white-space: nowrap').add('.' + this.classes.message, 'padding: 0px 16px; color: #888').add('.' + this.classes.buttons, 'margin: 16px 0px 0px 0px; height: 34px; border-top: 1px solid #CCC').add('.' + this.classes.input, 'padding: 0px 8px').add('button', 'position: relative; border: 0px; margin: 0px; width: 50%; height: 100%; cursor: pointer; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; font-weight: bold; background: transparent; outline: none').add('button:active', 'background: #FFF').add('button:first-child', 'border-bottom-left-radius: 5px').add('button:last-child', 'border-bottom-right-radius: 5px').add('button:only-child', 'width: 100%; border-bottom-right-radius: 5px').add('button:nth-child(2):before', 'content:\"\"; position: absolute; left: 0px; top: 0px; width: 1px; height: 100%; border-left: 1px solid #CCC').add('input', 'margin: 0px; border: 1px solid #ccc; padding: 4px 8px; text-align: left; width: 100%');\n  },\n  sizeAndPositionDialog: function sizeAndPositionDialog(dialog, contents) {\n    var scale = _device2.default.devicePixelRatio;\n    var windowSize = $.size(window);\n    contents.style.overflow = 'auto';\n    contents.style.maxHeight = Math.min(200 * scale, Math.floor(windowSize.height / 3)) + 'px';\n    dialog.style.maxWidth = Math.min(300 * scale, Math.floor(windowSize.width - 40)) + 'px';\n    dialog.style.left = Math.max(0, (windowSize.width - dialog.offsetWidth) / 2) + 'px';\n    dialog.style.top = Math.max(0, (windowSize.height - dialog.offsetHeight) / 2) + 'px';\n  }\n};\n\nvar dialogStylesheet;\n\nvar InputDialog = function () {\n  function InputDialog(controller, opts) {\n    _classCallCheck(this, InputDialog);\n\n    var addClasses = opts.defaultBrowserStyles;\n    if (!dialogStylesheet && addClasses) {\n      dialogStylesheet = css.getStylesheet().scale(_device2.default.devicePixelRatio).insert();\n    }\n\n    // at least one button must be visible\n    if (!opts.okText && !opts.cancelText) {\n      opts.okText = 'ok';\n    }\n\n    // create buttons\n    this._buttons = [];\n\n    if (opts.cancelText) {\n      this._createButton(opts.cancelText, opts.onCancel);\n    }\n\n    if (opts.okText) {\n      this._createButton(opts.okText, opts.onSubmit);\n    }\n\n    if (opts.isPassword) {\n      opts.keyboardType = 'password';\n    }\n    this._createInputField(opts.value, opts.keyboardType, opts.onChange);\n\n    // create dialog\n    var body = $({\n      className: opts.message && addClasses && css.classes.hasMessage,\n      children: [{\n        className: addClasses && css.classes.title,\n        text: opts.title\n      }, {\n        className: opts.message && addClasses && css.classes.message,\n        text: opts.message\n      }]\n    });\n\n    var dialog = $({\n      className: addClasses && css.classes.dialog,\n      children: [body, {\n        className: addClasses && css.classes.input,\n        children: [this._input]\n      }, {\n        className: addClasses && css.classes.buttons,\n        children: this._buttons\n      }]\n    });\n\n    this._el = $({\n      parent: document.body,\n      className: addClasses && css.classes.base,\n      children: [dialog]\n    });\n\n    $.onEvent(this._el, 'mousemove', this.onInputMove);\n    $.onEvent(this._el, 'touchmove', this.onInputMove);\n\n    if (addClasses) {\n      css.sizeAndPositionDialog(dialog, body);\n    }\n\n    if (opts.autoFocus) {\n      this._input.focus();\n    }\n\n    if (opts.onShow) {\n      opts.onShow(dialog);\n    }\n  }\n\n  InputDialog.prototype.onInputMove = function onInputMove(e) {\n    var target = e.target;\n    while (target && target != document.body) {\n      if (target == dialog) {\n        return;\n      }\n      target = target.parentNode;\n    }\n\n    e.preventDefault();\n  };\n\n  InputDialog.prototype.onInputEnd = function onInputEnd(cb) {\n    this.close();\n    if (cb) {\n      cb && cb(this.getValue());\n    }\n  };\n\n  InputDialog.prototype.close = function close() {\n    $.remove(this._el);\n  };\n\n  InputDialog.prototype._createButton = function _createButton(text, cb) {\n    var _this = this;\n\n    var btn = $({\n      tag: 'button',\n      text: text,\n      attrs: { noCapture: true }\n    });\n\n    $.onEvent(btn, 'mouseup', function () {\n      return _this.onInputEnd(callback);\n    });\n    $.onEvent(btn, 'touchend', function () {\n      return _this.onInputEnd(callback);\n    });\n\n    this._buttons.push(btn);\n  };\n\n  InputDialog.prototype._createInputField = function _createInputField(value, type, cb) {\n    var input = $({\n      tag: 'input',\n      value: value,\n      attrs: {\n        noCapture: true,\n        type: _keyboardTypes2.default.getHTMLType(type)\n      }\n    });\n\n    if (cb) {\n      if (value === undefined) {\n        value = '';\n      }\n\n      var listener = function (evt) {\n        var _value = this.getValue();\n        if (value !== _value) {\n          value = _value;\n\n          cb(_value, evt);\n        }\n      }.bind(this);\n\n      $.onEvent(input, 'keyup', listener);\n      $.onEvent(input, 'change', listener);\n    }\n\n    this._input = input;\n  };\n\n  InputDialog.prototype.getValue = function getValue() {\n    return this._input && this._input.value;\n  };\n\n  return InputDialog;\n}();\n\nexports.default = _exports;\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/modules/timestep/src/platforms/browser/inputDialog.js\n// module id = 97\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/modules/timestep/src/platforms/browser/inputDialog.js?");

/***/ },
/* 98 */
/*!********************************************************************!*\
  !*** ./modules/devkit-core/modules/timestep/src/ui/InputPrompt.js ***!
  \********************************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nexports.__esModule = true;\n\nvar _base = __webpack_require__(/*! base */ 2);\n\nvar _deprecated = __webpack_require__(/*! ./debug/deprecated */ 99);\n\nvar _deprecated2 = _interopRequireDefault(_deprecated);\n\nvar _types = __webpack_require__(/*! ./debug/types */ 100);\n\nvar _types2 = _interopRequireDefault(_types);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _exports = {};\n\n/**\n * @license\n * This file is part of the Game Closure SDK.\n *\n * The Game Closure SDK is free software: you can redistribute it and/or modify\n * it under the terms of the Mozilla Public License v. 2.0 as published by Mozilla.\n\n * The Game Closure SDK is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * Mozilla Public License v. 2.0 for more details.\n\n * You should have received a copy of the Mozilla Public License v. 2.0\n * along with the Game Closure SDK.  If not, see <http://mozilla.org/MPL/2.0/>.\n */\n/* globals NATIVE, DEBUG, jsio */\n\n\nvar inputDialog;\n\n/**\n * @class InputPrompt\n *\n * Shows a native dialog that prompts the user for input.  In the tealeaf\n * runtime, this will open a native Android and iOS prompt.  In the browser, we\n * create a pure-DOM alternative of a one or two button prompt view using the\n * <input> tag and HTML5 input types.\n *\n */\n_exports = function () {\n  function exports(opts) {\n    _classCallCheck(this, exports);\n\n    opts = opts || {};\n\n    jsio('import device from \"device\"');\n    jsio('import keyboardTypes from \"./keyboardTypes\"');\n    inputDialog = device.get('inputDialog');\n\n    function get(prop, defaultValue) {\n      return opts[prop] !== undefined ? opts[prop] : defaultValue;\n    }\n\n    this._opts = (0, _base.merge)({\n      title: get('title', ''),\n      value: get('value', ''),\n      okText: get('okText', 'ok'),\n      cancelText: get('cancelText', 'cancel'),\n      message: get('message', get('prompt', '')),\n      autoFocus: !!get('autoFocus', get('autoShowKeyboard', true)),\n      isPassword: !!get('isPassword', false),\n      keyboardType: get('keyboardType', 'default'),\n      defaultBrowserStyles: get('defaultBrowserStyles', true)\n    }, opts);\n\n    // set handlers\n    this.onChange = this._opts.onChange;\n    this.onSubmit = this._opts.onSubmit;\n\n    if (false) {\n      _types2.default.check('InputPrompt', {\n        'title': {\n          value: this._opts.title,\n          type: 'string',\n          required: true\n        },\n        'message (prompt)': {\n          value: this._opts.message,\n          type: 'string',\n          required: true\n        },\n        'ok text': {\n          value: this._opts.okText,\n          type: 'string',\n          required: true\n        },\n        'cancel text': {\n          value: this._opts.cancelText,\n          type: 'string',\n          required: true\n        },\n        'value': {\n          value: this._opts.value,\n          type: 'string',\n          required: true\n        },\n        'auto-show keyboard': {\n          value: this._opts.autoShowKeyboard,\n          type: 'boolean',\n          require: true\n        },\n        'is password field': {\n          value: this._opts.isPassword,\n          type: 'boolean',\n          require: true\n        },\n        'keyboard type': {\n          value: this._opts.keyboardType,\n          type: 'key',\n          dictionary: _exports.KeyboardTypes.htmlTypes,\n          toLowerCase: true,\n          require: true\n        }\n      });\n    }\n  }\n\n  exports.prototype.show = function show() {\n    this._prompt = inputDialog.show(this, this._opts);\n  };\n\n  exports.prototype.getValue = function getValue() {\n    return this._opts.value;\n  };\n\n  exports.prototype.setValue = function setValue(value) {\n    this._opts.value = value;\n    return this;\n  };\n\n  exports.prototype.setOkButton = function setOkButton(value) {\n    this._opts.okText = value;\n    return this;\n  };\n\n  exports.prototype.setCancelButton = function setCancelButton(value) {\n    this._opts.cancelText = value;\n    return this;\n  };\n\n  exports.prototype.setKeyboardType = function setKeyboardType(keyboardType) {\n    this._opts.keyboardType = keyboardType;\n    return this;\n  };\n\n  exports.prototype.setMessage = function setMessage(message) {\n    this._opts.message = message;\n    return this;\n  };\n\n  return exports;\n}();\n\n_deprecated2.default.method(_exports.prototype, 'requestFocus', function () {\n  this.show();\n  return this;\n});\n_deprecated2.default.method(_exports.prototype, 'closeEditField');\n_deprecated2.default.method(_exports.prototype, 'refresh');\n_deprecated2.default.method(_exports.prototype, 'setHint');\n\n_exports.KeyboardTypes = keyboardTypes;\n\nexports.default = _exports;\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/modules/timestep/src/ui/InputPrompt.js\n// module id = 98\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/modules/timestep/src/ui/InputPrompt.js?");

/***/ },
/* 99 */
/*!*************************************************************************!*\
  !*** ./modules/devkit-core/modules/timestep/src/ui/debug/deprecated.js ***!
  \*************************************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nexports.__esModule = true;\n\nvar _base = __webpack_require__(/*! base */ 2);\n\nvar _exports = {};\n\n/* globals DEBUG */\n_exports.method = function (prototype, method, func) {\n  if (false) {\n    prototype[method] = function () {\n      _base.logger.error('@deprecated', method, prototype.constructor.name);\n      if (func) {\n        return func.apply(this, arguments);\n      }\n    };\n  } else {\n    prototype[method] = func || function () {};\n  }\n};\n\nexports.default = _exports;\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/modules/timestep/src/ui/debug/deprecated.js\n// module id = 99\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/modules/timestep/src/ui/debug/deprecated.js?");

/***/ },
/* 100 */
/*!********************************************************************!*\
  !*** ./modules/devkit-core/modules/timestep/src/ui/debug/types.js ***!
  \********************************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nexports.__esModule = true;\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _base = __webpack_require__(/*! base */ 2);\n\nvar _exports = {};\n\n/* globals DEBUG */\n/*\n * opts:\n *  - value: value to check\n *  - allowNull: if true and required, value can be null, else nulls for\n *    required values are errors\n *  - required: if true, error if value is undefined/null (see allowNull)\n */\nif (false) {\n  var isNumber = function isNumber(val) {\n    return typeof val == 'number' && !isNaN(val);\n  };\n  var VALIDATORS = {\n    'string': function string(val) {\n      return typeof val == 'string';\n    },\n    'integer': function integer(val) {\n      return isNumber(val) && Math.floor(val) == val;\n    },\n    'number': isNumber,\n    'float': isNumber,\n    'array': Array.isArray,\n    'object': function object(val) {\n      return (typeof val === 'undefined' ? 'undefined' : _typeof(val)) == 'object';\n    },\n    'key': function key(_key, opts) {\n      if (opts.toLowerCase) {\n        return (_key.toLowerCase && _key.toLowerCase()) in lowerCaseKeys(opts.dictionary);\n      } else {\n        return opts.dictionary && _key in opts.dictionary;\n      }\n    }\n  };\n\n  var ERRORS = {\n    'default': function _default(scope, name, opts) {\n      return scope + ' \"' + name + '\" should be a ' + opts.type;\n    },\n    'key': function key(scope, name, opts) {\n      return scope + ' \"' + name + '\" should be a key from the set: ' + Object.keys(opts.toLowerCase ? lowerCaseKeys(opts.dictionary) : opts.dictionary).join(', ');\n    }\n  };\n\n  var lowerCaseKeys = function lowerCaseKeys(obj) {\n    var keys = {};\n    if (obj) {\n      for (var k in obj) {\n        keys[k.toLowerCase()] = true;\n      }\n    }\n    return keys;\n  };\n\n  var getError = function getError(scope, name, opts) {\n    var msg = (ERRORS[opts.type] || ERRORS['default'])(scope, name, opts);\n    return new TypeError(msg);\n  };\n\n  _exports.check = function (scope, properties) {\n    if (DEBUG) {\n      Object.keys(properties).forEach(function (name) {\n        var opts = properties[name];\n        if (opts.required && opts.value === undefined || opts.value === null && !opts.allowNull) {\n          _base.logger.error(new TypeError(scope + ' \"' + name + '\" required'));\n        } else if (opts.type in VALIDATORS) {\n          if (!VALIDATORS[opts.type](opts.value, opts)) {\n            _base.logger.error(getError(scope, name, opts));\n          }\n        }\n      });\n    }\n  };\n} else {\n  // production, no checking\n  _exports.check = function () {};\n}\n\nexports.default = _exports;\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/modules/timestep/src/ui/debug/types.js\n// module id = 100\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/modules/timestep/src/ui/debug/types.js?");

/***/ },
/* 101 */
/*!*************************************************************!*\
  !*** ./modules/devkit-core/modules/timestep/src/ui/init.js ***!
  \*************************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nvar _View = __webpack_require__(/*! ./View */ 17);\n\nvar _View2 = _interopRequireDefault(_View);\n\nvar _Engine = __webpack_require__(/*! ./Engine */ 52);\n\nvar _Engine2 = _interopRequireDefault(_Engine);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/modules/timestep/src/ui/init.js\n// module id = 101\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/modules/timestep/src/ui/init.js?");

/***/ },
/* 102 */
/*!****************************!*\
  !*** ./src/TitleScreen.js ***!
  \****************************/
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nexports.__esModule = true;\n\nvar _View2 = __webpack_require__(/*! ui/View */ 17);\n\nvar _View3 = _interopRequireDefault(_View2);\n\nvar _ImageView = __webpack_require__(/*! ui/ImageView */ 103);\n\nvar _ImageView2 = _interopRequireDefault(_ImageView);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /*\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * The title screen consists of a background image and a\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * start button. When this button is pressed, and event is\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * emitted to itself, which is listened for in the top-level\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * application. When that happens, the title screen is removed,\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * and the game screen shown.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\n/* The title screen is added to the scene graph when it becomes\n * a child of the main application. When this class is instantiated,\n * it adds the start button as a child.\n */\nvar TitleScreen = function (_View) {\n\t_inherits(TitleScreen, _View);\n\n\tfunction TitleScreen(opts) {\n\t\t_classCallCheck(this, TitleScreen);\n\n\t\topts = merge(opts, {\n\t\t\tx: 0,\n\t\t\ty: 0,\n\t\t\timage: \"resources/images/title_screen.png\"\n\t\t});\n\n\t\tvar _this = _possibleConstructorReturn(this, _View.call(this, opts));\n\n\t\t_this.build();\n\t\treturn _this;\n\t}\n\n\tTitleScreen.prototype.build = function build() {\n\t\t/* Since the start button is a part the background image,\n   * we just need to create and position an overlay view that\n   * will register input events and act as button.\n   */\n\t\tvar startbutton = new ui.View({\n\t\t\tsuperview: this,\n\t\t\tx: 58,\n\t\t\ty: 313,\n\t\t\twidth: 200,\n\t\t\theight: 100\n\t\t});\n\n\t\t/* Listening for a touch or click event, and will dispatch a\n   * custom event to the title screen, which is listened for in\n   * the top-level application file.\n   */\n\t\tstartbutton.on('InputSelect', bind(this, function () {\n\t\t\tthis.emit('titlescreen:start');\n\t\t}));\n\t};\n\n\treturn TitleScreen;\n}(_View3.default);\n\nexports.default = TitleScreen;\n;\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/TitleScreen.js\n// module id = 102\n// module chunks = 0\n//# sourceURL=webpack:///./src/TitleScreen.js?");

/***/ },
/* 103 */
/*!******************************************************************!*\
  !*** ./modules/devkit-core/modules/timestep/src/ui/ImageView.js ***!
  \******************************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nexports.__esModule = true;\n\nvar _device = __webpack_require__(/*! device */ 1);\n\nvar _device2 = _interopRequireDefault(_device);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar _exports = {};\n\n/**\n * @license\n * This file is part of the Game Closure SDK.\n *\n * The Game Closure SDK is free software: you can redistribute it and/or modify\n * it under the terms of the Mozilla Public License v. 2.0 as published by Mozilla.\n\n * The Game Closure SDK is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * Mozilla Public License v. 2.0 for more details.\n\n * You should have received a copy of the Mozilla Public License v. 2.0\n * along with the Game Closure SDK.  If not, see <http://mozilla.org/MPL/2.0/>.\n */\n/**\n * @class ui.ImageView;\n * Import the ImageView from the Canvas/DOM rendering backend.\n *\n * @doc http://doc.gameclosure.com/api/ui-imageview.html\n * @docsrc https://github.com/gameclosure/doc/blob/master/api/ui/imageview.md\n */\n\n_exports = _device2.default.importUI('ImageView');\n\nexports.default = _exports;\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/modules/timestep/src/ui/ImageView.js\n// module id = 103\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/modules/timestep/src/ui/ImageView.js?");

/***/ },
/* 104 */
/*!***************************!*\
  !*** ./src/GameScreen.js ***!
  \***************************/
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nexports.__esModule = true;\n\nvar _animate = __webpack_require__(/*! animate */ 37);\n\nvar _animate2 = _interopRequireDefault(_animate);\n\nvar _View2 = __webpack_require__(/*! ui/View */ 17);\n\nvar _View3 = _interopRequireDefault(_View2);\n\nvar _ImageView = __webpack_require__(/*! ui/ImageView */ 103);\n\nvar _ImageView2 = _interopRequireDefault(_ImageView);\n\nvar _TextView = __webpack_require__(/*! ui/TextView */ 105);\n\nvar _TextView2 = _interopRequireDefault(_TextView);\n\nvar _MoleHill = __webpack_require__(/*! src/MoleHill */ 106);\n\nvar _MoleHill2 = _interopRequireDefault(_MoleHill);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /*\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * The game screen is a singleton view that consists of\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * a scoreboard and a collection of molehills.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\n/* Some game constants.\n */\nvar score = 0,\n    high_score = 19,\n    hit_value = 1,\n    mole_interval = 600,\n    game_on = false,\n    game_length = 20000,\n    //20 secs\ncountdown_secs = game_length / 1000,\n    lang = 'en';\n\n/* The GameScreen view is a child of the main application.\n * By adding the scoreboard and the molehills as it's children,\n * everything is visible in the scene graph.\n */\n\nvar GameScreen = function (_View) {\n\t_inherits(GameScreen, _View);\n\n\tfunction GameScreen(opts) {\n\t\t_classCallCheck(this, GameScreen);\n\n\t\topts = merge(opts, {\n\t\t\tx: 0,\n\t\t\ty: 0,\n\t\t\twidth: 320,\n\t\t\theight: 480\n\t\t});\n\n\t\tvar _this = _possibleConstructorReturn(this, _View.call(this, opts));\n\n\t\t_this.build();\n\t\treturn _this;\n\t}\n\n\t/*\n  * Layout the scoreboard and molehills.\n  */\n\tGameScreen.prototype.build = function build() {\n\t\t/* The start event is emitted from the start button via the main application.\n   */\n\t\tthis.on('app:start', start_game_flow.bind(this));\n\n\t\t/* The scoreboard displays the \"ready, set, go\" message,\n   * the current score, and the end game message. We'll set\n   * it as a hidden property on our class since we'll use it\n   * throughout the game.\n   */\n\t\tthis._scoreboard = new ui.TextView({\n\t\t\tsuperview: this,\n\t\t\tx: 0,\n\t\t\ty: 15,\n\t\t\twidth: 320,\n\t\t\theight: 50,\n\t\t\tautoSize: false,\n\t\t\tsize: 38,\n\t\t\tverticalAlign: 'middle',\n\t\t\thorizontalAlign: 'center',\n\t\t\twrap: false,\n\t\t\tcolor: '#FFFFFF'\n\t\t});\n\n\t\tvar x_offset = 5;\n\t\tvar y_offset = 160;\n\t\tvar y_pad = 25;\n\t\tvar layout = [[1, 0, 1], [0, 1, 0], [1, 0, 1]];\n\n\t\tthis.style.width = 320;\n\t\tthis.style.height = 480;\n\n\t\tthis._molehills = [];\n\n\t\tfor (var row = 0, len = layout.length; row < len; row++) {\n\t\t\tfor (var col = 0; col < len; col++) {\n\t\t\t\tif (layout[row][col] !== 0) {\n\t\t\t\t\tvar molehill = new _MoleHill2.default();\n\t\t\t\t\tmolehill.style.x = x_offset + col * molehill.style.width;\n\t\t\t\t\tmolehill.style.y = y_offset + row * (molehill.style.height + y_pad);\n\t\t\t\t\tthis.addSubview(molehill);\n\t\t\t\t\tthis._molehills.push(molehill);\n\n\t\t\t\t\t//update score on hit event\n\t\t\t\t\tmolehill.on('molehill:hit', bind(this, function () {\n\t\t\t\t\t\tif (game_on) {\n\t\t\t\t\t\t\tscore = score + hit_value;\n\t\t\t\t\t\t\tthis._scoreboard.setText(score.toString());\n\t\t\t\t\t\t}\n\t\t\t\t\t}));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t//Set up countdown timer\n\t\tthis._countdown = new ui.TextView({\n\t\t\tsuperview: this._scoreboard,\n\t\t\tvisible: false,\n\t\t\tx: 260,\n\t\t\ty: -5,\n\t\t\twidth: 50,\n\t\t\theight: 50,\n\t\t\tsize: 24,\n\t\t\tcolor: '#FFFFFF',\n\t\t\topacity: 0.7\n\t\t});\n\t};\n\n\treturn GameScreen;\n}(_View3.default);\n\nexports.default = GameScreen;\n;\n\n/*\n * Game play\n */\n\n/* Manages the intro animation sequence before starting game.\n */\nfunction start_game_flow() {\n\tvar that = this;\n\n\t(0, _animate2.default)(that._scoreboard).wait(1000).then(function () {\n\t\tthat._scoreboard.setText(text.READY);\n\t}).wait(1500).then(function () {\n\t\tthat._scoreboard.setText(text.SET);\n\t}).wait(1500).then(function () {\n\t\tthat._scoreboard.setText(text.GO);\n\t\t//start game ...\n\t\tgame_on = true;\n\t\tplay_game.call(that);\n\t});\n}\n\n/* With everything in place, the actual game play is quite simple.\n * Summon a non-active mole every n seconds. If it's hit, an event\n * handler on the molehill updates the score. After a set timeout,\n * stop calling the moles and proceed to the end game.\n */\nfunction play_game() {\n\tvar i = setInterval(tick.bind(this), mole_interval),\n\t    j = setInterval(update_countdown.bind(this), 1000);\n\n\tsetTimeout(bind(this, function () {\n\t\tgame_on = false;\n\t\tclearInterval(i);\n\t\tclearInterval(j);\n\t\tsetTimeout(end_game_flow.bind(this), mole_interval * 2);\n\t\tthis._countdown.setText(\":00\");\n\t}), game_length);\n\n\t//Make countdown timer visible, remove start message if still there.\n\tsetTimeout(bind(this, function () {\n\t\tthis._scoreboard.setText(score.toString());\n\t\tthis._countdown.style.visible = true;\n\t}), game_length * 0.25);\n\n\t//Running out of time! Set countdown timer red.\n\tsetTimeout(bind(this, function () {\n\t\tthis._countdown.updateOpts({ color: '#CC0066' });\n\t}), game_length * 0.75);\n}\n\n/* Pick a random, non-active, mole from our molehills.\n */\nfunction tick() {\n\tvar len = this._molehills.length,\n\t    molehill = this._molehills[Math.random() * len | 0];\n\n\twhile (molehill.activeMole) {\n\t\tmolehill = this._molehills[Math.random() * len | 0];\n\t}\n\tmolehill.showMole();\n}\n\n/* Updates the countdown timer, pad out leading zeros.\n */\nfunction update_countdown() {\n\tcountdown_secs -= 1;\n\tthis._countdown.setText(\":\" + (\"00\" + countdown_secs).slice(-2));\n}\n\n/* Check for high-score and play the ending animation.\n * Add a click-handler to the screen to return to the title\n * screen so we may play again.\n */\nfunction end_game_flow() {\n\tvar isHighScore = score > high_score,\n\t    end_msg = get_end_message(score, isHighScore);\n\n\tthis._countdown.setText(''); //clear countdown text\n\t//resize scoreboard text to fit everything\n\tthis._scoreboard.updateOpts({\n\t\ttext: '',\n\t\tx: 10,\n\t\tfontSize: 17,\n\t\tverticalAlign: 'top',\n\t\ttextAlign: 'left',\n\t\tmultiline: true\n\t});\n\n\t//check for high-score and do appropriate animation\n\tif (isHighScore) {\n\t\thigh_score = score;\n\t\tthis._molehills.forEach(function (molehill) {\n\t\t\tmolehill.endAnimation();\n\t\t});\n\t} else {\n\t\tvar i = (this._molehills.length - 1) / 2 | 0; //just center mole\n\t\tthis._molehills[i].endAnimation(true);\n\t}\n\n\tthis._scoreboard.setText(end_msg);\n\n\t//slight delay before allowing a tap reset\n\tsetTimeout(emit_endgame_event.bind(this), 2000);\n}\n\n/* Tell the main app to switch back to the title screen.\n */\nfunction emit_endgame_event() {\n\tthis.once('InputSelect', function () {\n\t\tthis.emit('gamescreen:end');\n\t\treset_game.call(this);\n\t});\n}\n\n/* Reset game counters and assets.\n */\nfunction reset_game() {\n\tscore = 0;\n\tcountdown_secs = game_length / 1000;\n\tthis._scoreboard.setText('');\n\tthis._molehills.forEach(function (molehill) {\n\t\tmolehill.resetMole();\n\t});\n\tthis._scoreboard.updateOpts({\n\t\tx: 0,\n\t\tfontSize: 38,\n\t\tverticalAlign: 'middle',\n\t\ttextAlign: 'center',\n\t\tmultiline: false\n\t});\n\tthis._countdown.updateOpts({\n\t\tvisible: false,\n\t\tcolor: '#fff'\n\t});\n}\n\n/*\n * Strings\n */\n\nfunction get_end_message(score, isHighScore) {\n\tvar moles = score === 1 ? text.MOLE : text.MOLES,\n\t    end_msg = text.END_MSG_START + ' ' + score + ' ' + moles + '.\\n';\n\n\tif (isHighScore) {\n\t\tend_msg += text.HIGH_SCORE + '\\n';\n\t} else {\n\t\t//random taunt\n\t\tvar i = Math.random() * text.taunts.length | 0;\n\t\tend_msg += text.taunts[i] + '\\n';\n\t}\n\treturn end_msg += text.END_MSG_END;\n}\n\nvar localized_strings = {\n\ten: {\n\t\tREADY: \"Ready ...\",\n\t\tSET: \"Set ...\",\n\t\tGO: \"Whack that Mole!\",\n\t\tMOLE: \"mole\",\n\t\tMOLES: \"moles\",\n\t\tEND_MSG_START: \"You whacked\",\n\t\tEND_MSG_END: \"Tap to play again\",\n\t\tHIGH_SCORE: \"That's a new high score!\"\n\t}\n};\n\nlocalized_strings['en'].taunts = [\"Welcome to Loserville, population: you.\", //max length\n\"You're an embarrassment!\", \"You'll never catch me!\", \"Your days are numbered, human.\", \"Don't quit your day job.\", \"Just press the screen, it's not hard.\", \"You might be the worst I've seen.\", \"You're just wasting my time.\", \"Don't hate the playa, hate the game.\", \"Make like a tree, and get out of here!\"];\n\n//object of strings used in game\nvar text = localized_strings[lang.toLowerCase()];\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/GameScreen.js\n// module id = 104\n// module chunks = 0\n//# sourceURL=webpack:///./src/GameScreen.js?");

/***/ },
/* 105 */
/*!*****************************************************************!*\
  !*** ./modules/devkit-core/modules/timestep/src/ui/TextView.js ***!
  \*****************************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nexports.__esModule = true;\n\nvar _platformImport = __webpack_require__(/*! platformImport */ 12);\n\nvar _exports = {};\n\n/**\n * @license\n * This file is part of the Game Closure SDK.\n *\n * The Game Closure SDK is free software: you can redistribute it and/or modify\n * it under the terms of the Mozilla Public License v. 2.0 as published by Mozilla.\n\n * The Game Closure SDK is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * Mozilla Public License v. 2.0 for more details.\n\n * You should have received a copy of the Mozilla Public License v. 2.0\n * along with the Game Closure SDK.  If not, see <http://mozilla.org/MPL/2.0/>.\n */\n/**\n * @class ui.TextView;\n * Import the Canvas/DOM implementation of TextView.\n *\n * @doc http://doc.gameclosure.com/api/ui-text.html#class-ui.textview\n * @docsrc https://github.com/gameclosure/doc/blob/master/api/ui/text.md\n */\n\nvar TextView = (0, _platformImport.importUI)('TextView');\n_exports = TextView;\n\nexports.default = _exports;\n\n//////////////////\n// WEBPACK FOOTER\n// ./modules/devkit-core/modules/timestep/src/ui/TextView.js\n// module id = 105\n// module chunks = 0\n//# sourceURL=webpack:///./modules/devkit-core/modules/timestep/src/ui/TextView.js?");

/***/ },
/* 106 */
/*!*************************!*\
  !*** ./src/MoleHill.js ***!
  \*************************/
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nexports.__esModule = true;\n\nvar _animate = __webpack_require__(/*! animate */ 37);\n\nvar _animate2 = _interopRequireDefault(_animate);\n\nvar _View2 = __webpack_require__(/*! ui/View */ 17);\n\nvar _View3 = _interopRequireDefault(_View2);\n\nvar _ImageView = __webpack_require__(/*! ui/ImageView */ 103);\n\nvar _ImageView2 = _interopRequireDefault(_ImageView);\n\nvar _Image = __webpack_require__(/*! ui/resource/Image */ 43);\n\nvar _Image2 = _interopRequireDefault(_Image);\n\nvar _soundcontroller = __webpack_require__(/*! src/soundcontroller */ 107);\n\nvar _soundcontroller2 = _interopRequireDefault(_soundcontroller);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar mole_normal_img = new _Image2.default({ url: \"resources/images/mole_normal.png\" }),\n    mole_hit_img = new _Image2.default({ url: \"resources/images/mole_hit.png\" }),\n    hole_back_img = new _Image2.default({ url: \"resources/images/hole_back.png\" }),\n    hole_front_img = new _Image2.default({ url: \"resources/images/hole_front.png\" }),\n    mole_up = 5,\n    mole_down = 35;\n\nvar MoleHill = function (_View) {\n\t_inherits(MoleHill, _View);\n\n\tfunction MoleHill(opts) {\n\t\t_classCallCheck(this, MoleHill);\n\n\t\topts = merge(opts, {\n\t\t\twidth: hole_back_img.getWidth(),\n\t\t\theight: hole_back_img.getHeight() + mole_normal_img.getHeight()\n\t\t});\n\n\t\tvar _this = _possibleConstructorReturn(this, _View.call(this, opts));\n\n\t\t_this.activeMole = false;\n\t\t_this.activeInput = false;\n\n\t\t_this.build();\n\t\treturn _this;\n\t}\n\n\t/* Set the mole as active and animate it up.\n  */\n\tMoleHill.prototype.showMole = function showMole() {\n\t\tif (this.activeMole === false) {\n\t\t\tthis.activeMole = true;\n\t\t\tthis.activeInput = true;\n\n\t\t\tthis._animator.now({ y: mole_up }, 500, _animate2.default.easeIn).wait(1000).then(bind(this, function () {\n\t\t\t\tthis.activeInput = false;\n\t\t\t})).then({ y: mole_down }, 200, _animate2.default.easeOut).then(bind(this, function () {\n\t\t\t\tthis.activeMole = false;\n\t\t\t}));\n\t\t}\n\t};\n\n\t/* Set mole as inactive and animate it down.\n  */\n\tMoleHill.prototype.hitMole = function hitMole() {\n\t\tif (this.activeMole && this.activeInput) {\n\t\t\tthis.activeInput = false;\n\n\t\t\tthis._animator.clear().now(function () {\n\t\t\t\tthis._moleview.setImage(mole_hit_img);\n\t\t\t}.bind(this)).then({ y: mole_down }, 1500).then(bind(this, function () {\n\t\t\t\tthis._moleview.setImage(mole_normal_img);\n\t\t\t\tthis.activeMole = false;\n\t\t\t\tthis.activeInput = false;\n\t\t\t}));\n\t\t}\n\t};\n\n\t/* Ending animation, pop up and \"laugh\"\n  */\n\tMoleHill.prototype.endAnimation = function endAnimation() {\n\t\tthis.activeInput = false;\n\t\tthis._animator.then({ y: mole_up }, 2000).then(bind(this, function () {\n\t\t\tthis._interval = setInterval(bind(this, function () {\n\t\t\t\tif (this._moleview.getImage() === mole_normal_img) {\n\t\t\t\t\tthis._moleview.setImage(mole_hit_img);\n\t\t\t\t} else {\n\t\t\t\t\tthis._moleview.setImage(mole_normal_img);\n\t\t\t\t}\n\t\t\t}), 100);\n\t\t}));\n\t};\n\n\t/* Rest the molehill properties for the next game.\n  */\n\tMoleHill.prototype.resetMole = function resetMole() {\n\t\tclearInterval(this._interval);\n\t\tthis._animator.clear();\n\t\tthis._moleview.style.y = mole_down;\n\t\tthis._moleview.setImage(mole_normal_img);\n\t\tthis.activeMole = false;\n\t\tthis.activeInput = false;\n\t};\n\n\t/*\n  * Layout\n  */\n\tMoleHill.prototype.build = function build() {\n\t\tvar hole_back = new ui.ImageView({\n\t\t\tsuperview: this,\n\t\t\timage: hole_back_img,\n\t\t\tx: 0,\n\t\t\ty: 25,\n\t\t\twidth: hole_back_img.getWidth(),\n\t\t\theight: hole_back_img.getHeight()\n\t\t});\n\n\t\tthis._inputview = new ui.View({\n\t\t\tsuperview: this,\n\t\t\tclip: true,\n\t\t\tx: hole_back_img.getWidth() / 2 - mole_normal_img.getWidth() / 2,\n\t\t\ty: 0,\n\t\t\twidth: mole_normal_img.getWidth(),\n\t\t\theight: 40\n\t\t});\n\n\t\tthis._moleview = new ui.ImageView({\n\t\t\tsuperview: this._inputview,\n\t\t\timage: mole_normal_img,\n\t\t\tx: 0,\n\t\t\ty: mole_down,\n\t\t\twidth: mole_normal_img.getWidth(),\n\t\t\theight: mole_normal_img.getHeight()\n\t\t});\n\n\t\tvar hole_front = new ui.ImageView({\n\t\t\tsuperview: this,\n\t\t\tcanHandleEvents: false,\n\t\t\timage: hole_front_img,\n\t\t\tx: 0,\n\t\t\ty: 25,\n\t\t\twidth: hole_front_img.getWidth(),\n\t\t\theight: hole_front_img.getHeight()\n\t\t});\n\n\t\t/* Create an animator object for mole.\n   */\n\t\tthis._animator = (0, _animate2.default)(this._moleview);\n\t\tthis._interval = null;\n\n\t\tvar sound = _soundcontroller2.default.getSound();\n\n\t\tthis._inputview.on('InputSelect', bind(this, function () {\n\t\t\tif (this.activeInput) {\n\t\t\t\tsound.play('whack');\n\t\t\t\tthis.emit('molehill:hit');\n\t\t\t\tthis.hitMole();\n\t\t\t}\n\t\t}));\n\t};\n\n\treturn MoleHill;\n}(_View3.default);\n\nexports.default = MoleHill;\n;\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/MoleHill.js\n// module id = 106\n// module chunks = 0\n//# sourceURL=webpack:///./src/MoleHill.js?");

/***/ },
/* 107 */
/*!********************************!*\
  !*** ./src/soundcontroller.js ***!
  \********************************/
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nvar _AudioManager = __webpack_require__(/*! AudioManager */ 48);\n\nvar _AudioManager2 = _interopRequireDefault(_AudioManager);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.sound = null;\n\n/* Initialize the audio files if they haven't been already.\n */\nexports.getSound = function () {\n  if (!exports.sound) {\n    exports.sound = new _AudioManager2.default({\n      path: 'resources/sounds',\n      files: {\n        levelmusic: {\n          path: 'music',\n          volume: 0.5,\n          background: true,\n          loop: true\n        },\n        whack: {\n          path: 'effect',\n          background: false\n        }\n      }\n    });\n  }\n  return exports.sound;\n};\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/soundcontroller.js\n// module id = 107\n// module chunks = 0\n//# sourceURL=webpack:///./src/soundcontroller.js?");

/***/ }
/******/ ]);